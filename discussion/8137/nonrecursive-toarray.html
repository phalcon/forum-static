---
layout: default
title: 'Non-recursive toArray? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Non-recursive toArray?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/4285/ioncube" class="user-moderator-N"><span itemprop="name">ioncube</span></a></span>
            <time itemprop="dateCreated" datetime="2015-08-20T03:06:02-07:00">Aug '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-08-20T03:06:02-07:00">Aug '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>522</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/7fb0b078bf8b16fa5451858d7e3921ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/4285/ioncube" class="user-moderator-N"><span itemprop="name">ioncube</span></a></span>
                <span class="karma">3.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C8137" href="#C8137">
        <time class="action-date">Aug '15</time>
    </a>
</div>
<div class="post-content"><div><p>Is there any option to get a result set as an array without the recuirsive nature of toArray. </p>
<p>1) Being able to get a complete result set as an array is a common requirement.</p>
<p>2) An array of objects is preferable to an array of arrays because it allows the much neater Volt syntax of <strong>object.property</strong> as opposed to <strong>array['element']</strong></p>
<p>3) Unfortunately,-&gt;setHydrateMode(Resultset::HYDRATE_OBJECTS)-&gt;toArray()
returns an array of arrays rather than an array of objects, which is counter intuitive and non-useful.</p>
<p>Just an idea, but how about a 'recursive = false' parameter for toArray (or default to true as a comromise for BC), and is there already a builtin way to return just as array of result objects?</p>
<p>== Edit ===</p>
<p>As result sets are iterable, simply passing an object hydrated result set into volt of course works fine, so toArray isn't required for that scenario, but for cases where an array is desired, a non-recursive option would be nice.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-b74e457c45d76c72868ec29f-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-b74e457c45d76c72868ec29f-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e00a6fdd3e722135512e013b7f1e9693?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3916/zhegwood" class="user-moderator-N"><span itemprop="name">Zach</span></a>        </span>
        <br>

        <span class="karma">17.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="22355" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '15</span>
              </span><br/><a name="C22355" href="#C22355">
                <time itemprop="dateCreated" datetime="2015-08-26T12:09:31-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Not sure if it's recursive or not, but I almost never use toArray() in favor of returning the queried object as a json block like this:</p>
<pre><code class="language-php">    $blah = new Blah();
    $stuff = $blah-&gt;find();
    echo json_encode($stuff);</code></pre>
<p>Might be a better solution?  Works well for me, regardless.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22355" data-cf-modified-b74e457c45d76c72868ec29f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22355" data-cf-modified-b74e457c45d76c72868ec29f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7fb0b078bf8b16fa5451858d7e3921ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4285/ioncube" class="user-moderator-N"><span itemprop="name">ioncube</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C22365" href="#C22365">
                <time itemprop="dateCreated" datetime="2015-08-26T18:02:42-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanls for the reply. We do this too in fact, having a DI'd AngularJS Component that handles returning results to an Angular service. The end of an action will typically look like:</p>
<blockquote>
<p>$this-&gt;angularjs-&gt;respond(true, php_object);</p>
</blockquote>
<p>where the component handles turning the result into json and various other things, particularly in the case where the action has failed. In the case I first had in mind when first posting toArray wasn't actually needed after all, hence my edit, but I'm sure that it would be useful <em>sometimes</em>, and in that case it's possibly not what's really wanted. There are always some unfortunate or incorrect design choices in frameworks so this is par for the course. Phalcon also has an illogical order to parameters in relationship statements, is missing a trick by only using magic get/set for related models, should accept objects as well as strings in logger routines, and so on, but Phalcon is also flexible and most shortcomings or however one views them can be fixed, so it's not a disaster.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22365" data-cf-modified-b74e457c45d76c72868ec29f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22365" data-cf-modified-b74e457c45d76c72868ec29f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="8137" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>