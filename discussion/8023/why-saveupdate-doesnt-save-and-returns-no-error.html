---
layout: default
title: 'Why save()/update() doesn&#039;t save and returns no error - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Why save()/update() doesn&#039;t save and returns no error</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/4583/marcelopiomsf" class="user-moderator-N"><span itemprop="name">marcelopiomsf</span></a></span>
            <time itemprop="dateCreated" datetime="2015-08-11T01:56:52-07:00">Aug '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-08-11T01:56:52-07:00">Aug '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>1399</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/5d698c09e82993a90f1164a6e4e4ecc2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/4583/marcelopiomsf" class="user-moderator-N"><span itemprop="name">marcelopiomsf</span></a></span>
                <span class="karma">2.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C8023" href="#C8023">
        <time class="action-date">Aug '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hey guys,</p>
<p>I'm trying to update my table with save() or update() but something is wrong. Everytime that I send a post request with the new information that I want to update in my database, a JSON response is sent back to my brownser but this JSON response should just be sent when the update is sucessful and on my case nothing is changing on my database. Why save() is returning true? *My table has a primary key</p>
<p>Here is my code:</p>
<pre><code>if ($this-&gt;request-&gt;isPost()) {
$jsonParsed = $this-&gt;request-&gt;getJsonRawBody();
    $this-&gt;view-&gt;disable();
    $users-&gt;user_id = $auth["user_id"];
    $users-&gt;user_username = $jsonParsed-&gt;username;

    if ( $users-&gt;save() == false ) {

            foreach ($users-&gt;getMessages() as $message) {

                echo $message-&gt;getMessage();

            }

    } else {

            $array = array("resposta" =&gt; "ok");

            $response = new \Phalcon\Http\Response();
            $response-&gt;setHeader("Content-Type", "application/json");
            $response-&gt;setContent(json_encode($array));
            $response-&gt;send();

        }
}</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-e412f773360fabbedb1b0a4c-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-e412f773360fabbedb1b0a4c-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8eb214b0608f667d22a4fbbd030ae36e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2105/sszdh" class="user-moderator-N"><span itemprop="name">Soheil Samadzadeh</span></a>        </span>
        <br>

        <span class="karma">14.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C21747" href="#C21747">
                <time itemprop="dateCreated" datetime="2015-08-11T04:06:02-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If you use <code>metadataCache</code> service in you DI, and have change any table fileds after that, make sure to remove cache folder (or just user's table cache file) before runnig your code.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="21747" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="21747" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d698c09e82993a90f1164a6e4e4ecc2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4583/marcelopiomsf" class="user-moderator-N"><span itemprop="name">marcelopiomsf</span></a>        </span>
        <br>

        <span class="karma">2.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C21761" href="#C21761">
                <time itemprop="dateCreated" datetime="2015-08-11T10:26:14-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Actually I don't use metadataCache in my DI. But anyway I cleaned cache and still not working.</p>
<p>Thank you</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="21761" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="21761" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8eb214b0608f667d22a4fbbd030ae36e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2105/sszdh" class="user-moderator-N"><span itemprop="name">Soheil Samadzadeh</span></a>        </span>
        <br>

        <span class="karma">14.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C21765" href="#C21765">
                <time itemprop="dateCreated" datetime="2015-08-11T14:07:57-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Log the queries with Event Manager and see what is happening under the hood...</p>
<pre><code class="language-php">
// Listen all the database events
$eventManager-&gt;attach('db', function ($event, $connection) {
    if ($event-&gt;getType() == 'afterQuery') {
        echo $connection-&gt;getSQLStatement();
    }
});
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="21765" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="21765" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="21809" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '15</span>
              </span><br/><a name="C21809" href="#C21809">
                <time itemprop="dateCreated" datetime="2015-08-12T15:45:02-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Typically in cases like this, I would put an <code>exit("Test")</code> line in after <code>if ( $users-&gt;save() == false ) {</code>, to see if that condition was actually being met</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="21809" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="21809" data-cf-modified-e412f773360fabbedb1b0a4c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="8023" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>