---
layout: default
title: 'Creating a new MongoDB collection dynamically and accessing a model with a dynamic collection - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Creating a new MongoDB collection dynamically and accessing a model with a dynamic collection</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a></span>
            <time itemprop="dateCreated" datetime="2016-03-03T19:16:40-07:00">Mar '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-03-03T19:16:40-07:00">Mar '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>1867</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a></span>
                <span class="karma">9.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C10659" href="#C10659">
        <time class="action-date">Mar '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi to All,</p>
<p>I have been creating an app that utilizes Phalcon and MongoDB. The tricky part is that, I can't find any lead that allows Phalcon to dynamically create a collection. Or if there's any, I might have missed it. Is there anyone that could help me point out how to do it with Phalcon? Or if it is not available, does Phalcon have any plans on adding this feature or was there any issues that prohibits it from being developed?</p>
<p>Also, is the changing of collection reference in a model using destruct and re-initialisation works with the latest version of Phalcon or do i have to downgrade to a specific version of Phalcon to do something like this?</p>
<p>Sorry for asking a lot of questions but I happen to start to love Phalcon because of its performance and I would like to learn more about its capabilities, and whats not.</p>
<p>Thanks a lot,</p>
<p>Jay</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-0e325a62a5e209179af2d32e-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-0e325a62a5e209179af2d32e-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30575" href="#C30575">
                <time itemprop="dateCreated" datetime="2016-03-04T17:23:46-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Fixed creating a new MongoDB collection dynamically. For those interested, you can issue a command via MongoDB execute method. Just figuring out on dynamically setting collection in a model. If you have your two cents, let me know, that would be great. Thanks.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30575" data-cf-modified-0e325a62a5e209179af2d32e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30575" data-cf-modified-0e325a62a5e209179af2d32e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a>        </span>
        <br>

        <span class="karma">9.5k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30619" href="#C30619">
                <time itemprop="dateCreated" datetime="2016-03-05T20:01:13-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Fixed using either command() or execute() under MongoDB, which is also inherited by MongoClient. Hope this would be useful for others as well.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30619" data-cf-modified-0e325a62a5e209179af2d32e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30619" data-cf-modified-0e325a62a5e209179af2d32e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2af484b27a1cc4d152abf0250f4b96bc?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8979/faizal15" class="user-moderator-N"><span itemprop="name">faizal15</span></a>        </span>
        <br>

        <span class="karma">662</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45167" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '17</span>
              </span><br/><a name="C45167" href="#C45167">
                <time itemprop="dateCreated" datetime="2017-01-20T09:02:00-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>hiii, I'm new with phalcon.
how about make some adapter like this : </p>
<pre><code>class AdapterModels
{
    protected $table;
    protected $models;
    public function __construct($table)
    {
        $this-&gt;table = $table;
        $GLOBALS['ModelName'] = $this-&gt;table;
        $this-&gt;models   = new BasicModels();
    }

    public function init(){
        return $this-&gt;models;
    }

    public static function __callStatic($name, $arguments)
    {
        $GLOBALS['ModelName'] = $arguments[0];
        $models   = BasicModels::$name($arguments[1]);
        return $models;
    }
}</code></pre>
<p>and add some tricky on model like this : </p>
<pre><code>public function getSource() {
    global $ModelName;
    return $ModelName;
}</code></pre>
<p>and we can call it like this : </p>
<pre><code>$student    = AdapterModels::find('student',[
    'conditions'=&gt;$conditions,
    'sort'  =&gt;$order,
    'limit' =&gt;$limit,
    'skip'  =&gt;$skip
]);</code></pre>
<p>and :
$adapter    = new AdapterModels($this-&gt;table_name);
$modules    = $adapter-&gt;init();</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45167" data-cf-modified-0e325a62a5e209179af2d32e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45167" data-cf-modified-0e325a62a5e209179af2d32e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="10659" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>