---
layout: default
title: 'Invo local not working - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Invo local not working</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3866/Warosaurus" class="user-moderator-N"><span itemprop="name">Warwick Brett Louw</span></a></span>
            <time itemprop="dateCreated" datetime="2015-05-16T11:27:43-07:00">May '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-05-16T11:27:43-07:00">May '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>861</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c37ea3b686012ddc834d71bb8ee36ddd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3866/Warosaurus" class="user-moderator-N"><span itemprop="name">Warwick Brett Louw</span></a></span>
                <span class="karma">3.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6782" href="#C6782">
        <time class="action-date">May '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hello,</p>
<p>I have a local instance of INVO. At first it seems to be working correctly however, when i nvaigate to <code>about</code> and then back to <code>home</code> it gives the default Apache <code>404</code>. Also, whenever I try navigate to a non-existant controller/action it gives a blank page not a  <code>404</code> like I would expect.</p>
<p>This is my configuration (Using directory <code>/sites</code> in Vagrant vm):</p>
<p><code>Apache config</code>:</p>
<pre><code>DocumentRoot /sites/invo-master/public
&lt;Directory /sites/invo-master/public&gt;
...</code></pre>
<p><code>invo-master/app/config.ini</code>:</p>
<pre><code>...
baseUri        = /</code></pre>
<p>Maybe someone can see what I am doing wrong?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18428" href="#C18428">
                <time itemprop="dateCreated" datetime="2015-05-16T11:40:57-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>try with:</p>
<p>DocumentRoot /sites/invo-master</p>
<p>&lt;Directory /sites/invo-master&gt;</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18428" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18428" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c37ea3b686012ddc834d71bb8ee36ddd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3866/Warosaurus" class="user-moderator-N"><span itemprop="name">Warwick Brett Louw</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18429" href="#C18429">
                <time itemprop="dateCreated" datetime="2015-05-16T11:45:56-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm afraid the problem still persists, I still get the standard Apache 404 and calling other controllers directly still routes to a blank page</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18429" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18429" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18431" href="#C18431">
                <time itemprop="dateCreated" datetime="2015-05-16T11:54:49-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I never use vagrant boxes.</p>
<p>Tell me, if you point your browser to <a href="https://localhost">https://localhost</a>, does it serve by default the content of the &quot;sites&quot; directory ?</p>
<p>How do you want to acces to invo app : through <a href="https://localhost">https://localhost</a>, htpp://localhost/sites, <a href="https://localost/sites/invo-master">https://localost/sites/invo-master</a>, <a href="https://localhost/invo-master">https://localhost/invo-master</a> ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18431" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18431" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c37ea3b686012ddc834d71bb8ee36ddd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3866/Warosaurus" class="user-moderator-N"><span itemprop="name">Warwick Brett Louw</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18434" href="#C18434">
                <time itemprop="dateCreated" datetime="2015-05-16T12:03:06-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Right now it is accessed via <a href="https://127.0.0.1:8080">https://127.0.0.1:8080</a> as port 8080 is the out-going port for port 80 of the vm.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18434" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18434" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18435" href="#C18435">
                <time itemprop="dateCreated" datetime="2015-05-16T12:12:55-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>well, I think that the correct configuration should be for serving invo app on <a href="https://127.0.0.1">https://127.0.0.1</a>:</p>
<blockquote>
<p>baseUri        = /</p>
</blockquote>
<p>and in apache config:</p>
<blockquote>
<p>DocumentRoot /sites/invo-master</p>
<p>&lt;Directory /sites/invo-master&gt;</p>
</blockquote>
<p>So, if it's not working:</p>
<ul>
<li>see http response (404 not found, 500 internal server error ...</li>
<li>have a look at apache's errors</li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18435" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18435" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c37ea3b686012ddc834d71bb8ee36ddd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3866/Warosaurus" class="user-moderator-N"><span itemprop="name">Warwick Brett Louw</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="18457" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C18457" href="#C18457">
                <time itemprop="dateCreated" datetime="2015-05-17T02:34:03-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I moved the sites directory to my host machine and installed the necessary components to see if it was perhaps the vm causing the issues. The navigation seems to work fine now, going from <code>about</code> back to <code>home</code> doesn't cause an Apache 404 anymore. However I cannot force the app to 404, even when i try <a href="https://127.0.0.1/foo/foo">https://127.0.0.1/foo/foo</a> it simply routes to a blank page. Does anyone else experince this with INVO? I feel it's either my configuration or the dispatcher.</p>
<p>Is there perhaps another example of an app using a dispatcher to handle authentication? I need to create an app for a uni project, it involoves several layers of authentication, it needs to be fast and secure. I thought INVO would be a great base with which to work however I haven't had much success with using it.</p>
<p>P.S.<a href="https://forum.phalcon.io/user/15/le51"> @le51</a> thank you for your help.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18457" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18457" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c37ea3b686012ddc834d71bb8ee36ddd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3866/Warosaurus" class="user-moderator-N"><span itemprop="name">Warwick Brett Louw</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="18460" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C18460" href="#C18460">
                <time itemprop="dateCreated" datetime="2015-05-17T03:22:20-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><strong>Update</strong></p>
<p>By commenting out the security dispatcher and trying to load <a href="https://127.0.0.1/foo/foo">https://127.0.0.1/foo/foo</a> it correctly displays the app's 404. So I believe it's infact INVO that is not behaving correctly. Should I try fix it and make a pull request? It would be my first pull request :D</p>
<p><em>Edit</em></p>
<p>This is what I changed</p>
<p><code>app/config/services.php</code>:</p>
<pre><code>...
/**
 * Check if the user is allowed to access certain action using the SecurityPlugin
 */
//$eventsManager-&gt;attach('dispatch:beforeDispatch', new SecurityPlugin); // &lt;-- Commented out

/**
 * Handle exceptions and not-found exceptions using NotFoundPlugin
 */
$eventsManager-&gt;attach('dispatch:beforeException', new NotFoundPlugin);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18460" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18460" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c37ea3b686012ddc834d71bb8ee36ddd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3866/Warosaurus" class="user-moderator-N"><span itemprop="name">Warwick Brett Louw</span></a>        </span>
        <br>

        <span class="karma">3.8k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="18466" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C18466" href="#C18466">
                <time itemprop="dateCreated" datetime="2015-05-17T10:09:36-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I managed to solve the issue by essentually creating my own <code>NotFoundPlugin</code> that would execute <code>beforeDispatchLoop</code></p>
<pre><code class="language-php">    &lt;?php

    use Phalcon\Text;
    use Phalcon\Events\Event;
    use Phalcon\Mvc\Dispatcher;
    use Phalcon\Mvc\User\Plugin;
    use Phalcon\Mvc\Dispatcher\Exception as DispatcherException;

    Class ExistsPlugin extends Plugin {

    /**
     * @param Event $event
     * @param Dispatcher $dispatcher
     * @throws DispatcherException
     */
    public function beforeDispatchLoop(Event $event, Dispatcher $dispatcher) {

        $controller = empty($dispatcher-&gt;getControllerName()) ? "" : (APP_PATH . Text::camelize($dispatcher-&gt;getControllerName()) . 'Controller') ;
        $action = empty($dispatcher-&gt;getActionName()) ? "" : (Text::camelize($dispatcher-&gt;getActionName()) . 'Action');

        try {
            // Is the controller defined in the url?
            if ($controller) {
                // Does the defined controller exist?
                if (file_exists($controller)) {
                    // Is the action defined in the url?
                    if ($action) {
                        // Does the defined action exist in the controller?
                        if (method_exists($controller, $action)) {
                        } else {
                            throw new DispatcherException;
                        }
                    }
                } else {
                    throw new DispatcherException;
                }
            }
        }
        catch (Exception $exception) {

            if ($exception instanceof DispatcherException) {
                $dispatcher-&gt;forward([
                    'controller'    =&gt; 'errors',
                    'action'        =&gt; 'error404'
                ]);
            }
            else {
                $dispatcher-&gt;forward([
                    'controller'    =&gt; 'errors',
                    'action'        =&gt; 'error500'
                ]);
            }
        }
    }
    }</code></pre>
<p>Unfortunately it renders <code>NotFoundPlugin</code> almost useless but does however avoid the need for SecurityPlugin from checking the ACL for non-existant controllers/actions.</p>
<p>Could you please critique my code?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18466" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18466" data-cf-modified-e15c15dd07fa10391a4d53b1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6782" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>