---
layout: default
title: 'How can i implement optimistic locking while updating same data at the same time by more than two users using PhalconPHP? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How can i implement optimistic locking while updating same data at the same time by more than two users using PhalconPHP?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4091/ravindra-miyani" class="user-moderator-N"><span itemprop="name">Ravindra Miyani</span></a></span>
            <time itemprop="dateCreated" datetime="2016-05-25T22:29:31-07:00">May '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-05-25T22:29:31-07:00">May '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">7</span>
                </td>
                <td>
                    <label>Views</label><br>717</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c8343b8592fefa8bb19c3df2543f628f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4091/ravindra-miyani" class="user-moderator-N"><span itemprop="name">Ravindra Miyani</span></a></span>
                <span class="karma">5.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11667" href="#C11667">
        <time class="action-date">May '16</time>
    </a>
</div>
<div class="post-content"><div><p>Please consider these example.</p>
<p>User A and User B are updating same records at the same time. User A updated the records while User B is also updating records at same time. How can i notify User B that these records are already updated by User A? </p>
<p>How can i implement Concurrency for CRUD operation using PhalconPHP?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-c358b2e573b7daf02972105d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-c358b2e573b7daf02972105d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34701" href="#C34701">
                <time itemprop="dateCreated" datetime="2016-05-25T23:49:59-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Websockets i guess. When some user will open it then it he will lock it for him to edit only, if someone other will try to open it - then he will get notification. And websockets are just for real-time so we don't need ajax which can be too slow.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34701" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34701" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c8343b8592fefa8bb19c3df2543f628f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4091/ravindra-miyani" class="user-moderator-N"><span itemprop="name">Ravindra Miyani</span></a>        </span>
        <br>

        <span class="karma">5.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="34717" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C34717" href="#C34717">
                <time itemprop="dateCreated" datetime="2016-05-26T01:22:56-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for reply<a href="https://forum.phalcon.io/user/3812/Jurigag"> @Jurigag</a> Ślawski.</p>
<p>That is okey. we can use Websockets. But my concern is only for PhalconPHP. Does PhalconPHP provide concurrency for CRUD? Or Does PhalconPHP will implement concurrency handling in next upcoming versions?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34717" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34717" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="34723" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C34723" href="#C34723">
                <time itemprop="dateCreated" datetime="2016-05-26T04:17:35-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Phalcon is framework (a set of classes, methods, functions etc.) built on top of PHP. Like I said - the purpose of application server (PHP) is to handle business logic, and database system has purpose to take care about your data in terms of concurrency etc.</p>
<p>When you say 'records' - you mean database data, right? If that's what it is then simply your RDBMS enginge will handle concurrency, which basically is what all database systems out there are up to - to provide stable data storage for your application.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34723" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34723" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a20d655bbeff97e2c393510348ddb7cd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3162/Graphmatic" class="user-moderator-N"><span itemprop="name">graphmatic</span></a>        </span>
        <br>

        <span class="karma">11.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="34763" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C34763" href="#C34763">
                <time itemprop="dateCreated" datetime="2016-05-26T09:21:05-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>you can (you must) use prepared transactions to encapsulate your query in your code, and if you use a DB like postgresql, it have a powerfull system of lock in the backend, other db have too I suppose.  The db locks system combined with prepared transaction make the risk you get unconsistancy near zero, as I know...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34763" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34763" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c8343b8592fefa8bb19c3df2543f628f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4091/ravindra-miyani" class="user-moderator-N"><span itemprop="name">Ravindra Miyani</span></a>        </span>
        <br>

        <span class="karma">5.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C34723"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Jonathan Aaron Steel                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="34777" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C34777" href="#C34777">
                <time itemprop="dateCreated" datetime="2016-05-27T01:29:31-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/4525/stamster">@stamster</a>, </p>
<p>That i know. My question is that, How can i implement optimised locking using phalcon? Is there any built in classes for that?
Cosider this example.</p>
<p>User A and User B are updating same records at the same time. User A updates while User B has old records. when User B is update records then User A's records is overrite.How can i notify User B that the records which User B wants to update is already updated by User A. I only want to use PhalconPHP. How can i do that?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34777" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34777" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c8343b8592fefa8bb19c3df2543f628f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4091/ravindra-miyani" class="user-moderator-N"><span itemprop="name">Ravindra Miyani</span></a>        </span>
        <br>

        <span class="karma">5.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C34763"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/a20d655bbeff97e2c393510348ddb7cd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        graphmatic                    </a>
                </div><div class="posts-buttons" align="right"><a name="C34779" href="#C34779">
                <time itemprop="dateCreated" datetime="2016-05-27T01:20:17-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/3162/Graphmatic">@Graphmatic</a>,</p>
<p>I always use transaction while operating on Data. My question is simple, How can i implement Optimistic locking using PhalconPHP?Is there any built in classes for that?</p>
<p>Cosider this example.</p>
<p>User A and User B are updating same records at the same time. User A updates while User B has old records. when User B is update records then User A's records is overrite.How can i notify User B that the records which User B wants to update is already updated by User A. I only want to use PhalconPHP. How can i do that?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34779" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34779" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a20d655bbeff97e2c393510348ddb7cd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3162/Graphmatic" class="user-moderator-N"><span itemprop="name">graphmatic</span></a>        </span>
        <br>

        <span class="karma">11.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34825" href="#C34825">
                <time itemprop="dateCreated" datetime="2016-05-28T16:10:36-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>you can load the record as user B is entering your view, then, before saving mods done by this user B, reload an instance and compare with the previously loaded one, if there is any diff, that means that your row have been modified by another user. You can also implement some mechanism to log which user modify your record if you need so. If you need to inform user B another one is modifying the record before he submit anything, add a &quot;currently editing&quot; column in your table, and swith this bool on as soon as a user enter the modifying form (and switch it off when saving), so any other user opening this same form for the same record will see that this record is currently edited by someone else</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34825" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34825" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a20d655bbeff97e2c393510348ddb7cd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3162/Graphmatic" class="user-moderator-N"><span itemprop="name">graphmatic</span></a>        </span>
        <br>

        <span class="karma">11.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34827" href="#C34827">
                <time itemprop="dateCreated" datetime="2016-05-28T19:48:06-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>there is also a  &quot;keepSnapshots()&quot; property on models that can be suitable for your purpose...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34827" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34827" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c8343b8592fefa8bb19c3df2543f628f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4091/ravindra-miyani" class="user-moderator-N"><span itemprop="name">Ravindra Miyani</span></a>        </span>
        <br>

        <span class="karma">5.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34843" href="#C34843">
                <time itemprop="dateCreated" datetime="2016-05-30T00:21:53-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/3162/Graphmatic">@Graphmatic</a>, </p>
<p>Thank you for the reply. I have now implemented concurrency mechanism by your help.  Your help much appricieted.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34843" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34843" data-cf-modified-c358b2e573b7daf02972105d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11667" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>