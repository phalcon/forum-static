---
layout: default
title: 'hasMany relationship not working - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">hasMany relationship not working</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a></span>
            <time itemprop="dateCreated" datetime="2016-04-27T07:43:47-07:00">Apr '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-04-27T07:43:47-07:00">Apr '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">10</span>
                </td>
                <td>
                    <label>Views</label><br>1456</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/7ea8556715a4d33e151bcf1437cc2568?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a></span>
                <span class="karma">4.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11313" href="#C11313">
        <time class="action-date">Apr '16</time>
    </a>
</div>
<div class="post-content"><div><p>I have pasted both model class and resultset, please help me to findout why not working</p>
<pre><code>namespace Yesse\Model;

use Phalcon\Mvc\Model;
class Account extends Model {
    public function initialize() {
        $this-&gt;setSource( "accounts" );
        $this-&gt;hasMany( 'id', 'Yesse\Model\AccountDomains', 'accounts_id' );
    }
}

use Phalcon\Mvc\Model;

class AccountDomains extends Model {

protected $id;
protected $account_id;
protected $username;

public function initialize() {
    $this-&gt;setSource( "account_domains" );
    $this-&gt;belongsTo( "account_id", "Yesse\Model\Account", "id", array( 'alias' =&gt; 'accountDomains' ) );
}

}

Phalcon\Mvc\Model\Resultset\Simple Object
(
[_result:protected] =&gt; Phalcon\Db\Result\Pdo Object
    (
        [_connection:protected] =&gt; Phalcon\Db\Adapter\Pdo\Mysql Object
            (
                [_eventsManager:protected] =&gt; 
                [_descriptor:protected] =&gt; Array
                    (
                        [adapter] =&gt; Mysql
                        [host] =&gt; 127.0.0.1
                        [username] =&gt; root
                        [password] =&gt; 123
                        [dbname] =&gt; yesse
                    )

                [_dialect:protected] =&gt; Phalcon\Db\Dialect\Mysql Object
                    (
                        [_customFunctions:protected] =&gt; 
                        [_escapeChar:protected] =&gt; `
                    )

                [_connectionId:protected] =&gt; 0
                [_sqlStatement:protected] =&gt; 
                [_sqlVariables:protected] =&gt; 
                [_sqlBindTypes:protected] =&gt; 
                [_transactionLevel:protected] =&gt; 0
                [_transactionsWithSavepoints:protected] =&gt; 
                [_pdo:protected] =&gt; PDO Object
                    (
                    )

                [_affectedRows:protected] =&gt; 
                [_type:protected] =&gt; mysql
                [_dialectType:protected] =&gt; mysql
            )

        [_result:protected] =&gt; 
        [_fetchMode:protected] =&gt; 2
        [_pdoStatement:protected] =&gt; PDOStatement Object
            (
                [queryString] =&gt; SELECT `accounts`.`id`, `accounts`.`name`, `accounts`.`username`, `accounts`.`created_at` FROM `accounts`
            )

        [_sqlStatement:protected] =&gt; SELECT `accounts`.`id`, `accounts`.`name`, `accounts`.`username`, `accounts`.`created_at` FROM `accounts`
        [_bindParams:protected] =&gt; 
        [_bindTypes:protected] =&gt; 
        [_rowCount:protected] =&gt; 2
    )

[_cache:protected] =&gt; 
[_isFresh:protected] =&gt; 1
[_pointer:protected] =&gt; 0
[_count:protected] =&gt; 2
[_activeRow:protected] =&gt; 
[_rows:protected] =&gt; Array
    (
        [0] =&gt; Array
            (
                [id] =&gt; 1
                [name] =&gt; demo
                [username] =&gt; demo
                [created_at] =&gt; 2016-04-27 00:00:00
            )

        [1] =&gt; Array
            (
                [id] =&gt; 2
                [name] =&gt; demo2
                [username] =&gt; demo2
                [created_at] =&gt; 2016-04-27 00:00:00
            )

    )

[_row:protected] =&gt; </code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-abc96f432e5095e0555ce59d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-abc96f432e5095e0555ce59d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33115" href="#C33115">
                <time itemprop="dateCreated" datetime="2016-04-27T07:46:12-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i am not expert of those reletionships, but did you call $result-&gt;getAccountDomains(); ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33115" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33115" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7ea8556715a4d33e151bcf1437cc2568?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a>        </span>
        <br>

        <span class="karma">4.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33117" href="#C33117">
                <time itemprop="dateCreated" datetime="2016-04-27T07:52:26-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I tried, it does not work -&gt; Fatal error:  Call to undefined method Phalcon\Mvc\Model\Resultset\Simple::getAccountDomains()</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33117" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33117" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33121" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C33121" href="#C33121">
                <time itemprop="dateCreated" datetime="2016-04-27T08:14:43-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You have:</p>
<pre><code>$this-&gt;hasMany( 'id', 'Yesse\Model\AccountDomains', 'accounts_id' );</code></pre>
<p>While in <code>AccountDomains</code> you have <code>protected $account_id;</code></p>
<p>Also </p>
<pre><code class="language-php">array( 'alias' =&gt; 'accountDomains' )</code></pre>
<p>this should be in </p>
<pre><code class="language-php">$this-&gt;hasMany( 'id', 'Yesse\Model\AccountDomains', 'accounts_id' );</code></pre>
<p>i guess</p>
<p>Here</p>
<pre><code class="language-php">$this-&gt;belongsTo( "account_id", "Yesse\Model\Account", "id", array( 'alias' =&gt; 'accountDomains' ) );</code></pre>
<p>Alias should be <code>account</code> i think for example</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33121" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33121" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7ea8556715a4d33e151bcf1437cc2568?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a>        </span>
        <br>

        <span class="karma">4.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33123" href="#C33123">
                <time itemprop="dateCreated" datetime="2016-04-27T08:28:36-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I tried it does not worked</p>
<pre><code>class AccountDomains extends Model {

public function initialize() {
    $this-&gt;setSource( "account_domains" );
    $this-&gt;belongsTo( "accounts_id", "Yesse\Model\Account", "id", array( 'alias' =&gt; 'accountDomains' ) );
}
}

class Account extends Model {

public function initialize() {
    $this-&gt;setSource( "accounts" );
    $this-&gt;hasMany( 'id', 'Yesse\Model\AccountDomains', 'accounts_id', ['alias' =&gt; 'account' ] );
}</code></pre>
<p>}</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33123" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33123" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33133" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C33133" href="#C33133">
                <time itemprop="dateCreated" datetime="2016-04-27T09:17:57-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Did you even read what i wrote ?</p>
<p>In class <code>AccountDomains</code> you have:</p>
<p><code>$account_id;</code></p>
<p>But in relations you have <code>accounts_id</code></p>
<pre><code>$this-&gt;hasMany( 'id', 'Yesse\Model\AccountDomains', 'accounts_id', ['alias' =&gt; 'account' ] );</code></pre>
<pre><code>$this-&gt;hasMany( 'id', 'Yesse\Model\AccountDomains', 'accounts_id' );</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33133" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33133" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7ea8556715a4d33e151bcf1437cc2568?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a>        </span>
        <br>

        <span class="karma">4.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33135" href="#C33135">
                <time itemprop="dateCreated" datetime="2016-04-27T09:40:49-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have this whole classes, still not working</p>
<pre><code> class Accounts extends Model {

    protected $id;
    protected $name;
    protected $username;
    protected $created_at;

    public function initialize() {
        $this-&gt;setSource( "accounts" );
        $this-&gt;hasMany( 'id', 'Yesse\Model\AccountDomains', 'accounts_id', ['alias' =&gt; 'accounts' ] );
    }

}

    class AccountDomains extends Model {

    protected $id;
    protected $accounts_id;
    protected $domain;

    public function initialize() {
        $this-&gt;setSource( "account_domains" );
        $this-&gt;belongsTo( "accounts_id", "Yesse\Model\Accounts", "id", array( 'alias' =&gt; 'accountDomains' ) );
    }

}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33135" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33135" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33137" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C33137" href="#C33137">
                <time itemprop="dateCreated" datetime="2016-04-27T09:54:55-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What exactly is not working ? Can you provide some sample what are you accessing/finding ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33137" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33137" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33141" href="#C33141">
                <time itemprop="dateCreated" datetime="2016-04-27T10:01:46-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code>Fatal error: Call to undefined method Phalcon\Mvc\Model\Resultset\Simple::getAccountDomains()</code></pre>
<p>Yes this is true beacause there is no such a method.</p>
<p>If you want to select all Accounts with all AccountDomains you need to use modelsManager beacause you need to join related records:</p>
<pre><code class="language-php">$accounts=$modelsManager-&gt;createBuilder() //got from di
-&gt;columns(['AccountDomains.*','Accounts.*'])
-&gt;from(['Accounts'=&gt;'Yesse\Model\Accounts'])
-&gt;leftJoin('Yesse\Model\AccountDomains', null, 'AccountDomains')
-&gt;getQuery()
-&gt;execute();</code></pre>
<p>Also you should name Accounts as Account, and AccountDomains as AccountDomain. Beacause they are single entity of single record. They don't store collection of Accounts and of AccountDomains.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33141" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33141" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7ea8556715a4d33e151bcf1437cc2568?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a>        </span>
        <br>

        <span class="karma">4.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33143" href="#C33143">
                <time itemprop="dateCreated" datetime="2016-04-27T10:02:26-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>[queryString] =&gt; SELECT <code>accounts</code>.<code>id</code>, <code>accounts</code>.<code>name</code>, <code>accounts</code>.<code>username</code>, <code>accounts</code>.<code>created_at</code> FROM <code>accounts</code>
this sql string it generated, i expecting it with joins </p>
<p>goal is to get all domains in account</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33143" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33143" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33145" href="#C33145">
                <time itemprop="dateCreated" datetime="2016-04-27T10:07:10-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So as i just wrote above. You need to tell phalcon to select them with join. It's pretty obvious. Doesn't it ? <code>Accounts::find()</code> just find accounts.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33145" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33145" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7ea8556715a4d33e151bcf1437cc2568?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a>        </span>
        <br>

        <span class="karma">4.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33147" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C33147" href="#C33147">
                <time itemprop="dateCreated" datetime="2016-04-27T10:14:28-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm getting error</p>
<pre><code>$robot = new Accounts();
$accounts = $robot-&gt;get( 'modelsManager' )-&gt;createBuilder() //got from di
        -&gt;columns( ['AccountDomains.*', 'Accounts.*' ] )
        -&gt;from( ['Accounts' =&gt; 'Yesse\Model\Accounts' ] )
        -&gt;leftJoin( 'Yesse\Model\AccountDomains', null, 'AccountDomains' )
        -&gt;getQuery()
        -&gt;execute();

print_r( $accounts );

Fatal error:  Uncaught exception 'InvalidArgumentException' with message 'Parameter 'alias' must be a string' in E:\owned\yesse\public\index.php:38
Stack trace:
#0 [internal function]: Phalcon\Mvc\Model\Manager-&gt;getRelationByAlias('Yesse\\Model\\Acc...', false)
#1 [internal function]: Phalcon\Mvc\Model-&gt;_getRelatedRecords('Yesse\\Model\\Acc...', 'get', Array)
#2 E:\owned\yesse\public\index.php(38): Phalcon\Mvc\Model-&gt;__call('get', Array)
#3 E:\owned\yesse\public\index.php(38): Yesse\Model\Accounts-&gt;get('modelsManager')
#4 [internal function]: Closure-&gt;{closure}()
#5 E:\owned\yesse\public\index.php(50): Phalcon\Mvc\Micro-&gt;handle()
#6 {main}
  thrown in E:\owned\yesse\public\index.php on line 38</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33147" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33147" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33149" href="#C33149">
                <time itemprop="dateCreated" datetime="2016-04-27T10:14:53-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Or you can use simpler:</p>
<pre><code class="language-php">$accounts=Accounts::query()
    -&gt;leftJoin('Yesse\Model\AccountDomains')
    -&gt;execute()</code></pre>
<p>But i would recommend to specify columns which you need from each model. You should use full objects only for updating related records IMHO. If it's for displaying then select columns and get rid of hydration.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33149" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33149" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33153" href="#C33153">
                <time itemprop="dateCreated" datetime="2016-04-27T10:19:18-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code>$robot = new Accounts(); $accounts = $robot-&gt;get( 'modelsManager' )</code></pre>
<p>What is this ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33153" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33153" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7ea8556715a4d33e151bcf1437cc2568?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6855/surjit" class="user-moderator-N"><span itemprop="name">surjit</span></a>        </span>
        <br>

        <span class="karma">4.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33155" href="#C33155">
                <time itemprop="dateCreated" datetime="2016-04-27T10:23:23-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I used to get di service modelsManager</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33155" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33155" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33161" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C33161" href="#C33161">
                <time itemprop="dateCreated" datetime="2016-04-27T10:41:21-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code>$robot = new Accounts(); $accounts = $robot-&gt;get( 'modelsManager' )</code></pre>
<p>But $robot is not di ! It's just model without method get. By di i meant depedency injector container.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33161" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33161" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33163" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C33163" href="#C33163">
                <time itemprop="dateCreated" datetime="2016-04-27T11:10:10-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If you are using 2.1.x:</p>
<pre><code class="language-php">$modelsManager=$this-&gt;getDI()-&gt;get('modelsManager');
$modelsManager-&gt;createBuilder() //got from di
-&gt;columns(['AccountDomains.*','Accounts.*'])
-&gt;from(['Accounts'=&gt;'Yesse\Model\Accounts'])
-&gt;leftJoin('Yesse\Model\AccountDomains', null, 'AccountDomains')
-&gt;getQuery()
-&gt;execute();</code></pre>
<p>If 2.0.x then you need to add use ($app) in micro function(perhaps you already have it) and then:</p>
<pre><code class="language-php">$modelsManager=$app-&gt;getDI()-&gt;get('modelsManager');
$modelsManager-&gt;createBuilder() //got from di
-&gt;columns(['AccountDomains.*','Accounts.*'])
-&gt;from(['Accounts'=&gt;'Yesse\Model\Accounts'])
-&gt;leftJoin('Yesse\Model\AccountDomains', null, 'AccountDomains')
-&gt;getQuery()
-&gt;execute();</code></pre>
<p>You can also use shorthand $app-&gt;modelsManager / $this-&gt;modelsManager but i don't like it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33163" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33163" data-cf-modified-abc96f432e5095e0555ce59d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11313" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>