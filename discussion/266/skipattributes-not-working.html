---
layout: default
title: 'skipAttributes not working - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">skipAttributes not working</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/16/pavlovt" class="user-moderator-N"><span itemprop="name">pavlovt</span></a></span>
            <time itemprop="dateCreated" datetime="2013-05-02T06:20:03-07:00">May '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-05-02T06:20:03-07:00">May '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>1580</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c40b124429f1c4a0ad24c676548bb460?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/16/pavlovt" class="user-moderator-N"><span itemprop="name">pavlovt</span></a></span>
                <span class="karma">7.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C266" href="#C266">
        <time class="action-date">May '13</time>
    </a>
</div>
<div class="post-content"><div><p>I am using Phalcon 1.1.0 (from yesterday). I have title and body fields and have set in the model</p>
<pre><code class="language-php">public function initialize()
    {
            $this-&gt;skipAttributes(array('body'));
    }</code></pre>
<p>and still when I try to create new only with title it says: &quot;body is required&quot;. Am I doing something wrong? (by the way skipAttributesOnCreate is working)</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-276930dd111f853ccc5646d2-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-276930dd111f853ccc5646d2-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1098" href="#C1098">
                <time itemprop="dateCreated" datetime="2013-05-02T20:45:44-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Are you using column renaming? I can't reproduce your problem, actually skipAttributes calls skipAttributesOnCreate internally</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1098" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1098" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c40b124429f1c4a0ad24c676548bb460?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/16/pavlovt" class="user-moderator-N"><span itemprop="name">pavlovt</span></a>        </span>
        <br>

        <span class="karma">7.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1136" href="#C1136">
                <time itemprop="dateCreated" datetime="2013-05-05T23:40:39-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No I am not using column renaming. And the other strange thing is that I have other text field which Phalcon doesn't think is required :) I couldn't find why it acts like that but the simple solution is not to have the fields as required by default as in forms fields - they are not required unless you set them as such.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1136" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1136" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1139" href="#C1139">
                <time itemprop="dateCreated" datetime="2013-05-06T11:39:46-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm running this gist <a href="https://gist.github.com/phalcon/5527000">https://gist.github.com/phalcon/5527000</a>
here: <a href="http://test.phalcon.io/skip-attributes.php">http://test.phalcon.io/skip-attributes.php</a></p>
<p>As you can see in the log, both &quot;type&quot; and &quot;year&quot; are ignored in the INSERT:</p>
<pre><code class="language-sql">SELECT CASE WHEN COUNT(*) &gt; 0 THEN 1 ELSE 0 END FROM sqlite_master WHERE type='table' AND tbl_name='robots'
SELECT CASE WHEN COUNT(*) &gt; 0 THEN 1 ELSE 0 END FROM sqlite_master WHERE type='table' AND tbl_name='robots'
PRAGMA table_info('robots')
INSERT INTO "robots" ("name", "id") VALUES (?, null)
SELECT "robots"."id", "robots"."name", "robots"."type", "robots"."year" FROM "robots"
SELECT COUNT(*) FROM (SELECT "robots"."id", "robots"."name", "robots"."type", "robots"."year" FROM "robots")</code></pre>
<p>Also, you can see how the robots are printed using its default values in the table (because of their skipping in the insert list).</p>
<p>If you want to check the database by yourself, you can download it from here: <a href="http://test.phalcon.io/robots.db">http://test.phalcon.io/robots.db</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1139" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1139" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c40b124429f1c4a0ad24c676548bb460?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/16/pavlovt" class="user-moderator-N"><span itemprop="name">pavlovt</span></a>        </span>
        <br>

        <span class="karma">7.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1145" href="#C1145">
                <time itemprop="dateCreated" datetime="2013-05-06T12:25:17-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Finally I found where was the problem. In fact Phalcon was doing it right all the time and the problem was not about the code of the controller or the model but with the db table.</p>
<p>The table:</p>
<p>CREATE TABLE <code>news</code> (
<code>news_id</code> INT(10) NOT NULL AUTO_INCREMENT,
<code>title</code> VARCHAR(255) NOT NULL DEFAULT '',
<code>body</code> TEXT NOT NULL,
<code>image</code> VARCHAR(255) NULL DEFAULT NULL,
)</p>
<p>The problem: I wanted the &quot;body&quot; field not to be required and used skipAttributes() in the model but it wasn't working. On the other side I didn't get any errors about the requirement of the &quot;image&quot; field about which I didn't specified anything in the skipAttributes().</p>
<p>The solution: I just had to set &quot;body&quot; as DEFAULT NULL - that's all :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1145" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1145" data-cf-modified-276930dd111f853ccc5646d2-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="266" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>