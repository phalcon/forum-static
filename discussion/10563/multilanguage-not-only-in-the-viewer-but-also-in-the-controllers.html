---
layout: default
title: 'Multi-language, not only in the Viewer but also in the Controllers and Models - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Multi-language, not only in the Viewer but also in the Controllers and Models</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a></span>
            <time itemprop="dateCreated" datetime="2016-02-23T22:42:35-07:00">Feb '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-02-23T22:42:35-07:00">Feb '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">9</span>
                </td>
                <td>
                    <label>Views</label><br>1215</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a></span>
                <span class="karma">31.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C10563" href="#C10563">
        <time class="action-date">Feb '16</time>
    </a>
</div>
<div class="post-content"><div><p>I think the way of multi-language in the manual <code>$t-&gt;_("something")</code> is only can work in the Viewer~~
How to achieve the multi-language in the whole site？</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30207" href="#C30207">
                <time itemprop="dateCreated" datetime="2016-02-24T00:34:08-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can use them anywhere you want. Just docs dont have all the examples.</p>
<p>Usually in my projects i have a BaseController which other controllers extend. in getTranslations() you can use Phalcon docs example for detecting language or you can make custom logic. For exmaple i get the language from the url, but its up to you.</p>
<p>Sample code:</p>
<pre><code class="language-php">// Base Controller
class BaseController extends \Phalcon\Mvc\Controller
{ 
    public function initialize()
    { 
        // Set them as SHARED service so you can use them anywhere. Note: you can change variable name from T to anything you like. 
        $this-&gt;di-&gt;setShared('t', $this-&gt;getTranslation());
    } 
}</code></pre>
<p>Usage</p>
<pre><code class="language-php">// Volt 
{% raw %}{{{% endraw %} t._('hi') {% raw %}}}{% endraw %}

// Model
$this-&gt;getDI()-&gt;getT()-&gt;_('hi');

// Controller
$this-&gt;t-&gt;_('hi')

// Custom library / Helper classes
$di = \Phalcon\DI::getDefault();  
$di['t']-&gt;_t('hi');
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30207" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30207" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a>        </span>
        <br>

        <span class="karma">31.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30219" href="#C30219">
                <time itemprop="dateCreated" datetime="2016-02-24T04:23:48-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks!</p>
<p>My code can't work properly</p>
<pre><code class="language-php">use \Phalcon\Mvc\Controller;
use Phalcon\Translate\Adapter\NativeArray;

class Base extends Controller
{
    protected function getTranslation()
    {
        $language = "en";

        require APP_DIR . "/lang/" . $language . "/main.php";

        return new NativeArray(array("content" =&gt; $messages));
    }

    public function initialize()
    {
        $this-&gt;di-&gt;setShared('t', $this-&gt;getTranslation());
    }
}</code></pre>
<p>it says <code>Notice: Undefined variable: t</code></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30219" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30219" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30221" href="#C30221">
                <time itemprop="dateCreated" datetime="2016-02-24T04:31:05-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Show us the code where you call <strong>t</strong>?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30221" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30221" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a>        </span>
        <br>

        <span class="karma">31.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30223" href="#C30223">
                <time itemprop="dateCreated" datetime="2016-02-24T04:59:34-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code class="language-php">// Base.php is shown above</code></pre>
<pre><code class="language-php">//ControllerBase.php
class ControllerBase extends Base
{
    public function initialize()
    {
        $this-&gt;view-&gt;setTemplateBefore("main");
    }
}</code></pre>
<pre><code class="language-php">//UsersController.php
class UsersController extends ControllerBase
{
}</code></pre>
<p>just in the volt of <code>/view/users/index.volt</code>, I code <code>{% raw %}{{{% endraw %} t._('hi') {% raw %}}}{% endraw %}</code>, and it shows the error like above.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30223" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30223" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30225" href="#C30225">
                <time itemprop="dateCreated" datetime="2016-02-24T05:39:42-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey man</p>
<p>I recommned you add the translate to service to call any where, for example</p>
<pre><code class="language-php">//Translation application use gettext
$di-&gt;set(
    'translation',
    function () use ($di) {
        $language = $di-&gt;get('siteLang');
        // if (!file_exists(ROOT_DIR . 'common/messages/' . $language . '.php"')) {
        //     throw new \Exception("You must specify a language file for language '$language'");
        // }
        require ROOT_DIR . 'common/messages/' . $language . '.php';

        //Return a translation object
        return new NativeArray([
           'content' =&gt; $messages
        ]);
    },
    true
);

/**
 * Translation function call anywhere
 *
 * @param $string
 *
 * @return mixed
 */
if (!function_exists('t')) {
    function t($string, $params = [])
    {
        $translation = DI::getDefault()-&gt;get('translation');
        return $translation-&gt;_($string, $params);
    }
}</code></pre>
<p>After that just call {% raw %}{{{% endraw %}t('your need to trans'){% raw %}}}{% endraw %} in volt</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30225" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30225" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1f92c8832155ca96cb3147af3cad27b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6311/davihu" class="user-moderator-N"><span itemprop="name">David Hübner</span></a>        </span>
        <br>

        <span class="karma">9.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="30229" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '16</span>
              </span><br/><a name="C30229" href="#C30229">
                <time itemprop="dateCreated" datetime="2016-02-24T06:40:06-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>An elegant way to use translations in view or volt is through Tag extension (need translate service registered), I use code like this</p>
<pre><code>class Tag extends \Phalcon\Tag
{
    public static function _($translateKey, $placeholders = NULL)
    {
        return self::getDI()-&gt;get('translate')-&gt;_($translateKey, $placeholders);
    }
}</code></pre>
<p>then in volt you call it as</p>
<pre><code>{% raw %}{{{% endraw %} _('localized text') {% raw %}}}{% endraw %}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30229" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30229" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a>        </span>
        <br>

        <span class="karma">31.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C30229"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/1f92c8832155ca96cb3147af3cad27b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        David Hübner                    </a>
                </div><div class="posts-buttons" align="right"><a name="C30237" href="#C30237">
                <time itemprop="dateCreated" datetime="2016-02-24T17:22:22-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>How to call it in Models and Controllers?</p>
<blockquote>
<p>An elegant way to use translations in view or volt is through Tag extension (need translate service registered), I use code like this</p>
<pre><code>class Tag extends \Phalcon\Tag
{
   public static function _($translateKey, $placeholders = NULL)
   {
       return self::getDI()-&gt;get('translate')-&gt;_($translateKey, $placeholders);
   }
}</code></pre>
<p>then in volt you call it as</p>
<pre><code>{% raw %}{{{% endraw %} _('localized text') {% raw %}}}{% endraw %}</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30237" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30237" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c897fab3d4f3e07ca673337a1efa9cbf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6133/corentin-begne" class="user-moderator-N"><span itemprop="name">corentin-begne</span></a>        </span>
        <br>

        <span class="karma">12.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="30243" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '16</span>
              </span><br/><a name="C30243" href="#C30243">
                <time itemprop="dateCreated" datetime="2016-02-24T17:43:38-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I've done it in my lib :<br />
<a href="https://github.com/corentin-begne/phalconTool/">https://github.com/corentin-begne/phalconTool/</a><br />
So i use a controller base class :<br />
<a href="https://github.com/corentin-begne/phalconTool/blob/master/src/ControllerBase.php">https://github.com/corentin-begne/phalconTool/blob/master/src/ControllerBase.php</a><br />
then you can access to the translation in controllers action with <code>$this-&gt;__()</code> and <code>$this-&gt; _()</code> and in view with <code>$t-&gt;__()</code> and <code>$t-&gt;_()</code><br />
if you need some tranlations inside models then pass the value in params from controller or use model base class and add this functionality.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30243" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30243" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1f92c8832155ca96cb3147af3cad27b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6311/davihu" class="user-moderator-N"><span itemprop="name">David Hübner</span></a>        </span>
        <br>

        <span class="karma">9.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C30237"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        xaero                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="30245" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '16</span>
              </span><br/><a name="C30245" href="#C30245">
                <time itemprop="dateCreated" datetime="2016-02-24T20:37:45-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>As I wrote, you need to to register &quot;translate&quot; service to DI. Thien gave you an example a few posts ago. By my meaning its the cleanest solution, because your code will be more maintainable and testable. You can pass this service via DI pattern and are not hardcoding it anywhere.</p>
<blockquote>
<p>How to call it in Models and Controllers?</p>
<blockquote>
<p>An elegant way to use translations in view or volt is through Tag extension (need translate service registered)</p>
</blockquote>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30245" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30245" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a>        </span>
        <br>

        <span class="karma">31.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C30245"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/1f92c8832155ca96cb3147af3cad27b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        David Hübner                    </a>
                </div><div class="posts-buttons" align="right"><a name="C30247" href="#C30247">
                <time itemprop="dateCreated" datetime="2016-02-24T21:46:10-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Could you please show me a more detailed example？</p>
<blockquote>
<p>As I wrote, you need to to register &quot;translate&quot; service to DI. Thien gave you an example a few posts ago. By my meaning its the cleanest solution, because your code will be more maintainable and testable. You can pass this service via DI pattern and are not hardcoding it anywhere.</p>
<blockquote>
<p>How to call it in Models and Controllers?</p>
<blockquote>
<p>An elegant way to use translations in view or volt is through Tag extension (need translate service registered)</p>
</blockquote>
</blockquote>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30247" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30247" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30251" href="#C30251">
                <time itemprop="dateCreated" datetime="2016-02-24T22:43:49-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi</p>
<p>First you need add to DI see here <a href="https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L374">https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L374</a>, then you defined the function t to call anywhere see at <a href="https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L460">https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L460</a></p>
<p>After that you just using  it ,see at <a href="https://github.com/phanbook/phanbook/blob/master/core/modules/frontend/controllers/PostsController.php#L171">https://github.com/phanbook/phanbook/blob/master/core/modules/frontend/controllers/PostsController.php#L171</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30251" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30251" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a>        </span>
        <br>

        <span class="karma">31.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C30251"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Thien Tran                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="30255" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '16</span>
              </span><br/><a name="C30255" href="#C30255">
                <time itemprop="dateCreated" datetime="2016-02-25T01:07:25-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks a lot!</p>
<p>According to your way, is there anyway to load a defferent language file according to the defferent page? like the offical demo <a href="https://github.com/phalcon/php-site">PHP alternative site</a></p>
<p>In this demo, for example, if we visit the index page, it will load <code>messages/en/index.php</code> for language strings, and if we visite the download page, it will load <code>messages/en/download.php</code> for language strings.</p>
<p><a href="https://github.com/phalcon/php-site/blob/master/app/controllers/ControllerBase.php#L39">here</a> is the function.</p>
<blockquote>
<p>Hi</p>
<p>First you need add to DI see here <a href="https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L374">https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L374</a>, then you defined the function t to call anywhere see at <a href="https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L460">https://github.com/phanbook/phanbook/blob/master/core/config/services.php#L460</a></p>
<p>After that you just using  it ,see at <a href="https://github.com/phanbook/phanbook/blob/master/core/modules/frontend/controllers/PostsController.php#L171">https://github.com/phanbook/phanbook/blob/master/core/modules/frontend/controllers/PostsController.php#L171</a></p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30255" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30255" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1f92c8832155ca96cb3147af3cad27b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6311/davihu" class="user-moderator-N"><span itemprop="name">David Hübner</span></a>        </span>
        <br>

        <span class="karma">9.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30259" href="#C30259">
                <time itemprop="dateCreated" datetime="2016-02-25T03:38:54-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can use <a href="https://docs.phalcon.io/en/latest/api/Phalcon_Mvc_Dispatcher.html">dispatcher</a> and methods like getModuleName(), getControllerName() and getActionName()</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30259" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30259" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a>        </span>
        <br>

        <span class="karma">31.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C32733" href="#C32733">
                <time itemprop="dateCreated" datetime="2016-04-19T04:30:19-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,<a href="https://forum.phalcon.io/user/0/Thien"> @Thien</a></p>
<p>define the following function in <code>service.php</code></p>
<pre><code class="language-php">if (!function_exists('t')) {
    function t($string, $params = [])
    {
        $translation = DI::getDefault()-&gt;get('translation');
        return $translation-&gt;_($string, $params);
    }
}</code></pre>
<p>It can work : <code>&lt;?php echo t('.....')?&gt;</code></p>
<p>But I can't user <code>{% raw %}{{{% endraw %} t('......') {% raw %}}}{% endraw %}</code>!, It says: <em>Macro 't' does not exist</em>, and in php file, it render <em>callMacro('t', Array(...))</em></p>
<p>why?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32733" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32733" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1f92c8832155ca96cb3147af3cad27b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6311/davihu" class="user-moderator-N"><span itemprop="name">David Hübner</span></a>        </span>
        <br>

        <span class="karma">9.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="32739" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C32739" href="#C32739">
                <time itemprop="dateCreated" datetime="2016-04-19T05:04:03-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You need to register it to Volt compiler</p>
<pre><code class="language-php">$volt = new Volt($view, $di);

$compiler = $volt-&gt;getCompiler();
$compiler-&gt;addFunction(
    't', function ($resolvedArgs, $exprArgs) {
        return 't(' . $resolvedArgs . ')';
    }
);</code></pre>
<p><a href="https://docs.phalcon.io/en/latest/reference/volt.html#extending-volt">https://docs.phalcon.io/en/latest/reference/volt.html#extending-volt</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32739" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32739" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f3183e109ec4c5c93d7deab887f7b8e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3021/xaero7" class="user-moderator-N"><span itemprop="name">xaero</span></a>        </span>
        <br>

        <span class="karma">31.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C32745" href="#C32745">
                <time itemprop="dateCreated" datetime="2016-04-19T06:18:13-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks,<a href="https://forum.phalcon.io/user/6311/davihu"> @davihu</a></p>
<ol>
<li>Is it registered in <code>service.php</code>, like following?</li>
</ol>
<pre><code class="language-php">// Setting up the view component
$di-&gt;set('view', function() use ($config) {
    $view = new View();
    $view-&gt;setViewsDir($config-&gt;application-&gt;viewsDir);
    $view-&gt;registerEngines(array(
        '.volt' =&gt; function($view, $di) use ($config) {
            $volt = new VoltEngine($view, $di);
            $volt-&gt;setOptions(array(
                'compiledPath' =&gt; $config-&gt;application-&gt;cacheDir . 'volt/',
                'compliedSeparator' =&gt; '_'
            ));

            // register here is correct?
            $volt-&gt;getCompiler()-&gt;addFunction('__', function ($resolvedArgs, $exprArgs){
                return '__(' . $resolvedArgs . ')';
            });

            return $volt;

        },
        '.phtml' =&gt; 'Phalcon\Mvc\View\Engine\Php' //// Generate Template files uses PHP itself as the template engine
    ));
    return $view;
}, true);</code></pre>
<ol start="2">
<li>how to register the function with two params? like the function '<code>__</code>':</li>
</ol>
<pre><code class="language-php">if (! function_exists('__')) {
    function __($string, array $placeholder = null)
    {
        $translation = \Phalcon\Di::getDefault()-&gt;get('translation');
        return $translation-&gt;_($string, $placeholder);
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32745" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32745" data-cf-modified-d0355b31c0f212bf05b0ba70-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="10563" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>