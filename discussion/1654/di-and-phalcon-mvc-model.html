---
layout: default
title: 'DI and Phalcon\MVC\Model - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/10/di-ioc">DI/IoC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">DI and Phalcon\MVC\Model</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1110/bmewburn" class="user-moderator-N"><span itemprop="name">Ben Mewburn</span></a></span>
            <time itemprop="dateCreated" datetime="2014-02-24T20:29:15-07:00">Feb '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-02-24T20:29:15-07:00">Feb '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>1168</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/11e82acb18c9cb4d8a8bf6824587bf0e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1110/bmewburn" class="user-moderator-N"><span itemprop="name">Ben Mewburn</span></a></span>
                <span class="karma">3.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1654" href="#C1654">
        <time class="action-date">Feb '14</time>
    </a>
</div>
<div class="post-content"><div><pre><code class="language-php">$loader = new Phalcon\Loader();
    $loader-&gt;registerNamespaces(array(
        'My\\Controller'=&gt;'../Application/My/Controller',
        'My\\Model\\Object'=&gt;'../Application/My/Model/Object'
    ))-&gt;register();

    $config = new \Phalcon\Config\Adapter\Ini('../Application/My/Config/config.ini');

    $di = new \Phalcon\DI\FactoryDefault();
    $di-&gt;set('db', function() use ($config) {
        return new \Phalcon\Db\Adapter\Pdo\Mysql($config-&gt;Database-&gt;toArray());
    }, true);

    $myModel = \My\Model\Object\MyModel::findFirst();</code></pre>
<p>Just starting out with Phalcon. In the above code I can succesfully get the first of my model objects from the database set within the DI container. But how does the static model call even know of the DI container I have instantiated? This seems to go against the very concept of dependency injection.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-9a592cbe4206f6f997007c96-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-9a592cbe4206f6f997007c96-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fd188ae36c4626d42e1f874b129cf978?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/90/andersonamuller" class="user-moderator-N"><span itemprop="name">Anderson MÃ¼ller</span></a>        </span>
        <br>

        <span class="karma">843</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5650" href="#C5650">
                <time itemprop="dateCreated" datetime="2014-02-25T07:19:36-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have the same question.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5650" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5650" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5652" href="#C5652">
                <time itemprop="dateCreated" datetime="2014-02-25T07:50:50-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think, you can find answer in /phalcon/build/32bit/phalcon.c ++17903
Model use builder, and call builder __construct method ++17932,  which is determined DI.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5652" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5652" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11e82acb18c9cb4d8a8bf6824587bf0e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1110/bmewburn" class="user-moderator-N"><span itemprop="name">Ben Mewburn</span></a>        </span>
        <br>

        <span class="karma">3.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5686" href="#C5686">
                <time itemprop="dateCreated" datetime="2014-02-26T16:09:54-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The same situation occurs with controllers. I can instantiate a controller and it already has the DI container that I never set on it. Perhaps this is true for all classes that implement the Phalcon\DI\InjectionAwareInterface? Is this really dependency injection? The DI container is more like a global and is so pervasive through the layers that I don't see the difference between the way this has been implemented opposed to just having a bunch of globally available service/session/db/whatever objects. If a programmer is not careful or inexperienced isn't there huge scope for abuse of this DI container? ie Any Phalcon\DI\InjectionAwareInterface object can implement code that can effect the entire application. My understanding of DI/IOC is that it should be used only within the aggregate root of the application. I like Phalcon but I'm a little disappointed with this aspect.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5686" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5686" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e939df2df031203c1118686abce4e624?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1915/garakh" class="user-moderator-N"><span itemprop="name">Iliya Garakh</span></a>        </span>
        <br>

        <span class="karma">753</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C9363" href="#C9363">
                <time itemprop="dateCreated" datetime="2014-07-09T09:44:42-07:00" class="action-date">Jul '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>To my mind phalcon uses last definded DI as default.
It's conviniet in a small app, but you can always use setDI method if you need</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="9363" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="9363" data-cf-modified-9a592cbe4206f6f997007c96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1654" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>