---
layout: default
title: 'Find using columns and hydration - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Find using columns and hydration</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/6861/Style87" class="user-moderator-N"><span itemprop="name">Style87</span></a></span>
            <time itemprop="dateCreated" datetime="2016-04-27T13:20:46-07:00">Apr '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-04-27T13:20:46-07:00">Apr '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>755</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/10c52510ba88dc3ad838a0f04f7a6295?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/6861/Style87" class="user-moderator-N"><span itemprop="name">Style87</span></a></span>
                <span class="karma">1.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11319" href="#C11319">
        <time class="action-date">Apr '16</time>
    </a>
</div>
<div class="post-content"><div><p>I'm attempting to use the columns parameter to avoid selecting unnecessary data from my database. The columns selected could be none, a single column or anything inbetween depending on input parameters. I've overwritten the toArray method of my base class and extending classes and I have a problem when using the columns parameter in that object of my class types are no longer returned. I tried setting hydration to objects but it does nothing. I've read the documentation at <a href="https://docs.phalcon.io/en/latest/reference/models.html#finding-records">https://docs.phalcon.io/en/latest/reference/models.html#finding-records</a> and I understand why partial objects are returned. However, I don't understand why a partial record is returned when I explicitally set the hydration. This inconsistency can be corrected with the code below.</p>
<pre><code>$robots = Robot::find(['columns' =&gt; 'id,name']);
$arrayOfRobots = [];
foreach($robots as $robot) {
    $robotData = $robot-&gt;toArray();
    $robot = new Robot();
    $robot-&gt;assign($robotData);
    $arrayOfRobots[] = $robot;
}</code></pre>
<p>This workaround though must be applied conditionally depending on if the columns input exists.</p>
<p>Is there a way to force Phalcon to respect the hydration method and why does the hydration documentation not note that it is ignored when using the columns parameter?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33167" href="#C33167">
                <time itemprop="dateCreated" datetime="2016-04-27T15:30:57-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Beacause when using columns parameter there are always returnd partial objects(or Row object or stdclass) beacause you are not selecting full object so why phalcon should return this as object ?</p>
<p>This is workaround, i just don't see any point in returning partial object. If you need full objects then select them.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33167" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33167" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/10c52510ba88dc3ad838a0f04f7a6295?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6861/Style87" class="user-moderator-N"><span itemprop="name">Style87</span></a>        </span>
        <br>

        <span class="karma">1.1k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C33167"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C33213" href="#C33213">
                <time itemprop="dateCreated" datetime="2016-04-28T09:54:58-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Full objects should be returned because I've explicitly set them to be returned as such.</p>
<pre><code>$robots = Robots::find([
    'columns' =&gt; 'id, name',
    'hydration' =&gt; ResultSet::HYDRATE_RECORDS
]);</code></pre>
<p>In this example hydration is completely ignored and the elements of the robots array are Row objects.</p>
<p>There are two separate issues here. The first is that hydration is ignored under certain circumstances. The second is that find and query can return objects of different types depending on non-obvious input.</p>
<p>The first issue I would consider a bug. If hydration is provided as an option, explicitly set and ignored the code is broken.</p>
<p>The second issue is more an issue of personal preference for the consistency in returned responses. I don't expect this to change as many before me have asked about what's going on when using the columns parameter and nothing has changed.</p>
<blockquote>
<p>Beacause when using columns parameter there are always returnd partial objects(or Row object or stdclass) beacause you are not selecting full object so why phalcon should return this as object ?</p>
<p>This is workaround, i just don't see any point in returning partial object. If you need full objects then select them.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33213" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33213" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33217" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C33217" href="#C33217">
                <time itemprop="dateCreated" datetime="2016-04-28T10:09:59-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No. Full objects are only returned when selecting them as full object. If you select columns they will be always returned as partial.</p>
<p>It's good behaviour and it should stay as it is. There is no any issue. You just not selecting fll object - that's why you don't have returned your object, beacause YOU ARE NOT SELECTING FULL OBJECT.</p>
<p>Right now it's have the biggest consistency it can. You want objects - just select them. You are selecting columns ? You got partial objects.</p>
<p>Hydration as it documentation saying is for setting <strong>RESULTSET</strong> hydration, it's saying how <strong>RESULTSET</strong>  will by hydrated. It's totally diffrent thing than object hydration. You get full objects only if you select all columns.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33217" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33217" data-cf-modified-ad1d30ee11e31c77f97ee313-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11319" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>