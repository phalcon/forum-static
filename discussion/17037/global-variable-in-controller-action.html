---
layout: default
title: 'Global variable in Controller Action - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Global variable in Controller Action</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/10119/lazzyms" class="user-moderator-N"><span itemprop="name">Maulik Sompura</span></a></span>
            <time itemprop="dateCreated" datetime="2017-10-04T03:31:09-07:00">Oct '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-10-04T03:31:09-07:00">Oct '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Oct '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1440</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/24b9af151e3208dd9b1cdb77218e29ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/10119/lazzyms" class="user-moderator-N"><span itemprop="name">Maulik Sompura</span></a></span>
                <span class="karma">4.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C17037" href="#C17037">
        <time class="action-date">Oct '17</time>
    </a>
</div>
<div class="post-content"><div><p>I am having a Controller names SalesController, which have two Actions :
addSalesAction (which performs the form submit and save data to database) and another is uploadFileAction (which perform a file upload for the newly added sale entry).</p>
<p>Now I want to use the id of the newly added sale entry to the uploadFileAction. How do I set the Id as Global variable and how do I use it?</p>
<p>I am getting Id by this method :</p>
<pre><code class="language-php">            $this-&gt;db-&gt;begin();
            $db_sales_order = new SaleOrder();
            $cont = false;

            $db_sales_order-&gt;loadFromJson($data);
            if ($db_sales_order-&gt;save() === false) {
                $this-&gt;db-&gt;rollback();
                foreach ($db_sales_order-&gt;getMessages() as $message) {
                    $error_msg = $message . "\n";
                }
            } else {
                $cont = TRUE;
                $new_entry_id = $db_sales_order-&gt;id;
                }</code></pre>
<p><code>$new_entry_id</code> is the variable which store newly added sales entry id.</p>
<p>How to make it Gloabal so I can use it in another Action?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Åšlawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="51329" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '17</span>
              </span><br/><a name="C51329" href="#C51329">
                <time itemprop="dateCreated" datetime="2017-10-04T03:41:29-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What you mean in another action? Like user makes new request? Then you need to return it to user and make request with this id, php doesn't know anything what happened in previous request. So any global variable won't be known in next request. It's how PHP works. If you want it in the same request then just pass it as an argument to method and don't make it an action imho, or use property in class or whatever or di.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51329" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51329" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="51331" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '17</span>
              </span><br/><a name="C51331" href="#C51331">
                <time itemprop="dateCreated" datetime="2017-10-04T03:44:32-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>HTTP is stateless, so the two actions will never be able to see the same global variables. It's also a bad design pattern ;]</p>
<p>You could save the ID as a session variable in save, then check for that variable in upload.</p>
<pre><code class="language-php">function addSalesAction() {
    // logic
    $this-&gt;session-&gt;set('new_sale_id', $sale-&gt;getId());
}

function uploadFileAction() {
    if($this-&gt;session-&gt;has('new_sale_id')) {
        $saleId = $this-&gt;session-&gt;get('new_sale_id');
        $this-&gt;session-&gt;remove('new_sale_id');
        // logic
    }
    else {
        $this-&gt;flash-&gt;error('My error message');
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51331" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51331" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51333" href="#C51333">
                <time itemprop="dateCreated" datetime="2017-10-04T04:42:36-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In addition to Lajos's answer.. Sometimes you may need a variable accessible in all actions for current controller. For example an inner menu. You want to use <code>initialize()</code> method of your controller, notice that if your ParentController has initialize method you should call it so you do not overwrite it (ofc depends what you want to do) :)</p>
<pre><code class="language-php">class PagesController extends BaseController
{
    public function initialize()
    {
        parent::initialize();
        $this-&gt;view-&gt;innerMenu = ['edit', 'images'];
    }

    // Index
    public function indexAction()
    {

    }

    // Something else
    public function somethingAction()
    {

    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51333" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51333" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Åšlawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51335" href="#C51335">
                <time itemprop="dateCreated" datetime="2017-10-04T04:44:08-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Why just not upload file with whatever data you want? What's a problem with it? It's not intuitive to have one form to upload file and other with some data.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51335" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51335" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24b9af151e3208dd9b1cdb77218e29ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/10119/lazzyms" class="user-moderator-N"><span itemprop="name">Maulik Sompura</span></a>        </span>
        <br>

        <span class="karma">4.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C51335"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Åšlawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C51501" href="#C51501">
                <time itemprop="dateCreated" datetime="2017-10-12T04:04:12-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Why just not upload file with whatever data you want? What's a problem with it? It's not intuitive to have one form to upload file and other with some data.</p>
</blockquote>
<p>I have to store the file location and the module and entry id for which the file has uploaded.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51501" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51501" data-cf-modified-9cf86afc4338c2621b36d1e6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="17037" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>