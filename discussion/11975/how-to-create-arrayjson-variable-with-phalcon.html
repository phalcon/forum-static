---
layout: default
title: 'How to create  array-json variable with Phalcon? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/27/external-tools">External Tools</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How to create  array-json variable with Phalcon?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a></span>
            <time itemprop="dateCreated" datetime="2016-06-29T21:28:20-07:00">Jun '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-06-29T21:28:20-07:00">Jun '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>1406</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a></span>
                <span class="karma">81.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11975" href="#C11975">
        <time class="action-date">Jun '16</time>
    </a>
</div>
<div class="post-content"><div><p>In my previous projects using the jquery autocomplete. This function consisted of two parts</p>
<p>Number one.jquery function</p>
<pre><code>&lt;script&gt;
            $(function() {
            $(".auto").autocomplete({
            source: "search_producto.php",
            minLength: 1,
            select: function(event, data) {
                    $("#codigo").val(data.item.ide);
                    $("#iva").val(data.item.iva);
                    $("#descuento").val(data.item.descue);
                    $("#disponible").val(data.item.dispo);
                    $("#precio").val(data.item.precio);
                    $("#unidad").val(data.item.unidad);
                    $("#producto").val(data.item.value);
                    $(".auto").val(data.item.value);
                    $("#cant").focus();
                    },
                });
        });
&lt;/script&gt;</code></pre>
<p>number two The file search_producto.php</p>
<pre><code>&lt;?php
if (isset($_GET['term'])){
$return_arr = array();
try {
 $db_username = "SPOLS";
$db_password = "SPOLS";
$db = "oci:dbname=JEIEL/XE";
$conn = new PDO($db,$db_username,$db_password);
$conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$stmt = $conn-&gt;prepare("SELECT P.PROD_CODIGO, P.PROD_NOMBRE, P.PROD_CODIG1, P.PROD_UNIDAD ,PROD_CODIG2,PROD_IVA FROM MAE_PROD P  WHERE P.PROD_ESTADO='1' AND P.PROD_TIPOXX='PRO' AND P.PROD_NOMBRE LIKE :term");
$stmt-&gt;execute(array('term' =&gt; '%'.$_GET['term'].'%'));
 while($row = $stmt-&gt;fetch()) {
$return_arr[] = array('value' =&gt; $row['PROD_NOMBRE'], 'nombreproducto' =&gt; $row['PROD_NOMBRE'], 'ide' =&gt; $row['PROD_CODIGO'], 'unidad' =&gt; $row['PROD_UNIDAD'], 'precio' =&gt; '2.25', 'descuento' =&gt; '0.00', 'iva' =&gt;$row['PROD_IVA'], 'serial' =&gt; $row['PROD_CODIG1'], 'barra' =&gt; $row['PROD_CODIG2'],'dispo'=&gt;'0.00');
}
} catch(PDOException $e) {
    echo 'ERROR: ' . $e-&gt;getMessage();
}

header('Content-type: application/json');
echo json_encode($return_arr);
}
?&gt;</code></pre>
<p>The second file is a class that stores data me my table in an array that sent as json. How do I create the array to store data from my table?</p></div>                                                    <div class="row"><div class="radio">
            <label>
                <input type="radio" name="pollOption" class="pollOption" data-id="33" value="33">
                <strong class="poll-idx">A.</strong>&nbsp;autocomplete</label>
        </div><div class="radio">
            <label>
                <input type="radio" name="pollOption" class="pollOption" data-id="35" value="35">
                <strong class="poll-idx">B.</strong>&nbsp;jquery</label>
        </div><div class="col-md-12">
        <div class="col-md-6">
            <div align="right" class="posts-buttons"><p class="text-center">You must log in first to vote</p></div>
        </div>
    </div>
</div>
                                                            </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-c31ecde3c006cb27808b6b88-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-c31ecde3c006cb27808b6b88-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36175" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C36175" href="#C36175">
                <time itemprop="dateCreated" datetime="2016-06-30T05:30:30-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><strong>C.</strong> 42</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36175" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36175" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36177" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C36177" href="#C36177">
                <time itemprop="dateCreated" datetime="2016-06-30T05:33:38-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Lajos">@Lajos</a> LOOOOOOOOOOOOOL :D</p>
<p><a href="https://forum.phalcon.io/user/4945/jeiel">@jeiel</a> Just send data as ajax to your controller and return the results as json? Something like:</p>
<pre><code class="language-php">        $this-&gt;response-&gt;setContentType('application/json', 'UTF-8');
        return $this-&gt;response-&gt;setJsonContent($this-&gt;_data)-&gt;send();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36177" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36177" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d13fbfe44ba667e08060bc76bd53108d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4165/butamuh4o" class="user-moderator-N"><span itemprop="name">Boris Delev</span></a>        </span>
        <br>

        <span class="karma">4.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36177"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Nikolay Mihaylov                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36211" href="#C36211">
                <time itemprop="dateCreated" datetime="2016-07-01T03:36:45-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In latest versions of Phalcon that setContentType is not need when u use return with setJsonContent ... u can check that here: <a href="https://github.com/phalcon/cphalcon/blob/2.1.x/phalcon/http/response.zep#L528">https://github.com/phalcon/cphalcon/blob/2.1.x/phalcon/http/response.zep#L528</a> :P soo... </p>
<blockquote>
<p><a href="https://forum.phalcon.io/user/0/Lajos">@Lajos</a> LOOOOOOOOOOOOOL :D</p>
<p><a href="https://forum.phalcon.io/user/4945/jeiel">@jeiel</a> Just send data as ajax to your controller and return the results as json? Something like:</p>
<pre><code class="language-php">       $this-&gt;response-&gt;setContentType('application/json', 'UTF-8');
       return $this-&gt;response-&gt;setJsonContent($this-&gt;_data)-&gt;send();</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36211" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36211" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36275" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C36275" href="#C36275">
                <time itemprop="dateCreated" datetime="2016-07-01T22:38:36-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi, sorry I was doing other pending changes this is the product for some reason does not work I will review the jquery. If something look bad me know please</p>
<p>In my controller</p>
<pre><code class="language-php">public function buscarProductoAction(){
            $sql = "
            select ART_CODIGO, ART_NOMBRE, nvl(ART_costo,0)  as costo,ART_UNIDADC as UNIDAD, NVL(ART_IVA,0) AS IVA from SPM_ARTICULO WHERE ART_ESTADO&lt;&gt;'A'  AND ART_NOMBRE LIKE   "."'%".$_GET['term']."%'";
        $robots = $this-&gt;db-&gt;fetchOne($sql);
        foreach ($robots as $robot) {
            $return_arr[]=array('id'=&gt;$robot['ART_CODIGO'],'ART_NOMBRE'=&gt;$robot['ART_NOMBRE'],'COSTO'=&gt;$robot['COSTO'],
                                'UNIDAD'=&gt;$robot['UNIDAD'],'IVA'=&gt;$robot['IVA']);
        }
        $this-&gt;response-&gt;setContentType('application/json', 'UTF-8');
        return $this-&gt;response-&gt;setJsonContent($return_arr)-&gt;send();

    }</code></pre>
<p>In my view</p>
<pre><code class="language-php">&lt;script&gt;
            $(function() {
            $(".auto").autocomplete({
            source: "buscarProducto",
            minLength: 1,
            select: function(event, data) {
                    $("#codigo").val(data.item.id);
                    $("#iva").val(data.item.IVA);
                    $("#precio").val(data.item.COSTO);
                    $("#unidad").val(data.item.UNIDAD);
                    $("#producto").val(data.item.ART_NOMBRE);
                    $(".auto").val(data.item.ART_NOMBRE);
                    $("#cant").focus();
                    },
                });
        });
&lt;/script&gt;</code></pre>
<p>In the jquery i have this problem</p>
<pre><code>jquery.js:9203 GET https://localhost/tesis/spt_encabezado/buscarProducto?term=m 500 (Internal Server Error)

It is</code></pre>
<pre><code class="language-php">try {

                    // Do send the request (this may raise an exception)
                    xhr.send( options.hasContent &amp;&amp; options.data || null );</code></pre>
<p>I feel I have error in the Loop</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36275" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36275" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36313" href="#C36313">
                <time itemprop="dateCreated" datetime="2016-07-02T23:04:11-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Please check your <strong>error_log</strong> to see what is causing the 500 error.</p>
<p>Also few things to note:</p>
<ul>
<li>Do not use directly $_GET, but use Phalcon's request class. $this-&gt;request-&gt;getQuery('your_param'). <a href="https://docs.phalcon.io/en/latest/api/Phalcon_Db_Adapter_Pdo_Mysql.html">More info here.</a></li>
<li>You are using fetchOne which returns only 1 result, perhaps you need multiple results? Read about other methods and fetchAll <a href="https://docs.phalcon.io/en/latest/api/Phalcon_Db_Adapter_Pdo_Mysql.html">here</a></li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36313" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36313" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36317" href="#C36317">
                <time itemprop="dateCreated" datetime="2016-07-03T06:30:55-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In the log file</p>
<pre><code>[Sat Jul 02 01:39:41.850838 2016] [:error] [pid 25446] [client 127.0.0.1:28872] PHP Warning:  Illegal string offset 'ART_CODIGO' in       /var/www/html/tesis/app/controllers/SptEncabezadoController.php on line 70, referer: https://localhost/tesis/spt_encabezado/new
[Sat Jul 02 01:39:41.850887 2016] [:error] [pid 25446] [client 127.0.0.1:28872] PHP Stack trace:, referer: https://localhost/tesis/spt_encabezado/new    </code></pre>
<p>Is the foreach if it is well done it?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36317" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36317" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36321" href="#C36321">
                <time itemprop="dateCreated" datetime="2016-07-03T08:41:43-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Please read the documentation in fetchAll link i gave you. After that <strong>var_dump</strong> your <strong>$robots</strong> and see exactly what type the result is. It is most likely object and you are trying to access it like array <strong>$robot['ART_CODIGO']</strong></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36321" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36321" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36349" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C36349" href="#C36349">
                <time itemprop="dateCreated" datetime="2016-07-03T22:19:33-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I made the following changes</p>
<pre><code class="language-php">
     public function buscarProductoAction() {

        if (isset($_GET['term'])) {
               $robots = SpmArticulo::find("ART_NOMBRE LIKE  %'".$_GET['term']."%'");
            foreach ($robots as $robot) {
                $return_arr[] = array('id' =&gt; $robot-&gt;ART_CODIGO,
                    'ART_NOMBRE' =&gt; $robot-&gt;ART_NOMBRE,
                    'COSTO' =&gt; $robot-&gt;ART_COSTO,
                    'UNIDAD' =&gt; $robot-&gt;ART_UNIDADV, 'IVA' =&gt; $robot-&gt;ART_IVA);
                $this-&gt;response-&gt;setContentType('application/json', 'UTF-8');
                return $this-&gt;response-&gt;setJsonContent($return_arr)-&gt;send();
            }
            //var_dump($return_arr);
        }
    }
</code></pre>
<p>In the var_dump</p>
<pre><code class="language-php">
    array (size=2)
    0 =&gt; 
    array (size=5)
      'id' =&gt; string 'ARTIC0000000002' (length=15)
      'ART_NOMBRE' =&gt; string 'MEMORIA USB STANDAR 2' (length=21)
      'COSTO' =&gt; string '0' (length=1)
      'UNIDAD' =&gt; string 'U' (length=1)
      'IVA' =&gt; string '0' (length=1)
    1 =&gt; 
      array (size=5)
      'id' =&gt; string 'ARTIC0000000001' (length=15)
      'ART_NOMBRE' =&gt; string 'MAQUINA DE VOTACION' (length=19)
      'COSTO' =&gt; string '0' (length=1)
      'UNIDAD' =&gt; string 'U' (length=1)
      'IVA' =&gt; string '0' (length=1)</code></pre>
<p>IT'Ś OK</p>
<p>But when returning only returns a row in the array, the array not all this I checked with the tools of google chrome</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36349" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36349" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36351" href="#C36351">
                <time itemprop="dateCreated" datetime="2016-07-03T23:48:47-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What does not work exactly? Your final array looks perfect for json output?</p>
<p>Also I would recommend reading this page: <a href="https://docs.phalcon.io/en/latest/reference/models.html">https://docs.phalcon.io/en/latest/reference/models.html</a> Your query is not safe and you could get hacked if you search by user input.</p>
<pre><code class="language-php">// This is not safe. You could get SQL injection
$robots = SpmArticulo::find("ART_NOMBRE LIKE  %'".$_GET['term']."%'");

// This is safe
$robots = SpmArticulo::find(array(
  'conditions' =&gt; 'ART_NOMBRE LIKE :artNumber:',
  'bind' =&gt; array(
     'artNumber' =&gt; '%'. $this-&gt;request-&gt;getQuery('term') .'%'
  )
));</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36351" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36351" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36401" href="#C36401">
                <time itemprop="dateCreated" datetime="2016-07-04T09:23:30-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks has been very helpful.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36401" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36401" data-cf-modified-c31ecde3c006cb27808b6b88-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11975" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>