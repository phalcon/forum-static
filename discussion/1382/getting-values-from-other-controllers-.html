---
layout: default
title: 'Getting values from other controllers? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Getting values from other controllers?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/871/matt-sharp" class="user-moderator-N"><span itemprop="name">matt-sharp</span></a></span>
            <time itemprop="dateCreated" datetime="2014-01-01T02:33:06-07:00">Jan '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-01-01T02:33:06-07:00">Jan '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">8</span>
                </td>
                <td>
                    <label>Views</label><br>954</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/de72ddbf4c51fa96d8ca92953e424428?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/871/matt-sharp" class="user-moderator-N"><span itemprop="name">matt-sharp</span></a></span>
                <span class="karma">4.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1382" href="#C1382">
        <time class="action-date">Jan '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hi. I've just started learning Phalcon and I really like the framework and the documentation. One thing I have trouble doing (same with all the frameworks I try) is handling use cases like the following:</p>
<p>Create a new order: The first step is to select the customer from a table, but if the customer doesn't exist, it must be created (and saved to db) without breaking the work flow.</p>
<p>I can't tell the users &quot;just exit the create order page, go to the customer page, create the customer, then come back and start creating the order again&quot;. </p>
<p>At the moment I use my own framework and do something like this (simplified):</p>
<pre><code class="language-php">
class OrdersController {
    public static function createOrder()
    {
        $customer = CustomersContrller::getCustomer();

        // display new order form with customer details filled in...
    }
}

class CustomersContrller {
    public static function getCustomer()
    {
        if (isset($_GET['customer_id'])) {
            return CustomersModel::findFirst($_GET['customer_id']);
        } elseif (isset($_GET['new_customer'])) {
            return self::createCustomer();
        } else {
            // display list of customers to click on
        }
    }
    public static function createCustomer()
    {
        if (isset($_POST['new_customer'])) {
            // save to db and return newly created record
        } else {
            // display the new customer form
            // NOTE: the program exits after sending the form,
            // so we won't return to the calling function from 
            // inside this 'else' block.
        }
    }
}
</code></pre>
<p>Can anyone recommend a way to do this in Phalcon? (I'm thinking some special routing might do it) Thanks</p>
<p>(I also asked this question at StackOverflow)</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/de72ddbf4c51fa96d8ca92953e424428?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/871/matt-sharp" class="user-moderator-N"><span itemprop="name">matt-sharp</span></a>        </span>
        <br>

        <span class="karma">4.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4807" href="#C4807">
                <time itemprop="dateCreated" datetime="2014-01-01T11:32:46-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I just noticed my typo on CustomersController. Also, bump.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4807" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4807" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4811" href="#C4811">
                <time itemprop="dateCreated" datetime="2014-01-01T14:04:00-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>I don't know how to call (or even if it's possible) a controller action from another controller. But an easy workaround is to implement your getCustomer() in your CustomersModel.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4811" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4811" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4814" href="#C4814">
                <time itemprop="dateCreated" datetime="2014-01-02T11:53:58-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can implement this as you have implemented it in your example. The autoloader will autoload the specified class when it's used.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4814" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4814" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4815" href="#C4815">
                <time itemprop="dateCreated" datetime="2014-01-02T12:04:10-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>using the same syntax: $customer = CustomersContrller::getCustomer(); ??</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4815" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4815" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4816" href="#C4816">
                <time itemprop="dateCreated" datetime="2014-01-02T12:11:47-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes, it's like calling a static function on a class but this class is a controller. Not sure if this is good practice, though.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4816" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4816" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4818" href="#C4818">
                <time itemprop="dateCreated" datetime="2014-01-02T12:43:35-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>OK, good to know (I'm always fascinated by phalcon's flexibility) !</p>
<p>On this discussion</p>
<p><a href="https://stackoverflow.com/questions/20866988/php-mvc-routing-and-getting-values-from-other-controllers-phalconphp-and-other">https://stackoverflow.com/questions/20866988/php-mvc-routing-and-getting-values-from-other-controllers-phalconphp-and-other</a></p>
<p>someone points that it's not a good practice and that's my opinion too. So that's why I've suggested to put all this logic in models classes ...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4818" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4818" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/de72ddbf4c51fa96d8ca92953e424428?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/871/matt-sharp" class="user-moderator-N"><span itemprop="name">matt-sharp</span></a>        </span>
        <br>

        <span class="karma">4.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4819" href="#C4819">
                <time itemprop="dateCreated" datetime="2014-01-02T15:33:13-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for your input guys. I'm going to try to do it like in my example. I agree that it might not be good practice but if I can get it working I'll be happy. </p>
<p>The reason I haven't put getCustomer() in a model class is because it needs to send output to the browser (a list of customers to choose from, or a form to create a new customer). But I'll look at putting more of the logic in the models.</p>
<p>Keep up the great work on Phalcon, it's the best framework I've tried so far.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4819" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4819" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4820" href="#C4820">
                <time itemprop="dateCreated" datetime="2014-01-02T16:16:47-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>you can use some phalcon's great features:
1/ pass a model resultset to the view from your createOrder action </p>
<pre><code class="language-php">$this-&gt;view-&gt;setVar('customers',CustomersModel::getCustomers());</code></pre>
<p>2/ use Phalcon\Tag::select()  in your view:</p>
<pre><code class="language-php">echo $this-&gt;tag-&gt;select(
    array(
        "customer_id",
        $customers,
        "using" =&gt; array("customer_id", "customer_name")
    )
);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4820" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4820" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4821" href="#C4821">
                <time itemprop="dateCreated" datetime="2014-01-02T16:22:19-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>for creating a new customer entry within the create order form, you can use in that form a &quot;create new customer&quot; button that will open a modal window with the new customer form. After submission and success, ajax is your friend, close the modal, update the select list and mark the new entry as selected ...
jquery + some good css+js famework (jquery-ui, bootstrap, zurb foundation ...) may help you a lot </p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4821" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4821" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/177525cf68cabf12fac5fc4c3603ecba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/114/roman-kulish" class="user-moderator-N"><span itemprop="name">roman-kulish</span></a>        </span>
        <br>

        <span class="karma">5.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4826" href="#C4826">
                <time itemprop="dateCreated" datetime="2014-01-03T07:21:10-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Move it out of your controllers into a (business logic, not ORM) model, for example:</p>
<ul>
<li>OrderModel is responsible for managing orders</li>
<li>CustomerModel is responsible for managing customers</li>
</ul>
<p>Your first controller calls OrderModel to create order and it in its turn calls CustomerModel to create and/or return a customer. Your second controller works with CustomerModel only. Both models use ORM models to operate with a database.</p>
<p>It's additional abstraction layer that makes your design more elegant.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4826" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4826" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/de72ddbf4c51fa96d8ca92953e424428?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/871/matt-sharp" class="user-moderator-N"><span itemprop="name">matt-sharp</span></a>        </span>
        <br>

        <span class="karma">4.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4830" href="#C4830">
                <time itemprop="dateCreated" datetime="2014-01-03T20:35:20-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks again guys. I'm going to use le51's suggestion of javascript and ajax to get the job done for now (probably a good idea to brush up on my client-side coding anyway). When I have a bit more experience with Phalcon I'll abstract out the business logic to separate classes. </p>
<p>Awesome feedback team :) much more helpful than some other sites...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4830" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4830" data-cf-modified-55e44ae5c4ec0d0ba6f70661-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1382" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>