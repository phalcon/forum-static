---
layout: default
title: 'Having more than one Controller / Model / View directories for different domains (or other reasons). - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Having more than one Controller / Model / View directories for different domains (or other reasons).</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1533/pixiesky" class="user-moderator-N"><span itemprop="name">Andy Myers</span></a></span>
            <time itemprop="dateCreated" datetime="2014-05-29T03:41:00-07:00">May '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-05-29T03:41:00-07:00">May '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>680</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/47f389ac06cd3be6143a45057a9f8c05?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1533/pixiesky" class="user-moderator-N"><span itemprop="name">Andy Myers</span></a></span>
                <span class="karma">10.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2421" href="#C2421">
        <time class="action-date">May '14</time>
    </a>
</div>
<div class="post-content"><div><p>In CakePHP there is a feature where you can setup a hierarchy of directories for pretty much anything. It works by scanning each directory until it hits the file it needs based on the route. I'm toying with the idea of having one main app and harbouring custom code in the same place.</p>
<p>Example </p>
<pre><code>/app
    /controllers
        /acme.example.com
    /models
    /views
        /acme.example.com
    /public</code></pre>
<p>So say I have an application that covers mostly what clients want but some of the clients have requested a specific feature. Rather than duplicate the entire app and re-host it I would like to tell Phalcon use directory A and B for controllers (or whatever) does Phalcon have such a feature? I only seem to be able to find examples of creating a backend and a frontend. </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/401a5ffd308e346dd317bfc6ea755a9a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1724/Ak-Army" class="user-moderator-N"><span itemprop="name">Ak-Army</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8241" href="#C8241">
                <time itemprop="dateCreated" datetime="2014-05-29T08:21:39-07:00" class="action-date">May '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>U can do it with events, like in the <a href="https://docs.phalcon.io/en/latest/reference/tutorial-invo.html">INVO</a> security.</p>
<p>I think if u create a beforeDispatch event, u can check if u have an extended controller for that project, and than u can forward the request to that controller :)</p>
<p>I hope it's help for u.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8241" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8241" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/47f389ac06cd3be6143a45057a9f8c05?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1533/pixiesky" class="user-moderator-N"><span itemprop="name">Andy Myers</span></a>        </span>
        <br>

        <span class="karma">10.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="8254" data-toggle="modal" data-target="#historyModal">
                edited <span>May '14</span>
              </span><br/><a name="C8254" href="#C8254">
                <time itemprop="dateCreated" datetime="2014-05-30T01:24:27-07:00" class="action-date">May '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well that does give me an option to help me make sure the app makes decisions but what I would like to be able to do is &quot;include&quot; the sub directory in as ALSO the controllers directory. </p>
<p>So, if I have the following:</p>
<pre><code>/app
    /controllers
        /acme.example.com
        AcmeController.php
    OrdersController.php
    AccountsController.php</code></pre>
<p>I want to say: &quot;Look in <code>/controllers</code> first and then <code>/acme.example.com</code> if you can't find it.&quot; So www.example.com/orders/myaction and acme.example.com/orders/myaction would both be the same but acme.example.com/acme/myaction would also work for that sub domain because once it didn't find the controller Phalcon moved on to the next folder it has registered. Currently I can only get Phalcon to accept one folder and that's that. I want to have in my config a routine that includes any folder with the same name as the url so all that needs to be done is to upload a folder and then version control on the core app is much easier. This could turn out to be a rubbish idea I realise but it's my first one.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8254" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8254" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8268" href="#C8268">
                <time itemprop="dateCreated" datetime="2014-05-30T14:51:06-07:00" class="action-date">May '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In your bootstrap file I assume you have something like this:</p>
<pre><code class="language-php">$Loader = new \Phalcon\Loader();
$Loader-&gt;registerDirs($Config-&gt;phalcon-&gt;load_dirs-&gt;toArray());
// put code here
$Loader-&gt;register();</code></pre>
<p>to load your controller directory?</p>
<p>Where I've written <code>put code here</code> you could add code to determine the current requested domain name, then dynamically add it as a directory.  Something like (this is pseudo-code)</p>
<pre><code class="language-php">$domain_name = $_SERVER[‘DOMAIN’];
if(file_exists(‘/path/to/controller/dir/‘.$domain_name)){
    $Loader-&gt;registerDirs(‘/path/to/controller/dir’.$domain_name);
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8268" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8268" data-cf-modified-a7a7b2e46ab4a270d354de0f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2421" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>