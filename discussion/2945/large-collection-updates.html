---
layout: default
title: 'Large Collection Updates - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/23/odm">ODM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Large Collection Updates</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2012/jessecascio" class="user-moderator-N"><span itemprop="name">Jesse Cascio</span></a></span>
            <time itemprop="dateCreated" datetime="2014-07-27T14:24:10-07:00">Jul '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-07-27T14:24:10-07:00">Jul '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>692</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/ee69445b36f4c65f2a6e9cd8481efe86?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2012/jessecascio" class="user-moderator-N"><span itemprop="name">Jesse Cascio</span></a></span>
                <span class="karma">1.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2945" href="#C2945">
        <time class="action-date">Jul '14</time>
    </a>
</div>
<div class="post-content"><div><p>I've been reading through and using the ODM functionality and am having an issue with large updates.  Following the robot example from the docs, lets say I have a collection with a couple million robots and I need to make a large update.  Writing the query in PHP would like:</p>
<pre><code>$db-&gt;robots -&gt;update(['type' =&gt; 'mechanical'], ['$set' =&gt; ['type' =&gt; 'electrical']], ['multiple' =&gt; true]);</code></pre>
<p>When trying to use the ODM I come up with something like:</p>
<pre><code>$robots = Robots::find(array(
    array("type" =&gt; "mechanical")
));

foreach ($robots as $Robot) {
    $Robot-&gt;type = "electrical";
    $Robot-&gt;save();
}</code></pre>
<p>Obviously this is unacceptable due to having to loop through all the Models and make all the extra database calls.  What would be the best way to approach having to update large collections.  I read through the PHQL documentation but I didn't see any examples of how to work with Mongo.  Thanks</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-cf449fed9f91b6388a3b8c9c-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-cf449fed9f91b6388a3b8c9c-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C9789" href="#C9789">
                <time itemprop="dateCreated" datetime="2014-07-27T21:37:15-07:00" class="action-date">Jul '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If this unacceptable you must consider not using an <strong>Object Document Mapper (ODM)</strong> and fall back to the basic MongoClient. <a href="http://php.net/manual/en/book.mongo.php">http://php.net/manual/en/book.mongo.php</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="9789" data-cf-modified-cf449fed9f91b6388a3b8c9c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="9789" data-cf-modified-cf449fed9f91b6388a3b8c9c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2945" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>