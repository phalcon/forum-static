---
layout: default
title: 'How can I realize specific multi-lingual support? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How can I realize specific multi-lingual support?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/6765/Zaxap" class="user-moderator-N"><span itemprop="name">Zaxap</span></a></span>
            <time itemprop="dateCreated" datetime="2016-05-03T11:48:32-07:00">May '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-05-03T11:48:32-07:00">May '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1355</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/aaface2b4f44cdb662c387a930f4c69b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/6765/Zaxap" class="user-moderator-N"><span itemprop="name">Zaxap</span></a></span>
                <span class="karma">11.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11393" href="#C11393">
        <time class="action-date">May '16</time>
    </a>
</div>
<div class="post-content"><div><p>I think, that reasonable to use this directories structure:</p>
<pre><code>// Languages Dirs, English lang
app/langs/en/
- Session_Index.php        | Language file for SessionController and IndexAction
- Session_Login.php        | Language file for SessionController and LoginAction
- Index_Index.php          | Language file for IndexController   and IndexAction

// Controller Dirs
app/controllers/
- SessionController.php
- IndexController.php</code></pre>
<p>Language-files set langs for Actions in controllers including forms and other files.
It must be set in the <em>public/Index.php</em> (<em>services</em>) file and be universal. I think it soulds be like this.</p>
<p>The real multi-language support is until not necessary but will be useful in the future.</p>
<p>I just want to make the website's text in the files.</p>
<p>Thank you!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eff69f4e1760f1b3c652281d4030d3cf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2503/mraspor" class="user-moderator-N"><span itemprop="name">mraspor</span></a>        </span>
        <br>

        <span class="karma">12.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33483" href="#C33483">
                <time itemprop="dateCreated" datetime="2016-05-04T01:21:25-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>How about using phalcon's native translation support:</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/translate.html">https://docs.phalcon.io/en/latest/reference/translate.html</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33483" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33483" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/aaface2b4f44cdb662c387a930f4c69b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6765/Zaxap" class="user-moderator-N"><span itemprop="name">Zaxap</span></a>        </span>
        <br>

        <span class="karma">11.1k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C33483"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/eff69f4e1760f1b3c652281d4030d3cf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        mraspor                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33513" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C33513" href="#C33513">
                <time itemprop="dateCreated" datetime="2016-05-04T03:51:08-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>How about using phalcon's native translation support:</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/translate.html">https://docs.phalcon.io/en/latest/reference/translate.html</a></p>
</blockquote>
<p>Yes, I have read this already)) But I think: it would be right to put the <em>Translate</em> as component in /public/index.php file...
And interact with controller automaticly. Yes, I'll can register <em>function <strong>getTranslation</strong> () { ... }</em> in each controller, and require the languages-files but it's irrational.
Is it possible to do this automatically?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33513" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33513" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eff69f4e1760f1b3c652281d4030d3cf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2503/mraspor" class="user-moderator-N"><span itemprop="name">mraspor</span></a>        </span>
        <br>

        <span class="karma">12.2k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33517" href="#C33517">
                <time itemprop="dateCreated" datetime="2016-05-04T04:53:58-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Actually, you register translation service in $di.</p>
<p>I am using GetText as my translation adapter:</p>
<pre><code class="language-php">
/*
 * Using Gettext adapter from Incubator, otherwise ctxtmsg isn't available
 * but you can use Phalcon\Translate\Adapter\Gettext
 */
use Library\Translate\Adapter\Gettext as TranslationService;

/**
 * Translation service
 *
 * @return array
 */
$di-&gt;setShared('translation', function () use ($di) {

    if (!function_exists('gettext')) {
        throw new \Phalcon\Exception('Please install gettext extension');
    }

    $request = $di-&gt;get('request');
    $session = $di-&gt;get('session');

    $browser_language = $request-&gt;getBestLanguage();

    /**
     * If possible get the $language from the browser
     */
    if (false === strpos($browser_language, '_')) {
        $language = $browser_language . '_' . strtoupper($browser_language) . '.utf8';
    }
    else {
        $language = $browser_language . '.utf8';
    }

    /**
     * If we have $language in the session, use that
     * instead of the browser $language
     */
    // TODO mraspor Add cookie check for locale
    if ($session-&gt;has('language') &amp;&amp; null !== $session-&gt;get('language')) {
        $language = $session-&gt;get('language') . '.utf8';
    }

    /**
     * Set up the default $language
     * Here I am using websiteConfig service to retrieve default language from my config file
     */
    $default_language = $di-&gt;get('websiteConfig')-&gt;defaultLanguage;

    /**
     * Check if the translation directory exists
     */
    $translation_exists = file_exists(APP_PATH . '/app/languages/' . $language)
        ?
        true
        :
        false;

    /**
     * Return gettext for the language
     * (Fall back to the default $language if $language isn't found)
     */
    $translate = new TranslationService(array(
        'locale'        =&gt; $translation_exists
            ?
            $language
            :
            $default_language,
        'defaultDomain' =&gt; 'messages',
        'file'          =&gt; 'messages',
        'directory'     =&gt; APP_PATH . '/app/languages/',
        'category'      =&gt; LC_MESSAGES,
    ));

    return $translate;

});
</code></pre>
<p>And then in whatever controller, I just use:</p>
<pre><code class="language-php">
$this-&gt;translation-&gt;_("string I am translating");
</code></pre>
<p>or in model:</p>
<pre><code class="language-php">
$this-&gt;getDi()-&gt;translation-&gt;_('string I am translating');
#OR
$this-&gt;getDI()-&gt;get('translation')-&gt;_('string I am translating');
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33517" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33517" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/aaface2b4f44cdb662c387a930f4c69b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6765/Zaxap" class="user-moderator-N"><span itemprop="name">Zaxap</span></a>        </span>
        <br>

        <span class="karma">11.1k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C33517"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/eff69f4e1760f1b3c652281d4030d3cf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        mraspor                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33519" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C33519" href="#C33519">
                <time itemprop="dateCreated" datetime="2016-05-04T06:01:13-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Oh! Thanks! You give me enough <em>food for reflection</em>)))
And the last (I hope) question: is the Phalcon has some method to get names of the <em>Controller</em> or <em>Action</em>, depending on the using controller?
Yes, I can get the address of the web-page, and manipulate with them, but I can't be sure, that the chousing part of url exactly will be the <em>Controller</em> or the <em>Action</em>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33519" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33519" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eff69f4e1760f1b3c652281d4030d3cf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2503/mraspor" class="user-moderator-N"><span itemprop="name">mraspor</span></a>        </span>
        <br>

        <span class="karma">12.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33521" href="#C33521">
                <time itemprop="dateCreated" datetime="2016-05-04T06:08:30-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sure:</p>
<pre><code class="language-php">
$this-&gt;dispacher-&gt;getControllerName();
$this-&gt;dispacher-&gt;getActionName();
#OR
$this-&gt;router-&gt;getControllerName();
$this-&gt;router-&gt;getActionName();
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33521" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33521" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/aaface2b4f44cdb662c387a930f4c69b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6765/Zaxap" class="user-moderator-N"><span itemprop="name">Zaxap</span></a>        </span>
        <br>

        <span class="karma">11.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33527" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C33527" href="#C33527">
                <time itemprop="dateCreated" datetime="2016-05-04T10:06:33-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I was founded, but... How should be look the <strong>lang.php</strong> file, if I'll be use the <em>GetText</em> Adapter?</p>
<p>With <em>NativeArray</em> everything is clear:</p>
<p><strong>en.php</strong></p>
<pre><code class="language-php">&lt;?php

// ...

$lang = [
    'text' =&gt; 'The Text!'
];

// ...</code></pre>
<pre><code class="language-php">&lt;?php

// ...

require "../app/languages/en.php";

$translation = new NativeArray([
    "content" =&gt; $lang
]);

// ...</code></pre>
<p>But what about the <em>GetText</em>? How does the &quot;<em>en.php</em>&quot; look here?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33527" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33527" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eff69f4e1760f1b3c652281d4030d3cf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2503/mraspor" class="user-moderator-N"><span itemprop="name">mraspor</span></a>        </span>
        <br>

        <span class="karma">12.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="33553" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C33553" href="#C33553">
                <time itemprop="dateCreated" datetime="2016-05-05T00:36:46-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is my relevant directory tree</p>
<pre><code class="language-code">
├── app
│   ├── languages
│   │   └── hr_HR.utf8
│   │       └── LC_MESSAGES
│   │           ├── messages.mo
│   │           └── messages.po
</code></pre>
<p>So, let's imagine you want to create a translation for German language (along side the above Croatian), you would then add/have </p>
<pre><code class="language-code">
├── app
│   ├── languages
│   │   └── hr_HR.utf8              # Croatian
│   │       └── LC_MESSAGES
│   │           ├── messages.mo
│   │           └── messages.po
│   │   └── de_DE.utf8              # German
│   │       └── LC_MESSAGES
│   │           ├── messages.mo
│   │           └── messages.po
</code></pre>
<p>Let's imagine that your default language is English (which will be shown if no translation is found).</p>
<p>So, your German messages.po file looks like this:</p>
<pre><code class="language-code">
msgid "yes"
msgstr "ja"

msgid "no"
msgstr "nein"

msgid "Sign-in"
msgstr "Anmelden"
</code></pre>
<p>And your Croatian messages.po file looks like this:</p>
<pre><code class="language-code">
msgid "yes"
msgstr "da"

msgid "no"
msgstr "ne"

msgid "Sign-in"
msgstr "Prijava"
</code></pre>
<p>.po files cannot be used as it is. You need to convert them to binary .mo files. I use a tool called Virtaal (<a href="http://virtaal.translatehouse.org/">http://virtaal.translatehouse.org/</a>) for that. Basicly I load a .po file into Virtaal and export a .mo file. This could be of course automated.</p>
<p>And in a controller I use it like this:</p>
<pre><code class="language-php">
$variable = $this-&gt;translation-&gt;_('Sign-in');

$this-&gt;view-&gt;setVars([
    'variable' =&gt; $variable # or directly $this-&gt;translation-&gt;_('Sign-in')
]);
</code></pre>
<p>And then use the above $variable in your view file.</p>
<p>If you want to do translations directly in volt file you can first pass the translation service as a variable (from controller or better from the base controller):</p>
<pre><code class="language-php">
$this-&gt;view-&gt;setVars([
    't' =&gt; $this-&gt;translation
]);
</code></pre>
<p>And then use it in .volt file like this:</p>
<pre><code class="language-code">
{% raw %}{{{% endraw %} t._('Sign-in') {% raw %}}}{% endraw %}
</code></pre>
<p>Hopefully this will set you on a right track.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33553" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33553" data-cf-modified-6aaf0fea2c746128e1ea8b86-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11393" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>