---
layout: default
title: 'Native FastCGI support in Phalcon - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/26/http-environment">HTTP Environment</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Native FastCGI support in Phalcon</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3970/akatasonov" class="user-moderator-N"><span itemprop="name">Andrew Katasonov</span></a></span>
            <time itemprop="dateCreated" datetime="2017-05-25T09:24:11-07:00">May '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-05-25T09:24:11-07:00">May '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>505</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/029f4450af6c1053fcf747ce9afc669b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3970/akatasonov" class="user-moderator-N"><span itemprop="name">Andrew Katasonov</span></a></span>
                <span class="karma">5.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C16187" href="#C16187">
        <time class="action-date">May '17</time>
    </a>
</div>
<div class="post-content"><div><p>I would like to speed up Phalcon web apps even further by embedding a FastCGI functionality into Phalcon. See <a href="https://github.com/PHPFastCGI/php5-fastcgi">https://github.com/PHPFastCGI/php5-fastcgi</a>
The end goal is to keep the application running indefinitely (vs being initialized and then killed for every request) which should make it super fast. However I struggle a bit with where to start. Any tips are greatly appreciated!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48373" href="#C48373">
                <time itemprop="dateCreated" datetime="2017-05-25T09:43:09-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>use cache for the whole response ( redis/ memcache )</p>
<p>anyways ... </p>
<p>make the app runing as a service ( constantly ) like a cli app, make the application accept some object ( $request ) as an aguments from a stream with opening socket connections and serve the user the response. </p>
<p>What i just wrore will boost your app speed by 1000% probably, however by implementing that you will create tons of bugs for sure. </p>
<p>Better use cache and load balancer and server the content from different machines ( same applies for database ) </p>
<p>p.s. make sure your bottleneck is the php code, not something else. Also run profiler on your app and polish it to perfection.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48373" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48373" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48379" data-toggle="modal" data-target="#historyModal">
                edited <span>May '17</span>
              </span><br/><a name="C48379" href="#C48379">
                <time itemprop="dateCreated" datetime="2017-05-26T00:50:10-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>IMHO, this should be solved at the core PHP level, if any. Application as a service approach.
Like<a href="https://forum.phalcon.io/user/4769/Izopi4a"> @Izopi4a</a> said, it would introduce many bugs the other way around.</p>
<p>P.S. This extension does not support PHP7, and it hasn't been updated for 2+ years.... <a href="https://github.com/PHPFastCGI/php5-fastcgi/issues/2">https://github.com/PHPFastCGI/php5-fastcgi/issues/2</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48379" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48379" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Åšlawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48383" data-toggle="modal" data-target="#historyModal">
                edited <span>May '17</span>
              </span><br/><a name="C48383" href="#C48383">
                <time itemprop="dateCreated" datetime="2017-05-26T01:14:05-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The newer and keep updated repository with similar concept(application bootstraped once and stay for all the time in memory) achieved other way - <a href="https://github.com/php-pm/php-pm">https://github.com/php-pm/php-pm</a></p>
<p>Though it doesn't support phalcon, it would require changes in phalcon and how di/request/response stuff works.</p>
<p>This is really nice, but it has it downsides and problems, but for instance symfony + php-pm have similar performance to phalcon.</p>
<p>Though keep in mind how phalcon already works(already whole code base stays in memory as an compiled extensions) - things like those won't give any big performance boost. It will only give performance boost for your php ocde, compiled code performance will stay same.</p>
<p>It might even get slower - due to memory leaks which will happen on things like this.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48383" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48383" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/029f4450af6c1053fcf747ce9afc669b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3970/akatasonov" class="user-moderator-N"><span itemprop="name">Andrew Katasonov</span></a>        </span>
        <br>

        <span class="karma">5.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48385" href="#C48385">
                <time itemprop="dateCreated" datetime="2017-05-26T01:43:41-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you for your great answer<a href="https://forum.phalcon.io/user/3812/Jurigag"> @Jurigag</a>. There will be problems for sure with this approach, at least initially, but nothing too dramatic. Look at the Python world: &quot;web app as a service&quot; concept has been there since stone age. I think it is just silly to initialize and kill the framework for every request in 2017.
Even though, in case of Phalcon (which is awesome), the framework stays in memory and is already fast enough, it is still being initialized and cleaned up on every request.
Then, in a typical, complex enough web app there will be several other PHP libraries/frameworks loaded and initialized using auto loader. These are all dozens (if not hundreds) milliseconds wasted.</p>
<p>Memory leaks can be fixed. Again if we look at uwsgi or any other app service for Python - it is not really a problem there (I'm speaking from experience of having a Python web app running for almost a year without being restarted).</p>
<p>I think it is convincing enough. Anybody wants to participate? :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48385" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48385" data-cf-modified-5a2cd7e693eddedb4eaba94d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="16187" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>