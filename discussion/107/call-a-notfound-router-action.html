---
layout: default
title: 'Call a notFound router action - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Call a notFound router action</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/66/arantir" class="user-moderator-N"><span itemprop="name">arantir</span></a></span>
            <time itemprop="dateCreated" datetime="2013-03-07T03:05:00-07:00">Mar '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-03-07T03:05:00-07:00">Mar '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1503</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">4</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/0a4893b2103244c9dfdb6b83dd334d78?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/66/arantir" class="user-moderator-N"><span itemprop="name">arantir</span></a></span>
                <span class="karma">32.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C107" href="#C107">
        <time class="action-date">Mar '13</time>
    </a>
</div>
<div class="post-content"><div><p>There is more than one situation when 404 is needed. For example, when user try to get access by the route allowed for Ajax only.
So it would be useful to be able to call notFound manually.
Is there any way for this?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-4bb43e502b5b156934630b8b-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-4bb43e502b5b156934630b8b-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">4</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1492c8da3d88198c0361def89bd8c94a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/92/Agent-J" class="user-moderator-N"><span itemprop="name">Eugene</span></a>        </span>
        <br>

        <span class="karma">29.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C434" href="#C434">
                <time itemprop="dateCreated" datetime="2013-03-07T03:34:03-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>How about forward?</p>
<pre><code class="language-php">if(!$this-&gt;request-&gt;isAjax())
{
    $this-&gt;dispatcher-&gt;forward(array(
        "controller" =&gt; "error",
        "action"     =&gt; "notFound"
    ));
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="434" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="434" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1492c8da3d88198c0361def89bd8c94a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/92/Agent-J" class="user-moderator-N"><span itemprop="name">Eugene</span></a>        </span>
        <br>

        <span class="karma">29.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C435" href="#C435">
                <time itemprop="dateCreated" datetime="2013-03-07T03:53:15-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>or better smthg like this</p>
<pre><code class="language-php">$router-&gt;add('/404', [
    'module'     =&gt; 'frontend',
    'controller' =&gt; 'error',
    'action'     =&gt; 'notFound',
])-&gt;setName("404");

// next code is inside controller
$route404 = $this-&gt;router-&gt;getRouteByName('404');
$this-&gt;dispatcher-&gt;forward($route404-&gt;getPaths());</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="435" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="435" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/99c4e429c31ce6e1fd7b95adef882e9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/86/johnnyajax" class="user-moderator-N"><span itemprop="name">johnnyajax</span></a>        </span>
        <br>

        <span class="karma">2.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C436" href="#C436">
                <time itemprop="dateCreated" datetime="2013-03-07T04:24:41-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Or you can use same solution as this forum to display error messages: <a href="https://github.com/phalcon/forum/blob/master/app/controllers/IndexController.php">https://github.com/phalcon/forum/blob/master/app/controllers/IndexController.php</a>
Try <a href="https://forum.phalcon.io/argefgaregrgaerg">https://forum.phalcon.io/argefgaregrgaerg</a>
Just put check for ajax request as in Agent-J first code snippet if(!$this-&gt;request-&gt;isAjax())  or if you have controllre which handle only ajax requests, then you can place this check in initializre method which is executed automatically: <a href="https://docs.phalcon.io/en/latest/reference/controllers.html#initializing-controllers">https://docs.phalcon.io/en/latest/reference/controllers.html#initializing-controllers</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="436" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="436" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1492c8da3d88198c0361def89bd8c94a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/92/Agent-J" class="user-moderator-N"><span itemprop="name">Eugene</span></a>        </span>
        <br>

        <span class="karma">29.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C438" href="#C438">
                <time itemprop="dateCreated" datetime="2013-03-07T04:34:13-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>then you can place this check in initializre method</p>
</blockquote>
<p>Its better use beforeDispatch method</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="438" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="438" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/0a4893b2103244c9dfdb6b83dd334d78?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/66/arantir" class="user-moderator-N"><span itemprop="name">arantir</span></a>        </span>
        <br>

        <span class="karma">32.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C443" href="#C443">
                <time itemprop="dateCreated" datetime="2013-03-07T09:53:49-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Second Agent-J solution looks fine.
I just want to provide single operation sequence for any possible 404 response. setStatusCode() or etc. could be placed to a action's method, but the names of the action and controller are not wanted by me to be written for any 404 need.</p>
<p>I think that not found handling could be implemented a bit better in the framework. Lets remember auto not found for unmatched route but need of user implemented one for matched route and unfounded controller.
According to the specification, the 404 response is sent for any request doesn't provide any data to response. This could be service links (ajax-only) or private/protected app parts accessed by GET, invalid route params, unfounded controller/action, unfounded file, many special realization-related cases like unfounded post/message/user or any other data in database and so on and so on.
And current &quot;errors system&quot; isn't very handy to provide good solution for some part of this cases.</p>
<p>Yes, problem could be solve some way with current capabilities, but it would looks like &quot;crutches&quot; (as such ways called in russian community =)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="443" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="443" data-cf-modified-4bb43e502b5b156934630b8b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="107" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>