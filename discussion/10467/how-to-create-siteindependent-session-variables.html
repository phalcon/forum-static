---
layout: default
title: 'how to create site-independent session variables ? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/28/session">Session</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">how to create site-independent session variables ?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/4775/pheromix" class="user-moderator-N"><span itemprop="name">pheromix</span></a></span>
            <time itemprop="dateCreated" datetime="2016-02-15T05:51:46-07:00">Feb '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-02-15T05:51:46-07:00">Feb '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Feb '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>681</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/1d388ddecdb9cc9d6ba82af4f64dc6f8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/4775/pheromix" class="user-moderator-N"><span itemprop="name">pheromix</span></a></span>
                <span class="karma">7.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C10467" href="#C10467">
        <time class="action-date">Feb '16</time>
    </a>
</div>
<div class="post-content"><div><p>Each time I gave a new version of my project to our tester then he placed the new project within a new root folder ( a new site then ). Inside the php files there are session variables which are created and used. So the problem comes when he opens two sites at the same time to compare the two releases : with the first site he opens a page , then a session variable is created. Now he opens the second site and go to a particular page then he is directly redirected to a particular page because of the session variable from the previous site. So how to create site-independent session variables ?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-96a26fb54f2a31ef57da7019-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-96a26fb54f2a31ef57da7019-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29919" href="#C29919">
                <time itemprop="dateCreated" datetime="2016-02-15T06:01:31-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey, i can't be sure but i think you need this:</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/session.html#isolating-session-data-between-applications">https://docs.phalcon.io/en/latest/reference/session.html#isolating-session-data-between-applications</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29919" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29919" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1d388ddecdb9cc9d6ba82af4f64dc6f8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4775/pheromix" class="user-moderator-N"><span itemprop="name">pheromix</span></a>        </span>
        <br>

        <span class="karma">7.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29921" href="#C29921">
                <time itemprop="dateCreated" datetime="2016-02-15T06:49:55-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>so how to reference a session variable with this setting ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29921" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29921" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29923" href="#C29923">
                <time itemprop="dateCreated" datetime="2016-02-15T07:09:55-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>you dont need ot change your code. Refencing to your variables is all the same. ( i think :-) )</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29923" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29923" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1d388ddecdb9cc9d6ba82af4f64dc6f8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4775/pheromix" class="user-moderator-N"><span itemprop="name">pheromix</span></a>        </span>
        <br>

        <span class="karma">7.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29927" href="#C29927">
                <time itemprop="dateCreated" datetime="2016-02-15T07:30:25-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I wrote this in the public index.php file :</p>
<pre><code>$di-&gt;set('session', function () {
    $t = time();
    $session = new Session(
        array('uniqueId' =&gt; $t)
    );
    $session-&gt;start();
    return $session;
});</code></pre>
<p>Now after loging in then there is a test in a controller :</p>
<pre><code>public function indexAction()
{

    //menu et navigation
    if ( ! $this-&gt;session-&gt;has('user_code') ) {
        $this-&gt;response-&gt;redirect('index');
    } else {
        ...
    }
}</code></pre>
<p>The problem is that now the test always goes to the $this-&gt;response-&gt;redirect('index'); part although it went to the else part before !</p>
<p>So what is wrong ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29927" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29927" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="29929" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '16</span>
              </span><br/><a name="C29929" href="#C29929">
                <time itemprop="dateCreated" datetime="2016-02-15T10:10:44-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>do it like this :</p>
<pre><code class="language-php">
$di-&gt;set('session', function () {
    $session = new Session(
        array('uniqueId' =&gt; 'myapp-1')
    );
    $session-&gt;start();
    return $session;
});</code></pre>
<p>then you <code>print_r($_SESSION);</code> you should see entries for this app only.</p>
<p>you can check this one also : <a href="http://us3.php.net/manual/en/function.session-name.php">http://us3.php.net/manual/en/function.session-name.php</a></p>
<p>and this: <a href="http://stackoverflow.com/questions/5479626/same-domain-different-folder-php-session">http://stackoverflow.com/questions/5479626/same-domain-different-folder-php-session</a></p>
<p>i think you might be miss matching sessions and cookie paths</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29929" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29929" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1d388ddecdb9cc9d6ba82af4f64dc6f8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4775/pheromix" class="user-moderator-N"><span itemprop="name">pheromix</span></a>        </span>
        <br>

        <span class="karma">7.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29947" href="#C29947">
                <time itemprop="dateCreated" datetime="2016-02-16T01:15:23-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>which version of Phalcon does the isolation session setting work ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29947" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29947" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29949" href="#C29949">
                <time itemprop="dateCreated" datetime="2016-02-16T02:35:13-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://github.com/phalcon/cphalcon/blob/2.0.0/phalcon/session/adapter.zep">https://github.com/phalcon/cphalcon/blob/2.0.0/phalcon/session/adapter.zep</a></p>
<p>session adapter doesnt exists in 1.x branches so my guess would be after phalcon 2</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29949" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29949" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1d388ddecdb9cc9d6ba82af4f64dc6f8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4775/pheromix" class="user-moderator-N"><span itemprop="name">pheromix</span></a>        </span>
        <br>

        <span class="karma">7.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29951" href="#C29951">
                <time itemprop="dateCreated" datetime="2016-02-16T03:16:45-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The version I am using is 2.0.8 , and its build date is Sep 26 2015.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29951" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29951" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C29953" href="#C29953">
                <time itemprop="dateCreated" datetime="2016-02-16T03:59:38-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>well based on the source code of the adapter setting it up like i mentioned above, and using $this-&gt;session-&gt;get('my-stored-value'); should be working perfectly.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29953" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29953" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1d388ddecdb9cc9d6ba82af4f64dc6f8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4775/pheromix" class="user-moderator-N"><span itemprop="name">pheromix</span></a>        </span>
        <br>

        <span class="karma">7.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="29959" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '16</span>
              </span><br/><a name="C29959" href="#C29959">
                <time itemprop="dateCreated" datetime="2016-02-16T06:54:43-07:00" class="action-date">Feb '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>well .... I didnt find how to work with the session isolation setting , so I created customized functions to create unique session variables according to the site name :</p>
<p>function sessionExists($name) {
$di = \Phalcon\DI::getDefault();
$session = $di-&gt;getSession();
$tab_script_name = explode(&quot;/&quot;, $_SERVER['SCRIPT_NAME']);
return $session-&gt;has($tab_script<em>name[1].'</em>'.$name);
}</p>
<p>function setSession($name, $value) {
$di = \Phalcon\DI::getDefault();
$session = $di-&gt;getSession();
$tab_script_name = explode(&quot;/&quot;, $_SERVER['SCRIPT_NAME']);
$session-&gt;set($tab_script<em>name[1].'</em>'.$name, $value);
}</p>
<p>function getSession($name) {
$di = \Phalcon\DI::getDefault();
$session = $di-&gt;getSession();
$tab_script_name = explode(&quot;/&quot;, $_SERVER['SCRIPT_NAME']);
return $session-&gt;get($tab_script<em>name[1].'</em>'.$name);
}</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="29959" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="29959" data-cf-modified-96a26fb54f2a31ef57da7019-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="10467" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>