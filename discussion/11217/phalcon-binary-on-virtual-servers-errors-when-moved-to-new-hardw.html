---
layout: default
title: 'Phalcon binary on virtual servers - errors when moved to new hardware - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/6/installation">Installation</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Phalcon binary on virtual servers - errors when moved to new hardware</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1228/tomiford" class="user-moderator-N"><span itemprop="name">tomiford</span></a></span>
            <time itemprop="dateCreated" datetime="2016-04-18T17:21:39-07:00">Apr '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-04-18T17:21:39-07:00">Apr '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>327</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/1cdc943997d4c62517deb4a7aa18ec64?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1228/tomiford" class="user-moderator-N"><span itemprop="name">tomiford</span></a></span>
                <span class="karma">1.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11217" href="#C11217">
        <time class="action-date">Apr '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi </p>
<p>We just had an issue where the hardware of one of our cloud providers failed and they moved our virtual servers to a new hardware. Our phalcon binary though was incompatible with that server and caused the following errors and could not write to the MySQL database:</p>
<p>[pid 7169] AH00052: child pid 7251 exit signal Illegal instruction (4)</p>
<p>Recompiling phalcon on the servers fixed the issue but has opened us up to concerns about using phalcon on virtual servers. </p>
<p>Is phalcon using the settings of the virtualized server or the hardware layer of the device it is on? How can we compile it so phalcon is using the virtual server only so if the virtual server is moved to different hardware phalcon continues to function.  </p>
<p>We are running ubuntu 14.04.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C32775" href="#C32775">
                <time itemprop="dateCreated" datetime="2016-04-19T13:51:02-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Part of the advantages of virtualization is you should be able to move the server onto new hardware with no issue.  This is done because the OS and software running in the OS (ie: Phalcon, and the zephir compiler) <em>think</em> they're running on certain hardware, but that certain hardware is being faked by the virtualization software. Like the Matrix.</p>
<p>The only way I can think of that moving a virtual server could have caused an error like this is if the hardware the virtual server <em>thinks</em> it's running on has changed.  So a misconfiguration of the virtual environment.</p>
<p>To respond to this question directly: &quot;Is phalcon using the settings of the virtualized server or the hardware layer of the device it is on?&quot; - Phalcon has no way to access the underlying hardware layer.  When it talks and interacts with the virtualized server, it thinks it IS talking to the hardware layer.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32775" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32775" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a20d655bbeff97e2c393510348ddb7cd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3162/Graphmatic" class="user-moderator-N"><span itemprop="name">graphmatic</span></a>        </span>
        <br>

        <span class="karma">11.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C32809" href="#C32809">
                <time itemprop="dateCreated" datetime="2016-04-20T06:35:36-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>for my previous Phalcon app, I've cloned the  staging VM HDD (virtualbox) directly on a brand new HDD using dd ( howto available somewhere on the web), so my server was so working exactly as expected (but natively, no more inside a VM)...the dd copy is a long operation, so it's not suitable during dev or server conf, but at this time it's the best way I've found for final deployment.</p>
<p>It's especially usefull cause I can do server conf peacefully at home, and one time I have fully configured a server, I can snapshot the VM and use this later as a template for my next servers...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32809" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32809" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="32855" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '16</span>
              </span><br/><a name="C32855" href="#C32855">
                <time itemprop="dateCreated" datetime="2016-04-21T04:00:42-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This should not happen unless you changed architecture, which is very rare these days when x86 is predominant computer architecture.
For instance, I can run PHP app on RISC architecture and then move it to standard X86 (amd64) architecture w/o any issues. BUT, I need to provide my app valid version of PHP binary (interpreter) to my app on new machine. So the code will run, but without proper compiled version for specific target architecture you just cannot migrate with copy-paste.
So for phalcon this is the important part:</p>
<blockquote>
<p>phalcon.so: ELF 64-bit LSB  shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=43a0aa713aa9b28aaa2b3e89b5b67bb243808e0c, stripped</p>
</blockquote>
<p>In this case, this binary will run only on amd64 machines. For other you need to recompile it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32855" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32855" data-cf-modified-dd3beab1335ebe7f16cd9371-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11217" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>