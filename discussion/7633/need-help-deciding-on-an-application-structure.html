---
layout: default
title: 'Need help deciding on an application structure - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Need help deciding on an application structure</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3779/01i" class="user-moderator-N"><span itemprop="name">Oliver Piotrowski</span></a></span>
            <time itemprop="dateCreated" datetime="2015-07-16T13:55:38-07:00">Jul '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-07-16T13:55:38-07:00">Jul '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>None</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">0</span>
                </td>
                <td>
                    <label>Views</label><br>419</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/1116226a18616045c0d6301931d12715?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3779/01i" class="user-moderator-N"><span itemprop="name">Oliver Piotrowski</span></a></span>
                <span class="karma">4.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C7633" href="#C7633">
        <time class="action-date">Jul '15</time>
    </a>
</div>
<div class="post-content"><div><p>I have been programming in PHP for about 15 years, but have always worked alone coding from scratch, and never 'truely' made the switch to fully fledged OO code as is it generally considered. I've made a lot of use of objects, and have hand written a couple of frameworks from scratch that divide logic from presentation and simplify a lot of common tasks, but I've been using over-filled objects in a very procedural manner, and none of my code is particularly testable.</p>
<p>It's taken me a while to get my head around  the idea of routing via a front controller to an action in a page controller, rather than just using a different pages with if's and elses to do different things. The Phalcon documentation is the first time things are finally starting to sink in.</p>
<p>I've been putting off rewriting my online browser-based game for years and years, partly because it's such a huge task, but partly because I didn't see the point in converting to 'modern' coding styles until I had a good enough idea. After all, when what I have previously written works perfectly well, changing just because people 'say' it's better doesn't make sense.</p>
<p>Anyway... The Application I want to rewrite is non-standard from a structural point of view. There's a hell of a lot more to a browser game than a blog or shopping cart, but I've made the decision on the 'basic' folder structure I want to go with.</p>
<ul>
<li>Controllers</li>
<li>Views</li>
<li>Library [or Engine]</li>
<li>Repositories</li>
<li>Entities</li>
</ul>
<p>It's taken me a while to settle on Library, and Engine might work just as well, but I'm not interested in going OO for the sake of it, so the traditional MVC with either a fat Model or a fat controller doesn't do it for me. The DDD multi-module file structure from the phalcon &quot;mvc-master&quot; examples seems most appropriate to me. But 'Services' didn't feel right to describe what would essentially hold the bulk of the game logic.</p>
<p>The next issue that I'm trying to decide is how to structure the modules. There is not one application and one database, there are multiple databases in use. One for each game world/environment/server (whatever you want to call them) and one for the website. I don't want a different folder of code for each game instance, but I do want at least one layer of seperation between a development/beta test environment and the live games.</p>
<p>This is my current thought, but I'm starting to doubt it when I see how 'modules' are generally used in phalcon apps. <code>define.php</code> is basically the module array that will be used later in the bootstrap in <code>register.php</code>, but provides me with an easy way of building module specific routes prior to registering the modules. That way the appropriate game database can be pulled from the route and used during initialisation.</p>
<ul>
<li>code/</li>
<li>
<ul>
<li>config/</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>modules/</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>define.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>register.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>services.php</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>game/</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>development/</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>config/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>config.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>routing.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>controllers/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>entities/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>library/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>repositories/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>views/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>Module.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>live/</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>config/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>config.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>routing.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>controllers/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>entities/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>library/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>repositories/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>views/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>Module.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>website/</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>config/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>config.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>routing.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>controllers/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>entities/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>library/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>repositories/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>views/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>Module.php</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>vendor/</li>
<li>www/</li>
</ul>
<p>Are 'modules' the right way to do this?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3e9f6e7d4d55058c82fb2aba-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3e9f6e7d4d55058c82fb2aba-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="7633" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>