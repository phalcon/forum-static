---
layout: default
title: 'Page timeout 30 seconds + threading? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Page timeout 30 seconds + threading?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1720/blm14" class="user-moderator-N"><span itemprop="name">blm14</span></a></span>
            <time itemprop="dateCreated" datetime="2018-02-07T16:25:33-07:00">Feb '18</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2018-02-07T16:25:33-07:00">Feb '18</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Feb '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>426</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/82140260df942005abbc598cbba6c688?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1720/blm14" class="user-moderator-N"><span itemprop="name">blm14</span></a></span>
                <span class="karma">40.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C17759" href="#C17759">
        <time class="action-date">Feb '18</time>
    </a>
</div>
<div class="post-content"><div><p>I have a form where a user enters a bunch of x/y coordinates. I am modeling a freezer. </p>
<p>Freezers have 1-N racks, each rack has 1-N boxes, and each box has 1-N grids.</p>
<p>I have a bunch of for loops that look sort of like this in the controller:</p>
<pre><code class="language-php">for($i = 0 ; $i &lt; $numracks ; $i++){
    $rack = new Rack();
    $rack-&gt;assign(array(...));
    $rack-&gt;create();
    for($j = 0 ; $j &lt; $numboxes ; j++){
        $box = new Box();
        $box-&gt;assign(array(...));
        $box-&gt;create();
        for($k = 0 ; $k &lt; $numgrids ; $k++){
            $grid = new Grid();
            $grid-&gt;assign(array(...));
            $grid-&gt;create();
        }
    }
}</code></pre>
<p>And php is timing out after 30 seconds. Is there some way for me to spin this block of code off into its own thread in Phalcon? I don't particularly want to increase the timeout time... rumracks is on the order of 10, and boxes and grids are like 100 so this is supposed to create hundreds of thousands of database objects :(</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-6cd21eef414a363bc228c2c9-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-6cd21eef414a363bc228c2c9-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2619/emiliodeg" class="user-moderator-N"><span itemprop="name">Emilio Degiovanni</span></a>        </span>
        <br>

        <span class="karma">32.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C53861" href="#C53861">
                <time itemprop="dateCreated" datetime="2018-02-07T19:20:39-07:00" class="action-date">Feb '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>and if you use raw sql?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="53861" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="53861" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d10ecfc9a7c21a30f760c726759e57a8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/10669/Pilsenerek" class="user-moderator-N"><span itemprop="name">Micha≈Ç</span></a>        </span>
        <br>

        <span class="karma">8.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C53863" href="#C53863">
                <time itemprop="dateCreated" datetime="2018-02-08T00:14:40-07:00" class="action-date">Feb '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>this is supposed to create hundreds of thousands of database objects</p>
</blockquote>
<p>There are two possible solutions:</p>
<ol>
<li>Adding records in pieces or even one by one (user creates a rack then adds a box etc.)</li>
<li>Queue system: <a href="https://olddocs.phalcon.io/en/3.0.0/reference/queue.html">https://olddocs.phalcon.io/en/3.0.0/reference/queue.html</a></li>
</ol></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="53863" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="53863" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="53865" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '18</span>
              </span><br/><a name="C53865" href="#C53865">
                <time itemprop="dateCreated" datetime="2018-02-08T01:18:52-07:00" class="action-date">Feb '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This should work faster, but with huge record count you may need to adjust timeout:</p>
<pre><code class="language-php">for($i = 0 ; $i &lt; $numracks ; $i++){
    $this-&gt;db-&gt;insertAsDict('racks', [...]);
    $id = $this-&gt;db-&gt;lastInsertId();
    for($j = 0 ; $j &lt; $numboxes ; j++){
        $this-&gt;db-&gt;insertAsDict('boxes', [...]);
        $id = $this-&gt;db-&gt;lastInsertId();
        for($k = 0 ; $k &lt; $numgrids ; $k++){
            $this-&gt;db-&gt;insertAsDict('grid', [...]);
            $id = $this-&gt;db-&gt;lastInsertId();
        }
    }
}</code></pre>
<p>If this does not work for the task, I would probably use Queue like Michael suggested.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="53865" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="53865" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7d2d403523c5564acf4a2f1966a43e25?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/10783/boldschoolgirl" class="user-moderator-N"><span itemprop="name">boldschoolgirl</span></a>        </span>
        <br>

        <span class="karma">67</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="53873" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '18</span>
              </span><br/><a name="C53873" href="#C53873">
                <time itemprop="dateCreated" datetime="2018-02-08T23:10:02-07:00" class="action-date">Feb '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hot sizzling call girls in Bangalore available 24X7 for full satisfaction. You will get affordable, rewarding Escorts in Bangalore Service, Hire Model Bangalore Escorts. So hire an escort when you are leading a stressful life. So prepare yourself for an amazing and beautiful experience. You can find at <a href="https://www.boldschoolgirl.com/">https://www.boldschoolgirl.com/</a> here and Book Now.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="53873" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="53873" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C53875" href="#C53875">
                <time itemprop="dateCreated" datetime="2018-02-09T04:53:48-07:00" class="action-date">Feb '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/10783/boldschoolgirl">@boldschoolgirl</a> nah, we programmers are shy creatures, we dont just mingle with beautiful women :D</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="53875" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="53875" data-cf-modified-6cd21eef414a363bc228c2c9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="17759" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>