---
layout: default
title: 'Composer and Autoloading - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/27/external-tools">External Tools</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Composer and Autoloading</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garbé</span></a></span>
            <time itemprop="dateCreated" datetime="2014-04-07T14:26:12-07:00">Apr '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-04-07T14:26:12-07:00">Apr '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">15</span>
                </td>
                <td>
                    <label>Views</label><br>12766</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garbé</span></a></span>
                <span class="karma">24.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2016" href="#C2016">
        <time class="action-date">Apr '14</time>
    </a>
</div>
<div class="post-content"><div><p>Since we like Phalcon and composer, we're using both of them.</p>
<p>What I don't like is to have two different autoloaders so I wrote this part of code (which i'm not very proud of), to be able to use Phalcon autoloader instead of composer one :</p>
<pre><code class="language-php">$loader = new \Phalcon\Loader();
$namespaces = [
    // internal namespaces which could also be done proper using composer.json
];
// get namespaces from Composer
$map = require $config-&gt;application-&gt;vendorDir . 'composer/autoload_namespaces.php';

foreach ($map as $k =&gt; $values) {
    $k = trim($k, '\\');
    if (!isset($namespaces[$k])) {
        $dir = '/' . str_replace('\\', '/', $k) . '/';
        $namespaces[$k] = implode($dir . ';', $values) . $dir;
    }
}
$loader-&gt;registerNamespaces($namespaces);

$classMap = require $config-&gt;application-&gt;vendorDir . 'composer/autoload_classmap.php';
$loader-&gt;registerClasses($classMap);

$loader-&gt;register();</code></pre>
<p>this code doesn't take care of PSR4 composer parts, but at this time it does the job.</p>
<p>What do you think of it ?</p>
<p>I've got one problem with it, Phalcon loader seems to lack the ability to have multiple dir for the same namespace which exists in composer.
At this time i've got incubator &amp; dev-tools in my projet, so one of the two projects is not treated in this autoloader. Is it me or does phalcon lacks this functionality ?</p>
<p>Duplicate from an issue posted on github (<a href="https://github.com/phalcon/incubator/issues/164">https://github.com/phalcon/incubator/issues/164</a>), but I really don't know where it should be posted... </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-5b5a208eac9e687d8e50586d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-5b5a208eac9e687d8e50586d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1ea6dd91fb1ca75a6d77cf0fae89e5f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/522/nexik" class="user-moderator-N"><span itemprop="name">Tomasz Ślązok</span></a>        </span>
        <br>

        <span class="karma">7.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6945" href="#C6945">
                <time itemprop="dateCreated" datetime="2014-04-07T14:58:58-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You just using composer one with proper psr-4 configuration in composer.json</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6945" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6945" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/737648ffa2e148ac2f82db46a84e2e8c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/403/unisys12" class="user-moderator-N"><span itemprop="name">Phillip Jackson</span></a>        </span>
        <br>

        <span class="karma">17.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6955" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C6955" href="#C6955">
                <time itemprop="dateCreated" datetime="2014-04-07T21:47:56-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/OlivierGarb">@OlivierGarb</a>é, I couldn't agree more. We need to look at what it would take the get this working. </p>
<p>What if we play with some of the config options in Composer, such as the <a href="https://getcomposer.org/doc/04-schema.md#config">Vendor-Dir</a>. This way, everything Composer downloads goes into a folder that Phalcon already autoloads. Such as a composer.json as this <em>(not tested, just thinking outload mostly)</em></p>
<pre><code class="language-json">
{
    "require" : {
        "erusev/parsedown": "dev-master",
        "jeremykendall/password-validator": "dev-master"
    },

    "config" : {
        "vendor-dir" : "app/library"
    }
}
</code></pre>
<p>Maybe a simpler approach? I haven't played with it, but... looks promising.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6955" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6955" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garbé</span></a>        </span>
        <br>

        <span class="karma">24.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6971" href="#C6971">
                <time itemprop="dateCreated" datetime="2014-04-08T03:45:37-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/522/nexik">@nexik</a> : i don't want to use composer autoloader : if I use Phalcon is for it's performance and to take advantages of it's features. So using composer autoloading instead of phalcon one is completely feasable (and it works), but it's not my option.</p>
<p><a href="https://forum.phalcon.io/user/403/unisys12">@unisys12</a> : the Phalcon Loader don't work the same as composer one and each composer package has it's own subdirectory in which PSR-0 data are defined, so we can't &quot;only&quot; define a global autoloader directory. Moreover, composer has different autoloads types : PSR0 , PSR4,  classes, requires ... so if we want to &quot;change&quot; this part we have to mimick all.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6971" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6971" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6972" href="#C6972">
                <time itemprop="dateCreated" datetime="2014-04-08T04:35:08-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>When you install any plug-in from Composer, look closely at the files <strong>autoload_namespaces.php</strong>  and  <strong>autoload_real.php</strong>  in  <strong>vendor/composer/</strong> folder.
When you look at the detail <a href="https://docs.phalcon.io/en/latest/reference/loader.html">https://docs.phalcon.io/en/latest/reference/loader.html</a> you will see, how to use those files. :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6972" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6972" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garbé</span></a>        </span>
        <br>

        <span class="karma">24.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6974" href="#C6974">
                <time itemprop="dateCreated" datetime="2014-04-08T05:03:26-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>HI<a href="https://forum.phalcon.io/user/659/oleg578"> @oleg578</a> !</p>
<p>I've looked onto these two files hence the code posted in my first post.</p>
<p>My problem is this one :</p>
<blockquote>
<p>Phalcon loader seems to lack the ability to have multiple dir for the same namespace which exists in composer. At this time i've got incubator &amp; dev-tools in my projet, so one of the two projects is not treated in this autoloader. Is it me or does phalcon lacks this functionality ?</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6974" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6974" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6978" href="#C6978">
                <time itemprop="dateCreated" datetime="2014-04-08T05:44:10-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Phalcon, as well as Composer. fully PSR-0 compliant. You can use those files in Phalcon Loader, as wel as you use it in Composer. Look Namespace etc.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6978" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6978" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/737648ffa2e148ac2f82db46a84e2e8c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/403/unisys12" class="user-moderator-N"><span itemprop="name">Phillip Jackson</span></a>        </span>
        <br>

        <span class="karma">17.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6979" href="#C6979">
                <time itemprop="dateCreated" datetime="2014-04-08T05:46:47-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well, taking a look at the forum repo, I found that in <a href="https://github.com/phalcon/forum/blob/master/public/index.php">index.php</a> of the public dir, all they did was add a require line to the Composer autoloader as well as one to the system loader. </p>
<pre><code class="language-php">/**
 * Include the loader
 */
require APP_PATH . "/app/config/loader.php";

/**
 * Include composer autoloader
 */
require APP_PATH . "/vendor/autoload.php";</code></pre>
<p>Simple enough. You can take a look at what they are autloading in their <a href="https://github.com/phalcon/forum/blob/master/composer.json">composer.json</a>.</p>
<p>As for not wanting to use the Composer autloader, because it might be slower, well... I wouldn't think you would take that big of a performance hit from it. That is unless you plan on making an app with as many dependicies as Laravel or Symfony.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6979" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6979" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6980" href="#C6980">
                <time itemprop="dateCreated" datetime="2014-04-08T05:59:37-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>According to PSR, you can use namespaces in your Loader. This is work better and faster.
You can use namespaces from your plugin from Composer repo.
I already showed you how to do it.
It has already been tested in the other projects. It's very simple.</p>
<pre><code class="language-php">$loader = new \Phalcon\Loader();

$loader-&gt;registerNamespaces([
    'YourNameSpace' =&gt; \dirname(__DIR__),
]);
</code></pre>
<p>That's all, which Phalcon Loader need.</p>
<p>Just add namespace from composer loader :</p>
<p><strong>autoload_namespaces.php</strong> file example</p>
<pre><code class="language-php">&lt;?php

// autoload_namespaces.php @generated by Composer

$vendorDir = dirname(dirname(__FILE__));
$baseDir = dirname($vendorDir);

return array(
    'Phalcon' =&gt; array($vendorDir . '/phalcon/devtools/scripts'),
);
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6980" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6980" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garbé</span></a>        </span>
        <br>

        <span class="karma">24.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6983" href="#C6983">
                <time itemprop="dateCreated" datetime="2014-04-08T07:39:16-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Oleg">@Oleg</a> : i've looked on those files before, and thats why i've done this part :</p>
<pre><code class="language-php">// get namespaces from Composer
$map = require $config-&gt;application-&gt;vendorDir . 'composer/autoload_namespaces.php';

foreach ($map as $k =&gt; $values) {
    $k = trim($k, '\\');
    if (!isset($namespaces[$k])) {
        $dir = '/' . str_replace('\\', '/', $k) . '/';
        $namespaces[$k] = implode($dir . ';', $values) . $dir;
    }
}
$loader-&gt;registerNamespaces($namespaces);</code></pre>
<p>because what you propose don't work : Phalcon loader want's an exact mapping between namespace and dir, whereas composer will add namespaces &quot;as dir&quot; after the dir</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6983" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6983" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/737648ffa2e148ac2f82db46a84e2e8c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/403/unisys12" class="user-moderator-N"><span itemprop="name">Phillip Jackson</span></a>        </span>
        <br>

        <span class="karma">17.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7015" href="#C7015">
                <time itemprop="dateCreated" datetime="2014-04-08T20:14:48-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well, I played around a bit tonight and found something sorta kinda interesting when considering Autoloading and Composer.</p>
<p>I had my app configurated to load my Composer dependicies in the following way:</p>
<pre><code class="language-php">$loader-&gt;registerNamespaces(
    array(
        'JeremyKendall\Password' =&gt; __DIR__ . '/../../vendor/jeremykendall/password-validator/src/JeremyKendall/Password/'
        )
)-&gt;register();

$loader-&gt;registerClasses(
    array(
        'ParseDown' =&gt;  __DIR__ . '/../../vendor/erusev/parsedown/Parsedown.php'
    )
)-&gt;register();</code></pre>
<h6>One is loaded through Namespaces, since it is properly namespaced and the other is not, so I used ClassMap.</h6>
<p>This is a webgrind screen shot I took over the weekend, when comparing something else, with the above configuration.
<img src="https://googledrive.com/host/0B-kKCIm8tW4gcGtYdG1VQ2xscFk" alt="Phalcon_WebGrind" /></p>
<p>Today, I removed all this and placed the require statement in my index.php, as I stated above and got this result :
<img src="https://googledrive.com/host/0B-kKCIm8tW4gU3k1Y3hfRzVCNDQ" alt="Phalcon_WebGrind_Composer_Index" /></p>
<p>Notice the extra calls to Composer and the incresed time to execute? Notice how in the first image that there are no calls to Compser, of course, and Phalcon handles all the autoloading for all the files in one funtion call. A little more typing, but way more performent I think.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7015" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7015" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garbé</span></a>        </span>
        <br>

        <span class="karma">24.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="7021" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C7021" href="#C7021">
                <time itemprop="dateCreated" datetime="2014-04-09T02:49:32-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/403/unisys12">@unisys12</a> : that's my point and that's why i want to use a generic code with Phalcon loader using composer info.</p>
<p>Have you tried my code ? it should be between 1 and 2 in terme of time, but (from my point of view) the main advantage is that you really use composer info to autoload data.</p>
<p>little update on the loop as it wasn't working in all cases</p>
<pre><code class="language-php">foreach ($map as $k =&gt; $values) {
    $k = trim($k, '\\');
    if (!isset($namespaces[$k])) {
        $dir = '/' . str_replace('\\', '/', $k) . '/';
        $namespaces[$k] = implode($dir . ';', $values) . $dir;
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7021" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7021" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/737648ffa2e148ac2f82db46a84e2e8c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/403/unisys12" class="user-moderator-N"><span itemprop="name">Phillip Jackson</span></a>        </span>
        <br>

        <span class="karma">17.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7030" href="#C7030">
                <time itemprop="dateCreated" datetime="2014-04-09T05:42:05-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Olivier">@Olivier</a>, Yeah I tried it out this morning and it is not loading everything. When troubleshooting the issue, I noticed that Composer is placing Parsedown in the namespaces array, which it shouldn't because it is not namespaced at all. Weird, but when I require the composer autoloader in my index or call it the way I was originally (as stated above, manually entering each file or namespace) everything works. Also, even though the password validator library is properly namespaced, it is only loading the core file and no others. This causes methods that are further down in the library unreachable. I compared my current autoloader to the one in my Laravel version of this same project and everything is where it is suppose to be, weird issue. Yes, I performed a 'dump-autoload' and even a 'self-update'.</p>
<p>I will play with it more tonight, when I get home from work. I think you are on to something, it just needs a little more flushing out. If you can come up with a more performant way to utilize Composer, that would be great. Flush out the idea in PHP, rewrite it in Zephir and see if you can get it worked into the core. That would be awsome. I will try to help anyway I can.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7030" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7030" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garbé</span></a>        </span>
        <br>

        <span class="karma">24.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="7061" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C7061" href="#C7061">
                <time itemprop="dateCreated" datetime="2014-04-09T15:45:18-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>it's due to an error in the parsedown composer.json :</p>
<p><a href="https://github.com/erusev/parsedown/blob/master/composer.json#L16">https://github.com/erusev/parsedown/blob/master/composer.json#L16</a></p>
<p>it should be:</p>
<p>&quot;autoload&quot;: { &quot;classmap&quot;: [&quot;Parsedown.php&quot;] }</p>
<p>you should ask the author to fix</p>
<p>Edit : in fact not an error, but an authorized way from composer : <a href="https://getcomposer.org/doc/04-schema.md#psr-0">https://getcomposer.org/doc/04-schema.md#psr-0</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7061" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7061" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/737648ffa2e148ac2f82db46a84e2e8c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/403/unisys12" class="user-moderator-N"><span itemprop="name">Phillip Jackson</span></a>        </span>
        <br>

        <span class="karma">17.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7243" href="#C7243">
                <time itemprop="dateCreated" datetime="2014-04-15T18:03:29-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey<a href="https://forum.phalcon.io/user/662/ogarbe"> @ogarbe</a>! Just wanted to share a little something with you. I was playing around with Composer some more, at the suggestion of <a href="https://maxoffsky.com/">Max Surguy</a>, and realized that I was not using an optimized autoload.php in my example above (about using <em>require /../../vendor/autoload.php</em> inside index.php). After running the command <em>composer dump-autoload --optimize</em>, I still had all the extra function calls from Composer, but found that it made little to no different in the total execution time of page loads. Were as before, it was adding 30+ ms to the page. </p>
<p>Was just wondering if you were running this command? If so, then we really need to take your code and flush it out.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7243" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7243" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40377" href="#C40377">
                <time itemprop="dateCreated" datetime="2016-09-18T17:04:30-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm using <code>registerFiles()</code> with Phalcon Loader component to include Composer autoloader:</p>
<pre><code class="language-php">//public registerDirs (array $directories, [mixed $merge])
//Register directories in which “not found” classes could be found

//Include composer autoloader - Phalcon way
$loader-&gt;registerFiles([APP_PATH . '/vendor/autoload.php']);

//composer default
//require APP_PATH . '/vendor/autoload.php';</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40377" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40377" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e6f3e4bab0da88ca16fe1e50078ec864?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9069/Meint-Willem" class="user-moderator-N"><span itemprop="name">Meint-Willem</span></a>        </span>
        <br>

        <span class="karma">891</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="46075" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C46075" href="#C46075">
                <time itemprop="dateCreated" datetime="2017-02-22T13:02:21-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>With the help of this thread i came to the following working solution.</p>
<p>Important notice though, it only works with PHP 5.5 or greater, since you need to run at least Phalcon 3.0.x.  Include/require would do the job aswell.</p>
<pre><code class="language-php">&lt;?php
$loader = new \Phalcon\Loader();

/**
 * Register directories for the Phalcon autoloader
 */
$loader-&gt;registerDirs(
    [
        $config-&gt;application-&gt;controllersDir,
        $config-&gt;application-&gt;modelsDir
    ]
);

/**
 * Register Files, composer autoloader
 */
$loader-&gt;registerFiles(
    [
        APP_PATH . '/vendor/autoload.php'
    ]
);

/**
 * Register Autoloader
 */
$loader-&gt;register();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46075" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46075" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C46077" href="#C46077">
                <time itemprop="dateCreated" datetime="2017-02-22T16:37:16-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Meint">@Meint</a>-Willem IMHO, PHP 5.5 should not be used anyway as it is marked as deprecated. More important to note with this approach that it'll work only with Phalcon 3.0.x and not 2.0.x. as <code>registerFiles()</code> Loader method exist only in 3.0.x series.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46077" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46077" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e6f3e4bab0da88ca16fe1e50078ec864?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9069/Meint-Willem" class="user-moderator-N"><span itemprop="name">Meint-Willem</span></a>        </span>
        <br>

        <span class="karma">891</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C46077"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Jonathan Aaron Steel                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="46121" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C46121" href="#C46121">
                <time itemprop="dateCreated" datetime="2017-02-24T05:18:56-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p><a href="https://forum.phalcon.io/user/0/Meint">@Meint</a>-Willem IMHO, PHP 5.5 should not be used anyway as it is marked as deprecated. More important to note with this approach that it'll work only with Phalcon 3.0.x and not 2.0.x. as <code>registerFiles()</code> Loader method exist only in 3.0.x series.</p>
</blockquote>
<p>I'm using PHP7 myself but you need PHP &gt;= 5.5 to run  Phalcon 3.0.x yeah, i'll add it to the above response, cheers</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46121" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46121" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/905034fb66d571cba29d906af858c8b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7889/mgr1286" class="user-moderator-N"><span itemprop="name">mgr1286</span></a>        </span>
        <br>

        <span class="karma">139</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C46075"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/e6f3e4bab0da88ca16fe1e50078ec864?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Meint-Willem                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="46251" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '17</span>
              </span><br/><a name="C46251" href="#C46251">
                <time itemprop="dateCreated" datetime="2017-03-01T00:39:40-07:00" class="action-date">Mar '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks it worked for me after a little update:</p>
<p>/**</p>
<ul>
<li>Register Files, composer autoloader
*/
$loader-&gt;registerFiles([$config-&gt;application-&gt;vendorDir . 'autoload.php']);</li>
</ul>
<p>/**</p>
<ul>
<li>Register Autoloader
*/
$loader-&gt;register();</li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46251" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46251" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e5d7b20778d2b69625dcd0f3a935f829?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/10543/alukaa" class="user-moderator-N"><span itemprop="name">alukaa</span></a>        </span>
        <br>

        <span class="karma">529</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C52885" href="#C52885">
                <time itemprop="dateCreated" datetime="2017-12-13T19:09:49-07:00" class="action-date">Dec '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Olivier">@Olivier</a>
just use both composer autoload and phalcon loader will slow down application speed.
just i defined a classs use namespace and palconlo loader,but composer will also try to find this class,althrough composer can not find this class, but every time when i use phalcon loader class, composer will execute all the logic of it's loading class</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="52885" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="52885" data-cf-modified-5b5a208eac9e687d8e50586d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2016" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>