---
layout: default
title: 'Assets Management example with layout file? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/26/http-environment">HTTP Environment</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Assets Management example with layout file?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3916/zhegwood" class="user-moderator-N"><span itemprop="name">Zach</span></a></span>
            <time itemprop="dateCreated" datetime="2015-11-06T09:47:53-07:00">Nov '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-11-06T09:47:53-07:00">Nov '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>878</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/e00a6fdd3e722135512e013b7f1e9693?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3916/zhegwood" class="user-moderator-N"><span itemprop="name">Zach</span></a></span>
                <span class="karma">17.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C9343" href="#C9343">
        <time class="action-date">Nov '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, I'm trying to integrate Assets Management into my application.  I'm running into errors and can't seem to find any examples of how to use Assets Management within a layout.</p>
<p>What I have right now is this in my layout.phtml:</p>
<pre><code class="language-php">    &lt;!DOCTYPE html&gt;
    &lt;html lang="en" data-ng-app="MyApp"&gt;
        &lt;head&gt;
            &lt;title&gt;MyApp&lt;/title&gt;
            &lt;meta charset="utf-8"&gt;
            &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
            &lt;meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"&gt;

            &lt;!-- Foundation CSS --&gt;
            &lt;link href="/lib/foundation/css/foundation.min.css" rel="stylesheet"/&gt;

            &lt;!-- JQuery UI CSS --&gt;
            &lt;link href="/lib/jquery-ui/jquery-ui.min.css" rel="stylesheet"/&gt;

            &lt;style type="text/css"&gt;
                [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
                    display: none !important;
                }
            &lt;/style&gt;

            &lt;!-- LESS CSS --&gt;
            &lt;link rel="stylesheet/less" type="text/css" href="/css/style.less" /&gt;
            &lt;script type="text/javascript" src="/lib/less/dist/less.min.js"&gt;&lt;/script&gt;

            &lt;?php $this-&gt;assets-&gt;ouputJs(); ?&gt;

            ...</code></pre>
<p>and in my ControllerBase, I have this:</p>
<pre><code class="language-php">    public function beforeExecuteRoute(Dispatcher $dispatcher)
    {
        $this-&gt;assets-&gt;addJs('/lib/foundation/js/vendor/modernizr.js')
            -&gt;addJs('/lib/jquery/jquery.min.js')
            -&gt;addJs('/lib/angular/angular.min.js')-&gt;join(true);
    }</code></pre>
<p>I'm getting errors of call to undefined method of outputJs() and join().  I'm guessing I'm missing a use or am I doing this completely wrong?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C25969" href="#C25969">
                <time itemprop="dateCreated" datetime="2015-11-06T10:16:27-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i noticed something fishy there aswell, i am nto sure what is the &quot;real&quot; fix, but this is how i use my assests</p>
<pre><code class="language-php">$assetManager-&gt;collection('js')
                -&gt;addJs('js' . DS . 'vendor.js')
                -&gt;addJs('js' . DS . 'scripts' . DS . 'Utils.js');</code></pre>
<p>and then in my layout i have </p>
<pre><code class="language-php">
&lt;?php
            $this-&gt;assets-&gt;outputJs('js');
        ?&gt;</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="25969" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="25969" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e00a6fdd3e722135512e013b7f1e9693?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3916/zhegwood" class="user-moderator-N"><span itemprop="name">Zach</span></a>        </span>
        <br>

        <span class="karma">17.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C25971" href="#C25971">
                <time itemprop="dateCreated" datetime="2015-11-06T10:17:52-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>How do you define $assetManager?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="25971" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="25971" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C25973" href="#C25973">
                <time itemprop="dateCreated" datetime="2015-11-06T10:24:54-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code class="language-php">
$this-&gt;di-&gt;set('assets', function(){

            $assetManager = new \Phalcon\Assets\Manager();

            $assetManager-&gt;collection('css')
                -&gt;addCss('css' . DS . 'vendor.css')
                -&gt;addCss('css' . DS . 'bootstrapValidator.min.css');

            $assetManager-&gt;collection('js')
                -&gt;addJs('js' . DS . 'vendor.js')
                -&gt;addJs('js' . DS . 'scripts' . DS . 'Utils.js')
                -&gt;addJs('js' . DS . 'bootstrapValidator.min.js')
                -&gt;addJs('js' . DS . 'script.js');

            return $assetManager;
}, true);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="25973" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="25973" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e00a6fdd3e722135512e013b7f1e9693?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3916/zhegwood" class="user-moderator-N"><span itemprop="name">Zach</span></a>        </span>
        <br>

        <span class="karma">17.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26001" href="#C26001">
                <time itemprop="dateCreated" datetime="2015-11-06T14:41:19-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Grr... Still getting errors.  Added in my services.php:</p>
<pre><code class="language-php">    $di-&gt;set('assets',function(){
        $assetManager = new \Phalcon\Assets\Manager();
        return $assetManager;
    });</code></pre>
<p>..and in my controller:</p>
<pre><code class="language-php">    public function initialize() {
        $assetManager = $this-&gt;getDi()-&gt;getShared('assets');

        $assetManager-&gt;collection('js')-&gt;addJs('/lib/foundation/js/vendor/modernizr.js')
            -&gt;addJs('/lib/jquery/jquery.min.js')
            -&gt;addJs('/lib/angular/angular.min.js')-&gt;join(true);

        $this-&gt;view-&gt;setTemplateAfter('layout');
    }</code></pre>
<p>...and in my layout:</p>
<pre><code class="language-php">    &lt;?php $this-&gt;assets-&gt;ouputJs('js'); ?&gt;</code></pre>
<p>I'm getting the error: PHP Fatal error:  Call to undefined method Phalcon\Assets\Manager::ouputJs() in /opt/www/html/zipline/app/views/layouts/layout.phtml on line 25.</p>
<p>If I print_r $assetManager, I see the js files have been added.  Seems to be a problem with the display.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26001" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26001" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26003" href="#C26003">
                <time itemprop="dateCreated" datetime="2015-11-06T15:54:58-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>did you set &quot;assets&quot; service as shared ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26003" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26003" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e00a6fdd3e722135512e013b7f1e9693?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3916/zhegwood" class="user-moderator-N"><span itemprop="name">Zach</span></a>        </span>
        <br>

        <span class="karma">17.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26007" href="#C26007">
                <time itemprop="dateCreated" datetime="2015-11-06T16:26:59-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It's set up the same way the other services are set up and I access them as above... cache, other custom services, etc.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26007" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26007" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26023" href="#C26023">
                <time itemprop="dateCreated" datetime="2015-11-07T02:03:03-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>jsut try with <code>$di-&gt;setShared('assets', function....);</code></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26023" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26023" data-cf-modified-2bc6b883d1069f203f8eaa21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="9343" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>