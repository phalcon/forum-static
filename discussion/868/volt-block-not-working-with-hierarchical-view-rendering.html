---
layout: default
title: 'Volt block not working with hierarchical view rendering - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/3/volt">Volt</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Volt block not working with hierarchical view rendering</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/520/taehtinen" class="user-moderator-N"><span itemprop="name">Mika Tähtinen</span></a></span>
            <time itemprop="dateCreated" datetime="2013-09-07T10:07:12-07:00">Sep '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-09-07T10:07:12-07:00">Sep '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>3898</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">2</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c6891e9a6c60265eaf34aa53684579ce?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/520/taehtinen" class="user-moderator-N"><span itemprop="name">Mika Tähtinen</span></a></span>
                <span class="karma">8.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C868" href="#C868">
        <time class="action-date">Sep '13</time>
    </a>
</div>
<div class="post-content"><div><p>I'm using the automatic hierarchical view rendering. In my views/index.volt I have a block defined for extra javascript the action view might add:</p>
<pre><code class="language-volt">    &lt;div class="container"&gt;
        {% raw %}{{{% endraw %} content() {% raw %}}}{% endraw %}
    &lt;/div&gt;
    {% raw %}{{{% endraw %} javascript_include('js/bootstrap.min.js') {% raw %}}}{% endraw %}
    {% raw %}{{{% endraw %} javascript_include('js/jquery-2.0.3.min.js') {% raw %}}}{% endraw %}
    {% raw %}{{{% endraw %} javascript_include('js/knockout-2.3.0.min.js') {% raw %}}}{% endraw %}
    {% raw %}{%{% endraw %} block scripts {% raw %}%}{% endraw %}{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>In action view there's a definition for knockout viewmodel:</p>
<pre><code class="language-volt">{% raw %}{%{% endraw %} block scripts {% raw %}%}{% endraw %}
&lt;script type="text/javascript"&gt;
    // ...
&lt;/script&gt;
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}</code></pre>
<p>But the scripts block ends up being printed with the content before the javascript includes. Have I understood the block usage correctly? Is the block not supported with the automatic hierarchical view rendering and should I explicitly define the inheritance to get it working? Using phalcon 1.2.3.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-5198d9efc93560b35cacb061-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-5198d9efc93560b35cacb061-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3352" href="#C3352">
                <time itemprop="dateCreated" datetime="2013-09-07T14:10:39-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In the extended view, you need to set which template must be extended:</p>
<pre><code class="language-php">{% raw %}{%{% endraw %} extends "templates/parent.volt" {% raw %}%}{% endraw %}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3352" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3352" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9e9a8b8fa13091987661878c863a70b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1030/herlon214" class="user-moderator-N"><span itemprop="name">Herlon Aguiar</span></a>        </span>
        <br>

        <span class="karma">10</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="5442" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C5442" href="#C5442">
                <time itemprop="dateCreated" datetime="2014-02-06T16:42:49-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It didn't worked for me :(</p>
<pre><code class="language-php">#app/views/index.volt
# (..)
&lt;script src="{% raw %}{{{% endraw %}url("bower_components/jquery/jquery.js"){% raw %}}}{% endraw %}"&gt;&lt;/script&gt;
    &lt;script src="{% raw %}{{{% endraw %}url("bower_components/foundation/js/foundation.min.js"){% raw %}}}{% endraw %}"&gt;&lt;/script&gt;
    &lt;script src="{% raw %}{{{% endraw %}url("js/app.js"){% raw %}}}{% endraw %}"&gt;&lt;/script&gt;
    {% raw %}{%{% endraw %} block extraJs {% raw %}%}{% endraw %}

    {% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}

# (..)</code></pre>
<pre><code class="language-php">#app/views/panel/index.volt
{% raw %}{%{% endraw %} extends 'index.volt' {% raw %}%}{% endraw %}
    &lt;h4&gt;Simple Test&lt;/h4&gt;

{% raw %}{%{% endraw %} block extraJs {% raw %}%}{% endraw %}
&lt;script type="text/javascript" src="/js/highcharts.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/modules/exporting.js"&gt;&lt;/script&gt;
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}
</code></pre>
<p>I'm receiving the message &quot;Child templates only may contain blocks&quot;</p>
<p>Thanks,</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5442" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5442" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1ff2980077839d6219ff24486cb22dba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1157/ginodeis" class="user-moderator-N"><span itemprop="name">Tino D</span></a>        </span>
        <br>

        <span class="karma">1.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6605" href="#C6605">
                <time itemprop="dateCreated" datetime="2014-03-26T12:43:11-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm sorry, neither works for me. I'm trying this:</p>
<p><em>The main template</em></p>
<pre><code class="language-volt">{# views/index.volt #}
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8" /&gt;
         {% raw %}{%{% endraw %} block header {% raw %}%}{% endraw %}        
         {% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}
    &lt;/head&gt;
    &lt;body&gt;
        {% raw %}{{{% endraw %} content() {% raw %}}}{% endraw %}

        {% raw %}{{{% endraw %} javascript_include("js/jquery-1.11.0.min.js", true) {% raw %}}}{% endraw %}

        {% raw %}{%{% endraw %} block footer {% raw %}%}{% endraw %}        
        {% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}  
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><em>The child template</em></p>
<pre><code class="language-volt">{# views/Users/index.volt #}
{% raw %}{%{% endraw %} block header {% raw %}%}{% endraw %}
    &lt;style type="text/css"&gt;
        .base {
            color: red;
        }
    &lt;/style&gt;
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}

&lt;section&gt;
    &lt;span&gt;The page content&lt;/span&gt;
&lt;/section&gt;

{% raw %}{%{% endraw %} block footer {% raw %}%}{% endraw %}        
    {% raw %}{{{% endraw %} javascript_include("js/page-users.js", true) {% raw %}}}{% endraw %}
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}</code></pre>
<p><em>The result</em></p>
<pre><code class="language-volt">&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;       
    &lt;/head&gt;
    &lt;body&gt;
        &lt;style type="text/css"&gt;
          .base {
              color: red;
          }
        &lt;/style&gt;

        &lt;section&gt;
            &lt;span&gt;The page content&lt;/span&gt;
        &lt;/section&gt;

        &lt;script type="text/javascript" src="/myapp/js/page-users.js"&gt;&lt;/script&gt;

        &lt;script type="text/javascript" src="/myapp/js/jquery-1.11.0.min.js"&gt;&lt;/script&gt;        
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>As shown the layout blocks and their position are not taking into account when rendering. I'm using version 1.3.0.
Please could someone help me with this issue. </p>
<p>Thank you so much.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6605" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6605" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-positive">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1ff2980077839d6219ff24486cb22dba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1157/ginodeis" class="user-moderator-N"><span itemprop="name">Tino D</span></a>        </span>
        <br>

        <span class="karma">1.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6631" href="#C6631">
                <time itemprop="dateCreated" datetime="2014-03-27T05:37:23-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>At the end I found the solution, I was mistaken on 4 things:</p>
<ol>
<li>
<p>In the main template I was calling <strong>{% raw %}{{{% endraw %} content() {% raw %}}}{% endraw %}</strong>. Reviwing Phalcon documentation and Twig documentation I found that exists an specific block name to specify the page content <strong>{% raw %}{%{% endraw %} block content {% raw %}%}{% endraw %}{% raw %}{%{% endraw %} endblock {% raw %}}}{% endraw %}</strong>.</p>
</li>
<li>
<p>In the child template (view template) I must inherit from main template <strong>{% raw %}{%{% endraw %} extends &quot;index.volt&quot; {% raw %}%}{% endraw %}</strong></p>
</li>
<li>
<p>Set the view render level to <strong>LEVEL_ACTION_VIEW</strong><br />
Ex: $view-&gt;setRenderLevel(\Phalcon\Mvc\View::LEVEL_ACTION_VIEW);</p>
</li>
<li>Remove the Volt render cache files to test that the main template changes works fine.</li>
</ol>
<p>Now everything is working properly...</p>
<p><em>The main template</em></p>
<pre><code class="language-volt">{# views/index.volt #}
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8" /&gt;
         {% raw %}{%{% endraw %} block header {% raw %}%}{% endraw %}        
         {% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}
    &lt;/head&gt;
    &lt;body&gt;
         {% raw %}{%{% endraw %} block content {% raw %}%}{% endraw %}        
         {% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}

        {% raw %}{{{% endraw %} javascript_include("js/jquery-1.11.0.min.js", true) {% raw %}}}{% endraw %}

        {% raw %}{%{% endraw %} block footer {% raw %}%}{% endraw %}        
        {% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}  
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><em>The child template</em></p>
<pre><code class="language-volt">{% raw %}{%{% endraw %} extends "index.volt" {% raw %}%}{% endraw %}

{# views/Users/index.volt #}
{% raw %}{%{% endraw %} block header {% raw %}%}{% endraw %}
    &lt;style type="text/css"&gt;
        .base {
            color: red;
        }
    &lt;/style&gt;
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}

{% raw %}{%{% endraw %} block content {% raw %}%}{% endraw %}  
&lt;section&gt;
    &lt;span&gt;The page content&lt;/span&gt;
&lt;/section&gt;
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}

{% raw %}{%{% endraw %} block footer {% raw %}%}{% endraw %}        
    {% raw %}{{{% endraw %} javascript_include("js/page-users.js", true) {% raw %}}}{% endraw %}
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}</code></pre>
<p><em>The result</em></p>
<pre><code class="language-volt">&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;       
        &lt;style type="text/css"&gt;
          .base {
              color: red;
          }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;section&gt;
            &lt;span&gt;The page content&lt;/span&gt;
        &lt;/section&gt;

        &lt;script type="text/javascript" src="/myapp/js/jquery-1.11.0.min.js"&gt;&lt;/script&gt;        

        &lt;script type="text/javascript" src="/myapp/js/page-users.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>For me, this issue has solved.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6631" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6631" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">4</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d26e6ab949b422d1df6488fcc1440998?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1927/subdigger" class="user-moderator-N"><span itemprop="name">subdigger</span></a>        </span>
        <br>

        <span class="karma">102</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10668" href="#C10668">
                <time itemprop="dateCreated" datetime="2014-08-25T01:21:40-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>2 Tino D
good answer. saved my time</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10668" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10668" data-cf-modified-5198d9efc93560b35cacb061-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="868" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>