---
layout: default
title: 'Best way to run some code in every Controller action? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Best way to run some code in every Controller action?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/11019/radonthetyrant" class="user-moderator-N"><span itemprop="name">radon</span></a></span>
            <time itemprop="dateCreated" datetime="2018-04-03T11:14:01-07:00">Apr '18</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2018-04-03T11:14:01-07:00">Apr '18</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>457</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/ca33490edc47e0f54d8415a0ec2e5038?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/11019/radonthetyrant" class="user-moderator-N"><span itemprop="name">radon</span></a></span>
                <span class="karma">543</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C18025" href="#C18025">
        <time class="action-date">Apr '18</time>
    </a>
</div>
<div class="post-content"><div><p>I'm currently trying out phalcon for the first time for a small static webpage + forms project.</p>
<p>I use the <code>IndexController</code> and have one action for each (currently static) route. I also have an <code>addScripts()</code> method inside the <code>ControllerBase</code>, that adds some css/javascripts with <code>$this-&gt;assets-&gt;addCss()</code> which are then output inside the main template via <code>&lt;? $this-&gt;assets-&gt;outputCss(); ?&gt;</code></p>
<p>So far so good. Now I want to run the <code>addScripts()</code> method for each action, without having to copypaste the <code>$this-&gt;addScripts()</code> call into each action method.
My first try was extendind the <code>__construct()</code> method of the <code>ControllerBase</code> class, which is final. So that doesn't work.</p>
<p>Then I checked out how events work, but this might be a little too much, as I might only want to inject the scripts in certain Controller classes, or at least have control over when exactly I inject those.</p>
<p>What would be the best solution?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-43d0dfd209c902cac11cc825-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-43d0dfd209c902cac11cc825-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b73962517f83a47f4f971d1feb705cda?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/10938/modz95" class="user-moderator-N"><span itemprop="name">modz95</span></a>        </span>
        <br>

        <span class="karma">2.9k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="54645" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '18</span>
              </span><br/><a name="C54645" href="#C54645">
                <time itemprop="dateCreated" datetime="2018-04-03T11:29:35-07:00" class="action-date">Apr '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can add $this-&gt;addScripts() to the initialize() method in the base controller. You should try not to use __construct() with Phalcon, use initialize() instead. If you want to use addScripts() only in some of the controllers, you could override the parent's initialize method in the controllers where you don't need it.</p>
<p>Not the most elegant solution, but it should work. :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54645" data-cf-modified-43d0dfd209c902cac11cc825-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54645" data-cf-modified-43d0dfd209c902cac11cc825-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">3</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/ca33490edc47e0f54d8415a0ec2e5038?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/11019/radonthetyrant" class="user-moderator-N"><span itemprop="name">radon</span></a>        </span>
        <br>

        <span class="karma">543</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C54647" href="#C54647">
                <time itemprop="dateCreated" datetime="2018-04-03T11:33:50-07:00" class="action-date">Apr '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>ah, excellent. that's exactly what I was looking for.</p>
<p>Thanks!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54647" data-cf-modified-43d0dfd209c902cac11cc825-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54647" data-cf-modified-43d0dfd209c902cac11cc825-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/4d1384d668711e6153ed4c6f05e29216?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/286/trentramseyer" class="user-moderator-N"><span itemprop="name">Trent Ramseyer</span></a>        </span>
        <br>

        <span class="karma">22.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C54717" href="#C54717">
                <time itemprop="dateCreated" datetime="2018-04-06T15:27:42-07:00" class="action-date">Apr '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>(Assuming your IndexController is Extending the ControllerBase)   you can add the $this-&gt;addscripts to the onConstruct() of the Controllerbase itself and any controller that extends it will trigger that </p>
<p>If you want to have Initialize in the ControllerBase you can also do that and run it there.  So you don't have to add the addScripts() to each controller</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54717" data-cf-modified-43d0dfd209c902cac11cc825-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54717" data-cf-modified-43d0dfd209c902cac11cc825-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="18025" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>