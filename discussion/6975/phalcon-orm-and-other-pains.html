---
layout: default
title: 'Phalcon ORM and other pains - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/4/offtopic">Offtopic</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Phalcon ORM and other pains</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2899/datanator" class="user-moderator-N"><span itemprop="name">Sven Bommezijn</span></a></span>
            <time itemprop="dateCreated" datetime="2015-06-03T10:04:00-07:00">Jun '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-06-03T10:04:00-07:00">Jun '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>812</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/8ec1415907d986df9510e61ec1abf4d4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2899/datanator" class="user-moderator-N"><span itemprop="name">Sven Bommezijn</span></a></span>
                <span class="karma">6.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6975" href="#C6975">
        <time class="action-date">Jun '15</time>
    </a>
</div>
<div class="post-content"><div><p>I have been working with Phalcon for a half year now and I love the concept of the framework built in C.</p>
<p>However,</p>
<p>I recently migrated my servers to PHP56 with Phalcon 2.0 and some subtle things broke which made my clients rather unhappy. This makes me reconsider using all Phalcons features, so please don't be offended with these 3 points of criticism.</p>
<p><strong>ORM: </strong>
I have been struggling with beforeSave since apparently in the recent version of Phalcon storing arrays as JSON strings broke my application. After extensively researching I found that isset($this-&gt;field) does not work properly. This is essential if you want to optionally format and store a field... So a lot of work here to manually convert arrays to strings and store them.
Also, when storing fields an empty string is interpreted as a NULL value. There is a documented workaround involving some juggling with RawValue but isn't ORM meant to take away these burdens? At this point I would not use Phalcon ORM in my next project... there are better (though perhaps not so fast) alternatives.</p>
<p><strong>Template handling</strong>
The Phalcon default view handling has a somewhat inflexible 3 level structure most likely related to Module/Controller/Actions level of granularity. However, this should not be imposed by the framework. When using mature template engine in stead of PHP it is more likely to use template inheritance rather then these 3 levels that are carved in the Phalcon view. Therefore I passed the View in favour of SimpleView, and have the template decide in which enclosing template it will live. But SimpleView is a stepchild.. why doesn't it offer basic functions such as templateExists()?</p>
<p>This all is perfectly possible with Volt, and having a template engine written in C makes a lot of sense.
Unfortunately, Volt does not support nested blocks, essentially limiting template inheritance to 2 levels. So if you want more, you will need to use some more mature template engine such as ageold Smarty or Twig which do support full template inheritance.</p>
<p><strong>Webservices</strong>
Okay, so in todays arena you need to support REST services and the like. With the advent of Angular.js, Ember.js, Backbone.js and many more webservices make out the most part of your application. In the end, PHP frameworks need to be able to compete in the same field as for instance Meteor and PHP is a long way from there. This is not something that Phalcon can help but still one would expect Phalcon to take a stronger position to simplify rest services.</p>
<p>I really think that a framework today has a strong need to parse and validate JSON based requests, checking existence and types and formats of JSON entities in a json string. This is still stuff you need to build yourself into Phalcon and it is not that difficult but aren't frameworks supposed to take away the long and tedious tasks?</p>
<p>Another thing is the Phalcon response object that fiddles with the output buffer. It has long been a PITA with PHP to stream content to a HTTP response, but PHP rather buffers content before sending it out. That is memory consuming and makes it difficult to serve large files, but it is avoidable, and I think I would have expected Phalcon to enable this easily, rather than adopting this PHP paradigm.</p>
<p>Okay, that was pretty biased criticism. I do love Phalcon and if there are parts of Phalcon that do not suit my needs, well, of course I can always plug in another library. But it would be a shame for such a great project to rely on a bunch of external libs while building these in Zephir or C would offer a tremendous advantage.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3e27c1f7c3f919d06cdb4c57-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3e27c1f7c3f919d06cdb4c57-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/210/andresgutierrez" class="user-moderator-Y"><span itemprop="name">Andres Gutierrez</span></a>        </span>
        <br>

        <span class="karma">34.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C19017" href="#C19017">
                <time itemprop="dateCreated" datetime="2015-06-03T13:03:52-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Also, when storing fields an empty string is interpreted as a NULL value</p>
</blockquote>
<p>This is fixed in 2.0.3 <a href="https://github.com/phalcon/cphalcon/issues/440#issuecomment-107227724">https://github.com/phalcon/cphalcon/issues/440#issuecomment-107227724</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19017" data-cf-modified-3e27c1f7c3f919d06cdb4c57-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19017" data-cf-modified-3e27c1f7c3f919d06cdb4c57-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/210/andresgutierrez" class="user-moderator-Y"><span itemprop="name">Andres Gutierrez</span></a>        </span>
        <br>

        <span class="karma">34.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="19073" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '15</span>
              </span><br/><a name="C19073" href="#C19073">
                <time itemprop="dateCreated" datetime="2015-06-06T06:46:16-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/dschissler">@dschissler</a> Related to that, EXISTS in subqueries is now supported in Phalcon 2.0.3 :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19073" data-cf-modified-3e27c1f7c3f919d06cdb4c57-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19073" data-cf-modified-3e27c1f7c3f919d06cdb4c57-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6975" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>