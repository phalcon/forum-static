---
layout: default
title: 'Please help me, I have issues inserting records - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Please help me, I have issues inserting records</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2908/Bloynick" class="user-moderator-N"><span itemprop="name">Bloynick</span></a></span>
            <time itemprop="dateCreated" datetime="2015-01-19T20:29:14-07:00">Jan '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-01-19T20:29:14-07:00">Jan '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1315</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/30ee8932a923d00cefc8ce0bd6fe04fe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2908/Bloynick" class="user-moderator-N"><span itemprop="name">Bloynick</span></a></span>
                <span class="karma">1.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4526" href="#C4526">
        <time class="action-date">Jan '15</time>
    </a>
</div>
<div class="post-content"><div><p><strong>I'm trying to create a new record in the data base, but some fields can to be empty, when I insert a record empty in my data base appear with  this : ' '  why ? I'm using  postgresql.</strong></p>
<pre><code>    $cedula = $this-&gt;request-&gt;getPost("cedula","int");
    $nombre = $this-&gt;request-&gt;getPost("nombre",'striptags');
    $prueba = new Prueba();
    $prueba-&gt;nombre = $nombre;
    $prueba-&gt;cedula = $cedula;
        if ($prueba-&gt;create() == false) {

                        foreach ($prueba-&gt;getMessages() as $message) {
                            echo $message;

                        }
                        return false;

           }</code></pre>
<p><strong>in the database records are well</strong></p>
<pre><code>nombre/cedula/id
'';32432523;1
'';32432523;2
'';32432523;3
'';25235;4</code></pre>
<p>sorry for my english, It's not very good.</p>
<p>Si no me di a entender, o si alguien habla español, necesito ayuda, cada vez que quiero registrar información en la base de datos y algún campo que no es obligatorio lo mando vacío desde el formulario, entonces se almacena con comillas simples '' cuando es de tipo string pero si es int me arroja este error :
<strong>Invalid text representation: 7 ERROR: invalid input syntax for integer: &quot;&quot;
</strong></p>
<p>no sé que pasa! </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-1d092c56acd09ec1e008e909-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-1d092c56acd09ec1e008e909-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="15073" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C15073" href="#C15073">
                <time itemprop="dateCreated" datetime="2015-01-19T20:50:32-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey</p>
<p>Are you sure get data corret here     $nombre , you can debug here</p>
<pre><code class="language-php">[...]
    $nombre = $this-&gt;request-&gt;getPost("nombre",'striptags');

    var_dump($nombre);
    die;

[..]</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15073" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15073" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/30ee8932a923d00cefc8ce0bd6fe04fe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2908/Bloynick" class="user-moderator-N"><span itemprop="name">Bloynick</span></a>        </span>
        <br>

        <span class="karma">1.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C15074" href="#C15074">
                <time itemprop="dateCreated" datetime="2015-01-19T21:11:54-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey man, thanks for you answer. I know that nombre don't have nothing, is empty. I'm trying because I need  to create a form that allow fields empty. but  when I save the record whith a field empty then at the data base appear this: ''<br />
when the data type is varying. but when the data type of the field is integer then appear this: Invalid text representation: 7 ERROR: invalid input syntax for integer: &quot;&quot;</p>
<p>sorry for my english.
Hola amigo, gracias por tu respuesta, yo sé que nombre no tiene nada, está vacío. Estoy probando  porque necesito crear un formulario que permita campos vacíos. Pero cuando yo guardo el registro con un campo vacío entonces en la base de datos aparece esto: ''  cuando el tipo de dato es varying . pero cuando el tipo de dato es integer aparece esto: Invalid text representation: 7 ERROR: invalid input syntax for integer: &quot;&quot;</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15074" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15074" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/30ee8932a923d00cefc8ce0bd6fe04fe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2908/Bloynick" class="user-moderator-N"><span itemprop="name">Bloynick</span></a>        </span>
        <br>

        <span class="karma">1.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C15075" href="#C15075">
                <time itemprop="dateCreated" datetime="2015-01-19T21:23:02-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Maybe I didn't explained correctly, I want the possibility of null fields in my form. but I can't save records null.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15075" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15075" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C15076" href="#C15076">
                <time itemprop="dateCreated" datetime="2015-01-19T21:31:05-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This mean you want validation before save for database, if is empty alter messages ? if is true check here <a href="https://docs.phalcon.io/en/latest/reference/validation.html">https://docs.phalcon.io/en/latest/reference/validation.html</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15076" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15076" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/30ee8932a923d00cefc8ce0bd6fe04fe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2908/Bloynick" class="user-moderator-N"><span itemprop="name">Bloynick</span></a>        </span>
        <br>

        <span class="karma">1.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C15077" href="#C15077">
                <time itemprop="dateCreated" datetime="2015-01-19T21:54:20-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>yes, I have read about the validations, but I don't find it  the solution.</p>
<p>in my application displays this exception </p>
<ul>
<li>exception 'PDOException' with message 'SQLSTATE[22P02]: Invalid text representation: 7 ERROR: invalid input syntax for integer: &quot;&quot;' in /var/www/sigPACwt/app/controllers/ProyectoController.php:357 Stack trace: #0 [internal function]: PDOStatement-&gt;execute() #1 [internal function]: Phalcon\Db\Adapter\Pdo-&gt;executePrepared(Object(PDOStatement), Array, Array) #2 [internal function]: Phalcon\Db\Adapter\Pdo-&gt;execute('INSERT INTO &quot;si...', Array, Array) #3 [internal function]: Phalcon\Db\Adapter-&gt;insert(Array, Array, Array, Array) #4 [internal function]: Phalcon\Mvc\Model-&gt;_doLowInsert(Object(Phalcon\Mvc\Model\MetaData\Memory), Object(Phalcon\Db\Adapter\Pdo\Postgresql), Array, 'id') #5 [internal function]: Phalcon\Mvc\Model-&gt;save() #6 /var/www/sigPACwt/app/controllers/ProyectoController.php(357): Phalcon\Mvc\Model-&gt;create() #7 [internal function]: ProyectoController-&gt;agregarAction() #8 [internal function]: Phalcon\Dispatcher-&gt;dispatch() #9 /var/www/sigPACwt/public/index.php(27): Phalcon\Mvc\Application-&gt;handle() #10 {main}
SQLSTATE[25P02]: In failed sql transaction: 7 ERROR: current transaction is aborted, commands ignored until end of transaction block</li>
<li>
</li>
</ul>
<p>The field that give issues can to be null, and is type integer</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15077" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15077" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C15085" href="#C15085">
                <time itemprop="dateCreated" datetime="2015-01-20T04:00:14-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>when I insert a record empty in my data base appear with this : ' '</p>
</blockquote>
<p>That will be because the <code>DEFAULT</code> value assigned in your field will be <code>""</code>. Try changing that default value and see if it changes also. And for the problem with the int type try to do a <code>strval($nombre)</code>.</p>
<p>A ver, al insertar un valor nulo en una tabla, se supone que la BD le asignará por defecto un valor programado previamente. Si sólo has permitido nulos, pero no has especificado un valor concreto, aparecerá con comillas (<code>""</code>), en el caso de campos string. Prueba cambiándolo. Y el problema de los números diría que se resolvería haciendo <code>strval($nombre)</code>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15085" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15085" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2f0942cfa836b766da6c060c84eb8703?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2775/edwardhew" class="user-moderator-N"><span itemprop="name">Edward Hew</span></a>        </span>
        <br>

        <span class="karma">5.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="15089" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C15089" href="#C15089">
                <time itemprop="dateCreated" datetime="2015-01-20T04:28:26-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is how it can be done for SQLite, I've never used Postgres. Below example won't work in SQLite if nombre is a &quot;not null&quot; field, when it is, I'll get the expected error of something like &quot;nombre is expected and cannot be empty&quot;. But the SQLite adapter won't add a pair of empty quotes to empty fields.</p>
<pre><code class="language-php">// $data is the post array.
$prueba-&gt;nombre = (!empty($data['nombre']) ? $data['nombre'] : null);

 or 

if (!empty($data['nombre'])) {
    $prueba-&gt;nombre = $data['nombre'];
}
</code></pre>
<p>Some other information, you might already know this, if you use a phalcon form sub class, you could add filters in addition to validators within the form subclass, if you have a field called nombre, then <code>$nombre-&gt;setFilters([string | array])</code> or <code>$nombre-&gt;addFilter("int")</code> (edit: this doesn't convert value to zero if data isn't an integer) and then bind the post data to your entity like this <code>$form-&gt;bind($this-&gt;request-&gt;getPost(), $prueba);</code>. Your data will be filtered and model class populated with the filtered data. If you check the entity after binding, you get the filtered data.</p>
<p>There is a third parameter to $form-&gt;bind, (edit 2) The whitelist parameter lets you place in an array only the fields you want bound to your entity.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15089" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15089" data-cf-modified-1d092c56acd09ec1e008e909-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4526" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>