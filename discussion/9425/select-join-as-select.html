---
layout: default
title: 'SELECT Join as SELECT - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">SELECT Join as SELECT</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a></span>
            <time itemprop="dateCreated" datetime="2015-11-12T12:19:13-07:00">Nov '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-11-12T12:19:13-07:00">Nov '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">7</span>
                </td>
                <td>
                    <label>Views</label><br>572</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a></span>
                <span class="karma">40.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C9425" href="#C9425">
        <time class="action-date">Nov '15</time>
    </a>
</div>
<div class="post-content"><div><p>I'm trying to make this SQL work, any advice on how to do this?
And the column id does exist!</p>
<p>My code:</p>
<pre><code>SELECT Posts_Comments.postid FROM Posts_Comments LEFT JOIN (
  SELECT
    Replies.id 
  FROM Posts_Comments 
  WHERE Replies.id != 0
  ORDER BY Replies.id
  LIMIT 1
) AS Replies ON Posts_Comments.postid = Replies.postid AND Posts_Comments.blogid = Replies.blogid AND Posts_Comments.id = Replies.reply</code></pre>
<p>This is my error:</p>
<pre><code>PDOException: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Replies.id' in 'field list'</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26351" href="#C26351">
                <time itemprop="dateCreated" datetime="2015-11-13T02:24:59-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>you are trying to select <code>Replies.id</code> from <code>Posts_Comments</code>.</p>
<p>just fix this query first</p>
<pre><code>SELECT
    Replies.id 
  FROM Posts_Comments 
  WHERE Replies.id != 0
  ORDER BY Replies.id
  LIMIT 1</code></pre>
<p>if you still got problem give us the create statment of the tables, with 2 inserts, just so I can play with the query</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26351" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26351" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a>        </span>
        <br>

        <span class="karma">40.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26355" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26355" href="#C26355">
                <time itemprop="dateCreated" datetime="2015-11-13T02:59:57-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The code dosent work.. :-/ You can try it you're self, here is the SQL with two inserted... Thanks alot!</p>
<p>EDIT: I can see that the reply column only can have 1 integer, that's and fault, it has to be 11, but it dosent matter when you test it :-) Just so you dont get confused </p>
<pre><code>CREATE TABLE `posts_comments` (
`id` int(11) NOT NULL,
  `postid` int(11) DEFAULT NULL,
  `blogid` int(11) NOT NULL,
  `userid` int(11) DEFAULT NULL,
  `reply` int(1) NOT NULL DEFAULT '0',
  `name` varchar(60) COLLATE utf8_danish_ci DEFAULT NULL,
  `comment` varchar(255) COLLATE utf8_danish_ci DEFAULT NULL,
  `reports` int(11) DEFAULT '0',
  `date` date DEFAULT NULL
) ENGINE=InnoDB AUTO_INCREMENT=235 DEFAULT CHARSET=utf8 COLLATE=utf8_danish_ci;

--
-- Data dump for tabellen `posts_comments`
--

INSERT INTO `posts_comments` (`id`, `postid`, `blogid`, `userid`, `reply`, `name`, `comment`, `reports`, `date`) VALUES
(1, 1, 0, 1, 0, 'Name', 'dsadsdsaads', 0, NULL),
(2, 1, 0, 1, 1, 'Name 2', 'sffsdfdfsfsd', 0, NULL);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26355" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26355" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26359" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26359" href="#C26359">
                <time itemprop="dateCreated" datetime="2015-11-13T03:56:23-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>here is your query, working :</p>
<pre><code>SELECT 
    posts_comments.postid, posts_comments.comment
FROM
    posts_comments
        LEFT JOIN
    (SELECT 
        *
    FROM
        posts_comments
    WHERE
        posts_comments.id != 0
    ORDER BY posts_comments.id DESC
    LIMIT 1) AS Replies ON posts_comments.postid = Replies.postid
        AND posts_comments.blogid = Replies.blogid
        AND posts_comments.id = Replies.reply</code></pre>
<p>but i am not sure if this query makes sence.  Tell me if you need more help ( but explain what you want to achieve )</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26359" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26359" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a>        </span>
        <br>

        <span class="karma">40.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26363" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26363" href="#C26363">
                <time itemprop="dateCreated" datetime="2015-11-13T04:56:21-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well, it kinda works, but not the way i want it to.</p>
<p>What i'm trying im trying to build is a comment system with reply comments</p>
<p>The code you gave me prints out like this:</p>
<pre><code>Comment 1 answer 1
Comment 1 answer 2
Comment 1 answer 3
Comment 1
Comment 2</code></pre>
<p>I need it like this:</p>
<pre><code>Comment 1
Comment 2
Comment 3
    Comment 3 answer 1
    Comment 3 answer 2
    Comment 3 answer 3
Comment 4
Comment 5
    Comment 5 answer 1
    Comment 5 answer 2</code></pre>
<p>Do you have any idea on how to make this?</p>
<p>Thanks for your help so far!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26363" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26363" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Åšlawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26367" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26367" href="#C26367">
                <time itemprop="dateCreated" datetime="2015-11-13T05:08:38-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>With SQL imopossible(or VERY sneaky), with nonsql possible. Just get all comments, loop over them and get all answers for them OR select all ANSWERS with left join comment - thet it will work and group them maybe byt comment ? or something like this</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26367" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26367" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a>        </span>
        <br>

        <span class="karma">40.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26373" href="#C26373">
                <time itemprop="dateCreated" datetime="2015-11-13T05:29:30-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Why can't it be done? I've done this before, just not with&quot; left join ( SELECT.. )&quot;</p>
<p>I tried it without, but I can't use this becuase I need to set a limit to left join, and if i dont do it this way, the LIMIT 12 will
merge the two tables together, so if there is 4 answers,  and 12  comments, it will only print 8 comments enstead of 12, becuase it needs to 4 answers..</p>
<p>Sorry if im bad at explaning..</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26373" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26373" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26375" href="#C26375">
                <time itemprop="dateCreated" datetime="2015-11-13T05:35:59-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/GunslerRage">@GunslerRage</a>, I probably can make the query you are looking for, but i dont think it will be worth it. </p>
<p>because for each comment, the query will fetch all its replies, but each reply will content the original comment itself. And at sertant point I think it is quite possible this to become performance issue because of the &quot;fetching data&quot; of the mysql.</p>
<p>When i did comments with replies, i did seperated query for each comment to check for its replies. You can make milions of solutions in order to save some queries.</p>
<p>for eample you can make trigger, to update the number of the replaies for a sertant comment, so when you are fetching &quot;blog&quot; comments you will display the number of the replays, when the user clicks in &quot;expand replaies&quot; then you can load all the replaies (via ajax), for this specific comment. ( google does somethign similar i think ) </p>
<p>another way is to cache your queries.</p>
<p>And also, there are external solutions for comments, like facebook and some 100% fully ready solutions including the design. And it will take you few moments to intergrate and thats it. After that you wont have to worry about anything.</p>
<p>Anyways, let me know if you still want this query.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26375" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26375" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a>        </span>
        <br>

        <span class="karma">40.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26377" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26377" href="#C26377">
                <time itemprop="dateCreated" datetime="2015-11-13T06:30:03-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I want what's the best solution for my site, but I can't use any 3rd party comment system, it has to be integrated in the system.. So that every user that own the comments can edit them..</p>
<p>If im going to do this, what is the best way of doing it? Could you maybe provide me some code?</p>
<p>And thanks again for using your time to help me out! :-)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26377" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26377" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26385" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26385" href="#C26385">
                <time itemprop="dateCreated" datetime="2015-11-13T07:03:11-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>postsComments.php</p>
<pre><code class="language-php">
namespace MyNameSpace\Models;

class postsComments extends \Phalcon\Mvc\Model {

    public $id;
    public $postid;
    public $blogid;
    public $userid;
    public $reply;
    public $name;
    public $comment;
    public $reports;
    public $date;

    public function beforeCreate(){
        $this-&gt;date = time(); //ot date('y .. bla bla i dont them by hearth)
    }

    public function initialize(){

        $this-&gt;setSource("posts_comments");
    }

    public static function displayComments($blog_id, $limit = 10){

        $comments = self::find([
            'conditions' =&gt; 'blogid = ?1',
            'bind' =&gt; [
                1 =&gt; $blog_id
            ],
            "limit" =&gt; $limit
        ]);

        if (count($comments) == 0){
            return ' no comment babe';
        }

        foreach ($comments AS $k =&gt; $comment){
            $comments[$k]['replays'] =
                self::find([
                    'conditions' =&gt; 'replay = ?1',
                    'bind' =&gt; [
                        1 =&gt; $comment-&gt;id
                    ]
                ]);
        }

        return $comments;
    }
}
</code></pre>
<p>and call it </p>
<pre><code class="language-php">
var_dump(MyNameSpace\Models::displayComments($_GET['blog_id']));
exit;
</code></pre>
<p>code isn't tested cuz i am still at work.</p>
<p>But there few things, in the foreach you can use reference, i hate using references so i did not.</p>
<p>//just a few notes, hope i wont offend you, it is just what i think</p>
<pre><code>* postid =&gt; post_id // actually what is this ?!
* blogid =&gt; blog_id
* userid =&gt; user_id
* name =&gt; ?!?
* reply =&gt; not clear, child_of or at least replay_of
* date - i usually use timestamps / but its up to you, there is no big difference
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26385" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26385" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a>        </span>
        <br>

        <span class="karma">40.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26393" href="#C26393">
                <time itemprop="dateCreated" datetime="2015-11-13T08:49:52-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It dosent work, it just prints out the comments, and it dosent get grouped. I can't seem to get the &quot;Replays&quot; in the foreach
I did however change the line</p>
<pre><code>$comments[$k]['replays'] to $comments{$k}-&gt;replays</code></pre>
<p>Else it would give me and error, that its not an object..</p>
<p>And I use the postid to check what post the comment belongs to</p>
<p>I dont know why is use blogid enstead of blog_id - Maybe becuase i can't use findFirstByBlogid? :-O</p>
<p>Name is the name of a person IF he/she is not logged in</p>
<p>reply, if 0 then it's not a reply, if not 0 then it's a reply and belongs to the giving commnent id</p>
<p>I am going to use timestamps, just havent changed it </p>
<p>Again thanks you your help! :-)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26393" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26393" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26399" href="#C26399">
                <time itemprop="dateCreated" datetime="2015-11-13T09:58:00-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>they wont get grouped, you have to </p>
<pre><code class="language-php">
foreach ($comments AS $comment){
    echo '&lt;div class="comment"&gt;'.$comment-&gt;comment.'&lt;/div&gt;';

    if ($comment-&gt;replays != false or null or array i dont know ){
        foreach ($comment-&gt;replay as $replay){
            echo '&lt;div class="replay"&gt;'.$replay-&gt;comment.'&lt;/div&gt;';
        }
    }
}
</code></pre>
<p>or something like this.</p>
<p>in phalcon - most of the time &quot;_&quot; means that next capital has to be capitalized. so if you call a method add_comment your action has to be AddCommentAction</p>
<p>as far as i used it.</p>
<p>There is many - to - many relationship, that i still havent test out. Maybe you can try hasOne, hasMany just play with them in order to understand what's the idea.
They work only for findFirst, but i am not sure if many - to - many works with find.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26399" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26399" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a>        </span>
        <br>

        <span class="karma">40.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26401" href="#C26401">
                <time itemprop="dateCreated" datetime="2015-11-13T10:03:05-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I get this error: Notice: Access to undefined property PostsComments::replays in</p>
<p>It seems like the replays dosent get set?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26401" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26401" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26407" href="#C26407">
                <time itemprop="dateCreated" datetime="2015-11-13T10:08:13-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>do you have skype, telegram ?
please post it :-)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26407" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26407" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d90f9c7fe35e5f94eb6712df52bf3bb9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4357/GunslerRage" class="user-moderator-N"><span itemprop="name">GunslerRage</span></a>        </span>
        <br>

        <span class="karma">40.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26409" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26409" href="#C26409">
                <time itemprop="dateCreated" datetime="2015-11-13T11:02:43-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The code we used to make it work:</p>
<p>public static function displayComments($blog_id, $limit = 10){</p>
<pre><code>    $comments = self::find([
        'conditions' =&gt; 'blogid = ?1 AND reply = ?2',
        'bind' =&gt; [
            1 =&gt; $blog_id,
            2 =&gt; 0
        ],
        "limit" =&gt; $limit
    ])-&gt;toArray();

    if (count($comments) == 0){
        return ' no comments..';
    }

    foreach ($comments AS $k =&gt; $comment){

        $data = self::find([
                'conditions' =&gt; 'reply = ?1',
                'bind' =&gt; [
                    1 =&gt; $comment['id']
                ]
            ])-&gt;toArray();

        if (isset($comments[$k]['replays'])){
            $comments[$k]['replays'] = $data;
        }

        //echo "&lt;pre&gt;";
        //print_r($koko-&gt;toArray())
    }

    return $comments;
}</code></pre>
<p>Again, thanks for the amazing support Izo, it really means alot!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26409" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26409" data-cf-modified-acb3607e5aacb86d4d1fae0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="9425" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>