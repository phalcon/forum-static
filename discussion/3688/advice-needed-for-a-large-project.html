---
layout: default
title: 'Advice needed for a large project - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Advice needed for a large project</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1150/garethwi" class="user-moderator-N"><span itemprop="name">Gareth Williams</span></a></span>
            <time itemprop="dateCreated" datetime="2014-10-15T00:30:24-07:00">Oct '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-10-15T00:30:24-07:00">Oct '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Oct '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>653</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/47ba5ffd6fac6b85b170b3030fe54b3b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1150/garethwi" class="user-moderator-N"><span itemprop="name">Gareth Williams</span></a></span>
                <span class="karma">15.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3688" href="#C3688">
        <time class="action-date">Oct '14</time>
    </a>
</div>
<div class="post-content"><div><p>At my work we are moving our web services from one monolith site written in an in-house framework over to smaller service clusters, organised by function.  </p>
<p>Each cluster will be a modular Phalcon project where each module will be a new version number.</p>
<p>The only problem is that we have some procedures which are shared across different clusters, and don't want to reproduce code.  </p>
<p>Our first thought was to program these global functions in Zephir, which might not be feasible, depending upon how well Zephir works with databases.</p>
<p>Anyway, does anyone have any experience with doing this in Phalcon?  And what would their recommendation be for sharing functionalities across sites?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-1586108ab82620ebf9a29c3d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-1586108ab82620ebf9a29c3d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12206" href="#C12206">
                <time itemprop="dateCreated" datetime="2014-10-15T10:33:58-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Is an option expose a common webservice to consume that functionality? Is the problem distrubuting the code across the machines? Why it can't be copied in every app?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12206" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12206" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/47ba5ffd6fac6b85b170b3030fe54b3b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1150/garethwi" class="user-moderator-N"><span itemprop="name">Gareth Williams</span></a>        </span>
        <br>

        <span class="karma">15.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12207" href="#C12207">
                <time itemprop="dateCreated" datetime="2014-10-15T12:21:17-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>At the moment, I'm using the common service solution (or rather, I'm still programming it),but our sysadmin is not too happy with this unnecessary extra network traffic for internal requests.  We are a quite popular European weather website, and our traffic is growing exponentiall, unlike our hardware budget.  Because of this we are also in a state of near constant optimisation.</p>
<p>My preference would be to put the common functions into Zephir (I have a question open on the Zephir forum about database access, is it possible, and how).  In fact.</p>
<p>As for copying it into every app, that is an update nightmare ;-)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12207" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12207" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/65cc66b2174ca0e8408258408af274c2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1371/david-duncan" class="user-moderator-N"><span itemprop="name">David Duncan</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12209" href="#C12209">
                <time itemprop="dateCreated" datetime="2014-10-15T13:12:05-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If you don't want to consume it as an API, have you thought about using composer to manage that dependency in every project? You can use private repos in composer and this seems to be exactly what you are looking for so you don't copy/paste the code from project to project.</p>
<p><a href="https://getcomposer.org/doc/05-repositories.md#hosting-your-own">https://getcomposer.org/doc/05-repositories.md#hosting-your-own</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12209" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12209" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/47ba5ffd6fac6b85b170b3030fe54b3b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1150/garethwi" class="user-moderator-N"><span itemprop="name">Gareth Williams</span></a>        </span>
        <br>

        <span class="karma">15.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12210" href="#C12210">
                <time itemprop="dateCreated" datetime="2014-10-15T13:23:36-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Again the problem with that is with updating.  If I change a common function, I have to update every service cluster.  </p>
<p>That said, composer is a very interesting option that we hadn't even considered.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12210" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12210" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/65cc66b2174ca0e8408258408af274c2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1371/david-duncan" class="user-moderator-N"><span itemprop="name">David Duncan</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C12210"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/47ba5ffd6fac6b85b170b3030fe54b3b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Gareth Williams                    </a>
                </div><div class="posts-buttons" align="right"><a name="C12211" href="#C12211">
                <time itemprop="dateCreated" datetime="2014-10-15T13:30:12-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Again the problem with that is with updating.  If I change a common function, I have to update every service cluster.  </p>
<p>That said, composer is a very interesting option that we hadn't even considered.</p>
</blockquote>
<p>You will face the same issues if you want to put it into zephir :(</p>
<p>We have a very similar issue as you. We deal with ag/weather data so between our API's we share a lot of functions and classes. </p>
<p>Orchestration solutions like docker make updating much easier.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12211" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12211" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C12207"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/47ba5ffd6fac6b85b170b3030fe54b3b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Gareth Williams                    </a>
                </div><div class="posts-buttons" align="right"><a name="C12212" href="#C12212">
                <time itemprop="dateCreated" datetime="2014-10-15T13:34:43-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>My preference would be to put the common functions into Zephir (I have a question open on the Zephir forum about database access, is it possible, and how).  In fact.</p>
</blockquote>
<p>Phalcon 2 uses PDO to access databases, I don't think you'll have problems using any others database functions provided by PHP: <a href="https://github.com/phalcon/cphalcon/tree/2.0.0/phalcon/db">https://github.com/phalcon/cphalcon/tree/2.0.0/phalcon/db</a></p>
<p>Also you can use:</p>
<ul>
<li>Sub-modules: <a href="https://git-scm.com/book/en/Git-Tools-Submodules">https://git-scm.com/book/en/Git-Tools-Submodules</a></li>
<li>Sub-trees: <a href="https://git-scm.com/book/en/Git-Tools-Subtree-Merging">https://git-scm.com/book/en/Git-Tools-Subtree-Merging</a></li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12212" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12212" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/47ba5ffd6fac6b85b170b3030fe54b3b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1150/garethwi" class="user-moderator-N"><span itemprop="name">Gareth Williams</span></a>        </span>
        <br>

        <span class="karma">15.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="12228" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '14</span>
              </span><br/><a name="C12228" href="#C12228">
                <time itemprop="dateCreated" datetime="2014-10-16T01:47:43-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>For our project (I'm not sure exactly how much information I can give out), the Zephir solution will be the best.  </p>
<p>We have core services that are used throughout our whole web services platform, the most obvious of these being geographical information.  I want to just have this available on the web server, and not have to worry about installing it for each service cluster.  </p>
<p>Once developed, these services will very rarely change, and we can just add them to our standard server image.</p>
<p>It will also be a good test for Phalcon and Zephir, because we will be talking about an average of 2 million hits per day, with our current record being around 8 million.</p>
<p>We already have one Phalcon site live, our mobile site (m.meteovista.co.uk is the english language version) and the site performs very well indeed.</p>
<p>Anyway, I'm starting to ramble now.  Thanks for the advice.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12228" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12228" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C12228"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/47ba5ffd6fac6b85b170b3030fe54b3b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Gareth Williams                    </a>
                </div><div class="posts-buttons" align="right"><a name="C12234" href="#C12234">
                <time itemprop="dateCreated" datetime="2014-10-16T04:32:37-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>That's great, it would be great if you can add your portal to: <a href="https://builtwith.phalcon.io/">https://builtwith.phalcon.io/</a></p>
<blockquote>
<p>We already have one Phalcon site live, our mobile site (m.meteovista.co.uk is the english language version) and the site performs very well indeed.</p>
<p>Anyway, I'm starting to ramble now.  Thanks for the advice.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12234" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12234" data-cf-modified-1586108ab82620ebf9a29c3d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3688" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>