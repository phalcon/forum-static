---
layout: default
title: 'Phalcon\Mvc\Model setAttributes - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Phalcon\Mvc\Model setAttributes</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/10695/Robinouh" class="user-moderator-N"><span itemprop="name">Robin</span></a></span>
            <time itemprop="dateCreated" datetime="2018-06-13T05:59:12-07:00">Jun '18</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2018-06-13T05:59:12-07:00">Jun '18</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>413</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/631089ee4b70517b46b26acf57a91587?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/10695/Robinouh" class="user-moderator-N"><span itemprop="name">Robin</span></a></span>
                <span class="karma">4.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C18397" href="#C18397">
        <time class="action-date">Jun '18</time>
    </a>
</div>
<div class="post-content"><div><p>Hi,</p>
<p>I am trying to add an attribute to an existing model linked to a database.</p>
<p>For example, I get this when I get the attributes of the model:</p>
<blockquote>
<pre><code>Array
(
    [0] =&gt; id
    [1] =&gt; name
)</code></pre>
</blockquote>
<p>I can manually edit existing attributes with the function <em>afterFetch</em> in the model:</p>
<blockquote>
<pre><code>public function afterFetch()
{
  $this-&gt;name = "test";
}</code></pre>
</blockquote>
<p>Without needing to add a field in my database, I would add an attribute to the model.</p>
<p>I tried the following code:</p>
<blockquote>
<pre><code>public function afterFetch()
{
  $this-&gt;ref = "test";
}</code></pre>
</blockquote>
<p>But without success, the attribute <em>ref</em> isn't added.</p>
<p>Is it possible?</p>
<p>Could you help me?</p>
<p>Thank you.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C56075" href="#C56075">
                <time itemprop="dateCreated" datetime="2018-06-13T06:04:56-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>getAttributes and/or toArray method is always working with metadata(schema in database) so it will always check how real schema is looking for model, so fields added like those won't be returned in getAttributes or toArray method.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56075" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56075" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/631089ee4b70517b46b26acf57a91587?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/10695/Robinouh" class="user-moderator-N"><span itemprop="name">Robin</span></a>        </span>
        <br>

        <span class="karma">4.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C56077" href="#C56077">
                <time itemprop="dateCreated" datetime="2018-06-13T06:10:49-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you for your answer.</p>
<p>Sorry I started using Phalcon recently so the answer to my question is may be obvious but how can I do it?</p>
<p>Do you have an example?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56077" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56077" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C56079" href="#C56079">
                <time itemprop="dateCreated" datetime="2018-06-13T06:14:27-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can't, model is object respresnetation of your records in table, if in table there is no such field then why it should be returned by any method like <code>toArray</code> when it doesn't exists in database? You can still add any fields to object, and use it inside object itself.</p>
<p>Though you can always override whatever method you want in model like toArray and add value of this field to result of <code>parent::toArray()</code>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56079" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56079" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/631089ee4b70517b46b26acf57a91587?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/10695/Robinouh" class="user-moderator-N"><span itemprop="name">Robin</span></a>        </span>
        <br>

        <span class="karma">4.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="56081" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '18</span>
              </span><br/><a name="C56081" href="#C56081">
                <time itemprop="dateCreated" datetime="2018-06-13T06:23:32-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No problem.</p>
<p>I will add a column that will always be empty in my database, it is the simplest.</p>
<p>Thank you for your help.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56081" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56081" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C56083" href="#C56083">
                <time itemprop="dateCreated" datetime="2018-06-13T06:26:46-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Defintely i wouldn't do it like this. You should reconsider why you even need this field when it's not related with model, maybe it shouldn't even be in model?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56083" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56083" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/631089ee4b70517b46b26acf57a91587?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/10695/Robinouh" class="user-moderator-N"><span itemprop="name">Robin</span></a>        </span>
        <br>

        <span class="karma">4.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="56089" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '18</span>
              </span><br/><a name="C56089" href="#C56089">
                <time itemprop="dateCreated" datetime="2018-06-13T07:02:30-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I will try to explain my problem as best as possible.</p>
<p>In my application, I have users who are attached to roles and these roles have modules attached to them.</p>
<p>This in order to create an access control system.</p>
<p>When I get the list of my users, I need to have the roles to which it is attached and also the modules attached to these roles.</p>
<p>So I used the method &quot;hasManyToMany&quot; many times to link all of these models together.</p>
<p>Here is a part of the JSON response that I have:</p>
<blockquote>
<pre><code>active: true,
login: "first_name.last_name",
first_name: "First name",
last_name: "Last name",
role: [
{
  id: "1",
  name: "Role 1",
  module: [
  {
      id: "1",
      active: true,
      name: "Module 1"
  },
  {
      id: "2",
      active: true,
      name: "Module 2"
  }]
}]</code></pre>
</blockquote>
<p>The problem is that the column <em>module</em> in my table <em>role</em> does not need to exist in my database because it is an another table that realize the links between theses models.</p>
<p>But at the same time I need this column when I get the model <em>role</em>.</p>
<p>I am testing something, I share my code as soon as it works.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56089" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56089" data-cf-modified-2401fb7e5d75463f1f4f12c4-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="18397" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>