---
layout: default
title: 'Migrating from CodeIgniter to Phalcon - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Migrating from CodeIgniter to Phalcon</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2741/AlgyTaylor" class="user-moderator-N"><span itemprop="name">AlgyTaylor</span></a></span>
            <time itemprop="dateCreated" datetime="2014-12-02T05:53:35-07:00">Dec '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-12-02T05:53:35-07:00">Dec '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>983</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/5abda3440f676a897fc5621ddd612fdc?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2741/AlgyTaylor" class="user-moderator-N"><span itemprop="name">AlgyTaylor</span></a></span>
                <span class="karma">3.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4155" href="#C4155">
        <time class="action-date">Dec '14</time>
    </a>
</div>
<div class="post-content"><div><p>Following on from a <a href="http://http://forum.phalcon.io/discussion/3877/is-possible-to-use-phalcon-as-a-library-inside-an-existing-codei">previous question</a> by jasmad...</p>
<p>I am in the process of migrating an application from CodeIgniter to Phalcon, and I'm looking with eagle eyes (puh intended) at the models, which to me seem the easiest place to start (as well as having the biggest performance improvement for my project).</p>
<p>Are there any kind of tutorials/guides to migrating models from CodeIgniter to Phalcon knocking about?  I've got a shedload of queries that look like:</p>
<pre><code>$this-&gt;db-&gt;select("a.*")
         -&gt;from("tableA a")
         -&gt;some
         -&gt;other
         -&gt;conditions;

         $this-&gt;b_model-&gt;join($this-&gt;db, "a.idB")</code></pre>
<p>and b_model might have a fn like this:</p>
<pre><code>function join (&amp;$db, $col) {
    $db-&gt;join("tableB b", $col . " = b.id", "left");
          -&gt;select ("b.*");
}</code></pre>
<p>Those are much simplified versions I've just typed up for conciseness, but hopefully it'll give an idea what I'm trying to achieve.</p>
<p>Just as a note, I don't want to use the in-built Phalcon relationship doodahs for reasons that are longwinded and will detract from the focus of the post. I just want to change those queries in to a PHQL query builder thing, also utilising some existing libraries &amp; helpers that the CodeIgniter models use.</p>
<p>Anyway, yeah, is there some kind of guide for folk wanting to migrate?  I don't mind writing up my experiences if there isn't, but it's always nice to have a guiding hand from someone who's done it before ... :)</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-e4ff1b76bef1df0e51a905de-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-e4ff1b76bef1df0e51a905de-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garb√©</span></a>        </span>
        <br>

        <span class="karma">24.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13961" href="#C13961">
                <time itemprop="dateCreated" datetime="2014-12-07T07:56:34-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>PHQL use in built Phalcon relationship, as it's the base of PHQL. So i don't think what you want can be done with PHQL.</p>
<p>We've &quot;migrated&quot; from CI to Phalcon, but rewriting eveything (but preserving the database). It's quite easy to do. You have to declare models and relations and with this you have already done 90% of the code.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13961" data-cf-modified-e4ff1b76bef1df0e51a905de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13961" data-cf-modified-e4ff1b76bef1df0e51a905de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5abda3440f676a897fc5621ddd612fdc?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2741/AlgyTaylor" class="user-moderator-N"><span itemprop="name">AlgyTaylor</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13986" href="#C13986">
                <time itemprop="dateCreated" datetime="2014-12-08T05:01:33-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi Olivier,</p>
<p>Thanks for replying. Yeah, I'd tried just adding in the relationships the normal Phalcon way, it was pretty easy and in most cases I would totally agree with you that it's the right way to do it.</p>
<p>However, in this case - because of the nature of the DB queries (one-to-many queries nested inside several other layers of one-to-many queries, so by the end a <em>normal</em> case would involve ~5k db queries for every request using the standard Phalcon method), the performance hit is so much that PHP just gives up/times out! An <em>exceptional</em> case would see <em>many</em> more queries. Anyway, the long and short of it is that I'd like the queries performned in a very specific way, since the performance can be very noticably improved by doing the right JOINs in the right places and parsing the data once it hits the PHP.</p>
<p>For the moment, I've just been rewriting the ActiveRecord queries to fit in with PHQL - you can do it, it's just not the most interesting work in the world!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13986" data-cf-modified-e4ff1b76bef1df0e51a905de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13986" data-cf-modified-e4ff1b76bef1df0e51a905de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4155" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>