---
layout: default
title: 'Trying to figure out ACL - Beginner with Phalcon - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/17/acl">Acl</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Trying to figure out ACL - Beginner with Phalcon</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/5743/gnikolopoulos" class="user-moderator-N"><span itemprop="name">George Nikolopoulos</span></a></span>
            <time itemprop="dateCreated" datetime="2015-12-16T01:10:18-07:00">Dec '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-12-16T01:10:18-07:00">Dec '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>805</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/a283fd4a491592977f7dc217beaeac4a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/5743/gnikolopoulos" class="user-moderator-N"><span itemprop="name">George Nikolopoulos</span></a></span>
                <span class="karma">8.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C9871" href="#C9871">
        <time class="action-date">Dec '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi all,</p>
<p>Excuse me if my question seems a bit childish, I am quite new to Phalcon, though I understand basic concepts of MVC.
Here is the situation:</p>
<p>I am making a small web application where there will be users of different levels, each having access to different ares of the backend. Currently, those are all saved in the database under a single table where a field called userlevel determines their role (eg 900 is admin, 700 is client etc).
I understand that Phalcon uses ACL to permit/deny access to certain controllers/actions. However in the examples I only see 2 roles assigned (Guests and Users). One is for logged in users, the other for everyone else.
How can I create more roles and assign them to the users during login, based on the userlevel field?</p>
<p>Also, I am thinking of creating 1 table for each user role and having separate login point for each role. Do you think this approach is better to implement with Phalcon?</p>
<p>Thanks for you time and excuse me if failed to understand something in the docs. I learn easier by doing, than by reading...</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-09903db4af89f110dc894dd5-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-09903db4af89f110dc894dd5-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Åšlawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="27783" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '15</span>
              </span><br/><a name="C27783" href="#C27783">
                <time itemprop="dateCreated" datetime="2015-12-16T05:04:59-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>IMHO i dont think you should store it in database, store it in file, and load one into memcache when application is first loaded. Then you have acl only in memcache, save changes in roles to files and reload memcache.</p>
<p>ACL in phalcon is just an object with array and some methods. But you have all the stuff like checking permission yourself(in dispatcher or controller - your choice).</p>
<p>You can add role just by simply:</p>
<pre><code class="language-php">$acl-&gt;addRole("ANONYMOUS");</code></pre>
<p>In service definition, thats why you should serialize it to file. And load it on start to memcache(then you dont load it from file). Second argument in addRole inherits all permissions from this parent role.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="27783" data-cf-modified-09903db4af89f110dc894dd5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="27783" data-cf-modified-09903db4af89f110dc894dd5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/e984ca5d22935b577e77fcbb53edb3e2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1653/stefanchiriac" class="user-moderator-N"><span itemprop="name">Stefan Chiriac</span></a>        </span>
        <br>

        <span class="karma">16.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="27869" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '15</span>
              </span><br/><a name="C27869" href="#C27869">
                <time itemprop="dateCreated" datetime="2015-12-17T09:26:26-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If you don't need the flexibility to edit the resources dinamically from backend, I would recommend going with the memory adapter. Take a look how is made in &quot;vokuro&quot; example, or even start from that.</p>
<p>If you need flexibility to add users, resources dinamically like a CMS, then things get complicated. Store everything in database and then build a function to build your acl using memory adapter. After you have the Acl object store it in cache and read it from there. This way you can have the flexibility you want, and not stressing the database useless. But make sure you clean the Acl cache and rebuild it when you change something in db.</p>
<p>You can use Acl Database adaptor if you don't want to create a custom one</p>
<p><a href="https://github.com/phalcon/incubator/tree/master/Library/Phalcon/Acl/Adapter">https://github.com/phalcon/incubator/tree/master/Library/Phalcon/Acl/Adapter</a></p>
<p>Acl Memory adaptor docs</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/acl.html">https://docs.phalcon.io/en/latest/reference/acl.html</a></p>
<p>If you don't need the CMS Acl flexibility, I recommend you to go for Memory adaptor.</p>
<p>Also to answer your question, no need to create different tables and different entry points. One entry point is enough, except if you want to separate entirely the frontend from backend.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="27869" data-cf-modified-09903db4af89f110dc894dd5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="27869" data-cf-modified-09903db4af89f110dc894dd5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/a283fd4a491592977f7dc217beaeac4a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/5743/gnikolopoulos" class="user-moderator-N"><span itemprop="name">George Nikolopoulos</span></a>        </span>
        <br>

        <span class="karma">8.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28135" href="#C28135">
                <time itemprop="dateCreated" datetime="2015-12-21T15:00:28-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I ended up using a multi-module configuration in order to implement some functionality I have in mind.</p>
<p>However, I am still struggling with ACL...</p>
<p>Can someone provide a (working) example of ACL implementation? I have 4 modules and have set up my routes correctly.
Login also works, so once a certain controller is accessed, I can display content based on auth status.
Keep in mind that I am new to Phalcon so make the example a bit more detailed...</p>
<p>I know I ask for too much, but I am trying to get my head around this for the past 3 days...</p>
<p>Thanks!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28135" data-cf-modified-09903db4af89f110dc894dd5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28135" data-cf-modified-09903db4af89f110dc894dd5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="9871" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>