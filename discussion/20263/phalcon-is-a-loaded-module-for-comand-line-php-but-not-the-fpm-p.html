---
layout: default
title: 'Phalcon is a loaded module for comand line PHP but not the fpm process? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Phalcon is a loaded module for comand line PHP but not the fpm process?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1887/gedq" class="user-moderator-N"><span itemprop="name">gedq</span></a></span>
            <time itemprop="dateCreated" datetime="2020-01-11T12:07:08-07:00">Jan '20</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2020-01-11T12:07:08-07:00">Jan '20</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '20</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>371</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a286d921c805627b25de0480bd9072c5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1887/gedq" class="user-moderator-N"><span itemprop="name">gedq</span></a></span>
                <span class="karma">3.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C20263" href="#C20263">
        <time class="action-date">Jan '20</time>
    </a>
</div>
<div class="post-content"><div><p>I can see phalcon loaded if I run &quot;php -m&quot; from the command line, but if I try to load it from the browser it doesn't work (not found) and if I look at phpinfo() then phalcon isn't there.</p>
<p>I'm running php 7.2 on CentOs 7, does anyone know how to enable phalcon specifcally for the cgi-fpm?</p>
<p>Thanks</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d01ce04a6be1a8b86c3546969d241bd2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1632/ruudboon" class="user-moderator-N"><span itemprop="name">Ruud Boon</span></a>        </span>
        <br>

        <span class="karma">10.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C61787" href="#C61787">
                <time itemprop="dateCreated" datetime="2020-01-11T12:41:10-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Did you restart php-fpm after installing?
Besides that php-fpm can have his own php.ini. Make sure it's added there as well.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61787" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61787" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2023c251e4de842ff430fd91bb6a36a4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/26/Riu" class="user-moderator-N"><span itemprop="name">Radek Muszy≈Ñski</span></a>        </span>
        <br>

        <span class="karma">4.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C61793" href="#C61793">
                <time itemprop="dateCreated" datetime="2020-01-12T05:57:39-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Check where is you php.ini file in cli:</p>
<blockquote>
<p>php -i | grep php.ini</p>
</blockquote>
<p>Probably you have different configuration files for cli and fpm.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61793" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61793" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1db729595c5625de86a527898a2fa4e0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/13255/Ruzgfpegk" class="user-moderator-N"><span itemprop="name">Ruzgfpegk</span></a>        </span>
        <br>

        <span class="karma">450</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C61861" href="#C61861">
                <time itemprop="dateCreated" datetime="2020-01-17T01:24:36-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>CentOS7 only offers php-5.4.16, which means you're using an external repository, and each maintainer may have done things his own way.</p>
<p>As mentioned above, check the files used through both the CLI and phpinfo for those two settings:</p>
<ul>
<li>&quot;Loaded Configuration File&quot;</li>
<li>&quot;Scan this dir for additional .ini files&quot;</li>
</ul>
<p>Note that with Phalcon4 you'll need to have PSR installed and loaded before Phalcon.
To avoid any issue related to that, I opt to create two files in the directory specified in &quot;Scan this dir for additional .ini files&quot;:</p>
<pre><code>echo 'extension=psr.so' &gt; /ADDITIONAL_INI_DIRECTORY/40-psr.ini
echo 'extension=phalcon.so' &gt; /ADDITIONAL_INI_DIRECTORY/50-phalcon.ini</code></pre>
<p>(40 will be loaded before 50)</p>
<p>It may also be useful to describe how you obtained the Phalcon binary (and eventually PSR), because if you built them yourself you may not have targeted the correct PHP version (you may have mutiple php-config and phpize installed).</p>
<p>I wrote a quick guide for this kind of shenanigans on a specific repository, maybe you could adapt it to your situation:</p>
<ul>
<li><a href="https://github.com/Ruzgfpegk/PhalconOnKUSANAGI">https://github.com/Ruzgfpegk/PhalconOnKUSANAGI</a></li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61861" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61861" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a286d921c805627b25de0480bd9072c5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1887/gedq" class="user-moderator-N"><span itemprop="name">gedq</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C61793"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/2023c251e4de842ff430fd91bb6a36a4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Radek Muszy≈Ñski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C61875" href="#C61875">
                <time itemprop="dateCreated" datetime="2020-01-18T19:26:20-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Check where is you php.ini file in cli:</p>
<blockquote>
<p>php -i | grep php.ini</p>
</blockquote>
<p>Probably you have different configuration files for cli and fpm.</p>
</blockquote>
<p>Thank you for the suggestion. The result is:</p>
<p>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5e2c31312a1e333f3732">[email&#160;protected]</a> ~]# php -i | grep php.ini</p>
<p>PHP Warning:  PHP Startup: Unable to load dynamic library 'solr.so' (tried: /usr/lib64/php/modules/solr.so (/usr/lib64/php/modules/solr.so: cannot open shared object file: No such file or directory), /usr/lib64/php/modules/solr.so.so (/usr/lib64/php/modules/solr.so.so: cannot open shared object file: No such file or directory)) in Unknown on line 0</p>
<p>PHP Warning:  PHP Startup: Unable to load dynamic library 'phalcon' (tried: /usr/lib64/php/modules/phalcon (/usr/lib64/php/modules/phalcon: cannot open shared object file: No such file or directory), /usr/lib64/php/modules/phalcon.so (/usr/lib64/php/modules/phalcon.so: undefined symbol: php_json_decode_ex)) in Unknown on line 0</p>
<p>Configuration File (php.ini) Path =&gt; /etc</p>
<p>Loaded Configuration File =&gt; /etc/php.ini</p>
<p>am I right in thinking that I need solr to run phalcon? I've gotten as far as trying to install solr. It's not something I've ever needed (directly) so I know very little about it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61875" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61875" data-cf-modified-2f0135b4a6ef650d85ab5a04-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="20263" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>