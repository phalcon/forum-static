---
layout: default
title: 'Using Related Models in Phalcon with Namespaces - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Using Related Models in Phalcon with Namespaces</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a></span>
            <time itemprop="dateCreated" datetime="2014-08-06T00:54:13-07:00">Aug '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-08-06T00:54:13-07:00">Aug '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">15</span>
                </td>
                <td>
                    <label>Views</label><br>1859</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a></span>
                <span class="karma">13.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3040" href="#C3040">
        <time class="action-date">Aug '14</time>
    </a>
</div>
<div class="post-content"><div><p>I've been working with Phalcon for the last couple of months and slowly getting to grips with it. However, I've stumbled across an issue and it's got me stumped. I'm hoping that someone here can provide some assistance.</p>
<p>N.B. I originally posted this on stackoverflow, and whilst I'm not one for &quot;cross-posting&quot; this may be the better place to post. If/when this gets solved, I will update the other site with the answer.</p>
<p>I have two tables in the DB that are related as a one-to-many. clients-&gt;sites. These are the two definitions of the models in Phalcon:</p>
<pre><code class="language-php">    #File: CrmClients.php
    namespace CRM\Models;
    use Phalcon\Mvc\Model\Resultset\Simple as Resultset;

    class CrmClients extends \Phalcon\Mvc\Model
    {
        public id;

        public function initialize()
        {
            $this-&gt;hasMany("id", "CRM\Models\CrmSites", "client_id", array("alias" =&gt; "Sites"));
        }
    }</code></pre>
<pre><code class="language-php">    #File: CrmSites.php
    namespace CRM\Models;

    class CrmSites extends \Phalcon\Mvc\Model
    {
        public id;
        public client_id;

        public function initialize()
        {
            $this-&gt;belongsTo("client_id", "CRM\Models\CrmClients", "id", array("foreignKey" =&gt; true, "alias" =&gt; "Clients"));
        }
    }</code></pre>
<p>Then in the controller I have:</p>
<pre><code class="language-php">$profile = Clients::findFirstById($id);
$sites = $profile-&gt;Sites;</code></pre>
<p>When I run this I end up with the following error:</p>
<blockquote>
<p>Notice: Access to undefined property CRM\Models\CrmClients::Sites in \html\apps\crm\controllers\ClientsController.php on line 51</p>
</blockquote>
<p>I'm at a loss as to what I'm doing wrong here, and any help would be greatly appreciated.</p>
<p>If you have any questions, or need any clarification, please just ask.</p>
<p>Thanks for your help in advance.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-f27c29fa3374aea21249b45a-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-f27c29fa3374aea21249b45a-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="10059" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '14</span>
              </span><br/><a name="C10059" href="#C10059">
                <time itemprop="dateCreated" datetime="2014-08-06T01:30:42-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I am beginner but what come to my mind is:</p>
<ul>
<li>Maybe you need to change quatiation marks? Like from:</li>
</ul>
<pre><code class="language-php">"CRM\Models\CrmSites"
</code></pre>
<p>to</p>
<pre><code class="language-php">
'CRM\Models\CrmSites'
</code></pre>
<p>? I don't know why in the docs they use ' with namespaces.</p>
<ul>
<li>
<p>Maybe foreignKey should be specified in both models?</p>
</li>
<li>
<p>Did you registered namespaces in your bootstrap properly?</p>
</li>
<li>Could you specify how you included <code>CrmClients</code> into <code>Clients</code> class in your controller? I mean the <code>use</code> clause.</li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10059" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10059" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/444180903345e196a857d69ebb6a335a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/205/mruz" class="user-moderator-N"><span itemprop="name">Mariusz Łączak</span></a>        </span>
        <br>

        <span class="karma">595</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10063" href="#C10063">
                <time itemprop="dateCreated" datetime="2014-08-06T01:56:31-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>How about:</p>
<pre><code class="language-php">$profile = Clients::findFirstById($id);
$sites = $profile-&gt;getSites();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10063" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10063" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10067" href="#C10067">
                <time itemprop="dateCreated" datetime="2014-08-06T02:18:40-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Conradaek">@Conradaek</a>: No change with the ' vs &quot;. I've added the foreignKey to both and removed from both - no change. The bootstrap registration is done using the following (in the Module.php file):</p>
<pre><code class="language-php">public function registerAutoloaders()
{
    $loader = new Loader();
    $loader-&gt;registerNamespaces(array(
        'CRM\Controllers'    =&gt; __DIR__ . '/controllers/',
        'CRM\Models'         =&gt; __DIR__ . '/models/',
        'common\Controllers' =&gt; __DIR__ . '/../../common/controllers/',
        'common\Models'      =&gt; __DIR__ . '/../../common/models/',
        'Phalcon'                   =&gt; __DIR__ . '/../../../../incubator/Library/Phalcon'
    ));

$loader-&gt;register();
}</code></pre>
<p>The include is done using:</p>
<pre><code class="language-php">namespace CRM\Controllers;

use common\Models\SystemMenuFrontend;
use CRM\Models\CrmClients as Clients;</code></pre>
<p><a href="https://forum.phalcon.io/user/0/Mariusz">@Mariusz</a>: same thing just getSites rather than Sites</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10067" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10067" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10071" href="#C10071">
                <time itemprop="dateCreated" datetime="2014-08-06T02:23:41-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hmmm I think that there might be some problems when you declare this Phalcon namespace. Don't you think it might compete with Phalcon extension classes? I am importing phalcon incubator classes into my own namespace.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10071" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10071" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="10074" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '14</span>
              </span><br/><a name="C10074" href="#C10074">
                <time itemprop="dateCreated" datetime="2014-08-06T02:33:17-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Conradaek">@Conradaek</a>: when you say you're importing them into your own namespace do you mean like this?</p>
<pre><code class="language-php">'common\Incubator'  =&gt; __DIR__ . '/.../...blah/';</code></pre>
<p>And if that is the case, how are you using it in the sevices.php file? Whenever I try and register it uner a different namespace, I get an error that it can't find it with the namespace...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10074" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10074" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10076" href="#C10076">
                <time itemprop="dateCreated" datetime="2014-08-06T02:48:04-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes. So lets say I have Getttext class from Phalcon incubator and I want to put it in <code>common\Incubator</code> namespace as you have wrote. In your module.php file I will register it as:</p>
<pre><code class="language-php">
'common\Incubator'  =&gt; __DIR__ . '/../../common/Incubator/'
</code></pre>
<p>In <code>common</code> directory I would create <code>Incubator</code> directory. I would put there <code>getttext</code> class file with <code>namespace common\Incubator;</code> at the beginning. But I don't know if this is the soruce of error. Probably you need to wait for some experts to return their verdict.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10076" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10076" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10077" href="#C10077">
                <time itemprop="dateCreated" datetime="2014-08-06T02:57:53-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Conradaek">@Conradaek</a>: I decided to test your thought by removing the incubator entirely from the source code - I'm only using it in one or two places at present. However, even removing it doesn't help with the issue. I still get the same message up. Thanks for the idea though, I forgot to  add the namespace to the incubator files, so of course it was not able to find the method.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10077" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10077" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/444180903345e196a857d69ebb6a335a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/205/mruz" class="user-moderator-N"><span itemprop="name">Mariusz Łączak</span></a>        </span>
        <br>

        <span class="karma">595</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10078" href="#C10078">
                <time itemprop="dateCreated" datetime="2014-08-06T03:00:22-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I do not think that this is the cause of the problem <a href="https://github.com/phalcon/incubator#autoloading-from-the-incubator">https://github.com/phalcon/incubator#autoloading-from-the-incubator</a></p>
<pre><code class="language-php">$loader = new Phalcon\Loader();

$loader-&gt;registerNamespaces(array(
    'Phalcon' =&gt; '/path/to/incubator/Library/Phalcon/'
));

$loader-&gt;register();</code></pre>
<p>But you can try, please check whats happens if you comment this line:</p>
<pre><code class="language-php">// 'Phalcon'                   =&gt; __DIR__ . '/../../../../incubator/Library/Phalcon'</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10078" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10078" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10131" href="#C10131">
                <time itemprop="dateCreated" datetime="2014-08-07T05:11:07-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In your <code>CrmClients.php</code> you declare <code>Phalcon\Mvc\Model\Resultset\Simple</code> in <code>use</code> clause, why?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10131" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10131" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="10135" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '14</span>
              </span><br/><a name="C10135" href="#C10135">
                <time itemprop="dateCreated" datetime="2014-08-07T09:22:29-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Mariusz">@Mariusz</a>: i've tried without the incubator and no change.</p>
<p><a href="https://forum.phalcon.io/user/0/conradaek">@conradaek</a>: i use the simple resultset elsewhere in the code. i've tried removing it to see if that is the culprit, but again no further joy.</p>
<p>As an update, i've tried changing the code from <code>$profile-&gt;sites;</code> to <code>$profile-&gt;getRelated("sites");</code> which gives me a slightly different error message:</p>
<blockquote>
<p>There is no defined relations for the model &quot;CRM\Models\CrmClients&quot; using alias &quot;sites&quot;</p>
</blockquote>
<p>Furthermore, when I try and run the following code: <code>Clients::initialize()</code> I get this error message:</p>
<blockquote>
<p>The static method &quot;initialize&quot; doesn't exist on model &quot;CRM\Models\CrmClients&quot;</p>
</blockquote>
<p>Now I'm not entirely sure whether or not I should be able to call that particular function from the controller, but I get the feeling that the initialize function is not  even working. Is there anyway that I can test to see if it is working?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10135" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10135" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="10137" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '14</span>
              </span><br/><a name="C10137" href="#C10137">
                <time itemprop="dateCreated" datetime="2014-08-07T09:30:09-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Second error is ok. <code>initialize()</code> method is not static. So static <code>initialize()</code> method really does not exist.</p>
<p>In referrence to <code>sites</code> or <code>Sites</code> the error changed because as far as I know case-sensitivness is relevant but not sure what constitutes this relevance (operating system or Phalcon).</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10137" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10137" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10138" href="#C10138">
                <time itemprop="dateCreated" datetime="2014-08-07T09:36:11-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think I found the case. Change definitions of your relationships:</p>
<ul>
<li>from <code>CRM\Models\CrmSites</code> to <code>SPARCS\CRM\Models\CrmSites</code></li>
<li>from <code>CRM\Models\CrmClients</code> to <code>SPARCS\CRM\Models\CrmClients</code></li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10138" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10138" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10139" href="#C10139">
                <time itemprop="dateCreated" datetime="2014-08-07T09:39:02-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Conradaek">@Conradaek</a>: sorry that's a mistake in the copying. I've updated the comment to correct.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10139" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10139" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10140" href="#C10140">
                <time itemprop="dateCreated" datetime="2014-08-07T09:39:27-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I mean:</p>
<pre><code class="language-php">
class CrmClients extends \Phalcon\Mvc\Model
    {
        public id;

        public function initialize()
        {
            $this-&gt;hasMany("id", "SPARCS\CRM\Models\CrmSites", "client_id", array("alias" =&gt; "Sites"));
        }
    }

class CrmSites extends \Phalcon\Mvc\Model
    {
        public id;
        public client_id;

        public function initialize()
        {
            $this-&gt;belongsTo("client_id", "SPARCS\CRM\Models\CrmClients", "id", array("foreignKey" =&gt; true, "alias" =&gt; "Clients"));
        }
    }
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10140" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10140" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="10141" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '14</span>
              </span><br/><a name="C10141" href="#C10141">
                <time itemprop="dateCreated" datetime="2014-08-07T09:42:39-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah, I know what you meant. I've made sure that all the namespaces are correct.</p>
<p>The SPARCS was a typo that I put in when I ran the code and copied the text, which I realised and updated the code to remove the SPARCS part. Then I re-ran, and got the same error, but pasted the old error message by mistake. I assure you that all the namespaces are correct and match with what they should be.</p>
<p>Sorry for the confusion :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10141" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10141" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10142" href="#C10142">
                <time itemprop="dateCreated" datetime="2014-08-07T10:11:18-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So how did you put this sparcs into the code? Is <code>SPARCS</code> phrase present in any namespace in your project? Is <code>CRM</code> phrase the top level of your namespace?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10142" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10142" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10143" href="#C10143">
                <time itemprop="dateCreated" datetime="2014-08-07T10:12:05-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Could you copy/paste both your models and the one controller? Or put it on github?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10143" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10143" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="10144" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '14</span>
              </span><br/><a name="C10144" href="#C10144">
                <time itemprop="dateCreated" datetime="2014-08-07T10:17:15-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Conradaek">@Conradaek</a>: CRM is the top level of the namespace in this instance. The SPARCS ended up in the code due to a snipet in Sublime.</p>
<p>The models and controller as requested are as follows:</p>
<pre><code class="language-php">namespace CRM\Controllers;

use common\Models\SystemMenuFrontend;
use CRM\Models\CrmClients as Clients;

class ClientsController extends ControllerBase
{

    public function onConstruct()
    {
        parent::onConstruct();
        // Get the Controller Menu:
        $this-&gt;view-&gt;setVar("controller_menu", SystemMenuFrontend::retrieve('clients', array("visible = 'true'"), 0));
        $this-&gt;view-&gt;setVar("breadcrumbs", SystemMenuFrontend::retrieve_breadcrumbs('clients'));
        $this-&gt;view-&gt;setVar('system_current_path', 'crm/clients');

        parent::_addJs("public/js/CRM/Clients.js");
    }

    public function indexAction()
    {
        // Lets check the access levels:
        // if ($this-&gt;acl-&gt;isAllowed($this-&gt;session-&gt;get("usergroup"), "CRM_clients", "r") !== true)
        if ($this-&gt;acl-&gt;isAllowed("root", "CRM_clients", "r") !== true)
        {
            // Insufficient access rights, so lets redirect to the login page:
            $this-&gt;session-&gt;set("redirect", "/crm/clients/index");
            return $this-&gt;response-&gt;redirect('login');
        }

        $conditions = array(
            'columns'       =&gt; 'id, name, telephone, fax',
            'order'         =&gt; 'name ASC'
            );

        $this-&gt;view-&gt;setVar('clients', Clients::find($conditions));

        $this-&gt;view-&gt;setVar('indexes', CLients::index());
    }

    public function profileAction($id)
    {
        if ($this-&gt;acl-&gt;isAllowed("root", "CRM_clients", "r") !== true)
        {
            // Insufficient access rights, so lets redirect to the login page:
            $this-&gt;session-&gt;set("redirect", "/crm/clients/index");
            return $this-&gt;response-&gt;redirect('login');
        }

        $profile = Clients::findFirstById($id);
        $sites = $profile-&gt;sites;

        $this-&gt;view-&gt;setVar('client', $profile);
    }
}</code></pre>
<pre><code class="language-php">namespace CRM\Models;

use Phalcon\Mvc\Model\Resultset\Simple as Resultset;

class CrmClients extends Phalcon\Mvc\Model
{

    /**
     *
     * @var integer
     */
    public $id;

    /**
     *
     * @var string
     */
    public $name;

    /**
     *
     * @var string
     */
    public $url;

    /**
     *
     * @var string
     */
    public $logo_url;

    /**
     *
     * @var integer
     */
    public $hq_address_id;

    /**
     *
     * @var integer
     */
    public $invoice_address_id;

    /**
     *
     * @var string
     */
    public $telephone;

    /**
     *
     * @var string
     */
    public $fax;

    /**
     * Independent Column Mapping.
     */
    public function columnMap()
    {
        return array(
            'id' =&gt; 'id', 
            'name' =&gt; 'name', 
            'url' =&gt; 'url', 
            'logo_url' =&gt; 'logo_url', 
            'hq_address_id' =&gt; 'hq_address_id', 
            'invoice_address_id' =&gt; 'invoice_address_id', 
            'telephone' =&gt; 'telephone', 
            'fax' =&gt; 'fax'
        );
    }

    public function initialize()
    {
        $this-&gt;hasMany("id", 'CRM\Models\CrmSites', "client_id", array("alias" =&gt; "sites"));
        // $this-&gt;hasMany("id", 'CRM\Models\CrmContacts', "client_id", array("alias" =&gt; "contacts"));

        // $this-&gt;belongsTo("hq_address_id", "common\Models\CoreAddresses", "id", array("alias" =&gt; "hq_address"));
        // $this-&gt;belongsTo("invoice_address_id", "common\Models\CoreAddresses", "id", array("alias" =&gt; "invoice_address"));
    }

}</code></pre>
<pre><code class="language-php">namespace CRM\Models;

class CrmSites extends \Phalcon\Mvc\Model
{

    /**
     *
     * @var integer
     */
    public $id;

    /**
     *
     * @var integer
     */
    public $client_id;

    /**
     *
     * @var integer
     */
    public $address_id;

    /**
     *
     * @var string
     */
    public $telephone;

    /**
     *
     * @var string
     */
    public $fax;

    /**
     * Independent Column Mapping.
     */
    public function columnMap()
    {
        return array(
            'id' =&gt; 'id', 
            'client_id' =&gt; 'client_id', 
            'address_id' =&gt; 'address_id', 
            'telephone' =&gt; 'telephone', 
            'fax' =&gt; 'fax'
        );
    }

    public function initialize()
    {
        $this-&gt;belongsTo("client_id", 'CRM\Models\CrmClients', "id", array("foreignKey" =&gt; true, "alias" =&gt; "Clients"));
        $this-&gt;belongsTo("address_id", 'common\Models\CoreAddresses', "id", array("foreignKey" =&gt; true, "alias" =&gt; "Address"));
    }

}</code></pre>
<p>And just in case it's needed:
Module.php</p>
<pre><code class="language-php">&lt;?php

namespace CRM;

use Phalcon\Loader;
use Phalcon\Mvc\View;
use Phalcon\Db\Adapter\Pdo\Mysql as DbAdapter;
use Phalcon\Mvc\ModuleDefinitionInterface;
use Phalcon\Events\Manager;

class Module implements ModuleDefinitionInterface
{

    /**
     * Registers the module auto-loader
     */
    public function registerAutoloaders()
    {

        $loader = new Loader();

        $loader-&gt;registerNamespaces(array(
            'CRM\Controllers'    =&gt; __DIR__ . '/controllers/',
            'CRM\Models'         =&gt; __DIR__ . '/models/',
            'common\Controllers' =&gt; __DIR__ . '/../../common/controllers/',
            'common\Models'      =&gt; __DIR__ . '/../../common/models/',
            'Phalcon'                   =&gt; __DIR__ . '/../../../../incubator/Library/Phalcon'
        ));

        $loader-&gt;register();
    }

    /**
     * Registers the module-only services
     *
     * @param Phalcon\DI $di
     */
    public function registerServices($di)
    {

        /**
         * Read configuration
         */
        $config = include __DIR__ . "/config/config.php";

        /**
         * Setting up the view component
         */
        $di['view'] = function () {
            // Load the events Manager:
            $eventsManager = new Manager();
            $eventsManager-&gt;attach("view:afterRender", new \common\Controllers\Translator());

            $view = new View();
            $view-&gt;setViewsDir(__DIR__ . '/views/');
            $view-&gt;setLayoutsDir('../../../common/layouts/');
            $view-&gt;setTemplateAfter('frontend');
            $view-&gt;setEventsManager($eventsManager);
            $view-&gt;registerEngines(array(
                ".volt" =&gt; function ($view, $di) {
                    $volt = new \Phalcon\Mvc\View\Engine\Volt($view, $di);

                    $volt-&gt;setOptions(array(
                        'compiledPath'  =&gt; __DIR__ . '/../../cache/',
                        'compiledSeparator' =&gt; '_'
                        ));
                    return $volt;
                })
            );

            return $view;
        };

        /**
         * Database connection is created based in the parameters defined in the configuration file
         */
        $di['db'] = function () use ($config) {
            return new DbAdapter(array(
                "host" =&gt; $config-&gt;database-&gt;host,
                "username" =&gt; $config-&gt;database-&gt;username,
                "password" =&gt; $config-&gt;database-&gt;password,
                "dbname" =&gt; $config-&gt;database-&gt;name
            ));
        };

    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10144" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10144" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10145" href="#C10145">
                <time itemprop="dateCreated" datetime="2014-08-07T10:41:15-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Your <code>CrmClients</code> class extends <code>Phalcon\Mvc\Model</code>. I think it should extend <code>\Phalcon\Mvc\Model</code>. I mean there is lack of slash at the begining.</p>
<p>Did it helped?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10145" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10145" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10146" href="#C10146">
                <time itemprop="dateCreated" datetime="2014-08-07T10:44:35-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Unfortunately, adding/removing the slash doesn't help. I added it to CrmClients, then removed from both to see if it made a difference in either case, but alas, no.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10146" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10146" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10147" href="#C10147">
                <time itemprop="dateCreated" datetime="2014-08-07T10:47:19-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Could you please upload the relevant parts to a repository in Github, so anyone can clone the project and try to find the issue?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10147" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10147" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10148" href="#C10148">
                <time itemprop="dateCreated" datetime="2014-08-07T10:49:18-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Do you use MySQL maybe? Could you copy/paste code for this two tables? I will run it on my computer. We are to far to let it unsolved:)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10148" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10148" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10149" href="#C10149">
                <time itemprop="dateCreated" datetime="2014-08-07T11:33:06-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have run the code you pasted on my computer and it works.</p>
<p>I have added (but I think it's not the issue) is in the module file:</p>
<pre><code class="language-php">
//Registering a dispatcher
$di-&gt;set('dispatcher', function() {
  $dispatcher = new Dispatcher();
  $dispatcher-&gt;setDefaultNamespace("CRM\Controllers");
  return $dispatcher;
});
</code></pre>
<p>I have also added this <code>\</code> slash in one of your models when extending from Phalcon model class.</p>
<p>I am using apache on windows XP, php 5.4.</p>
<pre><code>
                   __
                  / \--..____
                   \ \       \-----,,,..
                    \ \                 \--,,..
                     \ \                 \  ,'
                      \ \                 \ ``..
                       \ \                 \-''
                        \ \        __,,--'''
                         \ \       \.
                          \ \      ,/
                           \ \__..-
                            \ \
                             \ \
                              \ \   
                               \ \
                                \ \
                                 \ \
                                  \ \
                                   \ \
                                    \ \
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10149" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10149" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10151" href="#C10151">
                <time itemprop="dateCreated" datetime="2014-08-07T12:07:43-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well that's quite frustrating :) So that means that there's something either in my setup of the phalcon app or something to do with my Server configuration.</p>
<p>I'm running XAMPP1.8.3 on Windows 8.1 with PHP5.5.11 and Phalcon 1.3.2 on my dev platform. I have also tested on a test server in Linux with PHP 5.5.9 and Phalcon 1.3.2. Neither of these work.</p>
<p>This would point to something with the setup of the phalcon app. I'll upload some files to github and then post the link here when I'm done. There's likely something obvious that I've missed. Thanks for the help so far<a href="https://forum.phalcon.io/user/0/Conradaek"> @Conradaek</a>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10151" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10151" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C10152" href="#C10152">
                <time itemprop="dateCreated" datetime="2014-08-07T12:45:49-07:00" class="action-date">Aug '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is rather embarrising and I'm extremely sorry for this: whilst copying the files to a clean folder (for uploading to github) I noticed that the CrmClients file that I've been editing and we've been frustratingly trying to get to work, didn't quite look the same as what I last edited it to. It transpires that I've somehow copied the CrmClients file to another module in the folder structure, and have been working on that copy and not the one in the CRM folder... :doh:</p>
<p>I've updated the apps/crm/models/CrmClients.php file with the initialize function and sure enough the whole thing worked perfectly. I'm now going to put the computer down, and slowly step away.</p>
<p><a href="https://forum.phalcon.io/user/0/conradaek">@conradaek</a>: I don't think the dispatcher code makes any difference to the running, as it seems mine works without it.</p>
<p><a href="https://forum.phalcon.io/user/0/conradaek">@conradaek</a>,<a href="https://forum.phalcon.io/user/0/mariusz"> @mariusz</a> and<a href="https://forum.phalcon.io/user/1/phalcon"> @phalcon</a>: I really appreciate the help on this one and for you guys taking the time to help, even though it transpired to be completely &quot;user error&quot; and me being a complete idiot.</p>
<p>Thanks again.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="10152" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="10152" data-cf-modified-f27c29fa3374aea21249b45a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3040" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>