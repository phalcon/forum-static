---
layout: default
title: 'Failed to receive encrypted url variable - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/16/security">Security</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Failed to receive encrypted url variable</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a></span>
            <time itemprop="dateCreated" datetime="2015-12-22T11:47:02-07:00">Dec '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-12-22T11:47:02-07:00">Dec '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>693</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a></span>
                <span class="karma">81.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C9973" href="#C9973">
        <time class="action-date">Dec '15</time>
    </a>
</div>
<div class="post-content"><div><p>This is where I send my link variable to another form</p>
<pre><code>&lt;td&gt;
    &lt;?php echo $this-&gt;tag-&gt;linkTo(array("spm_contacto/delete/" .$this-&gt;crypt-&gt;encryptBase64($spm_contacto-&gt;CONT_CODIGO), "&lt;img src='" . $this-&gt;url-&gt;get("img/tolbar/Delete_32x32.png") . "'&gt;Eliminar")); ?&gt;&lt;/td&gt;</code></pre>
<p>To which I test if sending values sent encrypted or not</p>
<pre><code>&lt;?php $prueba=$this-&gt;crypt-&gt;encryptBase64($spm_contacto-&gt;CONT_CODIGO);
echo $prueba;
echo $this-&gt;crypt-&gt;decryptBase64($prueba);
?&gt;</code></pre>
<p>This is the result
SqVg4xBmCQIkHFT656DBiToN0Yz8k4w+wuQQfn+BtGa1bsyee3UsRJoFIX+rL1L2Zrhgl3XiDXGuEr5c4QT+Ew==0401014717 zqxExWmJDAIU1k7M3adUO/1C5U9ywUbp5ULlxwdYlQm1KO4REUvB9P9V1Rzden+LI4SiNMll5fWpdD7FZO4tyQ==0803784016 Ssau2QyuBBgc8eQa1cVl505zHH4wmwbOhz34pSZuDnDxOGx3DX1ztPrjdf9fTJh5knTWZQeCjr5ZZ6ShSLbBbw==0908868128 qHDZldcucpDezWYvXJBvQwTwf6eWHpZFRwqXFbMZahN/m6q6imhUKI36THEgoUdIT7UCIhGhp5o8cW3LnRjRvw==1713516779 b+eGob7Lk6DO5gFK8nBjIRXs/l4GvuR/BBjqifJV0MxwgqByQMwOZ82rSLfqx972k9BIU5b46k3SihgSjtKv1A==1716931553 Q5BTRerh8RQ25s74szSjtYJqWRp8tviO264+pyWdGf3EatO29L2JVobyVHN4zLE+7krYoxgDSAcB4un9ncl+YQ==1720566247 QZKy1oPBpukuR5SKdPOD5xs2sPVs5bMt1CLRxrzwYmo0bbjvFAiAe6aroWkFObTmoS/8jlilX6h1JL5smR8ejA==1721241899 jHV/9SJTDsUa19u7D9GH3SS4m+chAYk1mRNyfWmg+pacR27rpL3d4vEuP2+Th6vBnbukJ2/rgdzK29sqthPOmw==1723995336 yBbE/lPatFc68gplLvTdb/VQp0ehAAwVZnEi/FQSKcmDAQxd/Y6ue11OeZrW6k1w5aVu2y59HhizbGf9C9nQRg==1724130693 2s7ylO4QeNSPaVaBnF8gFJmRGq+Zu5bSyFlg0gHuMEUxzPGvZcShIxR8an5CUjtlDuTojZQrpi0x59GtFTMq9g==1724908197</p>
<p>In my controller that receives the variable is so</p>
<pre><code>echo $CONT_CODIGO;
echo $this-&gt;crypt-&gt;decryptBase64(trim($CONT_CODIGO));
$spm_contacto = SpmContacto::findFirstByCONT_CODIGO($this-&gt;crypt-&gt;decryptBase64($CONT_CODIGO));
        if (!$spm_contacto) {
            $this-&gt;flash-&gt;error("spm_contacto was not found");

            return $this-&gt;dispatcher-&gt;forward(array(
                "controller" =&gt; "spm_contacto",
                "action" =&gt; "index"
            ));
        }</code></pre>
<p>But the result is</p>
<p>C9YNI1bl4LQ0OBVoyMSybdVv4�8���C�9��K2�sspm_contacto was not found</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-fa06e91aefc533a6c745ca11-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-fa06e91aefc533a6c745ca11-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/1f10cf3015dc4f8e9ff090600b8cf39f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2755/xeleniumz" class="user-moderator-N"><span itemprop="name">xeleniumz</span></a>        </span>
        <br>

        <span class="karma">11.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="28265" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '15</span>
              </span><br/><a name="C28265" href="#C28265">
                <time itemprop="dateCreated" datetime="2015-12-25T18:45:37-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>use phalcon filter to remove symbol from base64 encrypt
<a href="https://docs.phalcon.io/en/latest/reference/filter.html">https://docs.phalcon.io/en/latest/reference/filter.html</a></p>
<pre><code class="language-php">&lt;?php
use Phalcon\Filter;

$filter = new Filter();

echo $CONT_CODIGO;
$var =  $filter-&gt;sanitize($this-&gt;crypt-&gt;decryptBase64(trim($CONT_CODIGO)),"alphanum");
echo $var;
$spm_contacto = SpmContacto::findFirstByCONT_CODIGO($var);
        if (!$spm_contacto) {
            $this-&gt;flash-&gt;error("spm_contacto was not found");

            return $this-&gt;dispatcher-&gt;forward(array(
                "controller" =&gt; "spm_contacto",
                "action" =&gt; "index"
            ));
        }
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28265" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28265" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="28281" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '15</span>
              </span><br/><a name="C28281" href="#C28281">
                <time itemprop="dateCreated" datetime="2015-12-25T22:48:27-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>this is the result</p>
<pre><code>NMrllwMBUZ5y i0m4aFUKphKgORhx7Dsj0miIY1pgZvpESq26X22kpysI2055GD7cK2aeQHNEBLoHmMiGbfYig==Parameter 'text' must be a string</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28281" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28281" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28283" href="#C28283">
                <time itemprop="dateCreated" datetime="2015-12-25T23:01:03-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is the code</p>
<pre><code>        public function editAction($CONT_CODIGO) {
        if (!$this-&gt;request-&gt;isPost()) {
            echo $CONT_CODIGO;
            echo $this-&gt;crypt-&gt;decryptBase64(trim($CONT_CODIGO));
            $filter = new Filter();

        $var = $filter-&gt;sanitize($this-&gt;crypt-&gt;decryptBase64(trim($CONT_CODIGO)), "alphanum");
        echo $var;
        $spm_contacto = SpmContacto::findFirstByCONT_CODIGO($var);
        if (!$spm_contacto) {
            $this-&gt;flash-&gt;error("spm_contacto was not found");

            return $this-&gt;dispatcher-&gt;forward(array(
                        "controller" =&gt; "spm_contacto",
                        "action" =&gt; "index"
            ));
        }

        $this-&gt;view-&gt;CONT_CODIGO = $spm_contacto-&gt;CONT_CODIGO;

        $this-&gt;tag-&gt;setDefault("CONT_CODIGO", $spm_contacto-&gt;CONT_CODIGO);
        $this-&gt;tag-&gt;setDefault("CONT_CEDULA", $spm_contacto-&gt;CONT_CEDULA);
        $this-&gt;tag-&gt;setDefault("CONT_RUCIDE", $spm_contacto-&gt;CONT_RUCIDE);
        $this-&gt;tag-&gt;setDefault("CONT_NOMBRE", $spm_contacto-&gt;CONT_NOMBRE);
        $this-&gt;tag-&gt;setDefault("CON_ESTADO", $spm_contacto-&gt;CON_ESTADO);
        $this-&gt;tag-&gt;setDefault("CONT_TELEFO", $spm_contacto-&gt;CONT_TELEFO);
        $this-&gt;tag-&gt;setDefault("CONT_DIRECC", $spm_contacto-&gt;CONT_DIRECC);
        $this-&gt;tag-&gt;setDefault("CONT_AREA", $spm_contacto-&gt;CONT_AREA);
        $this-&gt;tag-&gt;setDefault("CONT_CARGO", $spm_contacto-&gt;CONT_CARGO);
        $this-&gt;tag-&gt;setDefault("CONT_TIPOXX", $spm_contacto-&gt;CONT_TIPOXX);
        $this-&gt;tag-&gt;setDefault("CONT_EMAIL", $spm_contacto-&gt;CONT_EMAIL);
        $this-&gt;tag-&gt;setDefault("CONT_USUARIO", $spm_contacto-&gt;CONT_USUARIO);
        $this-&gt;tag-&gt;setDefault("CONT_CLAVE", $spm_contacto-&gt;CONT_CLAVE);
        $this-&gt;tag-&gt;setDefault("CONT_CLAVEE", $spm_contacto-&gt;CONT_CLAVEE);
    }
}</code></pre>
<p>this is the result</p>
<p>VCcgnHArMNScR�8���C�9��K2�sspm_contacto was not found</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28283" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28283" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/1f10cf3015dc4f8e9ff090600b8cf39f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2755/xeleniumz" class="user-moderator-N"><span itemprop="name">xeleniumz</span></a>        </span>
        <br>

        <span class="karma">11.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28321" href="#C28321">
                <time itemprop="dateCreated" datetime="2015-12-26T22:06:17-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>did you encrypt with key ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28321" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28321" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28323" href="#C28323">
                <time itemprop="dateCreated" datetime="2015-12-26T22:12:55-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This I have in my file no use my key services</p>
<pre><code>$di-&gt;set('crypt', function () {

$crypt = new Crypt();

// Set a global encryption key
$crypt-&gt;setKey('abc');

return $crypt;
}, true);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28323" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28323" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/1f10cf3015dc4f8e9ff090600b8cf39f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2755/xeleniumz" class="user-moderator-N"><span itemprop="name">xeleniumz</span></a>        </span>
        <br>

        <span class="karma">11.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28325" href="#C28325">
                <time itemprop="dateCreated" datetime="2015-12-27T02:02:47-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I was try like your code but it didn't work , here is my code it 's ok and I'm using it</p>
<p>in my service</p>
<pre><code class="language-php">&lt;?php
$di-&gt;set('crypt', function () {
    $crypt = new Phalcon\Crypt();
    return $crypt;
});
</code></pre>
<p>in my controller</p>
<pre><code class="language-php">&lt;?php
    public function testAction(){
        $key = 'yourcryptkey';
        $text = 'test';
        $encrypt = $this-&gt;crypt-&gt;encryptBase64($text, $key);
        echo ' encrypt : ' . $encrypt . '&lt;br/&gt;';
        $decrypt =  $this-&gt;filter-&gt;sanitize($this-&gt;crypt-&gt;decryptBase64($encrypt,$key),'alphanum'); 
        echo 'decrypt : ' . $decrypt . '&lt;br/&gt;;
    }
</code></pre>
<p>hope it will work with you too.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28325" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28325" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28331" href="#C28331">
                <time itemprop="dateCreated" datetime="2015-12-27T05:48:15-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Encryption and decryption at the same time if it works, the problem is that I want to send a variable to encrypt and decrypt URL in another form, that's when the problem occurred</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28331" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28331" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/1f10cf3015dc4f8e9ff090600b8cf39f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2755/xeleniumz" class="user-moderator-N"><span itemprop="name">xeleniumz</span></a>        </span>
        <br>

        <span class="karma">11.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28339" href="#C28339">
                <time itemprop="dateCreated" datetime="2015-12-27T07:24:31-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>sorry I was wrong, when i use encrypt variable i didn't send via URL. I use ajax and it work</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28339" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28339" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28341" href="#C28341">
                <time itemprop="dateCreated" datetime="2015-12-27T07:35:58-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You could show me the code.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28341" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28341" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/1f10cf3015dc4f8e9ff090600b8cf39f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2755/xeleniumz" class="user-moderator-N"><span itemprop="name">xeleniumz</span></a>        </span>
        <br>

        <span class="karma">11.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28355" href="#C28355">
                <time itemprop="dateCreated" datetime="2015-12-27T22:32:07-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ok this is my example code</p>
<p>services.php</p>
<pre><code class="language-php">&lt;?php
$di-&gt;set('crypt', function () {
    $crypt = new Phalcon\Crypt();
    return $crypt;
});
</code></pre>
<p>DashboardController.php</p>
<pre><code class="language-php">
&lt;?php

class DashboardController extends ControllerBase
{

    public function initialize() {
        $this-&gt;tag-&gt;setTitle('Dashboard');
        parent::initialize();
        $this-&gt;view-&gt;setTemplateAfter('main');
    }

    public function typeAction(){
        $key = 'test';
        $text = 'Type';
        $encrypted = $this-&gt;crypt-&gt;encryptBase64($text, $key);
        $this-&gt;view-&gt;instance = $encrypted;
    }
}</code></pre>
<p>dashboard type view</p>
<pre><code class="language-php">&lt;?php

&lt;div id="renderModal"&gt;
&lt;/div&gt;

&lt;div class="modal fade" id="showDelModal" tabindex="-1" role="basic" aria-hidden="true"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-hidden="true"&gt;&lt;/button&gt;
                &lt;h4 class="modal-title"&gt;Confirm&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;div class="form-body"&gt;
                    &lt;div class="alert alert-warning" id="showMsg"&gt;&lt;/div&gt;
                    &lt;input type="hidden" id="typeId"&gt;
                &lt;/div&gt;
                &lt;div class="modal-footer"&gt;
                    &lt;button class="btn default" data-dismiss="modal"&gt;Colse&lt;/button&gt;
                    &lt;button class="btn green"   data-dismiss="modal" id="btnConfirm" Ok&lt;button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;!-- /.modal-content --&gt;
    &lt;/div&gt;
    &lt;!-- /.modal-dialog --&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class="portlet light"&gt;
    &lt;div class="portlet-title"&gt;
        &lt;div class="caption"&gt;
            &lt;i class="icon-basket font-green-sharp"&gt;&lt;/i&gt;
            &lt;span class="caption-subject font-green-sharp bold uppercase"&gt;
            # Stock &lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="portlet-body"&gt;
        &lt;div class="table-container"&gt;
            &lt;div class="form-group"&gt;
                &lt;button class="btn btn-primary"  id="renderData"&gt;&lt;i class="fa fa-plus"&gt;&lt;/i&gt;  Add&lt;button&gt;
            &lt;/div&gt;
            &lt;table class="table table-striped table-bordered table-hover" id="datatable_ajax"&gt;
                                    &lt;thead&gt;
                                    &lt;tr role="row" class="heading"&gt;

                                        &lt;th width="5%"&gt;
                                            #
                                        &lt;/th&gt;
                                        &lt;th width="15%"&gt;
                                             Name
                                        &lt;/th&gt;
                                        &lt;th width="15%"&gt;
                                             Price
                                        &lt;/th&gt;
                                        &lt;th width="10%"&gt;
                                             Quality
                                        &lt;/th&gt; 
                                        &lt;th width="10%"&gt;            
                                        &lt;/th&gt;

                                    &lt;/tr&gt;
                                    &lt;/thead&gt;
                                    &lt;tbody&gt;
                                    &lt;/tbody&gt;
                                    &lt;/table&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;
$('document').ready(function(){
    $('#renderData').click(function(){
        $( "#renderModal" ).load( '{% raw %}{{{% endraw %}url("frm/modal/product"){% raw %}}}{% endraw %}', function() {
            $('#posModal').modal('show');
        });  
    });

    $('#datatable_ajax').dataTable( {
        "processing": true,
        "serverSide": true,
        "ajax": {
            "url": "{% raw %}{{{% endraw %}url('datatable/get'){% raw %}}}{% endraw %}",
            "data":{
                "instance":"{% raw %}{{{% endraw %}instance{% raw %}}}{% endraw %}" # here is my encrypt variable
            },
            "type": "POST"
        },
        "columns": [
            { "data": "num" },
            { "data": "name" },
            { "data": "price" },
            { "data": "total" },
            { "data": "DT_RowId" },
        ]
    } );
});

&lt;/script&gt;</code></pre>
<p>DatatableController.php</p>
<pre><code class="language-php">&lt;?php
use \DataTables\DataTable;
use Phalcon\Mvc\View;

class DatatableController extends ControllerBase
{
    public function initialize() {
        parent::initialize();
        $this-&gt;view-&gt;disableLevel(View::LEVEL_MAIN_LAYOUT);
    }

    public function getAction($tb=''){

        $this-&gt;view-&gt;disable();
        if($this-&gt;request-&gt;isAjax() == TRUE){
            $encrypted    = $this-&gt;request-&gt;getPost('instance');
            $table        = $this-&gt;filter-&gt;sanitize($this-&gt;crypt-&gt;decryptBase64($encrypted,'test'),'alphanum'); 
            echo $table;
        }
    }
}
</code></pre>
<p>when you echo this $instance variable it will show 'Type'
sorry for my bad english.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28355" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28355" data-cf-modified-fa06e91aefc533a6c745ca11-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="9973" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>