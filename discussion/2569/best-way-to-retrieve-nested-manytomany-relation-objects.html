---
layout: default
title: 'Best way to retrieve nested manytomany relation objects - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Best way to retrieve nested manytomany relation objects</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1734/scripton" class="user-moderator-N"><span itemprop="name">scripton</span></a></span>
            <time itemprop="dateCreated" datetime="2014-06-15T10:03:45-07:00">Jun '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-06-15T10:03:45-07:00">Jun '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>685</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/bbc47a6b51af1578bad6f0672bd6ec68?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1734/scripton" class="user-moderator-N"><span itemprop="name">scripton</span></a></span>
                <span class="karma">12.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2569" href="#C2569">
        <time class="action-date">Jun '14</time>
    </a>
</div>
<div class="post-content"><div><p>Assume the following scenario:</p>
<p>Owners has manyToMany relation with models: Garages and Cars.
Garages has a manyToMany relation with Cars as well since each garage can have different cars than the ones from the owner.
Now i know how to retrieve the owner's Garages like so:</p>
<pre><code>$owner-&gt;getGarages();</code></pre>
<p>The problem is that the Garages do not have the Cars from their manyToMany relation. How can i retrieve the owner's garages and their linked cars?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2121c04ffc492d234fca95aa9e1f37e7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1806/Tuccinator" class="user-moderator-N"><span itemprop="name">Nick Tucci</span></a>        </span>
        <br>

        <span class="karma">10.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8670" href="#C8670">
                <time itemprop="dateCreated" datetime="2014-06-15T10:14:19-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Would you be able to show all the hasManyToMany relationships?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8670" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8670" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bbc47a6b51af1578bad6f0672bd6ec68?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1734/scripton" class="user-moderator-N"><span itemprop="name">scripton</span></a>        </span>
        <br>

        <span class="karma">12.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8671" href="#C8671">
                <time itemprop="dateCreated" datetime="2014-06-15T10:19:27-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What i'm trying to do is list all the current authenticated Owner's Garages with their linked Cars in an overview.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8671" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8671" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2121c04ffc492d234fca95aa9e1f37e7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1806/Tuccinator" class="user-moderator-N"><span itemprop="name">Nick Tucci</span></a>        </span>
        <br>

        <span class="karma">10.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8672" href="#C8672">
                <time itemprop="dateCreated" datetime="2014-06-15T10:23:44-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I understand what you are looking for but I want to see your code in the three models to make sure you are not missing anything.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8672" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8672" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bbc47a6b51af1578bad6f0672bd6ec68?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1734/scripton" class="user-moderator-N"><span itemprop="name">scripton</span></a>        </span>
        <br>

        <span class="karma">12.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8673" href="#C8673">
                <time itemprop="dateCreated" datetime="2014-06-15T10:43:15-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It's quite a lot of code to post in here, it shouldn't be required to provide an example of the retrieval method for the requested case imho (I am using namespaces  when initializing the relations on the models). I did some tests to verify that the relations are in order by retrieving the linked cars from the garages by using:</p>
<pre><code>Garage-&gt;getCars();</code></pre>
<p>I am able to retrieve the cars from the garages that way. I just want to know how i can retrieve them by relation, starting off from the owner model.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8673" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8673" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2121c04ffc492d234fca95aa9e1f37e7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1806/Tuccinator" class="user-moderator-N"><span itemprop="name">Nick Tucci</span></a>        </span>
        <br>

        <span class="karma">10.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8683" href="#C8683">
                <time itemprop="dateCreated" datetime="2014-06-15T14:37:21-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You did put the toManyToMany inside the Garage model, correct? To bind the relationship between all 3 models.</p>
<p>Also you can use:</p>
<p>$cars = $garage-&gt;cars;</p>
<p>foreach($cars as $car) {
$car-&gt;parts;
}</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8683" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8683" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bbc47a6b51af1578bad6f0672bd6ec68?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1734/scripton" class="user-moderator-N"><span itemprop="name">scripton</span></a>        </span>
        <br>

        <span class="karma">12.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8887" href="#C8887">
                <time itemprop="dateCreated" datetime="2014-06-23T13:10:14-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>First of all i apologize to have left this post unanswered for so long. What you're saying works fine but the problem is that the car needs to have his parts initially upon retrieval. When i would call $garage-&gt;getCars or $garage-&gt;cars, i get the cars without their parts. I need to have these filled in upon retrieval since i'm passing them to my view.</p>
<p><a href="https://forum.phalcon.io/discussion/2632/many-to-many-with-values-in-between">I noticed that there's a new post with someone who's facing the same issue.</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8887" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8887" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24e438429d975d345e4f99e53b740150?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1487/Conradaek" class="user-moderator-N"><span itemprop="name">Conradaek</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C9367" href="#C9367">
                <time itemprop="dateCreated" datetime="2014-07-09T10:59:59-07:00" class="action-date">Jul '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/1734/scripton">@scripton</a></p>
<p>Do you know what will be your strict SQL code of what you want to achive?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="9367" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="9367" data-cf-modified-3c92a9c3c7c71c23d4102067-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2569" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>