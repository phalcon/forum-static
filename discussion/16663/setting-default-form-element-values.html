---
layout: default
title: 'Setting Default Form Element Values - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Setting Default Form Element Values</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a></span>
            <time itemprop="dateCreated" datetime="2017-08-05T04:12:05-07:00">Aug '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-08-05T04:12:05-07:00">Aug '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>1928</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a></span>
                <span class="karma">13.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C16663" href="#C16663">
        <time class="action-date">Aug '17</time>
    </a>
</div>
<div class="post-content"><div><p>Hi all!</p>
<p>I'm having a particularly annoying problem pre-filling form elements with data from the DB. Now, I should say upfront that for most of the forms I've built so far, I've had no issues, but because I want to make use of a <code>&lt;select multiple&gt;...&lt;/select&gt;</code> element I'm having issues. In addition, and this will become relevant when I talk about my 2nd attempt, I have one table that stores the base information for the &quot;item&quot;. I then have a number of linked tables that store an indeterminant number of additional &quot;properties&quot; for the &quot;item&quot;, as such I have to build the form programmatically, and do not know up-front the number of fields, their names, or the possible values etc.</p>
<p>My first attempt to solve the problem involved using the tag helper functions in the volt template file to build the form manually. Then in the controller i would use <code>$this-&gt;tag-&gt;setDefault("elementName", $val-from-db);</code>. This would generally work for most elements, except when I wanted to set the default values of a select with the 'multiple' attribute, as I was trying to pass and array. I tried combining all the defaults into an array and then using the <code>$this-&gt;tag-&gt;setDefaults($defaults);</code> but the best I could do was get it to select the very first option in my multi-select, regardless of whether this was set in the DB tables.</p>
<p>My 2nd approach saw me move to a <code>\Phalcon\Forms\Form</code> method. I created a separate form file that stored the base field elements. Now, because I have the &quot;variable&quot; number of elements to display, I have a function in the controller that builds additional fields and adds them to the form. The volt file gets passed a variable with the &quot;additional&quot; field names, and itterates through the base elements and the &quot;additional' fields and then prints the field to the volt template. I have used the entity of the &quot;base&quot; item to aid the pre-population of the base form, and this works, for the base elements. For the additional elements, I am using something like this:</p>
<pre><code class="language-php">    $field = new Select ($name, $values, ['class' =&gt; 'select2 form-control', 'multiple' =&gt; 'mutiple'])
    $field-&gt;setDefault(array(3,2,5,));
    $form-&gt;add($field);</code></pre>
<p>This does nothing. It doesn't work for simple text inputs or any other type of input field, let alone my select-multiple elements.</p>
<p>Can someone help put me out of my misery? I think I should &quot;prefer&quot; the 2nd approach generally, and for most instances I should be able to pass entities tot he base forms to make it use that to populate the default values. But it's not clear how to:</p>
<ol>
<li>Set the default values of the &quot;linked&quot; tables that might be associated with the base entity i.e. $entity-&gt;SomeOtherTable-&gt;name.</li>
<li>How to set manual default values from within the controller, if i need to &quot;override&quot; them.</li>
</ol>
<p>If someone could provide some information on how to acheive what I'm looking to do, I would really apprecaite it.</p>
<p>Any questions, please do not hesitate to contact me.</p>
<p>Many thanks in advance.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-99200a0bcb6637993e66a902-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-99200a0bcb6637993e66a902-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/816905f7620afc94755494ba66da5d9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2068/rabrowne85" class="user-moderator-N"><span itemprop="name">Richard Browne</span></a>        </span>
        <br>

        <span class="karma">13.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C50087" href="#C50087">
                <time itemprop="dateCreated" datetime="2017-08-05T04:41:11-07:00" class="action-date">Aug '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Update: So as is usually the way when I post, I find the solution to my problem.</p>
<p>The 2nd approach was working but when I looked at the data I was passing to it for the $values of the selects, it was using an array like:</p>
<pre><code>    array(
        0 =&gt; 'opt1',
        1 =&gt; 'opt2',
        2 =&gt; 'opt3',
        ...
    )</code></pre>
<p>But what I was passing as the default was: <code>array(0 =&gt; "opt1", 1 =&gt; "opt2")</code> and as such I needed to do <code>$values = array_combine($values, $values);</code> in order to get the $value keys and values to match each other. Then the data I passed as the defaults would work fine.</p>
<p>However, this only explains one of the three questions:</p>
<ol>
<li>Set the default values of the &quot;linked&quot; tables that might be associated with the base entity i.e. $entity-&gt;SomeOtherTable-&gt;name.</li>
<li>How to set manual default values from within the controller, if i need to &quot;override&quot; them. DONE.</li>
<li>How to do this using the tag helpers in volt/controller i.e. <code>$this-&gt;tag-&gt;setDefault($array);</code></li>
</ol></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="50087" data-cf-modified-99200a0bcb6637993e66a902-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="50087" data-cf-modified-99200a0bcb6637993e66a902-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C50293" href="#C50293">
                <time itemprop="dateCreated" datetime="2017-08-15T15:43:21-07:00" class="action-date">Aug '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm a little confused so I'll do what I always do and say have you read this?</p>
<p><a href="https://docs.phalcon.io/bs/3.2/tag#select-boxes"><a href="https://docs.phalcon.io/bs/3.2/tag#select-boxes">https://docs.phalcon.io/bs/3.2/tag#select-boxes</a></a></p>
<p>When you use a model to populate your selects don't forget to use the 'using' attribute and make sure that to match the name of the select to the correct column mapping in your model so that when you create your new form you can initialise it with a Model::findFirst()</p>
<p>Where there are no direct mappings in this way I have used Entities though I haven't used this on Select.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="50293" data-cf-modified-99200a0bcb6637993e66a902-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="50293" data-cf-modified-99200a0bcb6637993e66a902-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="16663" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>