---
layout: default
title: 'extend phalcon in zephir - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">extend phalcon in zephir</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1169/freshman20" class="user-moderator-N"><span itemprop="name">freshman20</span></a></span>
            <time itemprop="dateCreated" datetime="2015-01-09T16:00:41-07:00">Jan '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-01-09T16:00:41-07:00">Jan '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>1570</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/bd743a816d237c371bae0eb82f246cb5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1169/freshman20" class="user-moderator-N"><span itemprop="name">freshman20</span></a></span>
                <span class="karma">3.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4430" href="#C4430">
        <time class="action-date">Jan '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi,</p>
<p>i'm trying to extend phalcon in zephir, without success.
Lets say i have created my own zephir extension wiht own class:</p>
<pre><code class="language-php">zephir init utils</code></pre>
<pre><code class="language-php">namespace Utils;

class Greeting extends \Phalcon\Mvc\User\Component {

    public static function say() {
        echo "hello world!";
    }

}
</code></pre>
<p>while compiling the following error is thrown.</p>
<pre><code class="language-php">PHP Fatal error:  Call to undefined method Zephir\ClassDefinitionRuntime::isInternal() in /opt/zephir/Library/ClassDefinition.php on line 833</code></pre>
<p>This error occurs every time when i try ty extend classes of the phalcan framework.
Can it be because phalcon and my extension are not in the same directory?</p>
<p>Thanks</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-1f4177d90790ace60e553d72-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-1f4177d90790ace60e553d72-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14703" href="#C14703">
                <time itemprop="dateCreated" datetime="2015-01-10T07:28:34-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey</p>
<p>Where do you  create file in folder ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14703" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14703" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bd743a816d237c371bae0eb82f246cb5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1169/freshman20" class="user-moderator-N"><span itemprop="name">freshman20</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14725" href="#C14725">
                <time itemprop="dateCreated" datetime="2015-01-10T14:54:51-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi Thien,</p>
<p>im make following steps:</p>
<pre><code class="language-php">cd /opt
git clone https://github.com/phalcon/zephir
... // install zephir
git clone https://github.com/phalcon/cphalcon.git phalcon
cd phalcon
git checkout 2.0.0
cd ..
zephir init utils</code></pre>
<p>after that my folder structure looks like this:</p>
<pre><code class="language-php">/opt
    phalcon
        ...
        ext
        phalcon
        config.json
        ...
    utils
        ext
        utils
            greeting.zep
        config.json
    zephir</code></pre>
<p>content of the greeting.zep is as described above</p>
<pre><code class="language-php">cd /opt/utils
zephir build

Error

Warning: Cannot locate class "Phalcon\Mvc\User\Component" when extending class "Utils\Greeting" in /opt/utils/utils/greeting.zep on 3 [nonexistent-class]

    class Greeting extends \Phalcon\Mvc\User\Component {

PHP Fatal error:  Call to undefined method Zephir\ClassDefinitionRuntime::isInternal() in /opt/zephir/Library/ClassDefinition.php on line 833</code></pre>
<p>What is the correct folder structure to make it work? My classes should have own namespace and not of the phalcon framework.
Maybe it needs to be configured in the config.json?</p>
<p>Thanks</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14725" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14725" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14730" href="#C14730">
                <time itemprop="dateCreated" datetime="2015-01-11T00:09:57-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi</p>
<p>If you install Phalcon extension  before running script it will working</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14730" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14730" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bd743a816d237c371bae0eb82f246cb5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1169/freshman20" class="user-moderator-N"><span itemprop="name">freshman20</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14735" href="#C14735">
                <time itemprop="dateCreated" datetime="2015-01-11T04:03:40-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Phalcon 2.0.0b is installed on the server</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14735" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14735" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14741" href="#C14741">
                <time itemprop="dateCreated" datetime="2015-01-11T05:29:48-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>HI</p>
<p>I try this your code like folder above then working</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14741" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14741" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bd743a816d237c371bae0eb82f246cb5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1169/freshman20" class="user-moderator-N"><span itemprop="name">freshman20</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14747" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14747" href="#C14747">
                <time itemprop="dateCreated" datetime="2015-01-11T06:16:32-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Which os is installed on your server? I use debian and will test the same under ubuntu.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14747" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14747" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14750" href="#C14750">
                <time itemprop="dateCreated" datetime="2015-01-11T06:24:03-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi</p>
<p>I install Phalcon on Fedora 21, and version Phalcon 1.3.4</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14750" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14750" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bd743a816d237c371bae0eb82f246cb5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1169/freshman20" class="user-moderator-N"><span itemprop="name">freshman20</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14773" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14773" href="#C14773">
                <time itemprop="dateCreated" datetime="2015-01-11T09:48:40-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>your right it works, but only on installations with official compiled packages.
If i install Phalcon from source it didn't work, no matter if debian or ubuntu.</p>
<p>The official compiled package for ubuntu does not work with PHP 5.6. The Debian repository is out of date (Phalcon 1.2.3).
It would be nice to extend the official compilation how-to, so that works too.</p>
<p>However, thank you Thien!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14773" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14773" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14783" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14783" href="#C14783">
                <time itemprop="dateCreated" datetime="2015-01-11T18:29:00-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Nice, have fun with Phalcon :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14783" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14783" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bd743a816d237c371bae0eb82f246cb5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1169/freshman20" class="user-moderator-N"><span itemprop="name">freshman20</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16775" href="#C16775">
                <time itemprop="dateCreated" datetime="2015-03-22T09:16:18-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ok, i found a solution.</p>
<p><a href="https://github.com/phalcon/zephir/issues/304#issuecomment-61341940">https://github.com/phalcon/zephir/issues/304#issuecomment-61341940</a></p>
<p>quick reference:</p>
<ul>
<li>
<p>Install Zephir</p>
</li>
<li>Install Phalcon 2.0</li>
</ul>
<pre><code class="language-php">    cd /opt/
    git clone http://github.com/phalcon/cphalcon
    cd cphalcon
    git checkout 2.0.0
    zephir build --export-classes</code></pre>
<ul>
<li>add to config.json in our extension:</li>
</ul>
<pre><code class="language-php">    "external-dependencies": {
        "phalcon": "/opt/cphalcon"
    }</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16775" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16775" data-cf-modified-1f4177d90790ace60e553d72-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4430" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>