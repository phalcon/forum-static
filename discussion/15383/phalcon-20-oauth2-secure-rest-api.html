---
layout: default
title: 'Phalcon 2.0 oAuth2 secure REST API - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Phalcon 2.0 oAuth2 secure REST API</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a></span>
            <time itemprop="dateCreated" datetime="2017-01-24T04:04:04-07:00">Jan '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-01-24T04:04:04-07:00">Jan '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">8</span>
                </td>
                <td>
                    <label>Views</label><br>1884</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a></span>
                <span class="karma">41.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C15383" href="#C15383">
        <time class="action-date">Jan '17</time>
    </a>
</div>
<div class="post-content"><div><p>I never used oAuth2 but I seen this is a good way to secure web services and authorize certain application to use certain web services. But I don't know where to start.</p>
<p>I read some article about oAuth, I checked some Github repositories and tutorials but I don't know how I can use them.</p>
<p>Could you help me to understand oAuth2 and if this is the good way to secure my REST API ? </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9663b7b6c0bc4e24ecbf57e0defc5925?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8589/PolDeveloper" class="user-moderator-N"><span itemprop="name">Michał Talar</span></a>        </span>
        <br>

        <span class="karma">6.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45307" href="#C45307">
                <time itemprop="dateCreated" datetime="2017-01-24T06:13:48-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,
the simple info about oAuth2 you can see here:
<a href="https://aaronparecki.com/2012/07/29/2/oauth2-simplified">oauth2</a></p>
<p>More, less it's all about getting a secure way between your app and a service to access some goods from them. You can achive it by getting a token from the service, wchich make you a friendly authorized user.</p>
<p>For example in my e-commerce I have integrated some payments on-line, and there I had to use oAuth2 to create payments in my App.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45307" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45307" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a>        </span>
        <br>

        <span class="karma">41.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C45307"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/9663b7b6c0bc4e24ecbf57e0defc5925?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Michał Talar                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45309" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '17</span>
              </span><br/><a name="C45309" href="#C45309">
                <time itemprop="dateCreated" datetime="2017-01-24T06:39:57-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for your answer. Do you have some snippet to implement oAuth2 on my rest api ?  I don't know how can I add oAuth2 to phalcon.</p>
<blockquote>
<p>Hi,
the simple info about oAuth2 you can see here:
<a href="https://aaronparecki.com/2012/07/29/2/oauth2-simplified">oauth2</a></p>
<p>More, less it's all about getting a secure way between your app and a service to access some goods from them. You can achive it by getting a token from the service, wchich make you a friendly authorized user.</p>
<p>For example in my e-commerce I have integrated some payments on-line, and there I had to use oAuth2 to create payments in my App.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45309" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45309" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9663b7b6c0bc4e24ecbf57e0defc5925?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8589/PolDeveloper" class="user-moderator-N"><span itemprop="name">Michał Talar</span></a>        </span>
        <br>

        <span class="karma">6.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45311" href="#C45311">
                <time itemprop="dateCreated" datetime="2017-01-24T07:01:18-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>There's a few different ways. I used namespaces.</p>
<p>I registered a namespace of my OAuth2 class</p>
<pre><code class="language-php">&lt;?php
$loader-&gt;registerNamespaces(array(
            'App\Backend\Controllers' =&gt; '../app/backend/controllers/',

            'App\Backend\Models' =&gt; '../app/backend/models/',

            'PayPal' =&gt; '../app/xxx/PayPal/', //I had the oAuth2 class included in paypal class

        ));
</code></pre>
<p>Then in Controller:</p>
<pre><code class="language-php">
&lt;?php
use PayPal\Auth\OAuthTokenCredential; //including OAuthclass

class IndexController extends \Phalcon\Mvc\Controller
{
     public function authAction()
     {
        $oAuthToken = new OAuthTokenCredential(
              'hashClientID',     
              'hashClientSecret'      
          );
// using some service with oAuth2 token, for example paypal API
          $apiContext = new ApiContext($oAuthToken);
            $apiContext-&gt;setConfig(
                            array(
                               //some configurations
                            )
                    );
                    ...
                    ...
                    ...
                      try {
                        //Create Payment
                          $payment-&gt;create($apiContext);
                      } catch (Exception $ex) {
                     //errors
                      }
    }
}
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45311" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45311" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d7c800df9858cb6e08d1528b3bda4a03?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3071/engsere" class="user-moderator-N"><span itemprop="name">engsere</span></a>        </span>
        <br>

        <span class="karma">7.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C45307"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/9663b7b6c0bc4e24ecbf57e0defc5925?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Michał Talar                    </a>
                </div><div class="posts-buttons" align="right"><a name="C45333" href="#C45333">
                <time itemprop="dateCreated" datetime="2017-01-25T00:35:10-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Great Link!
recommended for everyone!</p>
<blockquote>
<p>Hi,
the simple info about oAuth2 you can see here:
<a href="https://aaronparecki.com/2012/07/29/2/oauth2-simplified">oauth2</a></p>
<p>More, less it's all about getting a secure way between your app and a service to access some goods from them. You can achive it by getting a token from the service, wchich make you a friendly authorized user.</p>
<p>For example in my e-commerce I have integrated some payments on-line, and there I had to use oAuth2 to create payments in my App.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45333" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45333" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45345" href="#C45345">
                <time itemprop="dateCreated" datetime="2017-01-25T02:59:27-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'd recommend you consider HMAC for your API auth, it's much more simple and not less secure.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45345" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45345" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9663b7b6c0bc4e24ecbf57e0defc5925?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8589/PolDeveloper" class="user-moderator-N"><span itemprop="name">Michał Talar</span></a>        </span>
        <br>

        <span class="karma">6.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45347" href="#C45347">
                <time itemprop="dateCreated" datetime="2017-01-25T03:10:10-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I've heard about <a href="https://jwt.io/"> json web tokens</a></p>
<p>Has anyone used this method of authentication?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45347" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45347" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d7c800df9858cb6e08d1528b3bda4a03?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3071/engsere" class="user-moderator-N"><span itemprop="name">engsere</span></a>        </span>
        <br>

        <span class="karma">7.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C45347"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/9663b7b6c0bc4e24ecbf57e0defc5925?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Michał Talar                    </a>
                </div><div class="posts-buttons" align="right"><a name="C45379" href="#C45379">
                <time itemprop="dateCreated" datetime="2017-01-26T01:11:04-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I don't use that, but it's my 3rd time when i see JWT question ;)
if you need to have multiplatorm i think that's good idea, but if you have to exchange data betwen phalcon instances you can use <a href="https://docs.phalcon.io/en/3.0.1/api/Phalcon_Crypt.html">https://docs.phalcon.io/en/3.0.1/api/Phalcon_Crypt.html</a></p>
<blockquote>
<p>I've heard about <a href="https://jwt.io/"> json web tokens</a></p>
<p>Has anyone used this method of authentication?</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45379" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45379" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a>        </span>
        <br>

        <span class="karma">41.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45441" href="#C45441">
                <time itemprop="dateCreated" datetime="2017-01-27T06:38:42-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for your anwsers but really... I don't know where to start with oAuth2 and how to implement it in my REST API.  JWT and hmac look very nice.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45441" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45441" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9663b7b6c0bc4e24ecbf57e0defc5925?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8589/PolDeveloper" class="user-moderator-N"><span itemprop="name">Michał Talar</span></a>        </span>
        <br>

        <span class="karma">6.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C45441"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Jonathan Vandal                    </a>
                </div><div class="posts-buttons" align="right"><a name="C45449" href="#C45449">
                <time itemprop="dateCreated" datetime="2017-01-27T07:58:36-07:00" class="action-date">Jan '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Try to paste some of your code. Would be helpful</p>
<blockquote>
<p>Thanks for your anwsers but really... I don't know where to start with oAuth2 and how to implement it in my REST API.  JWT and hmac look very nice.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45449" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45449" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/24d0950501b2769ba3c1bde3daa8853b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4477/bilikaz" class="user-moderator-N"><span itemprop="name">Valdas Barakauskas</span></a>        </span>
        <br>

        <span class="karma">2.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C56999" href="#C56999">
                <time itemprop="dateCreated" datetime="2018-08-13T06:09:13-07:00" class="action-date">Aug '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi if still someone is searching for ready made solution for oauth2 + rest api i made a basic functionality core with users roles / permisions and integrated 2fa (google or pin or you can implement your own) you can get it <a href="https://github.com/bilikaz/phalcon-rest-api">https://github.com/bilikaz/phalcon-rest-api</a> (yeap it lacks documentation, tests but for general purpose i gues it will help lots of people ;))</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56999" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56999" data-cf-modified-f083d6c4f2e63be4aa8c515e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="15383" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>