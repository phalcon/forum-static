---
layout: default
title: 'Very strange! May be a bug of 2.0? (Wrong behavior of baseuri) - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/3/volt">Volt</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Very strange! May be a bug of 2.0? (Wrong behavior of baseuri)</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2603/megaxman" class="user-moderator-N"><span itemprop="name">megaxman</span></a></span>
            <time itemprop="dateCreated" datetime="2015-03-12T19:28:13-07:00">Mar '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-03-12T19:28:13-07:00">Mar '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>488</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/e4813bdc40b2d85f015dce5cd57f43af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2603/megaxman" class="user-moderator-N"><span itemprop="name">megaxman</span></a></span>
                <span class="karma">5.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6153" href="#C6153">
        <time class="action-date">Mar '15</time>
    </a>
</div>
<div class="post-content"><div><p>The base uri  is '/' in config.php, the below code works very well in 1.3.4.</p>
<blockquote>
<p>{% raw %}{{{% endraw %} link_to('javascript:deleteCategory(' <del> cat.getId() </del> ')', 'delete', 'class':'btn btn-default') {% raw %}}}{% endraw %}&lt;/li&gt;</p>
</blockquote>
<p>But, in 2.0, phalcon will generate wrong codes:</p>
<blockquote>
<p>&lt;a href=&quot;/javascript:deleteCategory(118)&quot; class=&quot;btn btn-default&quot;&gt;deelte&lt;/a&gt;&lt;/li&gt;</p>
</blockquote>
<p>There is a slash / before javascript.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ef35769757b23a982de5d30846530d40?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/768/iamtartan" class="user-moderator-N"><span itemprop="name">Aboozar Ghaffari</span></a>        </span>
        <br>

        <span class="karma">10.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16539" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16539" href="#C16539">
                <time itemprop="dateCreated" datetime="2015-03-13T00:46:06-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think this not a bug.</p>
<p><strong>link_to</strong> method works based on the base uri but in this case you don't need baseuri and It's better to generate url manually or write your custom helper and add it to you volt compiler.</p>
<p>Personaly I prefer this way:</p>
<pre><code class="language-html">{% raw %}{%{% endraw %} set jslink = 'javascript:deleteCategory(' ~ cat.getId() ~ ')' {% raw %}%}{% endraw %}
&lt;li&gt;&lt;a href="{% raw %}{{{% endraw %} jslink {% raw %}}}{% endraw %}" class="btn btn-default"&gt;delete&lt;/a&gt;&lt;/li&gt;</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16539" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16539" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e4813bdc40b2d85f015dce5cd57f43af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2603/megaxman" class="user-moderator-N"><span itemprop="name">megaxman</span></a>        </span>
        <br>

        <span class="karma">5.4k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C16539"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/ef35769757b23a982de5d30846530d40?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Aboozar Ghaffari                    </a>
                </div><div class="posts-buttons" align="right"><a name="C16543" href="#C16543">
                <time itemprop="dateCreated" datetime="2015-03-13T01:14:39-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks, but I think it's a bug.
Same code works very well in 1.3.4.</p>
<p>I need the baseuri in development mode, but when I release it into production mode, I need to make it baseuri to '/'.</p>
<blockquote>
<p>I think this not a bug.</p>
<p><strong>link_to</strong> method works based on the base uri but in this case you don't need baseuri and It's better to generate url manually or write your custome helper and add it to you volt compiler.</p>
<p>Personaly I prefer this way:</p>
<pre><code class="language-html">{% raw %}{%{% endraw %} set jslink = 'javascript:deleteCategory(' ~ cat.getId() ~ ')' {% raw %}%}{% endraw %}
&lt;li&gt;&lt;a href="{% raw %}{{{% endraw %} jslink {% raw %}}}{% endraw %}" class="btn btn-default"&gt;delete&lt;/a&gt;&lt;/li&gt;</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16543" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16543" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/92baeb391922c7aba36de5d65677e683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2391/BadLuckBurt" class="user-moderator-N"><span itemprop="name">BadLuckBurt</span></a>        </span>
        <br>

        <span class="karma">2.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16550" href="#C16550">
                <time itemprop="dateCreated" datetime="2015-03-13T04:45:57-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I agree with Aboozar, not a bug, it's just the intended behaviour for relative URLs you create using the Tag::linkTo. The Javascript you're feeding it is viewed as a relative URL.</p>
<p>The Javascript you put in the href should really go in an onclick attribute or be assigned on page load, as a bonus, any element will do in that case, not just links :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16550" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16550" data-cf-modified-3cff33e1adf9a897dd93fbf2-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6153" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>