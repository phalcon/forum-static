---
layout: default
title: 'How to do validation at model? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How to do validation at model?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a></span>
            <time itemprop="dateCreated" datetime="2016-07-31T10:34:38-07:00">Jul '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-07-31T10:34:38-07:00">Jul '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">11</span>
                </td>
                <td>
                    <label>Views</label><br>579</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a></span>
                <span class="karma">14.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C12467" href="#C12467">
        <time class="action-date">Jul '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi,</p>
<p>after lot's of code not working at the new version I decided to validate my data inside my model instead of my form. I hope this will fix some problems I have.</p>
<p>The problem is that the validation function inside my model isn't executed.</p>
<p>Controller</p>
<pre><code class="language-php">    public function createAction() {
        $user_run = new UsersRuns();

        $success = $user_run-&gt;save($this-&gt;request-&gt;getPost());

        if ($success) {
            echo "Thanks for registering!";
        } else {
            echo "Sorry, the following problems were generated: ";
            foreach ($user_run-&gt;getMessages() as $message) {
                echo $message-&gt;getMessage(), "&lt;br/&gt;";
            }
        }

        $this-&gt;view-&gt;disable();
    }</code></pre>
<p>Model</p>
<pre><code class="language-php">    namespace Run\Backend\Models;

    use Phalcon\Validation;
    use Phalcon\Mvc\Model;
    use Phalcon\Validation\Validator\PresenceOf;

    class UsersRuns extends Model {

    public function initialize() {
        $this-&gt;hasOne('users_id', 'Users', 'id');
    }

    public function validation() {
        $validator = new Validation();

        $validator-&gt;add(
                'date', new PresenceOf([
            'message' =&gt; 'Please enter a date'
                ])
        );

        if ($this-&gt;validationHasFailed() == true) {
            return false;
        }

    }</code></pre>
<p>I always get the default messages from $message-&gt;getMessage(). What I am doing wrong?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37537" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C37537" href="#C37537">
                <time itemprop="dateCreated" datetime="2016-07-31T10:38:13-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>As i already wrote in github issue - it will won't fix ANY of your problems. Your getter must just return data as THEIR IS( <strong>what getters should always do anyway</strong> ), not changed or modified. This is why your validation in form is not working. Any value modification should be done in afterSave/afterFetch method.</p>
<p>Back back to your question:</p>
<pre><code class="language-php">public function validation() {
    $validator = new Validation();

    $validator-&gt;add(
            'date', new PresenceOf([
        'message' =&gt; 'Please enter a date'
            ])
    );

   return $this-&gt;validate($validator);
}</code></pre>
<p>Since 2.1.x/3.0.0 validation in form and model works exactly the same, same classes, same mechanism, same code etc.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37537" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37537" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37539" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C37539" href="#C37539">
                <time itemprop="dateCreated" datetime="2016-07-31T10:41:26-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for hanging in again.</p>
<p>I removed all setters and getters like you said and everything was fine. But my problem is the format of the form entities (when edited). I get a sql date from my databse of course: '2000-01-01'. But I need to format it to '01.01.2000'. I made this with getters before but now I don't know how to do it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37539" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37539" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37541" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C37541" href="#C37541">
                <time itemprop="dateCreated" datetime="2016-07-31T10:43:50-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>With afterSave/afterFetch/beforeValidation etc events.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37541" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37541" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37543" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C37543" href="#C37543">
                <time itemprop="dateCreated" datetime="2016-07-31T10:53:16-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>That would work, yes, but what if I really need the &quot;pure&quot; database result at another point? Sometimes I need seconds to do calculations and for the final output I need the HH:MM:SS format.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37543" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37543" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37545" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C37545" href="#C37545">
                <time itemprop="dateCreated" datetime="2016-07-31T11:06:14-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Then getters wouldn't do it anyway. What you mean pure database result ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37545" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37545" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37547" href="#C37547">
                <time itemprop="dateCreated" datetime="2016-07-31T11:11:20-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I save durations as seconds but the user sees HH:MM:SS (hours, minutes, seconds). So, in my database one result might be 3600 (seconds). But the user sees 01:00:00. And of course inside the form I also need HH:MM:SS but save it as seconds.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37547" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37547" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37555" href="#C37555">
                <time itemprop="dateCreated" datetime="2016-07-31T13:06:41-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Then you jsut need to display it, for doing it is afterFetch and that's it. Getters shouldn't doo such a things.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37555" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37555" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37571" href="#C37571">
                <time itemprop="dateCreated" datetime="2016-07-31T22:18:28-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Okay, I won't use getters for it.</p>
<p>But there is the problem with afterfetch that I can't calculate with these values. When I manupulate the date it can't be used for mathematical aggregation. Also the mentioned duration isn't useable.</p>
<p>If I see that correctly, there is no solution for that for now.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37571" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37571" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37577" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37577" href="#C37577">
                <time itemprop="dateCreated" datetime="2016-08-01T00:04:25-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>But for what exactly ? What you want achieve ? You can solve everything with afterFetch/afterSave.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37577" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37577" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37589" href="#C37589">
                <time itemprop="dateCreated" datetime="2016-08-01T02:49:04-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I made a flow chart:</p>
<p></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37589" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37589" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37591" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37591" href="#C37591">
                <time itemprop="dateCreated" datetime="2016-08-01T03:59:20-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Just make filter in view and siplay it as a time and everywhere use int ? You can do everything what you wrote here with afterFetch/beforeValidationOnSave/afterSave.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37591" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37591" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37593" href="#C37593">
                <time itemprop="dateCreated" datetime="2016-08-01T04:08:52-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>That's the problem with forms. I use</p>
<pre><code>$form-&gt;render('entity')</code></pre>
<p>in the view. I can't filter at this point.</p>
<p>Where does afterSave comes in place?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37593" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37593" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37597" href="#C37597">
                <time itemprop="dateCreated" datetime="2016-08-01T05:15:23-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In model, after saving in database. What you mean you can't filter ? </p>
<p>User pass time - in validation beforeValidation you are changing to int, and afterSave/afterFetch you change it back to time for displaying - what's a problem with it ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37597" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37597" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37599" href="#C37599">
                <time itemprop="dateCreated" datetime="2016-08-01T05:33:11-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>But with the manipulation at afterFetch I can't do calculations because the duration is allready converted to time. </p>
<p>I need both int and time. time at forms, overview etc. int for internal calculations. Sorry, I miss some point.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37599" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37599" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37605" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37605" href="#C37605">
                <time itemprop="dateCreated" datetime="2016-08-01T06:06:55-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What you mean by caluclations ? Can you give me any example of those calculations, where they are done and WHEN ? Then just convert value back to int where you are doing calculations, what's a problem ?</p>
<p>You can't just have both values without defining them, in any framework or language. On some point you have to decide what value have at what point, and when to make them back to int or whatever. There is basically right now no phalcon problem. You should just redifine your application structure or something.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37605" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37605" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37611" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37611" href="#C37611">
                <time itemprop="dateCreated" datetime="2016-08-01T07:39:20-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I am using this library for calculations:</p>
<p><a href="https://github.com/powder96/numbers.php">https://github.com/powder96/numbers.php</a></p>
<p>Okay, I understand. It's a conceptual problem, not a Phalcon one.</p>
<p>To sum it up: I use afterFetch for manipulate the data from the database. And I have to remanipulate it for doing calculations within components like numbers.php (the library above). Think I got it now :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37611" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37611" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37621" href="#C37621">
                <time itemprop="dateCreated" datetime="2016-08-01T08:07:16-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>But where you are doing those calculations ? Where and for what ? Can't it be done in model in afterfetch ? Like before changing it to time calculate whatever you want on ints ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37621" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37621" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37627" href="#C37627">
                <time itemprop="dateCreated" datetime="2016-08-01T08:16:30-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I am instantiating the math object inside the controllers and I retrieve the model data from a base controller on every backend page. </p>
<p>I have pages where I may need the average and pages where I may need the max value of an array. My whole app consists of multiple statistical calculations, so I  guess it can't be done in afterFetch.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37627" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37627" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37631" href="#C37631">
                <time itemprop="dateCreated" datetime="2016-08-01T09:09:21-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What a hell, those calculations should be done in database then if possible..... not in php, and just use query builder for displaying it men :( You shouldn't do such a calculations like simple average in php.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37631" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37631" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37633" href="#C37633">
                <time itemprop="dateCreated" datetime="2016-08-01T10:06:39-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I know, these were just examples ;) I am also doing more complex calculations.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37633" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37633" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37635" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37635" href="#C37635">
                <time itemprop="dateCreated" datetime="2016-08-01T11:35:24-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Isn't is possible to have both, a method that returns the manipulated value plus a afterFetch method like here:</p>
<pre><code>    class MyModel extends Model {

        // Returns hh:mm:ss
        private function afterFetch() {
            $this-&gt;seconds = gmdate("H:i:s", $this-&gt;seconds);
        }

        // Returns seconds
        public function returnSeconds {
            return $this-&gt;seconds;
        }
    }</code></pre>
<p>And later when I do the calculation:</p>
<pre><code>    $myModel = new MyModel();
    $seconds = $myModel-&gt;returnSeconds();</code></pre>
<p>Would this work and is this a sensible way of doing this?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37635" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37635" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37641" href="#C37641">
                <time itemprop="dateCreated" datetime="2016-08-01T13:14:43-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Until you DON'T FETCH THEN YES.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37641" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37641" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a31d2644cf31f785e3d4ec89b4f8c96b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7541/ndabAP" class="user-moderator-N"><span itemprop="name">ndabAP</span></a>        </span>
        <br>

        <span class="karma">14.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37657" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37657" href="#C37657">
                <time itemprop="dateCreated" datetime="2016-08-02T00:04:53-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I now solved it with this:</p>
<pre><code>class MyModel extends Model {

    // Returns hh:mm:ss
    private function afterFetch() {
        $this-&gt;duration = gmdate("H:i:s", $this-&gt;seconds);
    }

    // Returns seconds
    public function returnSeconds {
        return strtotime($this-&gt;duration) - strtotime('TODAY');
    }
}</code></pre>
<p>Not perfect, because it gets first convert to HH:MM:SS and then, if I do $model-&gt;returnSeconds() again back to seconds. But obviously this is the only solution.</p>
<p>Thanks for clarifying the php stuff and for your persistent help.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37657" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37657" data-cf-modified-e8bbd1d80a9727ec5f683fd0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="12467" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>