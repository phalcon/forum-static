---
layout: default
title: 'Validating all forms in manager at same time - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Validating all forms in manager at same time</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/363/Slyvampy" class="user-moderator-N"><span itemprop="name">Steve Jones</span></a></span>
            <time itemprop="dateCreated" datetime="2019-01-15T15:21:06-07:00">Jan '19</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2019-01-15T15:21:06-07:00">Jan '19</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '19</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>292</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/ef929487059b9a1cb6e336def69626a4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/363/Slyvampy" class="user-moderator-N"><span itemprop="name">Steve Jones</span></a></span>
                <span class="karma">2.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C19221" href="#C19221">
        <time class="action-date">Jan '19</time>
    </a>
</div>
<div class="post-content"><div><p>I am trying to combine two forms on a page, then submit and validate and display the same error message (if any)
example</p>
<p>The Controller:</p>
<blockquote>
<pre><code>    $this-&gt;forms-&gt;set('form1', new \Forms\Register\Part1());
    $this-&gt;forms-&gt;set('form2', new \Forms\Register\Part2());</code></pre>
</blockquote>
<p>The view File:</p>
<blockquote>
<pre><code>  {% raw %}{{{% endraw %} forms.get('form1').label('firstName') {% raw %}}}{% endraw %}
  {% raw %}{{{% endraw %} forms.get('form1').label('lastName') {% raw %}}}{% endraw %}
  {% raw %}{{{% endraw %} forms.get('form2').label('email') {% raw %}}}{% endraw %}
  {% raw %}{{{% endraw %} forms.get('form2').label('password1') {% raw %}}}{% endraw %}
  {% raw %}{{{% endraw %} forms.get('form2').label('password2') {% raw %}}}{% endraw %}</code></pre>
</blockquote>
<p>So I have validation in both forms (presenceOF, and in Part2 I have idenitcal on password1 and password2)</p>
<p>I am wanting to do something like:</p>
<blockquote>
<pre><code>   if (!$this-&gt;forms-&gt;isValid($this-&gt;request-&gt;getPost()))
   {
     foreach($this-&gt;forms-&gt;getMessages() as $msg)
     {
        $this-&gt;view-&gt;errors($msg);
   }  
     }</code></pre>
</blockquote>
<p>My two options as I see currently is to do the above isValid method for both forms, or manually make one form that has all the fields in. However the problem I have is that i have another form that is using Part1a and Part2 thus reusing the form 'part2'. If i maunally create two forms then the data will have to be maintanted in both forms.</p>
<p>Any Ideas?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c897fab3d4f3e07ca673337a1efa9cbf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6133/corentin-begne" class="user-moderator-N"><span itemprop="name">corentin-begne</span></a>        </span>
        <br>

        <span class="karma">12.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C58409" href="#C58409">
                <time itemprop="dateCreated" datetime="2019-01-15T18:41:23-07:00" class="action-date">Jan '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Create an unique form dynamically using your part1 and part2</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="58409" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="58409" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ef929487059b9a1cb6e336def69626a4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/363/Slyvampy" class="user-moderator-N"><span itemprop="name">Steve Jones</span></a>        </span>
        <br>

        <span class="karma">2.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="58421" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '19</span>
              </span><br/><a name="C58421" href="#C58421">
                <time itemprop="dateCreated" datetime="2019-01-16T03:25:15-07:00" class="action-date">Jan '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>how would one make a unique form dynamically - as this sounds perfect. You cant merge two objects into one, and Ive googled everywhere but I can not seem to find any such thing as dynamic forms?</p>
<p>The dynamic forms I see are only for dynamic fields in a single form, which again will increase duplication. Im trying to keep resuable small forms and combine when needed.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="58421" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="58421" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c897fab3d4f3e07ca673337a1efa9cbf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6133/corentin-begne" class="user-moderator-N"><span itemprop="name">corentin-begne</span></a>        </span>
        <br>

        <span class="karma">12.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="58423" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '19</span>
              </span><br/><a name="C58423" href="#C58423">
                <time itemprop="dateCreated" datetime="2019-01-16T03:38:36-07:00" class="action-date">Jan '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Don't merge the two in one like an array, you need to create a new form class, instanciate the 2 part, parse elements and add them into the new form.<br />
Give me the code of your two forms then I'll show you.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="58423" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="58423" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ef929487059b9a1cb6e336def69626a4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/363/Slyvampy" class="user-moderator-N"><span itemprop="name">Steve Jones</span></a>        </span>
        <br>

        <span class="karma">2.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="58465" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '19</span>
              </span><br/><a name="C58465" href="#C58465">
                <time itemprop="dateCreated" datetime="2019-01-20T17:27:20-07:00" class="action-date">Jan '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Form 1</p>
<pre><code>&lt;?php

namespace Forms\Register;

use Phalcon\Forms\Form,
    Phalcon\Forms\Element\Text,
    Phalcon\Validation\Validator\PresenceOf;

class Form1 extends Form
{
    /**
     * Initialize the form
     */
    public function initialize()
    {
        $this-&gt;addElement1();
    }

    /**
     * Add the element 1 to input
     */
    private function addElement1()
    {
        $element = new Text('element1', array(
            'placeholder'  =&gt; 'Enter Element1 Value..',
            'name'         =&gt; 'element1',
            'autocomplete' =&gt; 'on',
            'tabindex' =&gt; 1
        ));
        $element-&gt;setLabel('Element One:');
        $element-&gt;addValidators(array(
            new PresenceOf(array(
                'message' =&gt; 'Your element one is required'
            ))
        ));
        $this-&gt;add($element);
    }
}</code></pre>
<p>The second Form:</p>
<pre><code>&lt;?php

namespace Forms\Register;

use Phalcon\Forms\Form,
    Phalcon\Forms\Element\Text
    Phalcon\Forms\Element\Submit,
    Phalcon\Validation\Validator\PresenceOf;

class Form2 extends Form
{
    /**
     * Initialize the form
     */
    public function initialize()
    {
        $this-&gt;addElement2();
        $this-&gt;addSubmit();
    }

    /**
     * Add the element 2 to input
     */
    private function addElement2()
    {
        $element = new Text('element2', array(
            'placeholder'  =&gt; 'Enter Element2 Value..',
            'name'         =&gt; 'element2',
            'autocomplete' =&gt; 'off',
            'tabindex' =&gt; 2
        ));
        $element-&gt;setLabel('Element Two:');
        $element-&gt;addValidators(array(
            new PresenceOf(array(
                'message' =&gt; 'Your element two is required'
            ))
        ));
        $this-&gt;add($element);
    }

    /**
     * Add the submit Form
     */
    private function addSubmit()
    {
        $submit = new Submit('register', array(
            'name' =&gt; 'register',
            'value' =&gt; 'Create Your Account',
            'tabindex' =&gt; 3
        ));

        $this-&gt;add($submit);
    }
}</code></pre>
<p>The Controller</p>
<pre><code>        $this-&gt;forms-&gt;set('form1', new \Forms\Register\Form1());
        $this-&gt;forms-&gt;set('form2', new \Forms\Register\Form2());</code></pre>
<p>So Currently I have a choice of doing something nasty like:</p>
<pre><code>           if (!$this-&gt;forms-&gt;get('form1')-&gt;isValid($this-&gt;request-&gt;getPost())
             &amp;&amp; !$this-&gt;forms-&gt;get('form2')-&gt;isValid($this-&gt;request-&gt;getPost())
               || !$this-&gt;forms-&gt;get('form1')-&gt;isValid($this-&gt;request-&gt;getPost())
                || !$this-&gt;forms-&gt;get('form2')-&gt;isValid($this-&gt;request-&gt;getPost())
                )
            {

                $messages = array();

                foreach($this-&gt;forms-&gt;get('tenant')-&gt;getMessages() as $msg)
                {
                    array_push($messages, $msg);
                }

                foreach($this-&gt;forms-&gt;get('user')-&gt;getMessages() as $msg)
                {
                    array_push($messages, $msg);
                }

                $output = null;

                foreach($messages as $message)
                {
                    $output = $output . ' ' . $message;
                {% raw %}}}{% endraw %}

                $this-view-&gt;errorMsg = $output;</code></pre>
<p>I want something cleaner that puts all form validation together.</p>
<p>The view</p>
<pre><code>
                &lt;fieldset&gt;
                    &lt;dl&gt;
                        &lt;dt&gt;{% raw %}{{{% endraw %} forms.get('form1').label('element1') {% raw %}}}{% endraw %}&lt;/dt&gt;
                        &lt;dd&gt;{% raw %}{{{% endraw %} forms.get('form1').render('element1', ['tabindex': '1']) {% raw %}}}{% endraw %}&lt;/dd&gt;
                    &lt;/dl&gt;
                    &lt;dl&gt;
                        &lt;dt&gt;{% raw %}{{{% endraw %} forms.get('form2').label('element2') {% raw %}}}{% endraw %}&lt;/dt&gt;
                        &lt;dd&gt;{% raw %}{{{% endraw %} forms.get('form2').render('element2', ['tabindex': '2']) {% raw %}}}{% endraw %}&lt;/dd&gt;
                        &lt;dt&gt;{% raw %}{{{% endraw %} forms.get('form2').label('register') {% raw %}}}{% endraw %}&lt;/dt&gt;
                        &lt;dd&gt;{% raw %}{{{% endraw %} forms.get('form2').render('register', ['tabindex': '3']) {% raw %}}}{% endraw %}&lt;/dd&gt;
                    &lt;/dl&gt;
                &lt;/fieldset&gt;</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="58465" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="58465" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c897fab3d4f3e07ca673337a1efa9cbf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6133/corentin-begne" class="user-moderator-N"><span itemprop="name">corentin-begne</span></a>        </span>
        <br>

        <span class="karma">12.8k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C58481" href="#C58481">
                <time itemprop="dateCreated" datetime="2019-01-21T03:44:27-07:00" class="action-date">Jan '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So create a new form with the two others :</p>
<pre><code class="language-php">&lt;?php

namespace Forms\Register;

use Phalcon\Forms\Form;

class Form3 extends Form
{
    /**
     * Initialize the form
     */
    public function initialize()
    {
        foreach([
            new Form1(),
            new Form2()
        ] as $form){
            foreach($form-&gt;getElements() as $element){
                $this-&gt;add($element);
            }
        }
    }
}</code></pre>
<p>controller</p>
<pre><code class="language-php">$this-&gt;forms-&gt;set('form', new \Forms\Register\Form3());</code></pre>
<p>view</p>
<pre><code class="language-php">                &lt;fieldset&gt;
                    &lt;dl&gt;
                        &lt;dt&gt;{% raw %}{{{% endraw %} forms.get('form').label('element1') {% raw %}}}{% endraw %}&lt;/dt&gt;
                        &lt;dd&gt;{% raw %}{{{% endraw %} forms.get('form').render('element1', ['tabindex': '1']) {% raw %}}}{% endraw %}&lt;/dd&gt;
                    &lt;/dl&gt;
                    &lt;dl&gt;
                        &lt;dt&gt;{% raw %}{{{% endraw %} forms.get('form').label('element2') {% raw %}}}{% endraw %}&lt;/dt&gt;
                        &lt;dd&gt;{% raw %}{{{% endraw %} forms.get('form').render('element2', ['tabindex': '2']) {% raw %}}}{% endraw %}&lt;/dd&gt;
                        &lt;dt&gt;{% raw %}{{{% endraw %} forms.get('form').label('register') {% raw %}}}{% endraw %}&lt;/dt&gt;
                        &lt;dd&gt;{% raw %}{{{% endraw %} forms.get('form').render('register', ['tabindex': '3']) {% raw %}}}{% endraw %}&lt;/dd&gt;
                    &lt;/dl&gt;
                &lt;/fieldset&gt;</code></pre>
<p>result</p>
<pre><code class="language-php">    if (!$this-&gt;forms-&gt;get('form')-&gt;isValid($this-&gt;request-&gt;getPost()){
        ...
    }</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="58481" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="58481" data-cf-modified-7fd68edfac7449dbdb8ed934-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="19221" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>