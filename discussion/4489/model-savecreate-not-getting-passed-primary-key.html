---
layout: default
title: 'Model Save/Create not getting passed primary key - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Model Save/Create not getting passed primary key</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/286/trentramseyer" class="user-moderator-N"><span itemprop="name">Trent Ramseyer</span></a></span>
            <time itemprop="dateCreated" datetime="2015-01-15T13:48:05-07:00">Jan '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-01-15T13:48:05-07:00">Jan '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>1599</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/4d1384d668711e6153ed4c6f05e29216?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/286/trentramseyer" class="user-moderator-N"><span itemprop="name">Trent Ramseyer</span></a></span>
                <span class="karma">22.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4489" href="#C4489">
        <time class="action-date">Jan '15</time>
    </a>
</div>
<div class="post-content"><div><p>Ok today's issue..
The model does not seem to recognize the primary key, column named &quot;id&quot;</p>
<pre><code>  $robot  = new robot();
  $robot-&gt;code = $unique_code;
  $robot-&gt;user_id = 0;
  $robot-&gt;agent_name = "name here";
  $robot-&gt;date_created = date("Y-m-d H:i:s");
  $robot-&gt;date_submitted = NULL;
  $robot-&gt;create() ;  (also tried save())</code></pre>
<p>error being returned
<strong>We can't store robots right now: id is required</strong></p>
<p>If I add in <strong>$robot-&gt;id = 1</strong>, it saved the first record</p>
<p>Then if I run with <strong>$robot-&gt;id = 1</strong> again I get
&quot;SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '1' for key 'PRIMARY'&quot;</p>
<p>Confused at this point, my model is there &quot;empty&quot; in the class, just there for the reference </p>
<p><strong>Table and model class were not names with &quot;S&quot; on the end
robot vs robots
</strong></p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/121dd39b7f87c8bd6d1807bcb2f9245e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2975/m1ome" class="user-moderator-N"><span itemprop="name">Pavel Makarenko</span></a>        </span>
        <br>

        <span class="karma">2.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14948" href="#C14948">
                <time itemprop="dateCreated" datetime="2015-01-15T14:18:21-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Please, provide a model and table structure</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14948" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14948" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ca2033554ae4ea83d877a88557658837?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2375/tyler-shaw" class="user-moderator-N"><span itemprop="name">Tyler Shaw</span></a>        </span>
        <br>

        <span class="karma">12.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14949" href="#C14949">
                <time itemprop="dateCreated" datetime="2015-01-15T14:44:16-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Total guess, but it sounds like you forgot to set your id column as an Auto Increment field.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14949" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14949" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14950" href="#C14950">
                <time itemprop="dateCreated" datetime="2015-01-15T14:50:24-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Adding to Pavel's answer:</p>
<pre><code>if (!$robot-&gt;create())
{
    echo '&lt;pre&gt;';
    foreach($robot-&gt;getMessages() as $message)
    {
        echo $message;
    {
    die();
}</code></pre>
<p>And yeah, of course you get duplicated, because it already exists in the DB; a PK <strong>NEVER</strong> can be repeated in a table. So, when you are going to save your model, and the DB sees that the ID already exists, throws an exception (just like if you were adding it manually in the DB).</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14950" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14950" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/4d1384d668711e6153ed4c6f05e29216?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/286/trentramseyer" class="user-moderator-N"><span itemprop="name">Trent Ramseyer</span></a>        </span>
        <br>

        <span class="karma">22.7k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14951" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14951" href="#C14951">
                <time itemprop="dateCreated" datetime="2015-01-15T14:57:17-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It was because Model class and Table were not ending with an &quot;s&quot;
robot vs robots</p>
<p>btw, I don't see that specifically stated in the model documentation even tho all examples are plural.
I know other ORMs require items as plural table names and the auto id to actually be &quot;id&quot;  (ie tables.id)</p>
<p>Is this correct to assume it needs plural table names? Also is there a way to not force that?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14951" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14951" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14952" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14952" href="#C14952">
                <time itemprop="dateCreated" datetime="2015-01-15T15:21:10-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can name it as you want:<code>robot =&gt; Robot</code>, <code>my_robots =&gt; MyRobots</code>.</p>
<p>Also you can do this <a href="https://docs.phalcon.io/es/latest/reference/models.html#pointing-to-a-different-schema">https://docs.phalcon.io/es/latest/reference/models.html#pointing-to-a-different-schema</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14952" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14952" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/4d1384d668711e6153ed4c6f05e29216?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/286/trentramseyer" class="user-moderator-N"><span itemprop="name">Trent Ramseyer</span></a>        </span>
        <br>

        <span class="karma">22.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C14952"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        RompePC                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14954" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14954" href="#C14954">
                <time itemprop="dateCreated" datetime="2015-01-15T15:31:17-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>You can name it as you want:<code>robot =&gt; Robot</code>, <code>my_robots =&gt; MyRobots</code>.</p>
<p>Also you can do this <a href="https://docs.phalcon.io/es/latest/reference/models.html#pointing-to-a-different-schema">https://docs.phalcon.io/es/latest/reference/models.html#pointing-to-a-different-schema</a></p>
</blockquote>
<p>Actually the getSource command works to make the non plural table and plural model (but not with a singular class name and singular table for me unless the class name does not match the table name.)</p>
<p>model robots  getSource(robot) = works</p>
<p>model robot  getSource(robot) = not working</p>
<p>model robotcreator  getSource(robot) = working</p>
<pre><code> public function getSource()
    {
        return "robot";
    }</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14954" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14954" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14956" href="#C14956">
                <time itemprop="dateCreated" datetime="2015-01-15T16:51:02-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Your second choice works for me. Maybe will be because of your DMBS. But I cannot go far away on this problem 'cause of lacky knowledge.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14956" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14956" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/4d1384d668711e6153ed4c6f05e29216?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/286/trentramseyer" class="user-moderator-N"><span itemprop="name">Trent Ramseyer</span></a>        </span>
        <br>

        <span class="karma">22.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C14956"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        RompePC                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14957" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14957" href="#C14957">
                <time itemprop="dateCreated" datetime="2015-01-15T16:57:20-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Your second choice works for me. Maybe will be because of your DMBS. But I cannot go far away on this problem 'cause of lacky knowledge.</p>
</blockquote>
<p>don't worry about it now, have it working now
Problem is the issue was created using Vokuro as foundation and the naming was not obviouly &quot;robot&quot; it was &quot;HealthFormFull&quot; which class was empty on model. the table was named &quot;health form full&quot; (with underscores)  using mysql and yes primary key etc was all created properly. In the controller I used &quot; use Crm\Models\HealthFormFull&quot;  and simply did a new/create as stated with the ORM. It did not work without plural.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14957" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14957" data-cf-modified-d919f7915d8e3efcab9b3d45-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4489" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>