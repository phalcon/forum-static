---
layout: default
title: 'Does phalcon support ajax? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Does phalcon support ajax?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/181/munggruel" class="user-moderator-N"><span itemprop="name">munggruel</span></a></span>
            <time itemprop="dateCreated" datetime="2013-05-03T19:10:17-07:00">May '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-05-03T19:10:17-07:00">May '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>5854</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">9</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/3046c3156219f189e81f314f6cfe6e61?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/181/munggruel" class="user-moderator-N"><span itemprop="name">munggruel</span></a></span>
                <span class="karma">13.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C270" href="#C270">
        <time class="action-date">May '13</time>
    </a>
</div>
<div class="post-content"><div><p>I search Document just find:</p>
<p>// Getting a request instance
$request = new \Phalcon\Http\Request();</p>
<p>// Check whether the request was made with method POST
if ($request-&gt;isPost() == true) {
// Check whether the request was made with Ajax
if ($request-&gt;isAjax() == true) {
echo &quot;Request was made using POST and AJAX&quot;;
}
}</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-80e2851889cf90385032c907-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-80e2851889cf90385032c907-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">9</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/3046c3156219f189e81f314f6cfe6e61?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/181/munggruel" class="user-moderator-N"><span itemprop="name">munggruel</span></a>        </span>
        <br>

        <span class="karma">13.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1102" href="#C1102">
                <time itemprop="dateCreated" datetime="2013-05-03T19:11:44-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>a lot of ajax request to get json data, how can I improve performance</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1102" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1102" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1eb2415bda000b22fd1f801bb9e8c003?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2/niden" class="user-moderator-Y"><span itemprop="name">Nikolaos Dimopoulos</span></a>        </span>
        <br>

        <span class="karma">39.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1104" href="#C1104">
                <time itemprop="dateCreated" datetime="2013-05-03T22:28:51-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes AJAX is supported as you pointed out. You can use the Response object to create a response and return it back or echo it In your controller you can use something like this (if the response is ajax)</p>
<pre><code class="language-php">$payload     = array(1, 2, 3);
$status      = 200;
$description = 'OK';
$headers     = array();
$contentType = 'application/json';
$content     = json_encode($payload);

$response = new \Phalcon\Http\Response();

$response-&gt;setStatusCode($status, $description);
$response-&gt;setContentType($contentType, 'UTF-8');
$response-&gt;setContent($content);

// Set the additional headers
foreach ($headers as $key =&gt; $value) {
   $response-&gt;setHeader($key, $value);
}

$this-&gt;view-&gt;disable();

return $response;</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1104" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1104" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/3046c3156219f189e81f314f6cfe6e61?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/181/munggruel" class="user-moderator-N"><span itemprop="name">munggruel</span></a>        </span>
        <br>

        <span class="karma">13.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1105" href="#C1105">
                <time itemprop="dateCreated" datetime="2013-05-03T23:59:33-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you for your help</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1105" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1105" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fbcce9a94e223efa1bafd3c2387b9cf9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/198/marcusatbang" class="user-moderator-N"><span itemprop="name">Marcus Downing</span></a>        </span>
        <br>

        <span class="karma">2.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1192" href="#C1192">
                <time itemprop="dateCreated" datetime="2013-05-09T08:42:31-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Is there a good reason that JSON couldn't be written with Volt? AJAX is really just HTTP, the server doesn't need to know the difference.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1192" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1192" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bf2876998907a5932aa609a948720862?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/241/gsouf" class="user-moderator-N"><span itemprop="name">Soufiane Ghzal</span></a>        </span>
        <br>

        <span class="karma">21.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3614" href="#C3614">
                <time itemprop="dateCreated" datetime="2013-09-26T05:57:52-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Marcus,</p>
<p>The fact is that you are free to send your request as you want, with volt or not.
But if you want to send json or xml then it would be foolish to use Volt.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3614" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3614" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/089b8c3e69504bd29a1090e71aef0131?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7663/pacol85" class="user-moderator-N"><span itemprop="name">Francisco Lozano</span></a>        </span>
        <br>

        <span class="karma">99</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36435" href="#C36435">
                <time itemprop="dateCreated" datetime="2016-07-05T10:37:36-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi guys, I have tried using what you did here but for some reason it doesn't work for me, on the javascript is not showing me any response back, could be that my javascript is wrong? i see that it apparently calls the Action but it doesn't come back with data unless I leave the view undisabled in which case it won't bring the data I have sent but only the general layout I already have.</p>
<p>This is my JS:</p>
<pre><code>&lt;script type="text/javascript"&gt;
$(document).ready(function() {
$('#fieldDept').change(function() {
    //alert("ingreso paso 2");
    $.ajax({
        url: "formulario/listUsers", 
        success: function(result){
            $("#udiv").html(result);
        {% raw %}}}{% endraw %});
});
});&lt;/script&gt;</code></pre>
<p>And my Action I have tried both of this with no succes:</p>
<pre><code>public function listUsersAction()
{
    $this-&gt;view-&gt;disable();
    $request =$this-&gt;request;
    if ($request-&gt;isPost()==true) {
        if ($request-&gt;isAjax() == true) {               
            header('Content-type:application/json;charset=utf-8');
            echo json_encode([1, 2, 3]);
        }
    }
}</code></pre>
<p>And the other one:
public function listUsersAction()
{
$this-&gt;view-&gt;disable();
$request =$this-&gt;request;
if ($request-&gt;isPost()==true) {
if ($request-&gt;isAjax() == true) {</p>
<pre><code>            // Getting a response instance
            $response = new Response();

            $feed     = "&lt;h1&gt;respuesta&lt;/h1&gt;";
            $content = json_encode($feed);
            $status = 202;
            $description = "OK";
            $contentType = "application/json";

            // Set the content of the response
            $response-&gt;setStatusCode($status, $description);
            $response-&gt;setContentType($contentType, 'UTF-8');
            $response-&gt;setContent($content);
            return $response;
        }
    }
}</code></pre>
<p>What am i doing wrong?</p>
<p>Thanks in advance</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36435" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36435" data-cf-modified-80e2851889cf90385032c907-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="270" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>