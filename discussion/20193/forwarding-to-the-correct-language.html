---
layout: default
title: 'Forwarding to the correct language - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/13/routing">Routing</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Forwarding to the correct language</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/13181/DoubleSH" class="user-moderator-N"><span itemprop="name">DoubleSH</span></a></span>
            <time itemprop="dateCreated" datetime="2019-12-23T13:35:22-07:00">Dec '19</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2019-12-23T13:35:22-07:00">Dec '19</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '20</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>148</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/e431883fcac65b623dbe843ead106cf9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/13181/DoubleSH" class="user-moderator-N"><span itemprop="name">DoubleSH</span></a></span>
                <span class="karma">236</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C20193" href="#C20193">
        <time class="action-date">Dec '19</time>
    </a>
</div>
<div class="post-content"><div><p>Need to implement a competent redirect redirect to a page with the correct language.</p>
<p>Ie we have a site: site.ru</p>
<p>It has 2 languages: site.ru/ru and site.ru/en, respectively.</p>
<p>It is required that when entering the site.ru, the language should be correctly selected, and redirected to the appropriate section of the language, the site.ru/ru or site.ru/en</p>
<p>also, if the user for some reason switched to the site.ru/news, or the site.ru/news/today he was also transferred to the corresponding page with the language site.ru/{ru or en}/news and site.ru/{ru or en}/news/today respectively</p>
<p>It is also required to save the post request, that is, if there was a request to the site.ru?User=1, should redirect the site.ru/{ru or en}?User=1</p>
<p>Multilingualism on the site is implemented, the corresponding language is written in dispatch: beforeExecuteRoute in this way: $ session-&gt; set('lang', $lang);</p>
<p>At the moment, everything has been done with a crutch. If there is no language in the address (ru or en), then we redirect to the controller that determines the language from the session ($ this-&gt; session-&gt; get ('lang');) and then simply transfer it to the corresponding language.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-88c93c9423f2d0b783886ed3-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-88c93c9423f2d0b783886ed3-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C61733" href="#C61733">
                <time itemprop="dateCreated" datetime="2020-01-07T13:55:08-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>A simpler solution might be to not have separate language-based URLs, and just rely on the SESSION's language value.</p>
<p>So if someone visits site.ru/ with no language set, you either forward them to a controller that determines their language, or you have some code in your base controller that determines it.  The second option would be better, because then that functionality could be run on any page, not just the homepage.</p>
<p>Then just build it into your view that you check the language before determining which templates or language files to use.</p>
<p>This will also simplify POST forwarding, which is a pain-in-the-ass.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61733" data-cf-modified-88c93c9423f2d0b783886ed3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61733" data-cf-modified-88c93c9423f2d0b783886ed3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="20193" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>