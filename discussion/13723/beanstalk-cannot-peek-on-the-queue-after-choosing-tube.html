---
layout: default
title: 'Beanstalk: Cannot peek on the queue after choosing tube - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Beanstalk: Cannot peek on the queue after choosing tube</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a></span>
            <time itemprop="dateCreated" datetime="2016-09-19T10:34:00-07:00">Sep '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-09-19T10:34:00-07:00">Sep '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>822</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a></span>
                <span class="karma">47.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C13723" href="#C13723">
        <time class="action-date">Sep '16</time>
    </a>
</div>
<div class="post-content"><div><p>In my services.php I have:</p>
<pre><code class="language-php">$di-&gt;set('queue', function () use ($config){
   $queue = new \Phalcon\Queue\Beanstalk([
       $config-&gt;queue-&gt;host,
       $config-&gt;queue-&gt;port,
       $config-&gt;queue-&gt;persistent
   ]);

    return $queue;
});</code></pre>
<p>To put a job onto the queue &quot;email&quot; I:</p>
<pre><code class="language-php">                $this-&gt;queue-&gt;choose("email");
                $this-&gt;queue-&gt;put($to_notify);</code></pre>
<p>I have verified the job is in tube 'email' via Chrome Browser App Beanstalkd Dashboard:</p>
<p>The problem I am having is that the script I have freezes when attempting to reserve a job after choosing the email tube from the queue.</p>
<pre><code class="language-php">$this-&gt;queue-&gt;choose('email');

while (true) {
    while ($this-&gt;queue-&gt;peekReady() !== false) {
        $job = $this-&gt;queue-&gt;reserve();                     //script freezes here!!!
    }
}
</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-d6ae69517f1501c34378aa73-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-d6ae69517f1501c34378aa73-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="40449" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '16</span>
              </span><br/><a name="C40449" href="#C40449">
                <time itemprop="dateCreated" datetime="2016-09-19T10:41:39-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>For getting jobs from queue and tube you should use <strong>watch</strong>, not <strong>choose</strong> method</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40449" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40449" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C40449"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C40457" href="#C40457">
                <time itemprop="dateCreated" datetime="2016-09-19T10:47:41-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>When I use watch it is not getting the job from the watched tube.</p>
<blockquote>
<p>For getting jobs from queue and tube you should use <strong>watch</strong>, not <strong>choose</strong> method</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40457" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40457" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="40461" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '16</span>
              </span><br/><a name="C40461" href="#C40461">
                <time itemprop="dateCreated" datetime="2016-09-19T10:52:20-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I found a solution here <a href="https://github.com/phalcon/cphalcon/issues/1882#issuecomment-33081184"><a href="https://github.com/phalcon/cphalcon/issues/1882#issuecomment-33081184">https://github.com/phalcon/cphalcon/issues/1882#issuecomment-33081184</a></a></p>
<p>After using these two lines next to each other in this order:</p>
<pre><code class="language-php">    $this-&gt;queue-&gt;choose('email');
    $this-&gt;queue-&gt;watch('email');</code></pre>
<p>I was able to:</p>
<pre><code class="language-php">$this-&gt;queue-&gt;reserve()</code></pre>
<p>I am using Phalcon 3.0.1</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40461" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40461" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40463" href="#C40463">
                <time itemprop="dateCreated" datetime="2016-09-19T10:56:56-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I am using phalcon 3.0.1 too and no problem at all:</p>
<pre><code class="language-php">&lt;?php
/**
 * Created by PhpStorm.
 * User: Wojtek
 * Date: 2016-08-20
 * Time: 13:54
 */
use Phalcon\Cli\Task;
use Phalcon\Logger\Adapter\File;
use Phalcon\Queue\Beanstalk;
/**
 * Class LogTask
 *
 * @package Suzuki\Cli\Task
 */
class LogTask extends Task
{
    /**
     * @var Beanstalk
     */
    protected $queue;
    /**
     * @var File
     */
    protected $loggerBeforeDispatch;
    /**
     * @var File
     */
    protected $loggerBeforeException;
    /**
     * @var File
     */
    protected $loggerBeforeSendRequest;
    /**
     * @var File
     */
    protected $loggerSqlDebug;
    /**
     * @var File
     */
    protected $loggerPerformance;
    /**
     * @var File
     */
    protected $loggerModel;
    /**
     * @var File
     */
    protected $mailer;
    /**
     * Sets services
     */
    public function initialize()
    {
        $this-&gt;queue = $this-&gt;di-&gt;get('queue');
        $this-&gt;loggerBeforeDispatch = $this-&gt;di-&gt;get('loggerBeforeDispatch');
        $this-&gt;loggerBeforeException = $this-&gt;di-&gt;get('loggerBeforeException');
        $this-&gt;loggerBeforeSendRequest = $this-&gt;di-&gt;get('loggerBeforeSendRequest');
        $this-&gt;loggerSqlDebug = $this-&gt;di-&gt;get('loggerSqlDebug');
        $this-&gt;loggerPerformance = $this-&gt;di-&gt;get('loggerPerformance');
        $this-&gt;loggerModel = $this-&gt;di-&gt;get('loggerModel');
        $this-&gt;mailer = $this-&gt;di-&gt;get('mailer');
    }
    /**
     * Handle task
     */
    public function logAction()
    {
        $this-&gt;queue-&gt;watch('log');
        while ($this-&gt;queue-&gt;statsTube('log')["current-jobs-ready"] &gt; 0 &amp;&amp; ($job = $this-&gt;queue-&gt;reserve())) {
            $body = $job-&gt;getBody();
            if (isset($body['type'])) {
                switch ($body['type']) {
                    case 'beforeException':
                        $this-&gt;loggerBeforeException-&gt;error($body['message']);
                        break;
                    case 'beforeDispatch':
                        $this-&gt;loggerBeforeDispatch-&gt;info($body['message']);
                        break;
                    case 'beforeSendRequest':
                        $this-&gt;loggerBeforeSendRequest-&gt;info($body['message']);
                        break;
                    case 'beforeQuery':
                        $this-&gt;loggerSqlDebug-&gt;info($body['message']);
                        break;
                    case 'performance':
                        $this-&gt;loggerPerformance-&gt;info($body['message']);
                        break;
                    case 'modelException':
                        $this-&gt;loggerModel-&gt;info($body['message']);
                        break;
                    default:
                        break;
                }
            }
            $job-&gt;delete();
        }
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40463" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40463" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40473" href="#C40473">
                <time itemprop="dateCreated" datetime="2016-09-19T11:15:27-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This works:</p>
<pre><code class="language-php">    $this-&gt;queue-&gt;watch('email');

    while ($job = $this-&gt;queue-&gt;reserve()) {
        $message = $job-&gt;getBody();
    }
</code></pre>
<p>This works:</p>
<pre><code class="language-php">    $this-&gt;queue-&gt;choose('email');
    $this-&gt;queue-&gt;watch('email');

    while ($this-&gt;queue-&gt;peekReady() !== false) {
        $job = $this-&gt;queue-&gt;reserve();                  
        $message = $job-&gt;getBody();
    }`</code></pre>
<p>As opposed to (doesn't work):</p>
<pre><code class="language-php">    $this-&gt;queue-&gt;watch('email');

    while ($this-&gt;queue-&gt;peekReady() !== false) {
        $job = $this-&gt;queue-&gt;reserve();                  
        $message = $job-&gt;getBody();
    }
</code></pre>
<p>and (doesn't work):</p>
<pre><code class="language-php">    $this-&gt;queue-&gt;choose('email');

    while ($this-&gt;queue-&gt;peekReady() !== false) {
        $job = $this-&gt;queue-&gt;reserve();                  
        $message = $job-&gt;getBody();
    }
</code></pre>
<p>It appears you cannot use peekReady in a tube besides 'default':</p>
<pre><code class="language-php">    $this-&gt;queue-&gt;peekReady();</code></pre>
<p>unless you do this:</p>
<pre><code class="language-php">    $this-&gt;queue-&gt;choose('email');
    $this-&gt;queue-&gt;watch('email');</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40473" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40473" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40477" href="#C40477">
                <time itemprop="dateCreated" datetime="2016-09-19T11:16:51-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Is this a bug with peekReady() ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40477" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40477" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40483" href="#C40483">
                <time itemprop="dateCreated" datetime="2016-09-19T11:47:38-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I don't know to be honest. Im using only reserve from getting jobes from tube and no problem for me.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40483" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40483" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C40483"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C40485" href="#C40485">
                <time itemprop="dateCreated" datetime="2016-09-19T11:49:41-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Neh botha. Ta mate</p>
<blockquote>
<p>I don't know to be honest. Im using only reserve from getting jobes from tube and no problem for me.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40485" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40485" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40513" href="#C40513">
                <time itemprop="dateCreated" datetime="2016-09-20T03:18:21-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Which OS do you use? Beanstalkd version?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40513" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40513" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40515" href="#C40515">
                <time itemprop="dateCreated" datetime="2016-09-20T04:12:39-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>osx 10.11.6
beanstalkd 1.10</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40515" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40515" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40519" href="#C40519">
                <time itemprop="dateCreated" datetime="2016-09-20T04:45:20-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>OSX again xD :)
Have you tried to run your code on production env (i.e. GNU/Linux)?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40519" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40519" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40529" href="#C40529">
                <time itemprop="dateCreated" datetime="2016-09-20T07:37:30-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I haven't tested those cases in Centos no.</p>
<p>What makes you think this is related to OSX?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40529" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40529" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="40541" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '16</span>
              </span><br/><a name="C40541" href="#C40541">
                <time itemprop="dateCreated" datetime="2016-09-20T08:54:21-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Since we discovered that OSX is case insensitive after all (in a weird way), who knows what to expect with such things as daemons. </p>
<p>Give it a shot and try it on GNU/Linux. If it does work, you know what you have to do... and<a href="https://forum.phalcon.io/user/0/Jurigag"> @Jurigag</a> already mentioned he can run this method w/o issues.</p>
<p>I'm using beanstalkd with <code>put()</code> and <code>reserve()</code> methods only, works like a charm for what it needs to do.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40541" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40541" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e1731ca2cc82170fb565554fd13b9f7c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1017/baychae" class="user-moderator-N"><span itemprop="name">baychae</span></a>        </span>
        <br>

        <span class="karma">47.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40581" href="#C40581">
                <time itemprop="dateCreated" datetime="2016-09-20T16:13:56-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>As it turned out this had nothing to do with <code>put()</code> and <code>reserve()</code>.<a href="https://forum.phalcon.io/user/0/stamster"> @stamster</a> 's I changed the title of the thread after your last comment as I realised  it had become misleading.</p>
<p>This thread turned out to be about the behaviour of <code>$this-&gt;queue-&gt;peekReady()</code> when using beanstalkd tubes. I think<a href="https://forum.phalcon.io/user/0/Jurigag"> @Jurigag</a> knows this (as I do) as he said &quot;I don't know to be honest. Im using only reserve from getting jobes from tube and no problem for me.&quot;. Thanks<a href="https://forum.phalcon.io/user/0/Jurigag"> @Jurigag</a> as this is what made me realise it was an issue/feature I originally had with <code>peekReady()</code>. So I could investigate a bit more or ignore and just <code>reserve()</code> after choosing the tube. Also why bother using <code>peekReady()</code>? I still have no real idea why its there. Not when you can just <code>reserve()</code> away like pacman and consume away. Maybe I should ask the Beanstalkd protocol guys. All I know is at time of writing its used in <a href="https://docs.phalcon.io/en/latest/reference/queue.html#retrieving-messages">example code in the Phalcon docs</a>. </p>
<p>Just had to scratch that itch though. The <a href="https://github.com/kr/beanstalkd/blob/master/doc/protocol.txt">Beanstalkd protocol</a> doesn't mention anything about <code>peekReady()</code> and tubes but I now know that it works after choosing and then watching the tube. </p>
<p>Right now I think this about a Beanstalkd thing.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40581" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40581" data-cf-modified-d6ae69517f1501c34378aa73-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="13723" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>