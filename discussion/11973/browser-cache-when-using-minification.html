---
layout: default
title: 'Browser cache when using minification - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/8/cache">Cache</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Browser cache when using minification</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/6175/sindrehal" class="user-moderator-N"><span itemprop="name">Sindre Halbjørhus</span></a></span>
            <time itemprop="dateCreated" datetime="2016-06-29T15:24:19-07:00">Jun '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-06-29T15:24:19-07:00">Jun '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>584</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/da49ce69e8688629cb5b6b406282a0ed?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/6175/sindrehal" class="user-moderator-N"><span itemprop="name">Sindre Halbjørhus</span></a></span>
                <span class="karma">1.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11973" href="#C11973">
        <time class="action-date">Jun '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi.</p>
<p>i use asset manager to create collections of css and one collection for js files.
When i use minification it works well, but i see that the minified files never gets loaded using the browser cache.</p>
<p>when i dont use minification it loads all the files leveragning browser cache. My question is how and if possible how to get browsers load the minified version of my collection fra internal browser cache.</p>
<p>Regards
Sindre</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-c33b52c352d1316becd53aaf-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-c33b52c352d1316becd53aaf-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e00a6fdd3e722135512e013b7f1e9693?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3916/zhegwood" class="user-moderator-N"><span itemprop="name">Zach</span></a>        </span>
        <br>

        <span class="karma">17.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36167" href="#C36167">
                <time itemprop="dateCreated" datetime="2016-06-29T15:33:45-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think you need to build a minified file and load that file.  If the filename is constant, the browser will cache it.  I don't believe the browser caches raw script tags with minified code in it if that's what you're trying to do.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36167" data-cf-modified-c33b52c352d1316becd53aaf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36167" data-cf-modified-c33b52c352d1316becd53aaf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/da49ce69e8688629cb5b6b406282a0ed?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6175/sindrehal" class="user-moderator-N"><span itemprop="name">Sindre Halbjørhus</span></a>        </span>
        <br>

        <span class="karma">1.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36179" href="#C36179">
                <time itemprop="dateCreated" datetime="2016-06-30T05:51:50-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The filename of the minified file is always the same: js.js</p>
<p>The same goes for css minification.</p>
<p>Here is the code:</p>
<pre><code class="language-php">$this-&gt;assets
            -&gt;collection('DefaultJS')
            -&gt;addJs('js/full/jquery-2.2.4.js')
            -&gt;addJs('js/full/jquery-ui.js')
            -&gt;addJs('js/full/bootstrap.js')
            -&gt;addJs('js/full/app.js')
            -&gt;addJs('js/full/base.js')
            -&gt;addJs('js/full/notification/SmartNotification.js')
            -&gt;addJs('js/full/jquery.validate.js')
            -&gt;setTargetPath('js/min/js.js')
            -&gt;setTargetUri('js/min/js.js')
            -&gt;join(true)
            -&gt;addFilter(new \Phalcon\Assets\Filters\Jsmin());</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36179" data-cf-modified-c33b52c352d1316becd53aaf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36179" data-cf-modified-c33b52c352d1316becd53aaf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/88c20f295ea45b0801ec3c2ee9488ba1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2826/MarcosJrBR" class="user-moderator-N"><span itemprop="name">Marcos Junior</span></a>        </span>
        <br>

        <span class="karma">18.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36271" href="#C36271">
                <time itemprop="dateCreated" datetime="2016-07-01T20:31:47-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If I understand you want the new minified files are loaded instead of the old without minification is it? If so, try this.</p>
<pre><code class="language-php">//In your service.php
$di-&gt;setShared('view', function () use ($config) {

    $view = new View();

    $view-&gt;setViewsDir($config-&gt;application-&gt;viewsDir);

    $view-&gt;registerEngines(array(
        '.volt' =&gt; function ($view, $di) use ($config) {

            $volt = new VoltEngine($view, $di);

            $volt-&gt;setOptions(array(
                'compiledPath' =&gt; $config-&gt;application-&gt;cacheDir,
                'compiledSeparator' =&gt; '_',

                //ADD THIS LINE BELOW
                'compileAlways' =&gt; true
            ));

            return $volt;
        },
        '.phtml' =&gt; 'Phalcon\Mvc\View\Engine\Php'
    ));

    return $view;
});
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36271" data-cf-modified-c33b52c352d1316becd53aaf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36271" data-cf-modified-c33b52c352d1316becd53aaf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11973" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>