---
layout: default
title: '¿BeforeSave not receive data before saving? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">¿BeforeSave not receive data before saving?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a></span>
            <time itemprop="dateCreated" datetime="2016-05-15T07:49:29-07:00">May '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-05-15T07:49:29-07:00">May '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>477</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a></span>
                <span class="karma">81.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11527" href="#C11527">
        <time class="action-date">May '16</time>
    </a>
</div>
<div class="post-content"><div><p>I want to validate before saving if the variable &quot;$ CONT_CEDULA&quot; meets the requirements otherwise not be saved. But when saving is as if the variable &quot;$ CONT_CEDULA&quot; not send data. I want to know if I'm doing well or some other event or function. The &quot;echo&quot; Initial no data</p>
<pre><code>public function beforeSave() {

        echo $this-&gt;$CONT_CEDULA;
        switch (strlen($this-&gt;$CONT_CEDULA)) {
        case 10:
            return validarCI($this-&gt;$CONT_CEDULA);
            break;
        case 13:
            return validarRUC($this-&gt;$CONT_CEDULA);
            break;
        default:
           echo "Numero de caracteres invalidos"  ;
            return FALSE;
    }</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-f410bc909ca0bea755bd8748-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-f410bc909ca0bea755bd8748-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34075" href="#C34075">
                <time itemprop="dateCreated" datetime="2016-05-15T08:13:52-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>And where you executing save ? Can you show it ? And also data which you passing to save method ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34075" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34075" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34079" href="#C34079">
                <time itemprop="dateCreated" datetime="2016-05-15T10:35:51-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is the save method, was created by the developer tools.</p>
<pre><code>public function createAction()
{
    if (!$this-&gt;request-&gt;isPost()) {
        return $this-&gt;dispatcher-&gt;forward(array(
            "controller" =&gt; "spm_contacto",
            "action" =&gt; "index"
        ));
    }
    //Here if the content of the variable is displayed
    echo $this-&gt;request-&gt;getPost("CONT_CEDULA");
    $formato = 'Y-m-d';
    $fechanacimiento = Datetime::createFromFormat($formato, $this-&gt;request-&gt;getPost("CONT_FECNACI")); 
    echo $fechanacimiento-&gt;format('d/m/Y');
    $fechainscripcion = Datetime::createFromFormat($formato, $this-&gt;request-&gt;getPost("CONT_FECINSC"));

    $SPM_CONTACTO = new SpmContacto();

    $SPM_CONTACTO-&gt;CONT_CODIGO = $this-&gt;request-&gt;getPost("CONT_CODIGO");
    $SPM_CONTACTO-&gt;CONT_CEDULA = $this-&gt;request-&gt;getPost("CONT_CEDULA");
    $SPM_CONTACTO-&gt;CONT_RUCIDE = $this-&gt;request-&gt;getPost("CONT_RUCIDE");
    $SPM_CONTACTO-&gt;CONT_NOMBRE = $this-&gt;request-&gt;getPost("CONT_NOMBRE");
    $SPM_CONTACTO-&gt;CON_ESTADO = $this-&gt;request-&gt;getPost("CON_ESTADO");
    $SPM_CONTACTO-&gt;CONT_TELEFO = $this-&gt;request-&gt;getPost("CONT_TELEFO");
    $SPM_CONTACTO-&gt;CONT_DIRECC = $this-&gt;request-&gt;getPost("CONT_DIRECC");
    $SPM_CONTACTO-&gt;CONT_AREA = $this-&gt;request-&gt;getPost("CONT_AREA");
    $SPM_CONTACTO-&gt;CONT_CARGO = $this-&gt;request-&gt;getPost("CONT_CARGO");
    $SPM_CONTACTO-&gt;CONT_TIPOXX = $this-&gt;request-&gt;getPost("CONT_TIPOXX");
    $SPM_CONTACTO-&gt;CONT_EMAIL = $this-&gt;request-&gt;getPost("CONT_EMAIL");
    $SPM_CONTACTO-&gt;CONT_USUARIO = $this-&gt;request-&gt;getPost("CONT_USUARIO");
    $SPM_CONTACTO-&gt;CONT_CLAVE = $this-&gt;request-&gt;getPost("CONT_CLAVE");
    $SPM_CONTACTO-&gt;CONT_CLAVEE = sha1($this-&gt;request-&gt;getPost("CONT_CLAVEE"));
    $SPM_CONTACTO-&gt;CONT_FECNACI = $fechanacimiento-&gt;format('d/m/Y H:i:s');
    $SPM_CONTACTO-&gt;CONT_FECINSC = $fechainscripcion-&gt;format('d/m/Y H:i:s');   
    $SPM_CONTACTO-&gt;CONT_TIPOCODIGO = $this-&gt;request-&gt;getPost("CONT_TIPOCODIGO");

    if (!$SPM_CONTACTO-&gt;save()) {
        foreach ($SPM_CONTACTO-&gt;getMessages() as $message) {
            $this-&gt;flash-&gt;error(
                     "&lt;div class='alert callout round' data-closable&gt;"
                           . " &lt;h5&gt;Esto es Importante!&lt;/h5&gt;"
                           . " &lt;button class='close-button' aria-label='Dismiss alert' type='button' data-close&gt;"
                           . "&lt;span aria-hidden='true'&gt;&amp;times;&lt;/span&gt; &lt;/button&gt;"
                           . " &lt;p&gt;El referencia ". $message."no fue encontrado&lt;/p&gt;&lt;/div&gt;"
                    );
        }

        return $this-&gt;dispatcher-&gt;forward(array(
            "controller" =&gt; "spm_contacto",
            "action" =&gt; "new"
        ));
    }

    $this-&gt;flash-&gt;success("&lt;div class='success callout round' data-closable&gt;"
                           . " &lt;h5&gt;Esto es Importante!&lt;/h5&gt;"
                           . " &lt;button class='close-button' aria-label='Dismiss alert' type='button' data-close&gt;"
                           . "&lt;span aria-hidden='true'&gt;&amp;times;&lt;/span&gt; &lt;/button&gt;"
                            . " &lt;p&gt;El contacto fue creado correctamente.&lt;/p&gt;&lt;/div&gt;");

    return $this-&gt;dispatcher-&gt;forward(array(
        "controller" =&gt; "spm_contacto",
        "action" =&gt; "index"
    ));
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34079" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34079" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34081" href="#C34081">
                <time itemprop="dateCreated" datetime="2016-05-15T10:40:19-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>
THIS IS THE COMPLETE MODEL</p>
<pre><code>    &lt;?php

class SpmContacto extends \Phalcon\Mvc\Model {

public $CONT_CODIGO;
public $CONT_CEDULA;
public $CONT_RUCIDE;
public $CONT_NOMBRE;
public $CON_ESTADO;
public $CONT_TELEFO;
public $CONT_DIRECC;
public $CONT_AREA;
public $CONT_CARGO;
public $CONT_TIPOXX;
public $CONT_EMAIL;
public $CONT_USUARIO;
public $CONT_CLAVE;
public $CONT_CLAVEE;
public $CONT_FECNACI;
public $CONT_FECINSC;
public $CONT_TIPOCODIGO;

/**
 * Initialize method for model.
 */
public function initialize() {
    $this-&gt;setSchema("SPOLS");
    $this-&gt;hasMany('CONT_CODIGO', 'SPMREFERENCIA', 'CONT_CODIGO', array('alias' =&gt; 'SPMREFERENCIA'));
    $this-&gt;hasMany('CONT_CODIGO', 'SPTDETALLE', 'CONT_CODIGO', array('alias' =&gt; 'SPTDETALLE'));
    $this-&gt;hasMany('CONT_CODIGO', 'SPTENCABEZADO', 'CONT_CODIGO', array('alias' =&gt; 'SPTENCABEZADO'));
}

function validarCI($strCedula) {
    $suma = 0;
    $strOriginal = $strCedula;
    $intProvincia = substr($strCedula, 0, 2);
    $intTercero = $strCedula[2];
    $intUltimo = $strCedula[9];
    if (!settype($strCedula, "float"))
        return FALSE;
    if ((int) $intProvincia &lt; 1 || (int) $intProvincia &gt; 23)
        return FALSE;
    if ((int) $intTercero == 7 || (int) $intTercero == 8)
        return FALSE;
    for ($indice = 0; $indice &lt; 9; $indice++) {
        //echo $strOriginal[$indice],'&lt;/br&gt;';
        switch ($indice) {
            case 0:
            case 2:
            case 4:
            case 6:
            case 8:
                $arrProducto[$indice] = $strOriginal[$indice] * 2;
                if ($arrProducto[$indice] &gt;= 10)
                    $arrProducto[$indice] -= 9;
                //echo $arrProducto[$indice],'&lt;/br&gt;';
                break;
            case 1:
            case 3:
            case 5:
            case 7:
                $arrProducto[$indice] = $strOriginal[$indice] * 1;
                if ($arrProducto[$indice] &gt;= 10)
                    $arrProducto[$indice] -= 9;
                //echo $arrProducto[$indice],'&lt;/br&gt;';
                break;
        }
    }
    foreach ($arrProducto as $indice =&gt; $producto)
        $suma += $producto;
    $residuo = $suma % 10;
    $intVerificador = $residuo == 0 ? 0 : 10 - $residuo;
    return ($intVerificador == $intUltimo ? TRUE : FALSE);
}

function validarRUC($strRUC) {
    if (strlen($strRUC) != 13)
        return FALSE;
    $suma = 0;
    $strOriginal = $strRUC;
    $intProvincia = substr($strRUC, 0, 2);
    $intTercero = $strRUC[2];
    if (!settype($strRUC, "float"))
        return FALSE;
    if ((int) $intProvincia &lt; 1 || (int) $intProvincia &gt; 23)
        return FALSE;
    if ((int) $intTercero != 6 &amp;&amp; (int) $intTercero != 9) {
        if (substr($strRUC, 10, 3) == '001')
            return validarCI(substr($strRUC, 0, 10));
        return FALSE;
    }
    if ((int) $intTercero == 6) {
        $intUltimo = $strOriginal[8];
        for ($indice = 0; $indice &lt; 9; $indice++) {
            //echo $strOriginal[$indice],'&lt;/br&gt;';
            switch ($indice) {
                case 0:
                    $arrProducto[$indice] = $strOriginal[$indice] * 3;
                    break;
                case 1:
                    $arrProducto[$indice] = $strOriginal[$indice] * 2;
                    break;
                case 2:
                    $arrProducto[$indice] = $strOriginal[$indice] * 7;
                    break;
                case 3:
                    $arrProducto[$indice] = $strOriginal[$indice] * 6;
                    break;
                case 4:
                    $arrProducto[$indice] = $strOriginal[$indice] * 5;
                    break;
                case 5:
                    $arrProducto[$indice] = $strOriginal[$indice] * 4;
                    break;
                case 6:
                    $arrProducto[$indice] = $strOriginal[$indice] * 3;
                    break;
                case 7:
                    $arrProducto[$indice] = $strOriginal[$indice] * 2;
                    break;
                case 8:
                    $arrProducto[$indice] = 0;
                    break;
            }
        }
    } else {
        $intUltimo = $strOriginal[9];
        for ($indice = 0; $indice &lt; 9; $indice++) {
            //echo $strOriginal[$indice],'&lt;/br&gt;';
            switch ($indice) {
                case 0:
                    $arrProducto[$indice] = $strOriginal[$indice] * 4;
                    break;
                case 1:
                    $arrProducto[$indice] = $strOriginal[$indice] * 3;
                    break;
                case 2:
                    $arrProducto[$indice] = $strOriginal[$indice] * 2;
                    break;
                case 3:
                    $arrProducto[$indice] = $strOriginal[$indice] * 7;
                    break;
                case 4:
                    $arrProducto[$indice] = $strOriginal[$indice] * 6;
                    break;
                case 5:
                    $arrProducto[$indice] = $strOriginal[$indice] * 5;
                    break;
                case 6:
                    $arrProducto[$indice] = $strOriginal[$indice] * 4;
                    break;
                case 7:
                    $arrProducto[$indice] = $strOriginal[$indice] * 3;
                    break;
                case 8:
                    $arrProducto[$indice] = $strOriginal[$indice] * 2;
                    break;
            }
        }
    }
    foreach ($arrProducto as $indice =&gt; $producto)
        $suma += $producto;
    $residuo = $suma % 11;
    $intVerificador = $residuo == 0 ? 0 : 11 - $residuo;
    //echo "$intVerificador == $intUltimo";
    return ($intVerificador == $intUltimo ? TRUE : FALSE);
}

function validarID($strId) {
    switch (strlen($strId)) {
        case 10:
            return validarCI($strId);
            break;
        case 13:
            return validarRUC($strId);
            break;
        default:

            return FALSE;
    }
}

public function beforeSave() {

    echo $this-&gt;$CONT_CEDULA;
    switch (strlen($this-&gt;$CONT_CEDULA)) {
        case 10:
            return validarCI($this-&gt;$CONT_CEDULA);
            break;
        case 13:
            return validarRUC($this-&gt;$CONT_CEDULA);
            break;
        default:
           echo "Numero de caracteres invalidos";
         return FALSE;
    }

     //echo $op;
}

public function getSource() {
    return 'SPM_CONTACTO';
}

public static function find($parameters = null) {
    return parent::find($parameters);
}

public static function findFirst($parameters = null) {
    return parent::findFirst($parameters);
}</code></pre>
<p>}</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34081" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34081" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34085" href="#C34085">
                <time itemprop="dateCreated" datetime="2016-05-15T11:11:05-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Check what <code>$this-&gt;request-&gt;getPost("CONT_CEDULA")</code> return and refractor your code beacause right now it looks super bad.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34085" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34085" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="34087" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C34087" href="#C34087">
                <time itemprop="dateCreated" datetime="2016-05-15T11:16:01-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This code is generated by the developer tools. Ok I'll check.  if data but not receive them at that time as the model</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34087" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34087" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/082d639000dca8bb30d9bf7cc12698ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4945/jeiel" class="user-moderator-N"><span itemprop="name">jeiel</span></a>        </span>
        <br>

        <span class="karma">81.2k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34105" href="#C34105">
                <time itemprop="dateCreated" datetime="2016-05-15T19:23:00-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The problem was the sign $ in the $ this-&gt; CONT_CEDULA; It worked</p>
<pre><code>public function beforeSave() {

    echo $this-&gt;CONT_CEDULA;
    switch (strlen($this-&gt;CONT_CEDULA)) {
    case 10:
        return validarCI($this-&gt;CONT_CEDULA);
        break;
    case 13:
        return validarRUC($this-&gt;CONT_CEDULA);
        break;
    default:
       echo "Numero de caracteres invalidos"  ;
        return FALSE;
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34105" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34105" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34109" href="#C34109">
                <time itemprop="dateCreated" datetime="2016-05-15T23:19:45-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well i missed it. Your previous code <code>$this-&gt;$CONT_CEDULA</code> meant that you access field from <code>$this</code> where field name is value of <code>$CONT_CEDULA</code>.</p>
<p>Also try to really refractor yor code, right now it look pretty bad. For example:</p>
<pre><code class="language-php">        for ($indice = 0; $indice &lt; 9; $indice++) {
            //echo $strOriginal[$indice],'&lt;/br&gt;';
            switch ($indice) {
                case 0:
                    $arrProducto[$indice] = $strOriginal[$indice] * 4;
                    break;
                case 1:
                    $arrProducto[$indice] = $strOriginal[$indice] * 3;
                    break;
                case 2:
                    $arrProducto[$indice] = $strOriginal[$indice] * 2;
                    break;
                case 3:
                    $arrProducto[$indice] = $strOriginal[$indice] * 7;
                    break;
                case 4:
                    $arrProducto[$indice] = $strOriginal[$indice] * 6;
                    break;
                case 5:
                    $arrProducto[$indice] = $strOriginal[$indice] * 5;
                    break;
                case 6:
                    $arrProducto[$indice] = $strOriginal[$indice] * 4;
                    break;
                case 7:
                    $arrProducto[$indice] = $strOriginal[$indice] * 3;
                    break;
                case 8:
                    $arrProducto[$indice] = $strOriginal[$indice] * 2;
                    break;
            }
        }</code></pre>
<p>You can move this to seperate method beacause you have this in two places.</p>
<pre><code class="language-php"> switch ($indice) {
            case 0:
            case 2:
            case 4:
            case 6:
            case 8:
                $arrProducto[$indice] = $strOriginal[$indice] * 2;
                if ($arrProducto[$indice] &gt;= 10)
                    $arrProducto[$indice] -= 9;
                //echo $arrProducto[$indice],'&lt;/br&gt;';
                break;
            case 1:
            case 3:
            case 5:
            case 7:
                $arrProducto[$indice] = $strOriginal[$indice] * 1;
                if ($arrProducto[$indice] &gt;= 10)
                    $arrProducto[$indice] -= 9;
                //echo $arrProducto[$indice],'&lt;/br&gt;';
                break;
        }</code></pre>
<p>modulo ?</p>
<pre><code class="language-php">    $SPM_CONTACTO-&gt;CONT_CODIGO = $this-&gt;request-&gt;getPost("CONT_CODIGO");
    $SPM_CONTACTO-&gt;CONT_CEDULA = $this-&gt;request-&gt;getPost("CONT_CEDULA");
    $SPM_CONTACTO-&gt;CONT_RUCIDE = $this-&gt;request-&gt;getPost("CONT_RUCIDE");
    $SPM_CONTACTO-&gt;CONT_NOMBRE = $this-&gt;request-&gt;getPost("CONT_NOMBRE");
    $SPM_CONTACTO-&gt;CON_ESTADO = $this-&gt;request-&gt;getPost("CON_ESTADO");
    $SPM_CONTACTO-&gt;CONT_TELEFO = $this-&gt;request-&gt;getPost("CONT_TELEFO");
    $SPM_CONTACTO-&gt;CONT_DIRECC = $this-&gt;request-&gt;getPost("CONT_DIRECC");
    $SPM_CONTACTO-&gt;CONT_AREA = $this-&gt;request-&gt;getPost("CONT_AREA");
    $SPM_CONTACTO-&gt;CONT_CARGO = $this-&gt;request-&gt;getPost("CONT_CARGO");
    $SPM_CONTACTO-&gt;CONT_TIPOXX = $this-&gt;request-&gt;getPost("CONT_TIPOXX");
    $SPM_CONTACTO-&gt;CONT_EMAIL = $this-&gt;request-&gt;getPost("CONT_EMAIL");
    $SPM_CONTACTO-&gt;CONT_USUARIO = $this-&gt;request-&gt;getPost("CONT_USUARIO");
    $SPM_CONTACTO-&gt;CONT_CLAVE = $this-&gt;request-&gt;getPost("CONT_CLAVE");
    $SPM_CONTACTO-&gt;CONT_CLAVEE = sha1($this-&gt;request-&gt;getPost("CONT_CLAVEE"));
    $SPM_CONTACTO-&gt;CONT_FECNACI = $fechanacimiento-&gt;format('d/m/Y H:i:s');
    $SPM_CONTACTO-&gt;CONT_FECINSC = $fechainscripcion-&gt;format('d/m/Y H:i:s');   
    $SPM_CONTACTO-&gt;CONT_TIPOCODIGO = $this-&gt;request-&gt;getPost("CONT_TIPOCODIGO");</code></pre>
<p>Instead of doing this you can just do:</p>
<pre><code class="language-php">$post = $this-&gt;request-&gt;getPost();
$whiteList = //Some method from our object which will return whitelist array
if (!$SPM_CONTACTO-&gt;save($post, $whiteList)) {
// rest of code
}</code></pre>
<p>Also you should create and format date in beforeValidationOnSave method in your model.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34109" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34109" data-cf-modified-f410bc909ca0bea755bd8748-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11527" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>