---
layout: default
title: 'Events - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/11/events-manager">Events</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Events</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a></span>
            <time itemprop="dateCreated" datetime="2015-03-20T02:16:13-07:00">Mar '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-03-20T02:16:13-07:00">Mar '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>740</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a></span>
                <span class="karma">6.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6201" href="#C6201">
        <time class="action-date">Mar '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hello everyone. There is a basic controller BackendController. Inherited by other controllers. Please help me to organize for their support of the event, ie, to be able to expand with ItemController CategoryController and vice versa, for example.</p>
<pre><code class="language-php">&lt;?php
//BackendController
namespace Core\Controllers;

class BackendController extends \Phalcon\Mvc\Controller
{}

//ItemController
class ItemController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {

    }
}

//CategoryController
class CategoryController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {

    }
}

//PageController
class PageController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {

    }
}
//etc</code></pre>
<p>Please help me to organize dynamically opportunity to expand one class by another, a rough example:</p>
<pre><code class="language-php">&lt;?php
//ItemController
class ItemController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {
        echo 'ItemController';
    }
}

//CategoryController
class CategoryController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {
        $extraData = 'extends from CategoryController';
        $eventsManager-&gt;fire("item:beforeIndexAction", $this, $extraData);
    }
}</code></pre>
<p>Accordingly, when the method is called in the controller indexAction ItemController, should receive:</p>
<pre><code class="language-php">&lt;?php
    ItemController extends from CategoryController</code></pre>
<p>Ideally, I can extend action of any controller in another controller action of any inherited from BackendController</p>
<p>Life example. When editing the item(ItemController editAction) I want to load a list of categories(CategoryController getCategoriesAction), but ItemController should not depend on CategoryController, so if i delete CategoryController, ItemController should continue to work, but list of categories(CategoryController getCategoriesAction) would no longer be available on it.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-5e9ca76b63752deef010b1a9-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-5e9ca76b63752deef010b1a9-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e008d7c8aa0c868f618211c399d1e927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2111/praswicaksono" class="user-moderator-N"><span itemprop="name">Prasetyo</span></a>        </span>
        <br>

        <span class="karma">7.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16706" href="#C16706">
                <time itemprop="dateCreated" datetime="2015-03-20T11:09:11-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>Could you pleas translate your post in english, so we here can help you</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16706" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16706" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C16706"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/e008d7c8aa0c868f618211c399d1e927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Prasetyo                    </a>
                </div><div class="posts-buttons" align="right"><a name="C16709" href="#C16709">
                <time itemprop="dateCreated" datetime="2015-03-20T13:45:09-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Hi,</p>
<p>Could you pleas translate your post in english, so we here can help you</p>
</blockquote>
<p>Hi, translated it, but my english not good enough :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16709" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16709" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e008d7c8aa0c868f618211c399d1e927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2111/praswicaksono" class="user-moderator-N"><span itemprop="name">Prasetyo</span></a>        </span>
        <br>

        <span class="karma">7.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16757" href="#C16757">
                <time itemprop="dateCreated" datetime="2015-03-21T21:21:14-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>extending or call another controller in controller is bad practice. Controller is just for manage routing, your business process should be placed in model.</p>
<p>If you want your business process reusable you use additional layer e.g service layer.</p>
<p>if you want learn more about service layer : <a href="https://www.youtube.com/watch?v=ajhqScWECMo">https://www.youtube.com/watch?v=ajhqScWECMo</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16757" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16757" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C16757"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/e008d7c8aa0c868f618211c399d1e927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Prasetyo                    </a>
                </div><div class="posts-buttons" align="right"><a name="C16777" href="#C16777">
                <time itemprop="dateCreated" datetime="2015-03-22T12:19:53-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Hi,</p>
<p>extending or call another controller in controller is bad practice. Controller is just for manage routing, your business process should be placed in model.</p>
<p>If you want your business process reusable you use additional layer e.g service layer.</p>
<p>if you want learn more about service layer : <a href="https://www.youtube.com/watch?v=ajhqScWECMo">https://www.youtube.com/watch?v=ajhqScWECMo</a></p>
</blockquote>
<p>I only want create plugins system like Wordpress CMS or similar...</p>
<p>For example, i have two controllers - ItemController and CategoryController</p>
<p>ItemController</p>
<pre><code class="language-php">&lt;?php

class ItemController
{
    public function editAction($extraData)
    {
        var_dump($extraData);
        //array('category 1', 'category 2', 'category 3')
    }
}</code></pre>
<p>CategoryController</p>
<pre><code class="language-php">&lt;?php

class CategoryController
{
    public function listAction()
    {
        $categories = array('category 1', 'category 2', 'category 3');
        $eventsManager-&gt;fire("ItemController:editAction", $extraData); //like this
    }
}</code></pre>
<p>When i call ItemController::editAction i want get CategoryController::listAction, thats all. I think need use <a href="https://docs.phalcon.io/en/latest/reference/events.html">https://docs.phalcon.io/en/latest/reference/events.html</a> , but how use it for this i not understand :(</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16777" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16777" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e008d7c8aa0c868f618211c399d1e927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2111/praswicaksono" class="user-moderator-N"><span itemprop="name">Prasetyo</span></a>        </span>
        <br>

        <span class="karma">7.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16784" href="#C16784">
                <time itemprop="dateCreated" datetime="2015-03-22T21:56:45-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I understand,</p>
<p>But it is more manageable if your plugin have their own interface instead using controller as plugin.</p>
<p>for example this logger class will listen to any event</p>
<pre><code class="language-php"> &lt;?php

namespace Avent\Events;

use Avent\Core\Event\Abstraction\BeforeAnythingAbstract;
use FastRoute\Dispatcher;
use League\Event\EventInterface;

class LoggerHook extends BeforeAnythingAbstract
{
    public function handle(EventInterface $event)
    {
        $this-&gt;logger-&gt;addDebug("{$event-&gt;getName()} triggered " . date('Y-m-d H:i:s'));
    }
}

// EOF</code></pre>
<p>and for example, somewhere in my controller</p>
<pre><code class="language-php"> $this-&gt;event_emitter-&gt;emit("after.user.registration", $command);</code></pre>
<p>I trigger listerner that listening on event <code>after.user.registration</code> since my listener listen on any event it wil called first</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16784" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16784" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C16784"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/e008d7c8aa0c868f618211c399d1e927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Prasetyo                    </a>
                </div><div class="posts-buttons" align="right"><a name="C16878" href="#C16878">
                <time itemprop="dateCreated" datetime="2015-03-25T09:28:44-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>I understand,</p>
<p>But it is more manageable if your plugin have their own interface instead using controller as plugin.</p>
<p>for example this logger class will listen to any event</p>
<pre><code class="language-php">&lt;?php

namespace Avent\Events;

use Avent\Core\Event\Abstraction\BeforeAnythingAbstract;
use FastRoute\Dispatcher;
use League\Event\EventInterface;

class LoggerHook extends BeforeAnythingAbstract
{
   public function handle(EventInterface $event)
   {
       $this-&gt;logger-&gt;addDebug("{$event-&gt;getName()} triggered " . date('Y-m-d H:i:s'));
   }
}

// EOF</code></pre>
<p>and for example, somewhere in my controller</p>
<pre><code class="language-php">$this-&gt;event_emitter-&gt;emit("after.user.registration", $command);</code></pre>
<p>I trigger listerner that listening on event <code>after.user.registration</code> since my listener listen on any event it wil called first</p>
</blockquote>
<p>Thanks, i want this</p>
<pre><code class="language-php">
class TestController
{
 public function indexAction()
 {
     //
 }
}

//And then on any controller like this

$this-&gt;fire-&gt;testcontroller-&gt;beforeIndexAction('beforeIndexAction testcontroller'); //or other syntax, does not matter

or 

$this-&gt;fire-&gt;testcontroller-&gt;afterIndexAction('afterIndexAction testcontroller'); //or other syntax, does not matter</code></pre>
<p>but i dont understand how do like this on Phalcon :(</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16878" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16878" data-cf-modified-5e9ca76b63752deef010b1a9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6201" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>