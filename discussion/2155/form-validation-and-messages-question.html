---
layout: default
title: 'Form Validation and Messages question - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Form Validation and Messages question</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a></span>
            <time itemprop="dateCreated" datetime="2014-04-23T05:12:13-07:00">Apr '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-04-23T05:12:13-07:00">Apr '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>2427</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a></span>
                <span class="karma">38.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2155" href="#C2155">
        <time class="action-date">Apr '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hi there,</p>
<p>I have a question about Validation and some confusion I have. If you look at this example <a href="https://github.com/phalcon/vokuro/blob/master/app/views/session/signup.volt">https://github.com/phalcon/vokuro/blob/master/app/views/session/signup.volt</a> you can see that the Volt template calls form.messages under each and every input element in the form.</p>
<p>I followed this pattern for my own form but when the controller action is initially called, the inputs aren't valid and the message(s) to this effect are displayed on the form. Ideally, I only want to display validation/error messages after the form has been posted (via the submit button) and not when it is initially rendered.</p>
<p>Have I missed something here or was this just a design decision in the vokuro forms?</p>
<p>Any advice appreciated. Thanks.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-bde5a77f5f356f64888270c7-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-bde5a77f5f356f64888270c7-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7414" href="#C7414">
                <time itemprop="dateCreated" datetime="2014-04-23T06:01:03-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>For now, I added a check to the messages method to see if we are in a post:</p>
<pre><code class="language-php">    public function messages($name)
    {
        if (!$this-&gt;request-&gt;isPost()) {
            return;
        }

        if ($this-&gt;hasMessagesFor($name)) {
            foreach ($this-&gt;getMessagesFor($name) as $message) {
                $this-&gt;flash-&gt;error($message);
            }
        }
    }</code></pre>
<p>This seems to work OK but I'd really appreciate any feedback around my original question. Thanks!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7414" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7414" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/47f389ac06cd3be6143a45057a9f8c05?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1533/pixiesky" class="user-moderator-N"><span itemprop="name">Andy Myers</span></a>        </span>
        <br>

        <span class="karma">10.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7451" href="#C7451">
                <time itemprop="dateCreated" datetime="2014-04-24T07:05:47-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>From what you have posted it looks like a stripped down version of this kind of thing:</p>
<pre><code class="language-php">&lt;?php
public function someAction($name)
    {
        if ($this-&gt;request-&gt;isPost()) // if there is post data 
        {
            //Some code here that saves data to the database and other things

            if ($this-&gt;hasMessagesFor($name)) 
            {
                foreach ($this-&gt;getMessagesFor($name) as $message) 
                {
                    $this-&gt;flash-&gt;error($message);
                }
            } 

            else 
            {
                $this-&gt;flash-&gt;success("Your details were saved!");
            }
        }

        // code to do with view data would sit outside. Messages should not appear if there is no post data.
    }
</code></pre>
<p><code>$this-&gt;flash-&gt;error($message);</code> tends to be used for getting messages to appear at the top of the page and doesn't relate to the <code>{% raw %}{{{% endraw %} form.messages('name') {% raw %}}}{% endraw %}</code> style commands you see in the volt template. I'm having to guess a bit here for you though.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7451" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7451" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7454" href="#C7454">
                <time itemprop="dateCreated" datetime="2014-04-24T07:12:22-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/1533/pixiesky">@pixiesky</a> yep, I was basing my code on that shown in <a href="https://github.com/phalcon/vokuro/blob/master/app/views/session/signup.volt">https://github.com/phalcon/vokuro/blob/master/app/views/session/signup.volt</a></p>
<p>Is there an alernative approach to associating form input validation errors with the appropriate input element(s)?</p>
<p>Cheers</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7454" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7454" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/47f389ac06cd3be6143a45057a9f8c05?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1533/pixiesky" class="user-moderator-N"><span itemprop="name">Andy Myers</span></a>        </span>
        <br>

        <span class="karma">10.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="7471" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C7471" href="#C7471">
                <time itemprop="dateCreated" datetime="2014-04-24T11:39:24-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I've just had a look:  <code>{% raw %}{{{% endraw %} form.messages("name") {% raw %}}}{% endraw %}</code> is pulling from <code>$form = new SignUpForm();</code> looking at the link. If you take a look at the volt layout's controller &gt;&gt; <a href="https://github.com/phalcon/vokuro/blob/master/app/controllers/SessionController.php"><a href="https://github.com/phalcon/vokuro/blob/master/app/controllers/SessionController.php">https://github.com/phalcon/vokuro/blob/master/app/controllers/SessionController.php</a></a> &lt;&lt; You will see that the <code>signupAction()</code> creates a <code>$form</code> variable and inserts a <code>new SignUpForm()</code> object in to it.</p>
<pre><code class="language-php">&lt;?php
/**
     * Allow a user to signup to the system
     */
    public function signupAction()
    {
        $form = new SignUpForm();

        if ($this-&gt;request-&gt;isPost()) {

            if ($form-&gt;isValid($this-&gt;request-&gt;getPost()) != false) {

                $user = new Users();

                $user-&gt;assign(array(
                    'name' =&gt; $this-&gt;request-&gt;getPost('name', 'striptags'),
                    'email' =&gt; $this-&gt;request-&gt;getPost('email'),
                    'password' =&gt; $this-&gt;security-&gt;hash($this-&gt;request-&gt;getPost('password')),
                    'profilesId' =&gt; 2
                ));

                if ($user-&gt;save()) {
                    return $this-&gt;dispatcher-&gt;forward(array(
                        'controller' =&gt; 'index',
                        'action' =&gt; 'index'
                    ));
                }

                $this-&gt;flash-&gt;error($user-&gt;getMessages());
            }
        }

        $this-&gt;view-&gt;form = $form;
    }</code></pre>
<p>The form object is then being passed to the volt view via <code>$this-&gt;view-&gt;form = $form</code> which is why volt can access them via <code>{% raw %}{{{% endraw %} form.messages(THE_FIELD_NAME) {% raw %}}}{% endraw %}</code> so I can only imagine that because <code>SignUpForm extends Form</code> that the messages are being created within /Phalcon/Form via . I think, I don't know, I think these messages are being created what <code>$this-&gt;getMessagesFor($name)</code> is being called.</p>
<p>See <strong>getMessages</strong> in <a href="https://docs.phalcon.io/en/latest/api/Phalcon_Forms_Form.html"><a href="https://docs.phalcon.io/en/latest/api/Phalcon_Forms_Form.html">https://docs.phalcon.io/en/latest/api/Phalcon_Forms_Form.html</a></a></p>
<p>You could check by placing <code>print_r($form); exit;</code> before <code>$this-&gt;view-&gt;form = $form</code> and use your browser find for 'messages' or even <code>print_r($form-&gt;messages); exit;</code> as an experiment.</p>
<p>My guess would be that:</p>
<pre><code class="language-php">&lt;?php
public function messages($name)
    {
        if ($this-&gt;hasMessagesFor($name) &amp;&amp; $this-&gt;request-&gt;isPost()) {
            foreach ($this-&gt;getMessagesFor($name) as $message) {
                $this-&gt;flash-&gt;error($message);
            }
        }
    }</code></pre>
<p>...would be fine to use. If I'm right that is.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7471" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7471" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e87e77e80a7be9f33e718e7930c3e995?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/5807/starbuckit" class="user-moderator-N"><span itemprop="name">starbuckit</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C42849" href="#C42849">
                <time itemprop="dateCreated" datetime="2016-11-09T14:29:04-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<pre><code>            if(is_array($user-&gt;getMessages())){
              foreach( $user-&gt;getMessages() as $msg ){
                $this-&gt;flash-&gt;error($msg);
              }
            }else{
              $this-&gt;flash-&gt;error($user-&gt;getMessages());
            }</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="42849" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="42849" data-cf-modified-bde5a77f5f356f64888270c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2155" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>