---
layout: default
title: 'Micro $app-&gt;&#039;get&#039; function not working on production server. - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/22/micro">Micro</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Micro $app-&gt;&#039;get&#039; function not working on production server.</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/7973/hartlink" class="user-moderator-N"><span itemprop="name">Hart</span></a></span>
            <time itemprop="dateCreated" datetime="2016-08-30T07:42:35-07:00">Aug '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-08-30T07:42:35-07:00">Aug '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>540</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/42a7bc95dc183e56d1285bcb6d248adb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/7973/hartlink" class="user-moderator-N"><span itemprop="name">Hart</span></a></span>
                <span class="karma">4.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C13285" href="#C13285">
        <time class="action-date">Aug '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, I've a very odd issue, I was working with Phalcon Micro  to create a Rest API, on my development server (PHP 5.6, Phalcon 2.0.13, Apache, Ubuntu 16) works like a charm, but I moved the code to the production server (AWS Instance, PHP 5.6, Phalcon 3.0.1, Apache, Ubuntu 16) and seem that not working like the development server because the ‘GET’ function of the Micro is not working but the ‘POST’ does. Here is an example: </p>
<pre><code class="language-php">
use Phalcon\Mvc\Micro,
    Phalcon\Http\Response,
    Phalcon\Http\Request;   
    $app = new Micro();
    $app-&gt;get('/say/{id}', function($id){
    echo $id; 
    }
    $app -&gt; handle();
</code></pre>
<p>This is working on my development server but the production server it doesn’t. On the production server I get a 404 when I request x.x.x.x/users/say/1234567</p>
<pre><code class="language-php">
use Phalcon\Mvc\Micro,
    Phalcon\Http\Response,
    Phalcon\Http\Request;   
    $app = new Micro(); 
    $app-&gt;post('/', function(){
    $request = new Phalcon\Http\Request(); 
        // Get the user data from the request
        $user_data = $request-&gt;getJsonRawBody();
        print_r($user_data);
        }
    $app -&gt; handle();
</code></pre>
<p>And the odd part is that this code is working in both servers.
*Both codes are examples not actual code. </p>
<p>So, something changed between versions so I need to change my code, or is something I miss on the setup. Thank you very much for your time.</p>
<p>Regards!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-1620924a0b5de01314e9a372-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-1620924a0b5de01314e9a372-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C39443" href="#C39443">
                <time itemprop="dateCreated" datetime="2016-08-30T08:25:23-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code>x.x.x.x/users/say/1234567</code></pre>
<p>But i see <code>/say/{id}</code></p>
<p>I guess this is about some apache2 config and that's it. Not using it so can't help.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39443" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39443" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/42a7bc95dc183e56d1285bcb6d248adb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7973/hartlink" class="user-moderator-N"><span itemprop="name">Hart</span></a>        </span>
        <br>

        <span class="karma">4.1k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C39443"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C39447" href="#C39447">
                <time itemprop="dateCreated" datetime="2016-08-30T08:52:09-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi, thank you for the response, yep is /users/ because is the folder where is located the main file with the code.</p>
<blockquote>
<pre><code>x.x.x.x/users/say/1234567</code></pre>
<p>But i see <code>/say/{id}</code></p>
<p>I guess this is about some apache2 config and that's it. Not using it so can't help.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39447" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39447" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="39449" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C39449" href="#C39449">
                <time itemprop="dateCreated" datetime="2016-08-30T09:09:38-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>And you sure you have proper rewrite rule ? For instance try to:</p>
<pre><code class="language-php">$di-&gt;set('url', function () {
    $url = new Url();
    $url-&gt;setBaseUri('/users/');
    return $url;
});
$app-&gt;setDI($di);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39449" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39449" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/42a7bc95dc183e56d1285bcb6d248adb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7973/hartlink" class="user-moderator-N"><span itemprop="name">Hart</span></a>        </span>
        <br>

        <span class="karma">4.1k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C39449"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C39453" href="#C39453">
                <time itemprop="dateCreated" datetime="2016-08-30T09:22:38-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'll try this, and yeah, I created a rewrite rule on the .htaccess on my users folder like this and on my index.php are my code.</p>
<pre><code class="language-php">
&lt;IfModule mod_rewrite.c&gt;
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^((?s).*)$ index.php?_url=/$1 [QSA,L]
&lt;/IfModule&gt;
</code></pre>
<blockquote>
<p>And you sure you have proper rewrite rule ? For instance try to:</p>
<pre><code class="language-php">$di-&gt;set('url', function () {
   $url = new Url();
   $url-&gt;setBaseUri('/users/');
   return $url;
});
$app-&gt;setDI($di);</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39453" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39453" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="39459" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C39459" href="#C39459">
                <time itemprop="dateCreated" datetime="2016-08-30T09:49:16-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code>RewriteBase /users</code></pre>
<p>or</p>
<pre><code>RewriteCond %{REQUEST_FILENAME} !-d</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39459" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39459" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/42a7bc95dc183e56d1285bcb6d248adb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7973/hartlink" class="user-moderator-N"><span itemprop="name">Hart</span></a>        </span>
        <br>

        <span class="karma">4.1k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C39595" href="#C39595">
                <time itemprop="dateCreated" datetime="2016-09-01T15:35:06-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/3812/Jurigag">@Jurigag</a> Thank you for your help, you help me to point to the right direction, after I active the apache “a2enmod rewrite” I don’t edit the 000-default.conf adding this lines: </p>
<pre><code class="language-php">
&lt;Directory "/var/www/"&gt;
    AllowOverride All
&lt;/Directory&gt;
</code></pre>
<p>After adding the lines and restart the apache2 service, Everything worked just like the development sever.</p>
<p>Thank you to all, regards!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39595" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39595" data-cf-modified-1620924a0b5de01314e9a372-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="13285" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>