---
layout: default
title: 'Dynamic/Generic Model when adding db table - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Dynamic/Generic Model when adding db table</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/8205/lacsyst" class="user-moderator-N"><span itemprop="name">lacsyst</span></a></span>
            <time itemprop="dateCreated" datetime="2016-09-20T12:42:49-07:00">Sep '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-09-20T12:42:49-07:00">Sep '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>682</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a5acb530bcb763deca419bb20b7b138c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/8205/lacsyst" class="user-moderator-N"><span itemprop="name">lacsyst</span></a></span>
                <span class="karma">3.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C13755" href="#C13755">
        <time class="action-date">Sep '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi</p>
<p>I need to build a system that enable user to add tables and columns to database and I want to manipulate these table/attributes with Phalcon model.</p>
<p>I don't want to add new model file each time the user add a table I prefer a solution with one generic model for the added tables (the default tables have their predefined models).</p>
<p>How I can perform this feature (I want to use the last Phalcon version &gt;=3)?</p>
<p>Thx in advance</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-1f64996d530c6cb774a4a28e-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-1f64996d530c6cb774a4a28e-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="40591" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '16</span>
              </span><br/><a name="C40591" href="#C40591">
                <time itemprop="dateCreated" datetime="2016-09-21T00:32:03-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>probably PHQL is the right choice.</p>
<p>Never the less... I guess you can create a class that creates classes ( classception ) :D and it should work. In order to change the source of the model i think i was using onConstruct which was caucing issues on its own.  </p>
<p>But I guess when person creates a table you could generate the model and save it in user's name namespace and directory so the autoloader would work and you wont be having isssues ( ithink )</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40591" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40591" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a5acb530bcb763deca419bb20b7b138c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8205/lacsyst" class="user-moderator-N"><span itemprop="name">lacsyst</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40599" href="#C40599">
                <time itemprop="dateCreated" datetime="2016-09-21T01:39:58-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi Izo thanks for your response.</p>
<p>I don't want to generate model file each time table is created, I want a solution with 2 generic models :</p>
<ul>
<li>CustomTable : model of the added table </li>
<li>CustomCollumn  : model of each collumn</li>
</ul>
<p>When I need to use a table model (in forms for exemple) I want to instanciate the CustomTable model that set the source to the right value and perform a function getCollumns that give me all table collumns. The attributes of the CustomTable model will be only the table name and the display name and attributes of CustomCollumn will be name, displayName, type, fieldOptions.</p>
<p>I don't know if the collumnMap match to what I want to do. If it do the model will be look like this:</p>
<pre><code>&lt;?php

class CustomTable extends Phalcon\Mvc\Model
{
public $tableName;
public $displayName;

public function initialize()
{
    $this-&gt;setSource($this-&gt;$tableName);
}

public function columnMap()
{
   return CustomCollumn::getCollumns(); //function that build an array of collumns
}

}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40599" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40599" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40605" href="#C40605">
                <time itemprop="dateCreated" datetime="2016-09-21T04:13:11-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i dont think making this work will worth the while.
I suggest you using standart queries. Maybe create a helper class that does the it like phalcon orm ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40605" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40605" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="40633" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '16</span>
              </span><br/><a name="C40633" href="#C40633">
                <time itemprop="dateCreated" datetime="2016-09-21T13:31:59-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>maybe <a href="https://docs.phalcon.io/en/latest/api/Phalcon_Db_Reference.html">https://docs.phalcon.io/en/latest/api/Phalcon_Db_Reference.html</a> can help you</p>
<p>and <a href="https://docs.phalcon.io/en/latest/api/Phalcon_Db_Adapter.html">https://docs.phalcon.io/en/latest/api/Phalcon_Db_Adapter.html</a> for creating table and columns</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40633" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40633" data-cf-modified-1f64996d530c6cb774a4a28e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="13755" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>