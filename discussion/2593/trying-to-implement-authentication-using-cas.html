---
layout: default
title: 'Trying to implement authentication using CAS - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/27/external-tools">External Tools</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Trying to implement authentication using CAS</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1720/blm14" class="user-moderator-N"><span itemprop="name">blm14</span></a></span>
            <time itemprop="dateCreated" datetime="2014-06-17T10:13:27-07:00">Jun '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-06-17T10:13:27-07:00">Jun '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>1138</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/82140260df942005abbc598cbba6c688?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1720/blm14" class="user-moderator-N"><span itemprop="name">blm14</span></a></span>
                <span class="karma">40.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2593" href="#C2593">
        <time class="action-date">Jun '14</time>
    </a>
</div>
<div class="post-content"><div><p>I'm trying to implement a scheme of split authentication vs authorization. I want my Phalcon app to handle authorization but hand off authentication to <a href="https://github.com/Jasig/phpCAS">https://github.com/Jasig/phpCAS</a></p>
<p>I've never done anything with authentication in Phalcon before and just want to get an idea of where to start. I am using the directory structure generated by phalcon-devtools. I assume I have to create an app/plugins/Security.php and then load it into app/config/services.php ? How do I redirect anyone without a valid session to the login controller? Thanks!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-a0fd021951ef165be509e8a7-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-a0fd021951ef165be509e8a7-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8755" href="#C8755">
                <time itemprop="dateCreated" datetime="2014-06-17T13:20:12-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Redirecting someone to the login controller if they don't have a session is the responsibility for <em>authorization</em>, not <em>authentication</em>.  If you've done authorization before, you should have a handle on how to redirect someone.</p>
<p>As far as authentication goes, Phalcon doesn't really have anything built-in for authentication because it can be so varied.  It's hard to tell you the best way to handle phpCAS without me digging into it, but likely what I'd do is build a Phalcon component wrapper around the library.  You could then either include it as a service in your DI or - if you've already set up auto-loading for your components, just create a new instance of the component when needed in your login controller.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8755" data-cf-modified-a0fd021951ef165be509e8a7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8755" data-cf-modified-a0fd021951ef165be509e8a7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82140260df942005abbc598cbba6c688?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1720/blm14" class="user-moderator-N"><span itemprop="name">blm14</span></a>        </span>
        <br>

        <span class="karma">40.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8756" href="#C8756">
                <time itemprop="dateCreated" datetime="2014-06-17T13:29:01-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I am a phalcon noob, I have not implemented either one yet. I have extensive experience using phpCAS in vanilla PHP applications, so that's not an issue. My question was just generally how to implement an auth scheme involving an external authentication. Basically what I want to do is this:</p>
<p>Keep track of the list of users (based on CAS single sign-on ID) who are allowed to access my application, but hand off password authentication to CAS, so if the user doesn't authenticate they never end up back in Phalcon but if they do, I have a user ID from CAS and know they successfully logged in.</p>
<p>I guess the easiest way to ask my question is &quot;how do I create a basic authentication system in Phalcon&quot; since the CAS part shouldn't be too hard. I looked at the vokuro one and it a) deviates from the phalcon-devtools structure too much for me to really reuse it and b) uses ACL's which I don't really need and seem way too complex.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8756" data-cf-modified-a0fd021951ef165be509e8a7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8756" data-cf-modified-a0fd021951ef165be509e8a7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2593" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>