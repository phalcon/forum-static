---
layout: default
title: 'Changing Model source table dynamically - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Changing Model source table dynamically</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/690/glydetech" class="user-moderator-N"><span itemprop="name">Andrew Clarke</span></a></span>
            <time itemprop="dateCreated" datetime="2014-03-14T09:18:06-07:00">Mar '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-03-14T09:18:06-07:00">Mar '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">16</span>
                </td>
                <td>
                    <label>Views</label><br>3533</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c5015ff5abf61005cefc66fe169eb24b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/690/glydetech" class="user-moderator-N"><span itemprop="name">Andrew Clarke</span></a></span>
                <span class="karma">3.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1788" href="#C1788">
        <time class="action-date">Mar '14</time>
    </a>
</div>
<div class="post-content"><div><p>I want to dynamically change the underlying source table used for a model. Can't seem to get this to work.</p>
<p>As an example, I've two tables in my database:</p>
<ul>
<li>'source1' has 1 record</li>
<li>'source2' has 2 records</li>
</ul>
<p>This following code does report a changed source, but the count of records doesn't change:</p>
<pre><code class="language-php">    $test = new TestModel();

    echo 'Source: '.$test-&gt;getSource().'&lt;br/&gt;';
    echo 'Count: '.count($test-&gt;find()).'&lt;br/&gt;';
    echo '&lt;br/&gt;';

    $mgr = $test-&gt;getModelsManager();
    $mgr-&gt;setModelSource($test, 'source2');

    echo 'Source: '.$test-&gt;getSource().'&lt;br/&gt;';
    echo 'Count: '.count($test-&gt;find()).'&lt;br/&gt;';
    echo '&lt;br/&gt;';</code></pre>
<p>It outputs this:</p>
<pre><code>Source: source1
Count: 1

Source: source2
Count: 1</code></pre>
<p>Checking through the cphalcon source code, I can see that the Models Manager is called to initialize the Model. It also keeps a track of the initialized modules. The Model constructor is declared as <em>final</em> meaning I can't overload it. I've run out of ideas, short of dynamically having my code modify it's own files, which would be really bad practice.</p>
<p>Have I missed something? Any help much appreciated.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-bc72811759d0c65e99d952cb-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-bc72811759d0c65e99d952cb-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6217" href="#C6217">
                <time itemprop="dateCreated" datetime="2014-03-14T15:15:13-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can use onConstruct(), it's an event fired after the object is constructed:</p>
<pre><code class="language-php">class TestModel extends \Phalcon\Mvc\Model
{
    public function onConstruct()
    {
        //...
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6217" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6217" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c5015ff5abf61005cefc66fe169eb24b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/690/glydetech" class="user-moderator-N"><span itemprop="name">Andrew Clarke</span></a>        </span>
        <br>

        <span class="karma">3.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6311" href="#C6311">
                <time itemprop="dateCreated" datetime="2014-03-18T03:52:05-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>I'm not sure if you've understood my question. I spotted the call to onConstruct in the source code, but I'm seeking to change the model source <em>after</em> the object has been created as I show in my code above. I'm trying to avoid creating about 30 models which are exactly the same but with different table names. I'd like to use just one model.</p>
<p>My code above appears to work and as you can see, the model correctly reports the source via getSource() after it's changed. The problem is that the result of a data query doesn't reset after I change the source in this way.</p>
<p>Here's another test I've done that maybe shows more clearly the issue (same tables as above):</p>
<pre><code class="language-php">    $test = new TestModel();

    echo 'Source: '.$test-&gt;getSource().'&lt;br/&gt;';
    echo 'Count: '.count($test-&gt;find()).'&lt;br/&gt;';
    echo '&lt;br/&gt;';

    $mgr = $test-&gt;getModelsManager();
    $mgr-&gt;setModelSource($test, 'source2');

    echo 'Source: '.$test-&gt;getSource().'&lt;br/&gt;';
    echo 'Count: '.count($test-&gt;find()).'&lt;br/&gt;';
    echo 'Recount: '.$test-&gt;count().'&lt;br/&gt;';
    echo '&lt;br/&gt;';</code></pre>
<p>It outputs this:</p>
<pre><code>Source: source1
Count: 1

Source: source2
Count: 1
Recount: 2</code></pre>
<p>This is not good. The same Model returns different data for the count and the recount queries. I suspect it may be inbuilt caching somewhere in the Query / Criteria / Resultset. It's at least inconsistent and maybe a bug?</p>
<p>Any further ideas / advice ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6311" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6311" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/516521ded1c9e6ca6fda12daa0fe19c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1334/zhscoder" class="user-moderator-N"><span itemprop="name">zhscoder</span></a>        </span>
        <br>

        <span class="karma">76</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6521" href="#C6521">
                <time itemprop="dateCreated" datetime="2014-03-24T21:13:40-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>We have the same problem, please help us to resolve this problem, it feels like phalcon caches sql query ResultSet even if the src table was changed, it is a bug!!! We really love phalcon, but because of this problem we can not do anything with it... We use it in our background tasks(cron) and there we have to change tables using prefixes and run needed tasks for each table... Please help us as soon as possible</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6521" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6521" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c5015ff5abf61005cefc66fe169eb24b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/690/glydetech" class="user-moderator-N"><span itemprop="name">Andrew Clarke</span></a>        </span>
        <br>

        <span class="karma">3.9k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6536" href="#C6536">
                <time itemprop="dateCreated" datetime="2014-03-25T06:23:03-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Okay, I found a workaround, same tables as above, note the 'destruct' call:</p>
<pre><code class="language-php">    $test = new TestModel();

    echo 'Source: '.$test-&gt;getSource().'&lt;br/&gt;';
    echo 'Count: '.count($test-&gt;find()).'&lt;br/&gt;';
    echo '&lt;br/&gt;';

    $mgr = $test-&gt;getModelsManager();
    $mgr-&gt;__destruct();
    $mgr-&gt;setModelSource($test, 'source2');

    echo 'Source: '.$test-&gt;getSource().'&lt;br/&gt;';
    echo 'Count: '.count($test-&gt;find()).'&lt;br/&gt;';
    echo '&lt;br/&gt;';</code></pre>
<p>It outputs this:</p>
<pre><code>Source: source1
Count: 1

Source: source2
Count: 2</code></pre>
<p>Success!!</p>
<p>According to the API docs here <a href="http://docs.phalcon.io/en/latest/api/Phalcon_Mvc_Model_Manager.html">http://docs.phalcon.io/en/latest/api/Phalcon_Mvc_Model_Manager.html</a> the destruct method 'Destroys the PHQL cache'. This should really be done automatically on source change. It appears to be this 'PHQL Planning' that is causing the issue: <a href="http://docs.phalcon.io/en/latest/reference/models-cache.html#caching-of-phql-planning">http://docs.phalcon.io/en/latest/reference/models-cache.html#caching-of-phql-planning</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6536" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6536" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c5015ff5abf61005cefc66fe169eb24b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/690/glydetech" class="user-moderator-N"><span itemprop="name">Andrew Clarke</span></a>        </span>
        <br>

        <span class="karma">3.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6537" href="#C6537">
                <time itemprop="dateCreated" datetime="2014-03-25T06:48:11-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Here is a behavior to handle this in case it helps anyone:</p>
<pre><code>use Phalcon\Mvc\Model\Behavior;
use Phalcon\Mvc\Model\BehaviorInterface;

class ResetSource extends Behavior implements BehaviorInterface
{

    public function missingMethod($model, $method, $arguments=array())
    {

        switch ($method) {

            case 'resetSource':

                $mgr = $model-&gt;getModelsManager();
                $mgr-&gt;__destruct();
                $mgr-&gt;setModelSource($model, $arguments[0]);
                return TRUE;
                break;

        }       

    }    

}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6537" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6537" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eec4e6b4b6bc0b7f792cb2d7b6ee1757?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2549/fefas" class="user-moderator-N"><span itemprop="name">Felipe Martins</span></a>        </span>
        <br>

        <span class="karma">1.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="13307" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '14</span>
              </span><br/><a name="C13307" href="#C13307">
                <time itemprop="dateCreated" datetime="2014-11-17T19:24:40-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hello,</p>
<p>I had the same problem (want to use only one model for many tables in different schemas) and I used an equivalent solution to sove it, but I created the follow static method in my BaseModel class:</p>
<pre><code class="language-bash">class BaseModel extends \Phalcon\Mvc\Model
{
   static public function resetPHQLCache()
   {
      $o = \Phalcon\Di::getDefault()-&gt;getModelsManager();
      $o-&gt;__destruct();
   }
}</code></pre>
<p>In this way, I can reset PHQL cache without instance an object.</p>
<p><a href="https://forum.phalcon.io/user/1/phalcon">@phalcon</a>: please, I'd like to reopen this discussion, because I think it is not the better way to do this. I mean, it is not a good idea delete all cache (cache of all models) just to change the schema and source of only one model. I have more than 100 models in my application and, in the solution above, I would reset the cache several times. It seems slow (or am I wrong?).</p>
<p>Is there some better way to change the source and/or the schema of a single model?</p>
<p>Thank you very much.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13307" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13307" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">3</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/86dbb4c9f5096f55c7ab2536c8fa8d93?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2380/stoiev" class="user-moderator-N"><span itemprop="name">Ivan</span></a>        </span>
        <br>

        <span class="karma">181</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C22515" href="#C22515">
                <time itemprop="dateCreated" datetime="2015-08-28T19:21:30-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/1/phalcon">@phalcon</a>: on Phacon 2.0, ModelsManager does not provides a __destruct() method anymore. It's possible to reopen this discussion? How can PHQL cache be reseted from now on?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22515" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22515" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C22527" href="#C22527">
                <time itemprop="dateCreated" datetime="2015-08-29T01:59:21-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Ivan">@Ivan</a>, github phalcon repo is a better place for feature request.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22527" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22527" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/aba61b32aff1793760cb540fc01395f3?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2783/gavinb2c" class="user-moderator-N"><span itemprop="name">gavinb2c</span></a>        </span>
        <br>

        <span class="karma">3.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26465" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26465" href="#C26465">
                <time itemprop="dateCreated" datetime="2015-11-16T03:40:11-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So at the risk of bumping.   I find my self in the situation that we need to upgrade to Phalcon 2.  We have a data isolation system in our Phalcon 1 app, that requires to change the model source dynamically.   This was acheived by calling __destruct() on the models manager before reseting the table.</p>
<p>I now cannot upgrade to Phalcon 2.  </p>
<p>Did anyone find a soluton that did not involve modifying
and rebuilding Phalcon?</p>
<p>Many thanks</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26465" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26465" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/df5a8f0f5948c03f48cb3c37b1fd373f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5581/booldog" class="user-moderator-N"><span itemprop="name">booldog</span></a>        </span>
        <br>

        <span class="karma">1.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C27139" href="#C27139">
                <time itemprop="dateCreated" datetime="2015-11-30T05:28:20-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i have same problem with __destruct(). somebody found solution?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="27139" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="27139" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/86dbb4c9f5096f55c7ab2536c8fa8d93?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2380/stoiev" class="user-moderator-N"><span itemprop="name">Ivan</span></a>        </span>
        <br>

        <span class="karma">181</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C27161" href="#C27161">
                <time itemprop="dateCreated" datetime="2015-11-30T08:09:14-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/booldog">@booldog</a>,<a href="https://forum.phalcon.io/user/0/gavinb2c"> @gavinb2c</a>, there are updates on github about this issue
<a href="https://github.com/phalcon/cphalcon/issues/2235">https://github.com/phalcon/cphalcon/issues/2235</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="27161" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="27161" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">3</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/df5a8f0f5948c03f48cb3c37b1fd373f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5581/booldog" class="user-moderator-N"><span itemprop="name">booldog</span></a>        </span>
        <br>

        <span class="karma">1.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C27167" href="#C27167">
                <time itemprop="dateCreated" datetime="2015-11-30T09:49:21-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>thanks<a href="https://forum.phalcon.io/user/0/ivan"> @ivan</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="27167" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="27167" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30577" href="#C30577">
                <time itemprop="dateCreated" datetime="2016-03-04T19:05:46-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Is there a way to make this work with Collection? There is a collection manager but it does not support changing of source, not even collection itself. If there is, I might have missed it, let me know. If not, what's the workaround for this? Thanks.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30577" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30577" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30583" href="#C30583">
                <time itemprop="dateCreated" datetime="2016-03-05T00:21:40-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi icewing02,</p>
<p>yes, have a look here:</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/odm.html#setting-a-connection">https://docs.phalcon.io/en/latest/reference/odm.html#setting-a-connection</a></p>
<p>And in case your collections are dispatched in different databases</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/odm.html#setting-multiple-databases">https://docs.phalcon.io/en/latest/reference/odm.html#setting-multiple-databases</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30583" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30583" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="30613" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '16</span>
              </span><br/><a name="C30613" href="#C30613">
                <time itemprop="dateCreated" datetime="2016-03-05T14:13:27-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for the response Ie51.</p>
<p>Yes, I have checked that one but it is about setting up a connection. What I was looking for is how to change the source of an already initialised collection-extended (more like a model but for MongoDB) class dynamically. I have already found a workaround although it does not use such classes anymore. Instead, I used MongoDB::execute() to run MongoDB commands. It is a bit hardcore but it provided the solution I was looking for.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30613" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30613" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30623" href="#C30623">
                <time itemprop="dateCreated" datetime="2016-03-06T03:21:01-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code class="language-php">
&lt;?php

use Phalcon\Mvc\Collection;

class Robots extends Collection
{
    public function getSource()
    {
        return "the_robots";
    }
}
</code></pre>
<p>this is how to set the source table.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30623" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30623" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="30651" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '16</span>
              </span><br/><a name="C30651" href="#C30651">
                <time itemprop="dateCreated" datetime="2016-03-07T04:50:17-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for the reply. This enables you to set a collection manually, although this approach cannot be used dynamically. You have to specify a known collection beforehand to set it. If the collection is something to be identified dynamically (e.g., a collection created dynamically), this won't work.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30651" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30651" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30891" href="#C30891">
                <time itemprop="dateCreated" datetime="2016-03-12T01:53:07-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>ok, maybe you can  use setSource($myDynamicCollection) in initialze() method</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30891" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30891" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30895" href="#C30895">
                <time itemprop="dateCreated" datetime="2016-03-12T04:13:24-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No, that won't work either.
I have already found an alternative though, as I have mentioned in my earlier response. Hope that would help others as well who happens to read this thread. Thanks.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30895" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30895" data-cf-modified-bc72811759d0c65e99d952cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1788" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>