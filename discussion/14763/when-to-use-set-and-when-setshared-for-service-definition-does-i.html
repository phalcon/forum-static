---
layout: default
title: 'When to use set() and when setShared() for service definition? Does it really matter? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/10/di-ioc">DI/IoC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">When to use set() and when setShared() for service definition? Does it really matter?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a></span>
            <time itemprop="dateCreated" datetime="2016-11-09T01:13:42-07:00">Nov '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-11-09T01:13:42-07:00">Nov '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>750</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">3</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a></span>
                <span class="karma">93.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C14763" href="#C14763">
        <time class="action-date">Nov '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hey guys,</p>
<p>Was wondering today which services should be set as shared and which not. I think other users will find this topic useful too. <strong>Does it really matter for performance or anything else?</strong></p>
<p>According to <a href="https://docs.phalcon.io/en/latest/reference/di.html#shared-services">DI docs</a></p>
<blockquote>
<p>Services can be registered as “shared” services this means that they always will act as singletons. Once the service is resolved for the first time the same instance of it is returned every time a consumer retrieve the service from the container</p>
</blockquote>
<p>Looking at <a href="https://github.com/phalcon/vokuro/blob/master/app/config/services.php">Vokuro Service file</a> some are set as shared and some not. Can someone give examples of common services and what will be the better way to set them? For example DB, sesssion, url, router, view and so on.</p>
<p>Thanks!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-2dce8d7a383ad84ffef628a9-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-2dce8d7a383ad84ffef628a9-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">3</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="42815" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '16</span>
              </span><br/><a name="C42815" href="#C42815">
                <time itemprop="dateCreated" datetime="2016-11-09T01:57:16-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>IMHO, shared services are better for some types of components while for others it's better to stick with non-shared.
For DB service/component, if you use transactions, you'll need to use non-shared service. For regular web apps w/o transactions, shared DB service is better performing as it will keep alive socket connection during entire application lifecycle.</p>
<p>I always tend to use shared services, unless there's a very specific requirement where your business logic requires new object instance each time.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="42815" data-cf-modified-2dce8d7a383ad84ffef628a9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="42815" data-cf-modified-2dce8d7a383ad84ffef628a9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="14763" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>