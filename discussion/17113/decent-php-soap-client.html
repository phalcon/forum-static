---
layout: default
title: 'Decent PHP SOAP client? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/27/external-tools">External Tools</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Decent PHP SOAP client?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a></span>
            <time itemprop="dateCreated" datetime="2017-10-16T02:30:32-07:00">Oct '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-10-16T02:30:32-07:00">Oct '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Oct '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>4397</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a></span>
                <span class="karma">93.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C17113" href="#C17113">
        <time class="action-date">Oct '17</time>
    </a>
</div>
<div class="post-content"><div><p>Hey guys,
has anyone used decent PHP SOAP Client recently and can recommend it?</p>
<p>Thanks!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-9fb01533f053b27114c405cb-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-9fb01533f053b27114c405cb-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="51591" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '17</span>
              </span><br/><a name="C51591" href="#C51591">
                <time itemprop="dateCreated" datetime="2017-10-16T23:57:57-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I remember horrors working with damn SOAP services. And it's not about PHP support for SOAP.
Thankfully world ran away from that shitware towards REST.</p>
<p>If you really have to do it, I suggest to rely on SoapClient class found in raw PHP.
Back in the day, nuSOAP was also good alternative / option. Nowdays it's deprecated, but I see someone ported it to 7.1 even: <a href="https://github.com/econea/nusoap">https://github.com/econea/nusoap</a></p>
<p>Give it a try and good luck, I mean it! :D</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51591" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51591" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51627" href="#C51627">
                <time itemprop="dateCreated" datetime="2017-10-18T03:39:50-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah... had few interactions wiath SOAP in the past years and it was not fun at all. </p>
<p>I'll check it out after I get the WSDL file :) Either will use nusoap or write a wrapper class over PHP's built in client.</p>
<p>Thanks :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51627" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51627" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="51629" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '17</span>
              </span><br/><a name="C51629" href="#C51629">
                <time itemprop="dateCreated" datetime="2017-10-18T05:36:44-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>XML should've died out years ago, it offers no structure that you cannot replicate in json.... and the latter needs third the bandwidth.</p>
<p>Only services written using microsoft products still use soap, and unfortunately there are quite a few :D</p>
<p>PS: if you want to generate classes of the WSDL schema: <a href="https://github.com/wsdl2phpgenerator/wsdl2phpgenerator">https://github.com/wsdl2phpgenerator/wsdl2phpgenerator</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51629" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51629" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51633" href="#C51633">
                <time itemprop="dateCreated" datetime="2017-10-18T08:44:08-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><strong>Should have</strong>, but sadly it did not.. yet.. :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51633" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51633" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="51729" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '17</span>
              </span><br/><a name="C51729" href="#C51729">
                <time itemprop="dateCreated" datetime="2017-10-23T23:04:29-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>SOAP, Simple Object Access Protocol, is not simple, objective, easy to access, and the protocol leaves a lot left undefined. I usually ignore generic SOAP and use the protocol definition provided by the data source. 10 pages instead of 220 pages. Do they have other PHP based users? What does the data source recommend?</p>
<p>I do not find any problems with XML. When the original data is in XML, it is usually safer to leave the data in the same XML instead of converting it to another format.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51729" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51729" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="51731" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '17</span>
              </span><br/><a name="C51731" href="#C51731">
                <time itemprop="dateCreated" datetime="2017-10-23T23:29:21-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/petermoo">@petermoo</a> I remember when I had a chance to work with OSB (Oracle services bus) with XML-DSIG on top of it... oh boy what a pain that was. Thing is very simple but they made it way too complex. Same as with SOAP. SOAP and XML-DSIG are thankfully history and even eGov services today do not rely on those anymore like they used to.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51731" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51731" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51741" href="#C51741">
                <time itemprop="dateCreated" datetime="2017-10-24T01:16:20-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/stamster">@stamster</a> speak for yourself, the hungarian tax agency still uses java + xml (+ dsig) xD</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51741" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51741" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="54791" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '18</span>
              </span><br/><a name="C54791" href="#C54791">
                <time itemprop="dateCreated" datetime="2018-04-12T08:18:21-07:00" class="action-date">Apr '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey again :) Just wanted to update this with what I actually did... After browsing for some library and seing that this company Soap service is quite specific, I just gave up searching and made a simple class with the built in PHP client.</p>
<pre><code class="language-php">class CostaSoapClient
{
    private $_client;
    private $_config = [
        'wsdl' =&gt; '...',
        'agencyCode' =&gt; '...',
        'culture' =&gt; '...',
        'namespace' =&gt; '...',
        'auth' =&gt; [
            'username' =&gt; '...',
            'password' =&gt; '...'
        ],
    ];

    // Construct
    public function __construct()
    {
        $headers = [
            new \SoapHeader($this-&gt;_config['namespace'], 'Partner', ['Name' =&gt; $this-&gt;_config['auth']['username'], 'Password' =&gt; $this-&gt;_config['auth']['password']]),
            new \SoapHeader($this-&gt;_config['namespace'], 'Agency', ['Code' =&gt; $this-&gt;_config['agencyCode'], 'Culture' =&gt; $this-&gt;_config['culture']])
        ];
        $this-&gt;_client = new \SoapClient($this-&gt;_config['wsdl']);
        $this-&gt;_client-&gt;__setSoapHeaders($headers);
    }

    /**
     *  @brief Request for archive links
     *
     *  @param string $specificService Specific service to be requested or `all` by default.
     *  @return array
     *
     *  @details Costa services are async and designed to return link for the future .zip file.
     *           This means we have to save the address and check again later if the job is finished.
     */
    public function requestArchives($specificService = 'all')
    {
        $services = [
            'ExportAvailability' =&gt; ['serviceName' =&gt; 'ExportAvailability', 'apiParams' =&gt; []],
            'ExportPorts' =&gt; ['serviceName' =&gt; 'ExportPorts', 'apiParams' =&gt; []],
            'ExportPrice' =&gt; ['serviceName' =&gt; 'ExportPrice', 'apiParams' =&gt; []],
            'ExportCatalog' =&gt; ['serviceName' =&gt; 'ExportCatalog', 'apiParams' =&gt; []],
            'ExportExcursions' =&gt; ['serviceName' =&gt; 'ExportExcursions', 'apiParams' =&gt; []],
            'ExportItineraryAndSteps' =&gt; ['serviceName' =&gt; 'ExportItineraryAndSteps', 'apiParams' =&gt; []],
            'ExportPriceWithPaxBreakdown__Individual__TwoPax' =&gt; [
                'serviceName' =&gt; 'ExportPriceWithPaxBreakdown',
                'apiParams' =&gt; [
                    'expPriceType' =&gt; 'Individual',
                    'maxOccupancy' =&gt; 'TwoPax',
                ]
            ],
            'ExportPriceWithPaxBreakdown__Costa__TwoPax' =&gt; [
                'serviceName' =&gt; 'ExportPriceWithPaxBreakdown',
                'apiParams' =&gt; [
                    'expPriceType' =&gt; 'Costa',
                    'maxOccupancy' =&gt; 'TwoPax',
                ]
            ],
            'ExportPriceWithPaxBreakdown__Basic__TwoPax' =&gt; [
                'serviceName' =&gt; 'ExportPriceWithPaxBreakdown',
                'apiParams' =&gt; [
                    'expPriceType' =&gt; 'Basic',
                    'maxOccupancy' =&gt; 'TwoPax',
                ]
            ],
        ];

        // After 26.03 every year we do not need Individual price types.
        $summerOffersStartDate = date('Y') . '0326';
        if (date('Ymd') &gt; $summerOffersStartDate) {
            unset($services['ExportPriceWithPaxBreakdown__Individual__TwoPax']);
        }

        // Only a Specific service?
        if ($specificService != 'all') {
            $services = [
                $specificService =&gt; $services[$specificService]
            ];
        }

        // Gather all links
        $archiveLinks = [];
        foreach ($services as $key =&gt; $data) {
            $service = $data['serviceName'];
            $resultKey = $service . 'Result';
            $apiParams = $data['apiParams'];
            $response = $this-&gt;_client-&gt;__call($service, [$apiParams]);
            if ($response-&gt;{$resultKey}) {
                $archiveLinks[$key] = $response-&gt;{$resultKey};
            }
        }
        return $archiveLinks;
    }
}</code></pre>
<p><strong>Usage:</strong></p>
<pre><code class="language-php">$filesCollection = (new \Helpers\CostaSoapClient)-&gt;requestArchives();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54791" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54791" data-cf-modified-9fb01533f053b27114c405cb-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="17113" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>