---
layout: default
title: 'Modelo con primary key compuesta en postgresql - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Modelo con primary key compuesta en postgresql</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2868/donkoke" class="user-moderator-N"><span itemprop="name">Jorge Ponce Toloza</span></a></span>
            <time itemprop="dateCreated" datetime="2015-05-03T22:10:05-07:00">May '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-05-03T22:10:05-07:00">May '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>1314</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/5e46de5c9c474f91e27763956e640c72?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2868/donkoke" class="user-moderator-N"><span itemprop="name">Jorge Ponce Toloza</span></a></span>
                <span class="karma">2.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6611" href="#C6611">
        <time class="action-date">May '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hola a todos!!
Estoy tratando de ocupar update/save en un modelo que tiene una primary key compuesta, lei que no se puede, esto es así? Cualquier ayuda la agradezco!!</p>
<p>Salu2.
Jpt.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-98dd3bf7a6389816e6da344d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-98dd3bf7a6389816e6da344d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/83c11918052630e4dda79206c336924d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/569/kaioken" class="user-moderator-N"><span itemprop="name">Max Castro</span></a>        </span>
        <br>

        <span class="karma">16.4k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C17871" href="#C17871">
                <time itemprop="dateCreated" datetime="2015-05-03T23:39:56-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>LeistE la documentación de model metadata? Debes Especificar las ids allí</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17871" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17871" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5e46de5c9c474f91e27763956e640c72?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2868/donkoke" class="user-moderator-N"><span itemprop="name">Jorge Ponce Toloza</span></a>        </span>
        <br>

        <span class="karma">2.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="17900" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C17900" href="#C17900">
                <time itemprop="dateCreated" datetime="2015-05-04T07:19:34-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hola, si lo lei, pero no me funciona.
Puede ser problema del tipo de tabla? tengo lo siguiente:</p>
<pre><code class="language-php">CREATE TABLE X
(
  id_data integer NOT NULL,
  data text NOT NULL,
  CONSTRAINT X_pk PRIMARY KEY (id_data,data)
)</code></pre>
<pre><code class="language-php">class X  extends ModelBase
{
    public $id_data;
    public $data;
}</code></pre>
<pre><code class="language-php">class XController extends ControllerBase
{
    public function saveAction()
    {
       ....
       $x = X::Findfirst(array("id_data:iddata: AND data:data:",'bind'=&gt;array('iddata'=&gt;1,'data'=&gt;'test')));
       $x-&gt;id_data = 2;
       if ($x-&gt;update()==false){
          echo "ERROR";
       }else{
           echo "OK";
       }
       /*
       Salida:
       OK, pero no graba en la base de datos

       */
    }
}</code></pre>
<p>Muchas gracias por la ayuda!!
Jpt.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17900" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17900" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693a279f4545cdb52e27c51a66b2af29?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1624/hardlick" class="user-moderator-N"><span itemprop="name">Hugo Casanova</span></a>        </span>
        <br>

        <span class="karma">25.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C17917" href="#C17917">
                <time itemprop="dateCreated" datetime="2015-05-04T22:12:33-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>trata con:
en el Model:</p>
<pre><code>public function getSequenceName() {
      return "id_data";
  }</code></pre>
<p>Y que en tu base de datos la columna sea el primary Key y autoincrement (aunq este ultimo no crea q sea necesario)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17917" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17917" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5e46de5c9c474f91e27763956e640c72?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2868/donkoke" class="user-moderator-N"><span itemprop="name">Jorge Ponce Toloza</span></a>        </span>
        <br>

        <span class="karma">2.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C17917"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/693a279f4545cdb52e27c51a66b2af29?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Hugo Casanova                    </a>
                </div><div class="posts-buttons" align="right"><a name="C17964" href="#C17964">
                <time itemprop="dateCreated" datetime="2015-05-05T11:21:56-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Gracias por tu respuesta.
Sin embargo no la respuesta no esta ahi, si hago lo que me dices si funciona, pero el problema es que la primary key es compuesta por id_data y data (id_data no es autoincrement), ya que viene de una relación N:N</p>
<p>Salu2.</p>
<blockquote>
<p>trata con:
en el Model:</p>
<p>public function getSequenceName() {
return &quot;id_data&quot;;
}</p>
<p>Y que en tu base de datos la columna sea el primary Key y autoincrement (aunq este ultimo no crea q sea necesario)</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17964" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17964" data-cf-modified-98dd3bf7a6389816e6da344d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6611" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>