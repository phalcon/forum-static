---
layout: default
title: 'Is it possible to defer a DB connection using \Phalcon\Mvc\Model until a query is made? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Is it possible to defer a DB connection using \Phalcon\Mvc\Model until a query is made?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/10209/slothstronaut" class="user-moderator-N"><span itemprop="name">slothstronaut</span></a></span>
            <time itemprop="dateCreated" datetime="2020-01-04T10:07:25-07:00">Jan '20</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2020-01-04T10:07:25-07:00">Jan '20</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '20</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>191</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/3e0b957bff7124d8346cbfa1a2b54e27?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/10209/slothstronaut" class="user-moderator-N"><span itemprop="name">slothstronaut</span></a></span>
                <span class="karma">1.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C20235" href="#C20235">
        <time class="action-date">Jan '20</time>
    </a>
</div>
<div class="post-content"><div><p>I don't see any documentation that supports this feature, but it would be awesome if I could defer the connection to the database until a query is actually made.</p>
<p>The way I'm using \Phalcon\Mvc\Model in one instance it would drastically improve performance. </p>
<p>So basically it would be a connection on-demand, instead of when instantiating an instance of a model.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-4fb7ded23c26bc591139d37f-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-4fb7ded23c26bc591139d37f-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/26f29ef2ab85f8c6855381e68ca04fea?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/921/Jeckerson" class="user-moderator-Y"><span itemprop="name">Anton Vasiliev</span></a>        </span>
        <br>

        <span class="karma">6.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C61709" href="#C61709">
                <time itemprop="dateCreated" datetime="2020-01-05T04:20:09-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>How it will increase performace, if the whole process from bootstrapping to showing output is a single piece?
No difference if it will connecting at the beggining or in the middle of code execution...</p>
<p>Another question, if depending on your code parts, DB connection not always is required. In that case, do not use FactoryDefault() (<a href="https://docs.phalcon.io/4.0/en/di#factory-default">https://docs.phalcon.io/4.0/en/di#factory-default</a>), but declare and init each service separately.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61709" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61709" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/3e0b957bff7124d8346cbfa1a2b54e27?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/10209/slothstronaut" class="user-moderator-N"><span itemprop="name">slothstronaut</span></a>        </span>
        <br>

        <span class="karma">1.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="61711" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '20</span>
              </span><br/><a name="C61711" href="#C61711">
                <time itemprop="dateCreated" datetime="2020-01-05T08:55:31-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks, I will look into not using <code>FactoryDefault()</code></p>
<p>The easiest way I can explain is that on one of my models it does not need a db connection on the frontend but it does need it on the backend, so my site is slightly faster if it doesn't connect to its db on frontend.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61711" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61711" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C61725" href="#C61725">
                <time itemprop="dateCreated" datetime="2020-01-07T13:38:01-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'd consider this a &quot;micro-optimization&quot;.  Unless you're experiencing thousands of concurrent users, the performance increase will be negligible.  Honestly, I wouldn't waste your time on something like this.  You can get better performance for less effort elsewhere.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61725" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61725" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/3e0b957bff7124d8346cbfa1a2b54e27?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/10209/slothstronaut" class="user-moderator-N"><span itemprop="name">slothstronaut</span></a>        </span>
        <br>

        <span class="karma">1.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C61735" href="#C61735">
                <time itemprop="dateCreated" datetime="2020-01-07T18:57:10-07:00" class="action-date">Jan '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Dylan, that is a good point. However, its also to remove the dependency on that connection as its not considered mission critical in my case. It hadn't occured to me it was even connecting to the db since it wasn't doing any queries.</p>
<p>I still believe this is a valid and useful feature that I would imagine to be realtively simple to implement, but I've already refactored the problem away so no worries.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="61735" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="61735" data-cf-modified-4fb7ded23c26bc591139d37f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="20235" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>