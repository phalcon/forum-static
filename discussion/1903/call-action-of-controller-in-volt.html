---
layout: default
title: 'Call action of controller in volt - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Call action of controller in volt</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1120/ctuanminh" class="user-moderator-N"><span itemprop="name">ctuanminh</span></a></span>
            <time itemprop="dateCreated" datetime="2014-03-25T08:57:32-07:00">Mar '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-03-25T08:57:32-07:00">Mar '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Feb '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">7</span>
                </td>
                <td>
                    <label>Views</label><br>2723</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/f5ca7e738280e93e60a0a6eb20984d71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1120/ctuanminh" class="user-moderator-N"><span itemprop="name">ctuanminh</span></a></span>
                <span class="karma">20.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1903" href="#C1903">
        <time class="action-date">Mar '14</time>
    </a>
</div>
<div class="post-content"><div><p>hi all,
how to call an action in Volt </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-f57d20ea699e3a9e0774b427-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-f57d20ea699e3a9e0774b427-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c5015ff5abf61005cefc66fe169eb24b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/690/glydetech" class="user-moderator-N"><span itemprop="name">Andrew Clarke</span></a>        </span>
        <br>

        <span class="karma">3.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6547" href="#C6547">
                <time itemprop="dateCreated" datetime="2014-03-25T09:39:45-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Generally, Controller actions are only called when a new request is made by the user.</p>
<p>Views, which is where you use Volt, should only be concerned with displaying information to the user.</p>
<p>Have a read through this documentation page for clarity <a href="http://docs.phalcon.io/en/latest/reference/mvc.html">http://docs.phalcon.io/en/latest/reference/mvc.html</a></p>
<p>If you post details of what you're trying to achieve, I may be able to give you more help.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6547" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6547" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/4f58f9e8395e6bd9aac675a3ae1cfd5a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1382/slava-basko" class="user-moderator-N"><span itemprop="name">Slava Basko</span></a>        </span>
        <br>

        <span class="karma">213</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6737" href="#C6737">
                <time itemprop="dateCreated" datetime="2014-03-31T08:33:15-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Call controller method in view - is wrong. I don't know what you need exactly but i think you need look at helpers (<a href="http://docs.phalcon.io/en/latest/reference/tags.html#view-helpers">http://docs.phalcon.io/en/latest/reference/tags.html#view-helpers</a>). Just create one with your logic and call from view.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6737" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6737" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b0d03195ad7c5f18dfae7a94cff796b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1290/unmultimedio" class="user-moderator-N"><span itemprop="name">Julián R. Figueroa</span></a>        </span>
        <br>

        <span class="karma">6.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="7009" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C7009" href="#C7009">
                <time itemprop="dateCreated" datetime="2014-04-08T14:49:22-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Im in a similar situation.</p>
<p>I have the ControllerBase where I have a function that tells me wether I'm logged in or not, and I'm changing the header in index.volt depending on that condition, so I'm calling from the volt the controller function like this:</p>
<pre><code>&lt;!-- index.volt --&gt;
... some html code in the &lt;header&gt; section
&lt;?php 
if(ControllerBase::_isLoggedIn()){ 
?&gt;
    THE HTML IF IM LOGGED IN
&lt;?php
}else{
?&gt;
    THE HTML IF IM NOT LOGGED IN
&lt;?php
}
?&gt;
... some other html code in the &lt;header&gt; section</code></pre>
<p>So, if it's wrong to call ControllerBase from the view, how else can I achieve that?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7009" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7009" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fddcf06b8c23b8067b1eb7e46caedad9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1436/iman38" class="user-moderator-N"><span itemprop="name">iman38</span></a>        </span>
        <br>

        <span class="karma">2.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7017" href="#C7017">
                <time itemprop="dateCreated" datetime="2014-04-09T00:17:38-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>On the services.php, I use this one:</p>
<pre><code class="language-php">$di-&gt;set('view', function () use ($config) {

    $view = new View();

    $view-&gt;setViewsDir($config-&gt;application-&gt;viewsDir);

    $view-&gt;registerEngines(array(
        '.volt'  =&gt; function ($view, $di) use ($config) {

                $volt = new VoltEngine($view, $di);
                $volt-&gt;setOptions(array(
                    'compiledPath'      =&gt; $config-&gt;application-&gt;cacheDir,
                    'compiledSeparator' =&gt; '_'
                ));

                $compiler = $volt-&gt;getCompiler();

                $compiler-&gt;addFunction('logged_in', function ($resolvedArgs, $expArgs) {
                    return '!empty($this-&gt;session-&gt;auth)';
                });

                $compiler-&gt;addFunction('username', function ($resolvedArgs, $expArgs) {
                   return '$this-&gt;session-&gt;auth["name"]';
                });

                return $volt;
            },
        '.phtml' =&gt; 'Phalcon\Mvc\View\Engine\Php'
    ));

    return $view;
}, true);</code></pre>
<p>On views, I can use:</p>
<pre><code class="language-php">{% raw %}{%{% endraw %} if logged_in() {% raw %}%}{% endraw %}
    Hello {% raw %}{{{% endraw %} username() {% raw %}}}{% endraw %}
{% raw %}{%{% endraw %} else {% raw %}%}{% endraw %}  
    Something else
{% raw %}{%{% endraw %} endif {% raw %}%}{% endraw %}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7017" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7017" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b0d03195ad7c5f18dfae7a94cff796b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1290/unmultimedio" class="user-moderator-N"><span itemprop="name">Julián R. Figueroa</span></a>        </span>
        <br>

        <span class="karma">6.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7034" href="#C7034">
                <time itemprop="dateCreated" datetime="2014-04-09T06:38:00-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/iman38">@iman38</a> I just tried that and It worked like a charm! Thanks a lot!
But, yesterday I was taking a look at the INVO example in the phalcon documentation, and there it says the &quot;correct&quot; way to do it is by using Elements.</p>
<p>Take a look at here: <a href="http://docs.phalcon.io/en/latest/reference/tutorial-invo.html#user-components">http://docs.phalcon.io/en/latest/reference/tutorial-invo.html#user-components</a></p>
<p>It says:</p>
<p><em>&quot;All the UI elements and visual style of the application has been achieved mostly through Bootstrap. Some elements, such as the navigation bar changes according to the state of the application. For example, in the upper right corner, the link “Log in / Sign Up” changes to “Log out” if an user is logged into the application. <strong>This part of the application is implemented in the component “Elements”</strong> (app/library/Elements.php).&quot;</em></p>
<p>So, I'm wondering if the way you suggest is the recommended or right way to achieve it.</p>
<p>Thanks a lot again for the answer.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7034" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7034" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fddcf06b8c23b8067b1eb7e46caedad9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1436/iman38" class="user-moderator-N"><span itemprop="name">iman38</span></a>        </span>
        <br>

        <span class="karma">2.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7051" href="#C7051">
                <time itemprop="dateCreated" datetime="2014-04-09T11:11:08-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Generally, I would extend volt engine to suit my needs. In many cases, I work directly with designer guys who are not so happy with cluttering php statements accross the view files (It's just personal taste, but I love those clean volt templates rather than mixing php statements on views--as long as I can avoid them).</p>
<p>On my previous example, I showed you that I need to access some values held by some services (in that case, the session) injected on the DI. So, I simply add functions to the volt compiler for those trivial functionalities.</p>
<p>On other cases, I have some dynamic (html) elements / block of elements. And yes, I extended the <code>Component</code> class and create my own <code>Tag</code> class (extending the <code>\Phalcon\Tag</code>) to suit my needs (and again, create volt functions to make my views cleaner). </p>
<p>I'm not sure that this would be the most recommended way on phalcon. However, I don't see it break any MVC concepts. -cmiiw</p>
<p>Btw, sorry to the OP if my comments being way out of topic.</p>
<p>Cheers,</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7051" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7051" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/301465d458b5fec9aa33575810a292e1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2844/lce-fr" class="user-moderator-N"><span itemprop="name">lce-fr</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="15667" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '15</span>
              </span><br/><a name="C15667" href="#C15667">
                <time itemprop="dateCreated" datetime="2015-02-04T10:17:17-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I am not sure I agree about calling controller in view : </p>
<p>What if you have some dynamic content you want to reuse at several place ? </p>
<p>For me I have a form that I have rendered in a given place which requires a controller to bind model data to the form. But now I also want to render it elsewhere.</p>
<p>What I tried to is put in my view : </p>
<p>{% raw %}{{{% endraw %} view.render('mycontroller', 'myaction') {% raw %}}}{% endraw %}</p>
<p>but it only render the view, it does not go through the controller action so my view variables are not set !</p>
<p>Does someone know how I can render this nice controller ? </p>
<p>edit : Maybe something can be done thanks to controller forwarding ? </p>
<p>Thanks</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15667" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15667" data-cf-modified-f57d20ea699e3a9e0774b427-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1903" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>