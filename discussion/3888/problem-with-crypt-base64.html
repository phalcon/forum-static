---
layout: default
title: 'Problem with Crypt base64 - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/16/security">Security</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Problem with Crypt base64</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2474/svrcekmichal" class="user-moderator-N"><span itemprop="name">svrcekmichal</span></a></span>
            <time itemprop="dateCreated" datetime="2014-11-07T08:18:16-07:00">Nov '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-11-07T08:18:16-07:00">Nov '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>1530</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/d1980adf649843e4983b0fb3a7135f7d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2474/svrcekmichal" class="user-moderator-N"><span itemprop="name">svrcekmichal</span></a></span>
                <span class="karma">3.0k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3888" href="#C3888">
        <time class="action-date">Nov '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, I have a simple problem, with Crypt class, loot ak following code:</p>
<pre><code>$cryptPhalcon = new Phalcon\Crypt();
$text = 'how are you';
var_dump($text);

echo '&lt;br&gt; ------------------------- ENCRYPT PHALCON--------------------- &lt;br&gt;';
$encrypt = $cryptPhalcon-&gt;encryptBase64($text);
var_dump($encrypt);

echo '&lt;br&gt; ------------------------- DECRYPT PHALCON--------------------- &lt;br&gt;';
$decrypt = $cryptPhalcon-&gt;decryptBase64($encrypt);
var_dump($decrypt);

var_dump($decrypt == $text);</code></pre>
<p>and output is:</p>
<pre><code>string 'how are you' (length=11)

------------------------- ENCRYPT PHALCON--------------------- 
string 'm5fRk+73DaFc5mXTSm4E8aIVj0PL4jCPrmCPILKV0rveuLGVgx5ZqrRUktHp5t2baAyzchhTzqnOgQTQ98sZ1g==' (length=88)

------------------------- DECRYPT PHALCON--------------------- 
string 'how are you���������������������' (length=32)
boolean false</code></pre>
<p>Can someone help me? I hoped it would return true, but maybe i am mistaken...</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3ac30112a0a605290df3b412-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3ac30112a0a605290df3b412-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/65cc66b2174ca0e8408258408af274c2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1371/david-duncan" class="user-moderator-N"><span itemprop="name">David Duncan</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12903" href="#C12903">
                <time itemprop="dateCreated" datetime="2014-11-07T08:38:56-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Can you just use PHPs base64 encode or decode? I don't the reasoning for trying to use phalcons.</p>
<p>And actually this interested me enough to look it up in the source, and it appears that phalcon's base64 encode/decode is actually just a wrapper for PHP's</p>
<p><a href="https://github.com/phalcon/cphalcon/blob/bf9da26e6e20ea05dd69881b9cd0c2536ec53bcb/ext/kernel/string.c#L985">https://github.com/phalcon/cphalcon/blob/bf9da26e6e20ea05dd69881b9cd0c2536ec53bcb/ext/kernel/string.c#L985</a></p>
<p>Am I off base here Andres?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12903" data-cf-modified-3ac30112a0a605290df3b412-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12903" data-cf-modified-3ac30112a0a605290df3b412-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2187709447a71fadc461910ee14630b4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2130/heptagono" class="user-moderator-N"><span itemprop="name">heptagono</span></a>        </span>
        <br>

        <span class="karma">11.2k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="12907" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '14</span>
              </span><br/><a name="C12907" href="#C12907">
                <time itemprop="dateCreated" datetime="2014-11-07T10:46:07-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The <code>crypt</code> makes padding for reasons.</p>
<p>The easiest way to work is to do something like this </p>
<pre><code class="language-php">        $cryptPhalcon = new \Phalcon\Crypt();

        $text = 'Phalcon Crypto';
        $key = 'The cake is a lie!';

        $encrypt = $cryptPhalcon-&gt;encryptBase64($text, $key);
        $decrypt = trim($cryptPhalcon-&gt;decryptBase64($encrypt, $key));

        var_dump($text);
        echo '&lt;br&gt; ------------------------- ENCRYPT PHALCON--------------------- &lt;br&gt;';
        var_dump($encrypt);
        echo '&lt;br&gt; ------------------------- DECRYPT PHALCON--------------------- &lt;br&gt;';
        var_dump($decrypt);
        echo '&lt;br&gt;';

        var_dump($decrypt == $text);

        die();</code></pre>
<p>The output would be something like this</p>
<pre><code>    string(14) "Phalcon Crypto"
    ------------------------- ENCRYPT PHALCON---------------------
    string(88) "o24rGA2ZVISdZ+pMk2ljUXiwyqGVjG3LH+rkhW/LGosofQm7GkWo5ppPDAwUndO0ngTT0ZpxUNxP8CrkM1olyw=="
    ------------------------- DECRYPT PHALCON---------------------
    string(14) "Phalcon Crypto"
    bool(true) </code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12907" data-cf-modified-3ac30112a0a605290df3b412-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12907" data-cf-modified-3ac30112a0a605290df3b412-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12917" href="#C12917">
                <time itemprop="dateCreated" datetime="2014-11-08T06:05:51-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The extra characters are there because of padding. Block cipher modes for symmetric-key encryption algorithms in ECB/CBC modes require plain text input that is a multiple of the block size, so messages must be padded to bring them to this length when they're decripted. This is why you find extra zero null characters  at the end of the input causing both strings not to be the same.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12917" data-cf-modified-3ac30112a0a605290df3b412-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12917" data-cf-modified-3ac30112a0a605290df3b412-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3888" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>