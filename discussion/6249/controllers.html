---
layout: default
title: 'Controllers - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Controllers</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a></span>
            <time itemprop="dateCreated" datetime="2015-03-25T09:35:48-07:00">Mar '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-03-25T09:35:48-07:00">Mar '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>770</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a></span>
                <span class="karma">6.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6249" href="#C6249">
        <time class="action-date">Mar '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi all. Phalcon have event for controllers like 'before custom action' and 'after custom action' ? </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16880" href="#C16880">
                <time itemprop="dateCreated" datetime="2015-03-25T09:54:48-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="http://docs.phalcon.io/es/latest/reference/controllers.html#events-in-controllers">http://docs.phalcon.io/es/latest/reference/controllers.html#events-in-controllers</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16880" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16880" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16881" href="#C16881">
                <time itemprop="dateCreated" datetime="2015-03-25T10:01:31-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><strong>RompePC</strong>, thank you, but what if I want to point out himself controller / action ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16881" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16881" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16883" href="#C16883">
                <time itemprop="dateCreated" datetime="2015-03-25T11:02:49-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think this is the most near approach of what you want.</p>
<pre><code>if ($dispatcher-&gt;getActionName() === 'something') {
    // Do stuff.
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16883" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16883" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C16883"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        RompePC                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16884" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16884" href="#C16884">
                <time itemprop="dateCreated" datetime="2015-03-25T11:10:20-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>I think this is the most near approach of what you want.</p>
<pre><code>if ($dispatcher-&gt;getActionName() === 'something') {
   // Do stuff.
}</code></pre>
</blockquote>
<p>I want set custom controller/action before/after event</p>
<pre><code class="language-php">
class TestController
{
    public function indexAction()
    {
    }
}

//then
class Whatever 
{
    public function mySuperAction()
    {
        $data = whatever;
        $data2 = whatever;
        $this-&gt;event-&gt;fire('testcontroller.beforeIndexAction', $data);
        $this-&gt;event-&gt;fire('testcontroller.afterIndexAction', $data2);
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16884" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16884" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/07cb69abb466c60cf054e078b44df774?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3381/julianmolina" class="user-moderator-N"><span itemprop="name">Juli√°n Arturo Molina Castiblanco</span></a>        </span>
        <br>

        <span class="karma">3.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16889" href="#C16889">
                <time itemprop="dateCreated" datetime="2015-03-25T21:44:42-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think you shuld extends from controllerBase, ex:</p>
<pre><code class="language-php">//ControllerBase.php parent super class controllers
class ControllerBase extends \Phalcon\Mvc\Controller
{
    public function beforeExecuteRoute($dispatcher)
    {
        $post = $this-&gt;request-&gt;getPost(); //or get
        //when you access from some url: http://localhost/controller/beforeIndex
        if ($dispatcher-&gt;getActionName() == "beforeIndex") {
            $dispatcher-&gt;forward(array(
                "action" =&gt; "beforeIndexAction", //or after you decide
                "controller" =&gt; "testController",
                "params" =&gt; $post
            ));
        } 

    }
}

//Test Controller.php

use Project\Controllers\ControllerBase as Controller;

class function TextController extends Controller
{
    public function ....etc
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16889" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16889" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16905" href="#C16905">
                <time itemprop="dateCreated" datetime="2015-03-26T08:00:07-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I dont want set this on ControllerBase, because this solution not flexible</p>
<pre><code class="language-php">"action" =&gt; "beforeIndexAction", //or after you decide
"controller" =&gt; "testController",</code></pre>
<p>I want do that on any controller, now i has like this</p>
<pre><code class="language-php">namespace Core\Controllers;

class BackendController extends \Phalcon\Mvc\Controller
{
    protected $eventsManager;

    public function initialize()
    {
        $modules = \Core\Models\Module::find("state = 1");

        //Events
        $this-&gt;eventsManager = new  \Phalcon\Events\Manager();

        foreach ($modules as $module)
        {
            $moduleNamespace = '\Modules\\'.ucfirst($module-&gt;name).'\Backend\Controllers\\'.ucfirst($module-&gt;name).'Controller';
            $this-&gt;eventsManager-&gt;attach($module-&gt;name, new $moduleNamespace);
        }
    }
}

namespace Modules\Catalog\Backend\Controllers;

class CatalogController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {
        $this-&gt;eventsManager-&gt;fire("categories:IndexAction", $this);
        echo "Catalog module";
        $this-&gt;eventsManager-&gt;fire("page:afterIndexAction", $this);
    }
}

namespace Modules\Categories\Backend\Controllers;

class CategoriesController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {
        $data = array('category 1', 'category 2', 'category 3', 'category 4', 'category 5');
        $this-&gt;view-&gt;partial(__DIR__.'/../views/index', array('data' =&gt; $data));
    }
}

//but i want do this on CategoriesController not on CatalogController
//like this

namespace Modules\Catalog\Backend\Controllers;

class CatalogController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {
        echo "Catalog module";
    }
}

class CategoriesController extends \Core\Controllers\BackendController
{
    public function indexAction()
    {
        $data = array('category 1', 'category 2', 'category 3', 'category 4', 'category 5');
        $this-&gt;eventsManager-&gt;fire("catalog:beforeIndexAction", $data);
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16905" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16905" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/69ae1a848d35901b2c2392813c8bb2ea?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1200/chesney" class="user-moderator-N"><span itemprop="name">Chesney</span></a>        </span>
        <br>

        <span class="karma">22.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16909" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16909" href="#C16909">
                <time itemprop="dateCreated" datetime="2015-03-26T08:58:28-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You dont need to do this</p>
<pre><code>"action" =&gt; "beforeIndexAction", //or after you decide
"controller" =&gt; "testController",</code></pre>
<p>If you extend from your baseController and define the before and afterExecute actions in your baseController they will always fire/execute by default.
The baseController actions will fire first then your extended controller actions will fire.
If you dont want to execute the before or afterExecute actions on the baseController then just dont extend from the baseController, or in your baseController
identity the controllers that should not be affected by the beforeor after execute functions.</p>
<p>eg.</p>
<pre><code>// inside the beforeExecuteRoute Action of the basecontroller
$actioName = $this-&gt;dispatcher-&gt;getActionName();
$ctrlName = $this-&gt;dispatcher-&gt;getControllerName();
$ignoreRoutes = array('user' =&gt; 'view') // key = controller, val = action
if($ignoreRoutes[$ctrlName][$actioName]) {
    return true; // ignore this
} 
// else do the rest</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16909" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16909" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/27cc875eba063f1eb544c6abb42cfec5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1062/melomaniac" class="user-moderator-N"><span itemprop="name">melomaniac</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16920" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16920" href="#C16920">
                <time itemprop="dateCreated" datetime="2015-03-27T03:15:39-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks,  but i not understand, how this help me ? An example of a pure php</p>
<p>I have parent class</p>
<pre><code class="language-php">class Parent
{

}</code></pre>
<p>And extends from parent</p>
<pre><code class="language-php">class Child extends Parent
{
    function test()
    {

    }
}

class Child2 extends Parent
{
    function test2()
    {
        echo ' I want extends method test() on class Child here, not changing class Child !!! ';
    }
}</code></pre>
<p>When i call class Child method test() like this</p>
<p>$child = new Child();</p>
<p>$child-&gt;test(); // i want get  ' I want extends method test() on class Child here, not changing class Child !!! ';</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16920" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16920" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/69ae1a848d35901b2c2392813c8bb2ea?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1200/chesney" class="user-moderator-N"><span itemprop="name">Chesney</span></a>        </span>
        <br>

        <span class="karma">22.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16924" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16924" href="#C16924">
                <time itemprop="dateCreated" datetime="2015-03-27T05:00:04-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The you can just call the function from the parent class.</p>
<pre><code>class Child2 extends Parent
{
    function test2()
    {
        parent::test(); // will call the parent test() function
        $child1 = new Child1(); // child1 object
        $child1-&gt;test(); // test function on child1
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16924" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16924" data-cf-modified-eefc48d5a28ad94fac89b9d8-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6249" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>