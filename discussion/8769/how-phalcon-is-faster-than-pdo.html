---
layout: default
title: 'How Phalcon is faster than PDO? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How Phalcon is faster than PDO?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/5069/alichoobdar" class="user-moderator-N"><span itemprop="name">alichoobdar</span></a></span>
            <time itemprop="dateCreated" datetime="2015-09-30T05:16:47-07:00">Sep '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-09-30T05:16:47-07:00">Sep '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1084</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/f2c3be50c48356330bef38663b46a423?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/5069/alichoobdar" class="user-moderator-N"><span itemprop="name">alichoobdar</span></a></span>
                <span class="karma">2.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C8769" href="#C8769">
        <time class="action-date">Sep '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi</p>
<p>i'm new to phalcon and i really like it.
I just did a simple compare beetwen phql and pdo. I have a simple table named user with 4 columns and 10K rows.</p>
<p>using pdo</p>
<pre><code class="language-php">$t = microtime(true);
$db = new PDO('mysql:host=localhost;dbname=phalcon;charset=utf8', 'root', 'dbpass');
$stm = $db-&gt;query("SELECT * FROM user");
$rows = $stm-&gt;fetchAll(PDO::FETCH_ASSOC);
echo microtime(true) - $t;
echo '&lt;br/&gt;';
echo memory_get_usage(true);</code></pre>
<p>and result</p>
<pre><code>    0.083003997802734
    7602176</code></pre>
<p>using phalcon</p>
<pre><code class="language-php">$t = microtime(true);
$builder = $this-&gt;modelsManager-&gt;createBuilder();
$users = $builder-&gt;from('user')-&gt;-&gt;getQuery()-&gt;execute();
echo microtime(true) - $t;
echo '&lt;br/&gt;';
echo memory_get_usage(true);</code></pre>
<p>and result</p>
<pre><code>    0.069004058837891
    2097152</code></pre>
<p>Amazingly both proccess time and memory usage in phalcon is lower than pdo. As I know phalcon use pdo at the backend and returns model classes instead of pure array. How come that is possible?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-c5e3e81d9eaa40594147516d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-c5e3e81d9eaa40594147516d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/492de3e24d0fbf4ad41240e9ef39579b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5061/r45852556" class="user-moderator-N"><span itemprop="name">r45852556</span></a>        </span>
        <br>

        <span class="karma">811</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="24015" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '15</span>
              </span><br/><a name="C24015" href="#C24015">
                <time itemprop="dateCreated" datetime="2015-09-30T05:26:59-07:00" class="action-date">Sep '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>As far as I remember phql doesn't use pdo in backend, they use something similar to mysqli, for performance reasons. This would explain why phql is faster than pure pdo (correct me if i'm wrong)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24015" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24015" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C24025" href="#C24025">
                <time itemprop="dateCreated" datetime="2015-09-30T06:18:51-07:00" class="action-date">Sep '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>after you run 1 of the benchmarks restart the mysql server, then run the second.</p>
<p>and tell us if it is still the same :-)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24025" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24025" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C24015"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/492de3e24d0fbf4ad41240e9ef39579b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        r45852556                    </a>
                </div><div class="posts-buttons" align="right"><a name="C24059" href="#C24059">
                <time itemprop="dateCreated" datetime="2015-09-30T08:27:34-07:00" class="action-date">Sep '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>As far as I remember phql doesn't use pdo in backend, they use something similar to mysqli, for performance reasons. This would explain why phql is faster than pure pdo (correct me if i'm wrong)</p>
</blockquote>
<p>I don't think that's correct.  I've seen multiple replies here where<a href="https://forum.phalcon.io/user/0/Phalcon"> @Phalcon</a> says PHQL doesn't support this thing or that thing because PDO doesn't support it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24059" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24059" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f2c3be50c48356330bef38663b46a423?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5069/alichoobdar" class="user-moderator-N"><span itemprop="name">alichoobdar</span></a>        </span>
        <br>

        <span class="karma">2.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C24069" href="#C24069">
                <time itemprop="dateCreated" datetime="2015-09-30T09:11:40-07:00" class="action-date">Sep '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>As far as I remember phql doesn't use pdo in backend, they use something similar to mysqli, for performance reasons. This would explain why phql is faster than pure pdo (correct me if i'm wrong)</p>
</blockquote>
<p>In order to use phql you need to enable <strong>php pdo mysql</strong> (for mysql) extension.</p>
<blockquote>
<p>after you run 1 of the benchmarks restart the mysql server, then run the second.
and tell us if it is still the same :-)</p>
</blockquote>
<p>I had disabled query cache when i ran benchmarks. I restart mysql before running each benchmark for sure and still same result. The intersting part for me is memory usage. phql returns heavy models classes vs pdo that returns pure arrays but memory usage is about 25%.</p>
<p>I like it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24069" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24069" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c58542c4c2b9171a023c69e6711c16f1?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/662/ogarbe" class="user-moderator-N"><span itemprop="name">Olivier.Garb√©</span></a>        </span>
        <br>

        <span class="karma">24.1k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C24071" href="#C24071">
                <time itemprop="dateCreated" datetime="2015-09-30T10:21:16-07:00" class="action-date">Sep '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>cf <a href="https://github.com/phalcon/cphalcon/blob/master/phalcon/mvc/model/resultset.zep#L143-L156">https://github.com/phalcon/cphalcon/blob/master/phalcon/mvc/model/resultset.zep#L143-L156</a></p>
<p>fetch is done only if resulset as less than 32 results</p>
<p>so here you test is quite logical : you compare different things : one will get 10k results, the other will only execute the requests.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24071" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24071" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f2c3be50c48356330bef38663b46a423?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5069/alichoobdar" class="user-moderator-N"><span itemprop="name">alichoobdar</span></a>        </span>
        <br>

        <span class="karma">2.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C24089" href="#C24089">
                <time itemprop="dateCreated" datetime="2015-10-01T00:41:42-07:00" class="action-date">Oct '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you for you answer.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24089" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24089" data-cf-modified-c5e3e81d9eaa40594147516d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="8769" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>