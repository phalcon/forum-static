---
layout: default
title: 'InvalidArgumentException: Parameter &#039;name&#039; must be a string - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">InvalidArgumentException: Parameter &#039;name&#039; must be a string</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/5459/moledet" class="user-moderator-N"><span itemprop="name">moledet</span></a></span>
            <time itemprop="dateCreated" datetime="2017-02-05T11:18:13-07:00">Feb '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-02-05T11:18:13-07:00">Feb '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Feb '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>1141</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/eccaa895d8f0ec8396a466a4c2f73a89?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/5459/moledet" class="user-moderator-N"><span itemprop="name">moledet</span></a></span>
                <span class="karma">17.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C15467" href="#C15467">
        <time class="action-date">Feb '17</time>
    </a>
</div>
<div class="post-content"><div><p>After update from phalcon 2.8 to 3.0.3 and php7.0 i have error <strong>InvalidArgumentException: Parameter 'name' must be a string </strong>
It happend's when try to get belongsTo relation</p>
<pre><code class="language-php">use Phalcon\Mvc\Model\Resultset\Simple as Resultset;

class Country extends GeonameAbstractModel
{

    /**
     *
     * @var string
     */
    protected $iso_alpha2;

     /**
     *
     * @var integer
     */
    protected $geonameid;
    ......
    /**
     * Initialize method for model.
     */
    public function initialize()
    {
        $this-&gt;setSchema("public");
        $this-&gt;belongsTo('geonameid', 'Geoname', 'geonameid', array('alias' =&gt; 'Geoname'));
    }

    /**
     * Virtual method for IDE.
     *
     * @param mixed $parameters
     * @return \Geoname
     */
    public function getGeoname($parameters = null)
    {
        return $this-&gt;getRelated('Geoname', $parameters);
    }
    ....
}

class Geoname extends \Phalcon\Mvc\Model
{

    public static $lang='en';

    /**
     *
     * @var integer
     */
    protected $geonameid;
    ......
     /**
     * Initialize method for model.
     */
    public function initialize()
    {
        $this-&gt;setSchema("public");
        $this-&gt;hasMany('geonameid', 'Admin1Codes', 'geonameid', array('alias' =&gt; 'Admin1Codes'));
        $this-&gt;hasMany('geonameid', 'Admin2Codes', 'geonameid', array('alias' =&gt; 'Admin2Codes'));
        $this-&gt;hasMany('geonameid', 'Translate', 'geonameid', array('alias' =&gt; 'Translations'));
        $this-&gt;hasMany('geonameid', 'Continent', 'geonameid', array('alias' =&gt; 'ContinentCodes'));
        $this-&gt;hasMany('geonameid', 'Country', 'geonameid', array('alias' =&gt; 'Countryinfo'));
        $this-&gt;hasMany('geonameid', 'Hierarchy', 'parent_id', array('alias' =&gt; 'ParentsHierarchy'));
        $this-&gt;hasMany('geonameid', 'Hierarchy', 'child_id', array('alias' =&gt; 'ChildsHierarchy'));
    }
  ....
}

$country-&gt;getGeoname(); //InvalidArgumentException: Parameter 'name' must be a string</code></pre>
<p>All tables exists, this code runs on php 5.6 phalcon 2.8 without problems.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-17b0ee7cebfec5388b647b22-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-17b0ee7cebfec5388b647b22-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eccaa895d8f0ec8396a466a4c2f73a89?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5459/moledet" class="user-moderator-N"><span itemprop="name">moledet</span></a>        </span>
        <br>

        <span class="karma">17.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45709" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C45709" href="#C45709">
                <time itemprop="dateCreated" datetime="2017-02-06T09:11:54-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Backtrace</p>
<pre><code class="language-php">#0  Phalcon\Db\Column-&gt;__construct(2177478, Array([bindType] =&gt; 2, [type] =&gt; 2, [first] =&gt; 1))
#1  Phalcon\Db\Adapter\Pdo\Postgresql-&gt;describeColumns(geoname, public)
#2  Phalcon\Mvc\Model\MetaData\Strategy\Introspection-&gt;getMetaData(Object(Geoname: ), Object(Phalcon\Di\FactoryDefault))
#3  Phalcon\Mvc\Model\MetaData-&gt;_initialize(Object(Geoname: ), geoname-publicgeoname, geoname, public)
#4  Phalcon\Mvc\Model\MetaData-&gt;readMetaData(Object(Geoname: ))
#5  Phalcon\Mvc\Model\MetaData-&gt;hasAttribute(Object(Geoname: ), geonameid)
#6  Phalcon\Mvc\Model\Query-&gt;_getQualified(Array([type] =&gt; 355, [name] =&gt; geonameid))
#7  Phalcon\Mvc\Model\Query-&gt;_getExpression(Array([type] =&gt; 355, [name] =&gt; geonameid), true)
#8  Phalcon\Mvc\Model\Query-&gt;_getExpression(Array([type] =&gt; 61, [left] =&gt; Array([type] =&gt; 355, [name] =&gt; geonameid), [right] =&gt; Array([type] =&gt; 274, [value] =&gt; APR0)))
#9  Phalcon\Mvc\Model\Query-&gt;_prepareSelect()
#10 Phalcon\Mvc\Model\Query-&gt;parse()
#11 Phalcon\Mvc\Model\Query-&gt;execute()
#12 Phalcon\Mvc\Model::findFirst(Array([0] =&gt; [geonameid] = :APR0:, [bind] =&gt; Array([APR0] =&gt; 2077456), [di] =&gt; Object(Phalcon\Di\FactoryDefault)))
/var/www/weather.town/app/models/Geoname.php (675)

#13 Geoname::findFirst(Array([0] =&gt; [geonameid] = :APR0:, [bind] =&gt; Array([APR0] =&gt; 2077456), [di] =&gt; Object(Phalcon\Di\FactoryDefault)))
#14 Phalcon\Mvc\Model\Manager-&gt;getRelationRecords(Object(Phalcon\Mvc\Model\Relation), null, Object(Country: [db] =&gt; (empty string), [search_tsv] =&gt; 'ahitereiria':2 'ao':78 'aositelelia':1 'aostralia':7 'astireliya':82 'astr':84 'astrail':4 'astralia':8,61 'astralya':83 'astreliya':86 'astráil':6 'austraalia':9 'austraila':10 'australi':11,19 'australia':12,13,15,17,51,90,175 'australien':20 'australija':21 'australio':22 'australië':23 'australya':24 'austràlia':25 'austráli':27 'austrália':26 'austrālija':28 'ausztralia':29 'ausztrália':30 'autereraria':31 'avstrali':32 'avstralia':33 'avstralij':35 'avstralija':34 'avstraliya':38 'avstrualii':39 'avustralya':40 'awistralya':41 'awstaraaliya':42 'awstralia':43 'awstralja':44 'awstralska':45 'awstralya':46 'awusitureliya':47 'aŭstralio':48 'commonwealth':49,173 'da':79 'e':97 'hoju':87 'i-australia':88 'i-ostreliya':52 'kij':36 'li':58,80 'lī':104 'nutom':18 'o':56 'o-tai-li-a':55 'orileed':60 'orílẹ́èd':62 'oseuteuleillia':91 'ositali':64 'ositaraliya':65 'ositirali':66 'ositáli':67 'ostaraalii':68 'ostareliya':69 'ostaruliya':167 'ostrali':70 'ostralii':71 'ostralïi':73 'ostrelia':75 'ostreliya':54,92 'osutoraria':93 'otereiriya':76 'prath':94 'sojuz':37 'sotralii':72 'sotralïi':74 'sralygu':96 'tai':57 'tāi':103 'uc':14,77 'xxsterleiy':95,98 'ya':81 'yavstyralyyە':99 'ástralía':100 'ástràlìá':63 'ò':102 'ò-tāi-lī-a':101 'úc':16,106 'ɔstrelia':107 'ʻaositelēlia':108 'ʾwstrlyʾ':109 'αυστραλία':110 'австрали':111 'австралия':112 'австралија':113 'австралійський':114 'австралія':116 'аустралија':117 'аўстралія':118 'союз':115 'ավստրալիա':119 'אויסטראליע':120 'אוסטרליה':121 'אױסטראַליע':122 'آسٹریلیا':123 'آسټراليا':124 'أستراليا':125 'ئاۋستىرالىيە':126 'ئۆسترالیا':127 'استراليا':128 'استرالیا':129 'ܐܘܣܛܪܠܝܐ':130 'އޮސްޓަރުލިޔާ':131 'अष्ट्रेलिया':132 'ऑस्ट्रेलिया':133 'অস্ট্রেলিয়া':134 'অস্ট্রেলিয়া':135 'ઑસ્ટ્રેલિયા':136 'ଅଷ୍ଟ୍ରେଲିଆ':137 'ஆஸ்திரேலியா':138 'ఆస్ట్రేలియా':139 'ಆಸ್ಟ್ರೇಲಿಯ':140 'ഓസ്ട്രേലിയ':141 'ඕස්ට්‍රේලියාව':142 'ประเทศออสเตรเลีย':143 'ออสเตรเลีย':144 'ອົອດສະຕາລີ':145 'ཊེཡེ':152 'ཐ':148 'ཐེ':160 'ཡ':150,154,157,162 'ལ':149 'ལི':153,156,161 'ས':147 'སེ':159 'ཨ':146 'ཨས':151 'ཨསྟྲེ':155 'ཨོ':158 'ဩစတြေးလျ':163 'ავსტრალია':164 'አውስትሬሊያ':165 'អូស្ត្រាលី':166 'オーストラリア':168 '澳大利亚':169 '澳大利亞':170 '오스트레일리아':171 '호주':172), null)
#15 Phalcon\Mvc\Model-&gt;getRelated(Geoname, null)</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45709" data-cf-modified-17b0ee7cebfec5388b647b22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45709" data-cf-modified-17b0ee7cebfec5388b647b22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45713" href="#C45713">
                <time itemprop="dateCreated" datetime="2017-02-06T16:16:34-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Idk, maybe try to clear metadata if you are using apc/memcache or files?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45713" data-cf-modified-17b0ee7cebfec5388b647b22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45713" data-cf-modified-17b0ee7cebfec5388b647b22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eccaa895d8f0ec8396a466a4c2f73a89?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5459/moledet" class="user-moderator-N"><span itemprop="name">moledet</span></a>        </span>
        <br>

        <span class="karma">17.5k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45739" href="#C45739">
                <time itemprop="dateCreated" datetime="2017-02-08T06:15:57-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>the problem was on my class that overide phalcon Postgress connection for cache all queries, what a problem i don't understend but now but it's not a phalcon side</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45739" data-cf-modified-17b0ee7cebfec5388b647b22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45739" data-cf-modified-17b0ee7cebfec5388b647b22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="15467" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>