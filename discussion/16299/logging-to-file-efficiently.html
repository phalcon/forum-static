---
layout: default
title: 'Logging to file efficiently - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Logging to file efficiently</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a></span>
            <time itemprop="dateCreated" datetime="2017-06-10T19:10:02-07:00">Jun '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-06-10T19:10:02-07:00">Jun '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>723</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a></span>
                <span class="karma">9.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C16299" href="#C16299">
        <time class="action-date">Jun '17</time>
    </a>
</div>
<div class="post-content"><div><p>The logging to file page, <a href="https://docs.phalcon.io/en/3.0.1/reference/logging.html">https://docs.phalcon.io/en/3.0.1/reference/logging.html</a>, does not provide much information on how you might use loggong for recording unusual events in an active Web site. How do you make it available efficiently for irregular use?</p>
<p>I have a need to log some activity and the Phalcon log to file would be the best starting point, using mostly Phalcon code instead of my own code. I am thinking of making the logging available as a service so that it is always available anywhere. While the log would not be used in many page views, when it is used, it can be in any page and used several times.</p>
<p>What would be the easiest way to configure it in one place and grab it in any code?</p>
<p>If I start it in service.php, how do I access -&gt;log() in somewhere like indexAction()?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-be3b9f92ecbe094be4da147d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-be3b9f92ecbe094be4da147d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48677" href="#C48677">
                <time itemprop="dateCreated" datetime="2017-06-10T20:03:42-07:00" class="action-date">Jun '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I found this bit: <a href="https://forum.phalcon.io/discussion/6743/log-as-service">https://forum.phalcon.io/discussion/6743/log-as-service</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48677" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48677" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48689" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '17</span>
              </span><br/><a name="C48689" href="#C48689">
                <time itemprop="dateCreated" datetime="2017-06-11T16:35:40-07:00" class="action-date">Jun '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Started using the following code after some experiments. I now understand how the services are supplied to code.</p>
<p>The outer brackets are there to force the display into code mode.</p>
<pre><code>{

services.php:

use Phalcon\Logger;
use Phalcon\Logger\Adapter\File as LogFileAdapter;
$di-&gt;set("logger", function() use ($config)
    {
    $logger = new LogFileAdapter(APP_PATH . $config-&gt;application-&gt;logPath);
    return $logger;
    });

actionIndex():
$this-&gt;logger-&gt;info('indexAction() x: ' . $x);

}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48689" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48689" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48701" href="#C48701">
                <time itemprop="dateCreated" datetime="2017-06-12T02:53:55-07:00" class="action-date">Jun '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You should really use shared service most likely.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48701" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48701" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48723" href="#C48723">
                <time itemprop="dateCreated" datetime="2017-06-13T03:47:30-07:00" class="action-date">Jun '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sounds good. I am now reading <a href="https://docs.phalcon.io/en/3.0.0/reference/di.html#shared-services">https://docs.phalcon.io/en/3.0.0/reference/di.html#shared-services</a>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48723" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48723" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48725" href="#C48725">
                <time itemprop="dateCreated" datetime="2017-06-13T05:04:22-07:00" class="action-date">Jun '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well in controller accessing using <code>$this-&gt;logger</code> it will be no difference, but for example accessing it somewhere else with <code>$di-&gt;get()</code> with not shared will cause to create new instance.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48725" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48725" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48739" href="#C48739">
                <time itemprop="dateCreated" datetime="2017-06-13T15:34:40-07:00" class="action-date">Jun '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I read the documentation then looked in the Di code to find setShared. I used setShared and everything works. Changed another service to shared now that I understand the difference.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48739" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48739" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d70ff987c7a6303491da1f538eac35e0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1578/amsharma9" class="user-moderator-N"><span itemprop="name">Amal</span></a>        </span>
        <br>

        <span class="karma">16.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48761" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '17</span>
              </span><br/><a name="C48761" href="#C48761">
                <time itemprop="dateCreated" datetime="2017-06-14T06:18:08-07:00" class="action-date">Jun '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>See if this code helps.
<a href="https://github.com/mruz/base-app/blob/8b2c089c56014651833c80c5acb68ff7113b8e2d/app/Bootstrap.php#L463">https://github.com/mruz/base-app/blob/8b2c089c56014651833c80c5acb68ff7113b8e2d/app/Bootstrap.php#L463</a></p>
<p>This is from <code>base-app</code>, a layer built on top of phalcon by<a href="https://forum.phalcon.io/user/0/mruz"> @mruz</a>. Will check if I can find some example of how its called. The function should give you a good idea though.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48761" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48761" data-cf-modified-be3b9f92ecbe094be4da147d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="16299" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>