---
layout: default
title: 'Router, Annotations and addResource - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/14/annotations">Annotations</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Router, Annotations and addResource</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/127/suxxes" class="user-moderator-N"><span itemprop="name">Fedor</span></a></span>
            <time itemprop="dateCreated" datetime="2013-03-17T18:37:32-07:00">Mar '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-03-17T18:37:32-07:00">Mar '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>1802</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">3</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/9be8df14fd9d9dae72f539809e0c30aa?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/127/suxxes" class="user-moderator-N"><span itemprop="name">Fedor</span></a></span>
                <span class="karma">1.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C143" href="#C143">
        <time class="action-date">Mar '13</time>
    </a>
</div>
<div class="post-content"><div><p>Is it me, do I do something wrong or is it a bug?</p>
<p>With this gist â€” <a href="https://gist.github.com/suxxes/44eea5e6f347337dd72c">https://gist.github.com/suxxes/44eea5e6f347337dd72c</a> I get a structure like this:</p>
<p>public/index.php
app/controllers/AnyThingController.php
app/controllers/SomeThingController.php</p>
<p>Well, there obviously is a router.php, which is nothing, but the router file for PHP built-in WebServer, so we will not consider it.</p>
<p>The thing is, that when I visit /any/thing, I get:
string(31) &quot;AnyThingController::indexAction&quot;
Looks OK isn't it?</p>
<p>However when I visit /some/thing, I get:
string(32) &quot;SomeThingController::indexAction&quot;
string(48) &quot;Cannot obtain a route using the name &quot;any-thing&quot;&quot;</p>
<p>Which leads me to the thought, that annotations are being read only on used files, or am I wrong?</p>
<p>My Phalcon version is 0.9.0 and I'm running PHP 5.4.12 on Mac OS X 10.7</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">3</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d85988ab06bf0e1e57f72cda8fb7243e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/70/lantian" class="user-moderator-N"><span itemprop="name">Ivan Vorontsov</span></a>        </span>
        <br>

        <span class="karma">18.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C585" href="#C585">
                <time itemprop="dateCreated" datetime="2013-03-18T01:09:01-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I test this situation on Phalcon 1.0.0 Beta and everything is ok.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="585" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="585" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9be8df14fd9d9dae72f539809e0c30aa?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/127/suxxes" class="user-moderator-N"><span itemprop="name">Fedor</span></a>        </span>
        <br>

        <span class="karma">1.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C586" href="#C586">
                <time itemprop="dateCreated" datetime="2013-03-18T09:12:03-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks. Seems to be a bug-or-feature. To make it work on 0.9.0 you should remove $prefix argument for Router-&gt;addResource.</p>
<p>Otherwise you will have the error I had.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="586" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="586" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C588" href="#C588">
                <time itemprop="dateCreated" datetime="2013-03-18T14:07:43-07:00" class="action-date">Mar '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The controllers are only read if the current URI matches the prefix which the resource was registered, this saves the process of read every controller in every request which is not fine because it impacts performance. So the router does not know about the routes if the controller has not been read in the request. </p>
<pre><code class="language-php">$router-&gt;addResource('SomeThing');
$router-&gt;addResource('AnyThing');</code></pre>
<p>So, you can register your resources without prefixes but this will lead to increase the number of files read and parsed in every request.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="588" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="588" data-cf-modified-9fa426fa1b3d286b00dad30a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="143" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>