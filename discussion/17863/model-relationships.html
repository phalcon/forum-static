---
layout: default
title: 'Model Relationships - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Model Relationships</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/10105/costapombo1997" class="user-moderator-N"><span itemprop="name">costapombo1997</span></a></span>
            <time itemprop="dateCreated" datetime="2018-03-01T19:45:39-07:00">Mar '18</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2018-03-01T19:45:39-07:00">Mar '18</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>417</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c2399a53b025c0a010eaa2a621dea36d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/10105/costapombo1997" class="user-moderator-N"><span itemprop="name">costapombo1997</span></a></span>
                <span class="karma">7.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C17863" href="#C17863">
        <time class="action-date">Mar '18</time>
    </a>
</div>
<div class="post-content"><div><p>Hi,
When thinking about speed, it is better to use <strong>Phalcon's Virtual Foreign Keys</strong>  or it is better to use <strong>mysql relationships</strong> ? </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="54185" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '18</span>
              </span><br/><a name="C54185" href="#C54185">
                <time itemprop="dateCreated" datetime="2018-03-02T02:59:04-07:00" class="action-date">Mar '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>They don't do the same thing.</p>
<p>Phalcon VFK is for accessing related records with easily:</p>
<pre><code class="language-php">$user = User::findFIrst();
$language = $user-&gt;Language;
$language = $user-&gt;getLanguage();
$language = $user-&gt;getRelated('\MyModelNamespace\Language');</code></pre>
<p>Mysql relationships, on the other hand, are there to ensure data integrity.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54185" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54185" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c2399a53b025c0a010eaa2a621dea36d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/10105/costapombo1997" class="user-moderator-N"><span itemprop="name">costapombo1997</span></a>        </span>
        <br>

        <span class="karma">7.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="54187" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '18</span>
              </span><br/><a name="C54187" href="#C54187">
                <time itemprop="dateCreated" datetime="2018-03-02T04:58:38-07:00" class="action-date">Mar '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What about this ? </p>
<pre><code class="language-php">use Phalcon\Mvc\Model;
use Phalcon\Mvc\Model\Relation;

class Robots extends Model
{
    public $id;

    public $name;

    public function initialize()
    {
        $this-&gt;hasMany(
            "id",
            "Parts",
            "robots_id",
            [
                "foreignKey" =&gt; [
                    "action" =&gt; Relation::ACTION_CASCADE,
                ]
            ]
        );
    }
}</code></pre>
<p><a href="http://"><a href="https://olddocs.phalcon.io/en/3.0.0/reference/model-relationships.html#cascade-restrict-actions">https://olddocs.phalcon.io/en/3.0.0/reference/model-relationships.html#cascade-restrict-actions</a></a>
&quot;Relationships that act as virtual foreign keys by default restrict the creation/update/deletion of records to maintain the integrity of data:&quot;</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54187" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54187" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2619/emiliodeg" class="user-moderator-N"><span itemprop="name">Emilio Degiovanni</span></a>        </span>
        <br>

        <span class="karma">32.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C54195" href="#C54195">
                <time itemprop="dateCreated" datetime="2018-03-02T13:26:06-07:00" class="action-date">Mar '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think the consistency of data and their relationships would be better in the database</p>
<p>However, if you need, for example, to delete a file from a related model and the related models will be cascaded.
You must remove them before deleting the main model, since the database will delete the relation and then Phalcon will not find the records to be able to eliminate the models and the respective files.</p>
<p>Good luck</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54195" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54195" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C54199" href="#C54199">
                <time itemprop="dateCreated" datetime="2018-03-02T13:46:20-07:00" class="action-date">Mar '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I've personally never used Phalcon's Virtual Foreign Keys.  I use mysql's foreign keys all the time.</p>
<p>If speed is a concern when deleting, definitely go with mysql's foreign keys - that behaviour is much more optimized.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="54199" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="54199" data-cf-modified-a4d402ced4e15eed87b0a6bf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="17863" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>