---
layout: default
title: 'Increasing performance in controllers - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Increasing performance in controllers</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1159/wormkk" class="user-moderator-N"><span itemprop="name">wormkk</span></a></span>
            <time itemprop="dateCreated" datetime="2014-04-03T09:36:44-07:00">Apr '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-04-03T09:36:44-07:00">Apr '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>689</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/13860a79a7119d3e7d1748dcb09be0af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1159/wormkk" class="user-moderator-N"><span itemprop="name">wormkk</span></a></span>
                <span class="karma">29.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1986" href="#C1986">
        <time class="action-date">Apr '14</time>
    </a>
</div>
<div class="post-content"><div><pre><code class="language-q">public function initialize()
{
    $user = Users::findFirstById($id);
    $this-&gt;user = $user;
}</code></pre>
<p>Is this increasing performance when using <code>$this-&gt;user</code> in other actions, or is there more elegant way to not repeat <code>$user = Users::findFirstById($id);</code> in every action ????</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-40f463e3e3808ea17431a56d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-40f463e3e3808ea17431a56d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/737648ffa2e148ac2f82db46a84e2e8c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/403/unisys12" class="user-moderator-N"><span itemprop="name">Phillip Jackson</span></a>        </span>
        <br>

        <span class="karma">17.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6810" href="#C6810">
                <time itemprop="dateCreated" datetime="2014-04-03T10:50:24-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You are asking a very good question. </p>
<p>It depends on what your trying to accomplish with the data. if you are logging a user into your app, for example, you could use Sessions. You would find that user using the above method, upon login attempt. Upon successful login, you would fire up a session and store selected user details in that session. These details would then be avalible through the session object, which would free your app from having to make constant queries. </p>
<p>I cannot get into some examples, but I would suggest reading through a few bits for more info and ideas to get you started:</p>
<ul>
<li><a href="http://docs.phalcon.io/en/latest/reference/session.html">Phalcon Docs - Sessions</a></li>
<li><a href="http://docs.phalcon.io/en/latest/reference/controllers.html#session-data">Phalcon Docs - Controllers / SessionData</a></li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6810" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6810" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/80582ed6d5a70626d7ed846c9f370802?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/929/GesJeremie" class="user-moderator-N"><span itemprop="name">Ges Jérémie</span></a>        </span>
        <br>

        <span class="karma">1.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6812" href="#C6812">
                <time itemprop="dateCreated" datetime="2014-04-03T12:17:09-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hello,</p>
<p>If all methods in your controller must find this record, i think it's a great idea, it's really readable and more DRY. But you speak about increasing performance, imagine you get a simple method like &quot;superman()&quot; who doesn't use this record, it's useless to find this record ... Anyway, Phalconphp is really fast !</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6812" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6812" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/737648ffa2e148ac2f82db46a84e2e8c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/403/unisys12" class="user-moderator-N"><span itemprop="name">Phillip Jackson</span></a>        </span>
        <br>

        <span class="karma">17.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6813" href="#C6813">
                <time itemprop="dateCreated" datetime="2014-04-03T12:23:10-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Also you need to ask yourself this question, &quot;Will you need that
information in every method of that class?&quot;.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6813" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6813" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/13860a79a7119d3e7d1748dcb09be0af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1159/wormkk" class="user-moderator-N"><span itemprop="name">wormkk</span></a>        </span>
        <br>

        <span class="karma">29.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6814" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C6814" href="#C6814">
                <time itemprop="dateCreated" datetime="2014-04-03T12:39:50-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sorry, here is example:</p>
<pre><code class="language-q">class someController extends ControllerBase
{
    public function initialize()
    {
        $user = Users::findFirstById($id);

        $this-&gt;user = $user;

        // do something on $user
        $user-&gt;someRelations; //etc
    }

    public function editAction()
    {
        $this-&gt;user-&gt;someOtherRelations; //etc
    }
}</code></pre>
<p>I need allways do some operations on <em>Users</em> and related tables in <code>initialize()</code>, and other operations on <em>Users</em> and related tables in some Actions.</p>
<p>Is it better way/performance than (creating $user) <code>$user = Users::findFirstById($id);</code> in <code>editAction()</code> (omitting DRY)??</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6814" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6814" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6815" href="#C6815">
                <time itemprop="dateCreated" datetime="2014-04-03T13:26:28-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You probably forgot :  PHP is born to die.</p>
<p>On every request your apllication is start on zero.</p>
<p>If you are sure that the data has not changed, you can use Cookie or Session or localStorage.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6815" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6815" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/13860a79a7119d3e7d1748dcb09be0af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1159/wormkk" class="user-moderator-N"><span itemprop="name">wormkk</span></a>        </span>
        <br>

        <span class="karma">29.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6816" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C6816" href="#C6816">
                <time itemprop="dateCreated" datetime="2014-04-03T13:36:52-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>but I mean  - <code>initialize()</code> and <code>editAction()</code> in same request. Btw I think storing this data in sessions is not possible when using relations.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6816" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6816" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6818" href="#C6818">
                <time itemprop="dateCreated" datetime="2014-04-03T14:01:34-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Of course, <strong>initialize()</strong> and <strong>editAction()</strong> in same request. You can try <strong>onConstruct()</strong> action also. First calling initialize(), when object is construicted - onConstruct()</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6818" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6818" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6819" href="#C6819">
                <time itemprop="dateCreated" datetime="2014-04-03T14:51:05-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Putting that logic in <code>initialize()</code> as opposed to every action will not increase performance.  The code will need to be run once regardless, so you're not saving any cycles.</p>
<p>What you are saving is having duplicate code in each separate action.  If you've determined you need access to the current user for every action, then <code>initialize()</code> is the best place to put that logic.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6819" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6819" data-cf-modified-40f463e3e3808ea17431a56d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1986" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>