---
layout: default
title: 'Annotation runner and module registration with prefix - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/13/routing">Routing</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Annotation runner and module registration with prefix</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/530/llundin" class="user-moderator-N"><span itemprop="name">llundin</span></a></span>
            <time itemprop="dateCreated" datetime="2013-09-09T23:02:49-07:00">Sep '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-09-09T23:02:49-07:00">Sep '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>854</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/7fae578c6f5a2797881e4d4ec3a90d7b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/530/llundin" class="user-moderator-N"><span itemprop="name">llundin</span></a></span>
                <span class="karma">2.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C876" href="#C876">
        <time class="action-date">Sep '13</time>
    </a>
</div>
<div class="post-content"><div><p>I am using the annotation runner and when I add a prefix it seems to fall back to the default routing pattern.</p>
<pre><code class="language-php">   $router = new Phalcon\Mvc\Router\Annotations();
   $router-&gt;addModuleResource('frontend', 'Foo\Frontend\Controllers\Index', '/foo');
   $di-&gt;set('router', $router);</code></pre>
<pre><code class="language-php">/**
 * @RoutePrefix("/bar")
 */
class IndexController extends ControllerBase
{

    /**
     * @Get("/")
     */
        public function indexAction()
        {
            echo "foo";
        }

}</code></pre>
<p><a href="http://example.com/foo/bar/">http://example.com/foo/bar/</a> gives me
<code>php Phalcon\Mvc\Dispatcher-&gt;_throwDispatchException(FooController handler class cannot be loaded, 2)</code></p>
<p>Is there any obvious error in my code? I have tried multiple variants and it works without have the prefix in addModuleResource.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3378" href="#C3378">
                <time itemprop="dateCreated" datetime="2013-09-10T08:18:30-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The prefix in your app is different (<a href="https://forum.phalcon.io/user/0/RoutePrefix"> @RoutePrefix</a>(&quot;/bar&quot;)) than the one you're using to register the resource: addModuleResource('frontend', 'Foo\Frontend\Controllers\Index', '/foo')</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3378" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3378" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7fae578c6f5a2797881e4d4ec3a90d7b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/530/llundin" class="user-moderator-N"><span itemprop="name">llundin</span></a>        </span>
        <br>

        <span class="karma">2.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3380" href="#C3380">
                <time itemprop="dateCreated" datetime="2013-09-10T09:49:36-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>ok, only if they are equal it works. But then I dont understand the point to allow the prefix in addModuleResource?
If I remove the<a href="https://forum.phalcon.io/user/0/RoutePrefix"> @RoutePrefix</a> annotation, it fails. What I am looking for is to load the modules internal routing under a prefix. Can that be done the way I wanted to do it?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3380" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3380" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7fae578c6f5a2797881e4d4ec3a90d7b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/530/llundin" class="user-moderator-N"><span itemprop="name">llundin</span></a>        </span>
        <br>

        <span class="karma">2.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3381" href="#C3381">
                <time itemprop="dateCreated" datetime="2013-09-10T10:50:42-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>is the purpose of the prefix in the addModuleResource to enclose files for the annotations runner (performance win) and not to prepend the route regex?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3381" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3381" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3383" href="#C3383">
                <time itemprop="dateCreated" datetime="2013-09-10T18:17:04-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The purpose of addModuleResource is to tell the router that is must load the annotations in the class just if the current URI starts by the prefix specified there, this allows to avoid reading controllers and their annotations without need.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3383" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3383" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7fae578c6f5a2797881e4d4ec3a90d7b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/530/llundin" class="user-moderator-N"><span itemprop="name">llundin</span></a>        </span>
        <br>

        <span class="karma">2.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3384" href="#C3384">
                <time itemprop="dateCreated" datetime="2013-09-10T23:01:00-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>thanks phalcon. Also thanks for the great work. I will submit an NFR for this. Maybe it would be useful for more people.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3384" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3384" data-cf-modified-5ff09527e4b1aeca3addbf22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="876" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>