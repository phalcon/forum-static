---
layout: default
title: 'Views: Stop hierarchical propagation from the view file - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Views: Stop hierarchical propagation from the view file</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/11301/milanmadar" class="user-moderator-N"><span itemprop="name">milanmadar</span></a></span>
            <time itemprop="dateCreated" datetime="2018-06-16T10:48:25-07:00">Jun '18</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2018-06-16T10:48:25-07:00">Jun '18</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>340</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/768090a547d11e67fd55c691946f10b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/11301/milanmadar" class="user-moderator-N"><span itemprop="name">milanmadar</span></a></span>
                <span class="karma">953</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C18409" href="#C18409">
        <time class="action-date">Jun '18</time>
    </a>
</div>
<div class="post-content"><div><p>Hi,</p>
<p>I've read the docs about the hierarchical rendering levels, and how to disable certain levels from the controller or the DI setup:
<a href="https://docs.phalcon.io/en/3.3/views#disabling-render-levels">https://docs.phalcon.io/en/3.3/views#disabling-render-levels</a></p>
<p>I would like to do that from the view file that belongs to the action. So not from the controller, but from the /views/controllername/actionname.phtml . Is it possible?
I use the \MyPhalcon\View\PhpEngine.</p>
<p>In case you wonder why I want to do this:
Some of my forms needs to respond with just a partial HTML. So not the entire webpage. And I want to put that logic into the viwe file, not the controller. I consider Controller to be business loginc, I dont want to write things there that is doing things for the view. The controller (or rather, the person who writes the controllers) should not need t know about what will happen in the view. So I dont want to disable rendering levels in the controller files, but instead I want to do it in the view phtml files.</p>
<p>Thanks</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-a365954e27b7095498ff20d5-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-a365954e27b7095498ff20d5-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C56147" href="#C56147">
                <time itemprop="dateCreated" datetime="2018-06-18T01:45:28-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>We could argue about your approach and MVC here...</p>
<p>But the tech says that the views are executed last. </p>
<blockquote>
<p>Phalcon automatically passes the execution to the view component as soon as a particular controller has completed its cycle. </p>
</blockquote>
<p>Note here the part: <code>controller has completed its cycle</code></p>
<p>Have you tried to use partials for the task?</p>
<p><a href="https://github.com/phalcon/docs/blob/3.4/en/views.md/#using-partials">https://github.com/phalcon/docs/blob/3.4/en/views.md/#using-partials</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56147" data-cf-modified-a365954e27b7095498ff20d5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56147" data-cf-modified-a365954e27b7095498ff20d5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/768090a547d11e67fd55c691946f10b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11301/milanmadar" class="user-moderator-N"><span itemprop="name">milanmadar</span></a>        </span>
        <br>

        <span class="karma">953</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="56161" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '18</span>
              </span><br/><a name="C56161" href="#C56161">
                <time itemprop="dateCreated" datetime="2018-06-18T05:09:07-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you. So I keep that 1 line in the controller :)
$this-&gt;view-&gt;-&gt;setRenderLevel( \Phalcon\Mvc\View::LEVEL_ACTION_VIEW );</p>
<blockquote>
<p>We could argue about your approach and MVC here...</p>
</blockquote>
<p>Actually, that could be interesting and useful to me (and perhaps for others who happen to read it). So I know it could go off topic, but if you don't mind the effort, please do say your argument.</p>
<p>My idea: There 2 developers: one frontend, and one backend. And some info needs to be collected from the user, via a web form... </p>
<p>Backend person knows what info he needs from a form, so he creates the form, he passes it to the view, and he tells the frontent person to display it and send it back to a given URL with a POST request. So he writes the following in the controller (simplified):</p>
<pre><code>&lt;?php
// the form
$form = new MyForm();
$this-&gt;view-&gt;form = $form;

// the form was submitted
if($this-&gt;request-&gt;isPost())  {

    // valid or not
    $is_valid = $form-&gt;isValid( $this-&gt;request-&gt;getPos() );

    // tell the view that is was submitted, valid or not
    $this-&gt;view-&gt;form_submitted = true;
    $this-&gt;view-&gt;form_isvalid = $is_valid

    if($is_valid) {
       // save data, send email, etc
    }
}</code></pre>
<p>Frontend person works with the view files, so he displays the form. When the form was submitted, he needs a simple JSON response from the server. So at /app/view/controllername/actionname.phtml file he could write this:</p>
<pre><code>// form response
if($this-&gt;form_submitted) {
    if($form_isvalid) echo '{success:true};
    else echo '{success:false'};
    // and stop here, do not display the /app/view/layout/controllername.phtml, nor the /app/view/index.html

// display the form and the entire webpage
} else {
   // display $form here, submitting with AJAX.
   // let the hierarchy go on, so the full page will be displayed
}</code></pre>
<p>And when the frontend person changes the way the form behaves on the frontend, he can implement it by himself. Such as the form will no longer submit with AJAX, but submit &quot;normally&quot; so he does need the full page displayed again when the form was submitted (so he wants all the levels of the hierarchy). Or submit to an &lt;iframe&gt; that will respond with some javascript code and partial HTML.</p>
<p>So idea is that the frontend person doesn't need to write things into the controller. He can just deal with the view, in the view files. And the backend person doesn't need to know anything about the view files. So code for the Controller and View are separated.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56161" data-cf-modified-a365954e27b7095498ff20d5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56161" data-cf-modified-a365954e27b7095498ff20d5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/768090a547d11e67fd55c691946f10b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11301/milanmadar" class="user-moderator-N"><span itemprop="name">milanmadar</span></a>        </span>
        <br>

        <span class="karma">953</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C56165" href="#C56165">
                <time itemprop="dateCreated" datetime="2018-06-18T05:40:17-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>(sorry for the double post).
Edited my above post to give an example of how I thought it could work.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56165" data-cf-modified-a365954e27b7095498ff20d5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56165" data-cf-modified-a365954e27b7095498ff20d5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="18409" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>