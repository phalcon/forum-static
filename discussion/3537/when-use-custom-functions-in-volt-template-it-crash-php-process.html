---
layout: default
title: 'When use custom functions in Volt template it crash php process - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/3/volt">Volt</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">When use custom functions in Volt template it crash php process</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2359/iamolegko" class="user-moderator-N"><span itemprop="name">iamolegko</span></a></span>
            <time itemprop="dateCreated" datetime="2014-09-26T07:43:54-07:00">Sep '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-09-26T07:43:54-07:00">Sep '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>918</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/6ef18c7f32320b2202563b3d71807226?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2359/iamolegko" class="user-moderator-N"><span itemprop="name">iamolegko</span></a></span>
                <span class="karma">1.0k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3537" href="#C3537">
        <time class="action-date">Sep '14</time>
    </a>
</div>
<div class="post-content"><div><blockquote>
<p>Why didn't you provide error log before? And maybe you can show some functions?
Have you checked file names? Cauze UNIX systems are case sensitive!!</p>
</blockquote>
<p>this is what I added to php</p>
<pre><code class="language-php">$compiler = $volt-&gt;getCompiler();
$compiler-&gt;addFunction(
    'last',
    function ($resolvedArgs) use ($compiler) {
        return 'array_pop('. $resolvedArgs .')';
    }
);</code></pre>
<p>And use it in volt templates like</p>
<pre><code class="language-html">{% raw %}{%{% endraw %} set laseImage = last(data['media'][data['media']['order']['0']]['details']) {% raw %}%}{% endraw %}</code></pre>
<p>but it does not matter, which function I add and use. If it is custom - it crashes.</p>
<p>Errors go lower:</p>
<p>this is apache error </p>
<p>[Fri Sep 26 13:57:09.339902 2014] [proxy_fcgi:error] [pid 1482:tid 140607171278592] (104)Connection reset by peer: [client 1
0.0.2.2:59655] AH01075: Error dispatching request to :3080:
[Fri Sep 26 13:57:34.012455 2014] [proxy_fcgi:error] [pid 1481:tid 140607384831744] [client 10.0.2.2:59678] AH01067: Failed
to read FastCGI header
[Fri Sep 26 13:57:34.012455 2014] [proxy_fcgi:error] [pid 1481:tid 140607384831744] (104)Connection reset by peer: [client 1
0.0.2.2:59678] AH01075: Error dispatching request to :3080:</p>
<p>and this is PHP error log</p>
<p>[26-Sep-2014 13:43:15] NOTICE: [pool www] child 17136 started
[26-Sep-2014 13:56:43] WARNING: [pool www] child 17116 exited on signal 11 (SIGSEGV - core dumped) after 2250.932709 seconds
from start
[26-Sep-2014 13:56:43] NOTICE: [pool www] child 17213 started
[26-Sep-2014 13:57:06] WARNING: [pool www] child 17136 exited on signal 11 (SIGSEGV - core dumped) after 831.111451 seconds
from start
[26-Sep-2014 13:57:06] NOTICE: [pool www] child 17221 started
[26-Sep-2014 13:57:09] WARNING: [pool www] child 16523 exited on signal 11 (SIGSEGV - core dumped) after 31946.504889 second
s from start
[26-Sep-2014 13:57:09] NOTICE: [pool www] child 17224 started
[26-Sep-2014 13:57:34] WARNING: [pool www] child 17113 exited on signal 11 (SIGSEGV - core dumped) after 2574.330859 seconds
from start
[26-Sep-2014 13:57:34] NOTICE: [pool www] child 17233 started</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-250baf3555eaa457ce65e755-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-250baf3555eaa457ce65e755-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C11636" href="#C11636">
                <time itemprop="dateCreated" datetime="2014-09-26T10:27:43-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Are you using XDebug?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11636" data-cf-modified-250baf3555eaa457ce65e755-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11636" data-cf-modified-250baf3555eaa457ce65e755-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6ef18c7f32320b2202563b3d71807226?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2359/iamolegko" class="user-moderator-N"><span itemprop="name">iamolegko</span></a>        </span>
        <br>

        <span class="karma">1.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C11636"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Phalcon                    </a>
                </div><div class="posts-buttons" align="right"><a name="C11681" href="#C11681">
                <time itemprop="dateCreated" datetime="2014-09-29T00:51:16-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Are you using XDebug?</p>
</blockquote>
<p>I've installed it and run with it. I could not trace where it crashes. As soon as I try to render template with custom function, process crashes.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11681" data-cf-modified-250baf3555eaa457ce65e755-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11681" data-cf-modified-250baf3555eaa457ce65e755-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C11747" href="#C11747">
                <time itemprop="dateCreated" datetime="2014-09-30T06:46:30-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>A submitted a fix for this some days ago: <a href="https://github.com/xdebug/xdebug/pull/120">https://github.com/xdebug/xdebug/pull/120</a>,</p>
<p>You can disable xdebug to avoid this</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11747" data-cf-modified-250baf3555eaa457ce65e755-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11747" data-cf-modified-250baf3555eaa457ce65e755-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3537" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>