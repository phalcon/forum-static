---
layout: default
title: 'A nudge in the right direction.... - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">A nudge in the right direction....</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1065/mr-klaatu" class="user-moderator-N"><span itemprop="name">Mr Klaatu</span></a></span>
            <time itemprop="dateCreated" datetime="2014-02-18T10:51:42-07:00">Feb '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-02-18T10:51:42-07:00">Feb '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>1568</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a2ff16772535bdd35694c926c55becf3?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1065/mr-klaatu" class="user-moderator-N"><span itemprop="name">Mr Klaatu</span></a></span>
                <span class="karma">1.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1634" href="#C1634">
        <time class="action-date">Feb '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hi folks, I have a question, but first let me introduce myself.</p>
<p>After working in IT for over 30 years I am now retired. For the early part of my career I worked on real-time solutions for the military using assembler and ‘C’, and later spent a lot of time designing relational databases for the finance industry.</p>
<p>To keep me ‘busy’, I have decided to learn web design, PHP, Object Oriented techniques etc. I liked the sound of Phalcon and as soon as I discovered it was written in ‘C’, I dusted off my copy of Kurnighan &amp; Ritchie.</p>
<p>I am trying to get a handle on things like DI, Autoloading, Name Spaces and especially on what I used to call ‘scope’.  To this end I tried in vain to create a small ‘breadcrumbs’ class to add to the Vokuro starter app.</p>
<p>I have noticed that all the example apps tackle these issues differently and while I agree there are many ways to skin a cat, I have found that usually one way has advantages over some others.</p>
<p>Anyway, to my question(s)….</p>
<p>Is Vokuro a good starting point to learn Phalcon ?  I don’t want to start off with shaky foundations.
Could someone please show me how to build a breadcrumb class, and more importantly how to integrate it into the Vokuro example.  I’m sure that once I understand how it all hangs together I will have a much clearer picture of what is going on…  In particular I need guidance on how to load the class, and how to reference it in my controllers and views.</p>
<p>Don’t get me wrong, I do like the Phalcon concept and understand  that development of V2 has taken priority over documentation, but you can’t beat a good example and some quality documentation to get you up and running with something new.</p>
<p>I hope to not only learn from this great project but, once I gain some Phalcon proficiency I aim to help where ever possible and I am sure my experience in DB design my be useful to other Phalcon users. Who knows, there may even be some requirement to embed Phalcon onto a old Z80 cpu and there my experience will be invaluable :-)</p>
<p>Sorry for taking up so much time, but I wanted to both ask a question and introduce myself.</p>
<p>Mr Klaatu…. </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1fcf827b80188a603d1a52b9c8f8c859?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/940/jymboche" class="user-moderator-N"><span itemprop="name">jymboche</span></a>        </span>
        <br>

        <span class="karma">16.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5585" href="#C5585">
                <time itemprop="dateCreated" datetime="2014-02-19T09:17:11-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi Mr Klaatu and welcome to the forums! I see from your github profile that you also use Yii. One of the differences between Yii and phalcon is that Yii includes a lot of frontend &quot;Widgets&quot; in the core of the framework, like a menu widget and breadcrumb widget. Since phalcon doesn't include these &quot;widgets&quot; you can write them yourself. I usually like to setup a namespace for some of my presentation type classes like &quot;Widgets&quot; or &quot;Components&quot; like this:</p>
<pre><code class="language-php">$loader = new Phalcon\Loader();

$loader-&gt;registerNamespaces(array(
    'Widgets' =&gt; '/path/to/widgets/'
));

// then your class could look like this:
namespace Widgets;
class Breadcrumbs extends OtherClass
{
}</code></pre>
<p>Sometimes you will want to extend the Phalcon\Mvc\User\Component to give you access to the dependency injector and the services within it.</p>
<p>Then of course to instantiate your class just use $breadcrumbs = new \Widgets\Breadcrumbs()</p>
<p>Yii typically uses a $menu array thats a property of the controller class. And in your views $this references the controller. However in Phalcon $this within a view references the view itself. So figuring out the best way to use a breadcrumb class is application dependent.</p>
<p>If you havent already, check out the phalcon incubator which has some useful classes not included in the core:
<a href="https://github.com/phalcon/incubator">https://github.com/phalcon/incubator</a></p>
<p>Also the MVC repo has some good examples of different ways to setup a phalcon app:
<a href="https://github.com/phalcon/mvc">https://github.com/phalcon/mvc</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5585" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5585" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1eb2415bda000b22fd1f801bb9e8c003?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2/niden" class="user-moderator-Y"><span itemprop="name">Nikolaos Dimopoulos</span></a>        </span>
        <br>

        <span class="karma">39.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="5586" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C5586" href="#C5586">
                <time itemprop="dateCreated" datetime="2014-02-19T09:30:49-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Vokuro is a good example to start for sure. Invo as well as php-site also can serve as good programming examples for you to learn and move towards your goals.</p>
<p>As for the breadcrumbs the way I would do it is as follows:</p>
<p>Imagine your application structure as follows:</p>
<pre><code class="language-php">app/
app/controllers
app/models
app/views
library
library/MyNamespace
public</code></pre>
<p>Also in your index.php (the starting point of the application) you have this definition:</p>
<pre><code class="language-php">if (!defined('ROOT_PATH')) {
    define('ROOT_PATH', dirname(dirname(__FILE__)));
}</code></pre>
<p>If your full path of your files is </p>
<pre><code class="language-php">/var/www/myapplication/</code></pre>
<p>then the above line will give that path to you. You can use it throughout your app to reference files and folders</p>
<p>Create a breadcrumb class. This can reside in a library folder and you can set your autoloader to pick it up from there. Example:</p>
<pre><code class="language-php">// Creates the autoloader
$loader  = new \Phalcon\Loader();
$library = ROOT_PATH . '/library';

$loader-&gt;registerDirs([$library]);

// Register the Library namespace 
$loader-&gt;registerNamespaces(
    [
        'MyNamespace'             =&gt; $library,
        'MyNamespace\Controllers' =&gt; ROOT_PATH . '/app/controllers'
    ]
);

$loader-&gt;register();</code></pre>
<p>Now your application knows to look in the $library path and any namespaced class that you try to load with &quot;MyNamespace&quot; will also look in that library folder.</p>
<p>The breadcrumbs class is very simple to create:</p>
<pre><code class="language-php">&lt;?php
/**
 * Breadcrumbs.php
 * MyNamespace\Breadcrumbs
 *
 * Handles the breadcrumbs for the application
  */

namespace MyNamespace;

class Breadcrumbs
{
    /**
     * Keeps all the breadcrumbs
     *
     * @var array
     */
    private $elements = [];

    /**
     * Constructor
     */
    public function __construct()
    {
        $this-&gt;reset();
    }

    public function reset()
    {
        $this-&gt;elements[] = [
            'link' =&gt; '/',
            'text' =&gt; 'Home',
        ];
    }
    /**
     * Adds a new element in the stack
     *
     * @param string $caption
     * @param string $link
     */
    public function add($caption, $link)
    {
        $element = [
            'link' =&gt; '/' . $link,
            'text' =&gt; $caption,
        ];

        array_unshift($this-&gt;elements, $element);
    }

    /**
     * Returns all the elements back to the caller
     *
     * @return string
     */
    public function generate()
    {
        return $this-&gt;elements;
    }
}</code></pre>
<p>All my controllers extend a base controller which in turn extends the Phalcon controller. In there I generate the initial breadcrumb which in our case will be &quot;Home&quot; (set in the breadcrumbs class)</p>
<pre><code class="language-php">&lt;?php
/**
 * Controller.php
 * MyNamespace\Controller
 *
 * The base controller and its actions
 */

namespace MyNamespace;

use \MyNamespace\Breadcrumbs as MyBreadcrumbs;

class Controller extends \Phalcon\Mvc\Controller
{
    /**
     * Holds the Breadcrumbs object
     *
     * @var \MyNamespace\Breadcrumbs
     */
    protected $bc       = null;
    protected $viewVars = [];

    /**
     * Initializes the controller
     */
    public function initialize()
    {
        $this-&gt;bc = new MyBreadcrumbs();
    }

    /**
     * This sets all the view variables before rendering
     */
    public function afterExecuteRoute()
    {
        /**
         * This effectively will set the breadcrumbs array in the view
         * and will allow us to render it
         */
        $this-&gt;addViewVar('bc', $this-&gt;bc-&gt;generate());

        $this-&gt;view-&gt;setVars($this-&gt;viewVars);
    }

    protected function addViewVar($variable, $value)
    {
        $this-&gt;viewVars[$variable] = $value;
    }

    protected function resetViewVars()
    {
        $this-&gt;viewVars = [];
    }
}</code></pre>
<p>One of your controllers will look like this:</p>
<pre><code class="language-php">&lt;?php
/**
 * AboutController.php
 * AboutController
 *
 * The about controller and its actions
 */

namespace MyNamespace\Controllers;

use \MyNamespace\Controller as MyController;

class AboutController extends MyController
{
    /**
     * Initializes the controller
     */
    public function initialize()
    {
        parent::initialize();

        /**
         * Breadcrumbs for this section
         */
        $this-&gt;bc-&gt;add('About', 'about');
    }

    /**
     * The index action
     */
    public function indexAction()
    {
        /**
         * Breadcrumbs
         */
        $this-&gt;bc-&gt;add("Index", 'index');

    }

    /**
     * The index action
     */
    public function contactAction()
    {
        /**
         * Breadcrumbs
         */
        $this-&gt;bc-&gt;add("Contact", 'contact');

    }

}</code></pre>
<p>Then all you have to do in your view layout is to print those bookmarks:</p>
<pre><code class="language-php">&lt;div class="breadcrumbs"&gt;
    &lt;div class="btn-group"&gt;
        &lt;button class="btn dropdown-toggle" data-toggle="dropdown"&gt;Navigation &lt;span class="caret"&gt;&lt;/span&gt;&lt;/button&gt;
        {% raw %}{%{% endraw %} if bc is defined {% raw %}%}{% endraw %}
        &lt;ul class="dropdown-menu"&gt;
            {% raw %}{%{% endraw %} for breadcrumb in bc {% raw %}%}{% endraw %}
            &lt;li&gt;&lt;a href="{% raw %}{{{% endraw %} breadcrumb['link'] {% raw %}}}{% endraw %}"&gt;{% raw %}{{{% endraw %} breadcrumb['text'] {% raw %}}}{% endraw %}&lt;/a&gt;&lt;/li&gt;
            {% raw %}{%{% endraw %} endfor {% raw %}%}{% endraw %}
        &lt;/ul&gt;
        {% raw %}{%{% endraw %} endif {% raw %}%}{% endraw %}
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>The code above assumes you are using bootstrap for your CSS styling but it can be easily changed to whatever you like.</p>
<p>This should be a good starting point for you. </p>
<p>Issues to consider: Do you want to automatically print &quot;Home&quot; as the first breadcrumb? If no then you need to modify the breadcrumbs class. Also, how about checking if the element is the last one on the list so that it does not show a hyperlink...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5586" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5586" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a2ff16772535bdd35694c926c55becf3?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1065/mr-klaatu" class="user-moderator-N"><span itemprop="name">Mr Klaatu</span></a>        </span>
        <br>

        <span class="karma">1.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5596" href="#C5596">
                <time itemprop="dateCreated" datetime="2014-02-19T22:39:07-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Guys, </p>
<p>thank you very much for your detailed replies, they are exactly what I needed to set me off on the correct path. </p>
<p>I'm off now to play with my new found knowledge :-)</p>
<p>I am really looking forward to the future of Phalcon and I hope to be a regular / valuable contributor to these pages in the future.</p>
<p>Thanks again.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5596" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5596" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5713" href="#C5713">
                <time itemprop="dateCreated" datetime="2014-03-01T13:39:42-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Nikolaos">@Nikolaos</a>: good point, I was struggling with some conditionnal statements for my breadcrumb, your solution is more elegant ...
+1</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5713" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5713" data-cf-modified-82ab6bb2ade66a3053cbf93f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1634" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>