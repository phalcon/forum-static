---
layout: default
title: 'CLI args - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">CLI args</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/217/gdsmith" class="user-moderator-N"><span itemprop="name">George</span></a></span>
            <time itemprop="dateCreated" datetime="2013-05-24T01:05:22-07:00">May '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-05-24T01:05:22-07:00">May '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1730</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/23b36c2a8df4ede44d79353f117f7d68?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/217/gdsmith" class="user-moderator-N"><span itemprop="name">George</span></a></span>
                <span class="karma">3.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C356" href="#C356">
        <time class="action-date">May '13</time>
    </a>
</div>
<div class="post-content"><div><p>I'm trying to get the controller/method/args passed through to a command line script. In the following discussion it mentions a change in 1.1.0 which means you need to do something different. It doesn't, however, describe what it is you need to do. Can anyone help shed some light on what is needed to get the example code to work?</p>
<p><a href="https://forum.phalcon.io/discussion/277/cli-loads-only-maintask-class-mainaction-method">https://forum.phalcon.io/discussion/277/cli-loads-only-maintask-class-mainaction-method</a></p>
<p>Many thanks,
George</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3742f06ffede25799c74fb6b-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3742f06ffede25799c74fb6b-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/210/andresgutierrez" class="user-moderator-Y"><span itemprop="name">Andres Gutierrez</span></a>        </span>
        <br>

        <span class="karma">34.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1513" href="#C1513">
                <time itemprop="dateCreated" datetime="2013-05-24T11:53:00-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>These unit-tests provide examples of how the CLI bootstrap does work:</p>
<p><a href="https://github.com/phalcon/cphalcon/blob/1.1.0/unit-tests/ConsoleCliTest.php#L61">https://github.com/phalcon/cphalcon/blob/1.1.0/unit-tests/ConsoleCliTest.php#L61</a>
<a href="https://github.com/phalcon/cphalcon/blob/1.1.0/unit-tests/ConsoleCliTest.php#L79">https://github.com/phalcon/cphalcon/blob/1.1.0/unit-tests/ConsoleCliTest.php#L79</a>
<a href="https://github.com/phalcon/cphalcon/blob/1.1.0/unit-tests/ConsoleCliTest.php#L92">https://github.com/phalcon/cphalcon/blob/1.1.0/unit-tests/ConsoleCliTest.php#L92</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1513" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1513" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/23b36c2a8df4ede44d79353f117f7d68?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/217/gdsmith" class="user-moderator-N"><span itemprop="name">George</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1518" href="#C1518">
                <time itemprop="dateCreated" datetime="2013-05-24T12:41:26-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes, I saw that, I'm just not sure how to apply that to the following:</p>
<p>$app = new \Phalcon\CLI\Console();
$app-&gt;setDI($di);
$app-&gt;handle($_SERVER['argv']);</p>
<p>In other words, I can set the handle manually as per the unit tests, but I can't seem to work out how to get it to read in commands from the command line.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1518" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1518" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/210/andresgutierrez" class="user-moderator-Y"><span itemprop="name">Andres Gutierrez</span></a>        </span>
        <br>

        <span class="karma">34.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1520" href="#C1520">
                <time itemprop="dateCreated" datetime="2013-05-24T13:35:14-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You need explicitly set what parameter is the  task/module/action, etc:</p>
<pre><code class="language-php">$app-&gt;handle([
   'task' =&gt; $_SERVER['argv'][0]
   'action' =&gt; $_SERVER['argv'][1]
]);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1520" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1520" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/23b36c2a8df4ede44d79353f117f7d68?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/217/gdsmith" class="user-moderator-N"><span itemprop="name">George</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1522" href="#C1522">
                <time itemprop="dateCreated" datetime="2013-05-24T13:51:01-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Doesn't seems like a better solution, what if the user doesn't give all arguments? How do you handle the case eg:</p>
<pre><code>'module' =&gt; 'devtools',
'task' =&gt; 'main',
'action' =&gt; 'hello',
'World',
'######'</code></pre>
<p>Where the action takes potentially multiple input.</p>
<p>Is there some kind of parser?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1522" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1522" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/99c4e429c31ce6e1fd7b95adef882e9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/86/johnnyajax" class="user-moderator-N"><span itemprop="name">johnnyajax</span></a>        </span>
        <br>

        <span class="karma">2.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1672" href="#C1672">
                <time itemprop="dateCreated" datetime="2013-06-03T19:44:27-07:00" class="action-date">Jun '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This works for me atm. All tasks in one directory and without modules:</p>
<pre><code class="language-php">$loader = new \Phalcon\Loader();

$loader-&gt;registerDirs(array(
        __DIR__ .'/tasks/'
))-&gt;register();

//Using the CLI factory default services container
$di = new \Phalcon\DI\FactoryDefault\CLI();

//Create a console application
$console = new \Phalcon\CLI\Console();
$console-&gt;setDI($di);

$args = array();
$argv = $_SERVER['argv'];

$args['task'] = isset($argv[1]) ? $argv[1] : 'main';
$args['action'] = isset($argv[2]) ? $argv[2] : 'main';

unset($argv[0], $argv[1], $argv[2]);

$args['params'] = count($argv) &gt; 0 ? array_values($argv) : array();

$console-&gt;handle($args);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1672" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1672" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/cb710e7aa1e56100e0f3ff659b17fd12?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/216/matusch" class="user-moderator-N"><span itemprop="name">Daniel Matuschewsky</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1692" href="#C1692">
                <time itemprop="dateCreated" datetime="2013-06-05T08:08:21-07:00" class="action-date">Jun '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Maybe this helps: <a href="https://forum.phalcon.io/discussion/372/phalcon-cli-apps-with-namespaces-in-phalcon-loader#C1606">https://forum.phalcon.io/discussion/372/phalcon-cli-apps-with-namespaces-in-phalcon-loader#C1606</a></p>
<p>But I used it myself also a bit different. I just registered different directories with unique task names:</p>
<pre><code class="language-php">            $loader = new Phalcon\Loader();
            $loader
                // FIXME: Loader needs to runs with namespaces
                //-&gt;registerNamespaces($this-&gt;_taskDirectories)
                -&gt;registerDirs($this-&gt;_taskDirectories)
                -&gt;register();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1692" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1692" data-cf-modified-3742f06ffede25799c74fb6b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="356" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>