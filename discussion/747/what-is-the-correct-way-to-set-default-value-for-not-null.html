---
layout: default
title: 'What is the correct way to set default value for NOT NULL? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">What is the correct way to set default value for NOT NULL?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/116/alexzaporozhets" class="user-moderator-N"><span itemprop="name">alexzaporozhets</span></a></span>
            <time itemprop="dateCreated" datetime="2013-08-12T04:15:46-07:00">Aug '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-08-12T04:15:46-07:00">Aug '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">10</span>
                </td>
                <td>
                    <label>Views</label><br>7487</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">3</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/3232ac3d502de42d3be73b916ca007af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/116/alexzaporozhets" class="user-moderator-N"><span itemprop="name">alexzaporozhets</span></a></span>
                <span class="karma">15.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C747" href="#C747">
        <time class="action-date">Aug '13</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, I have a mysql table with column 'since_last_screenshot' NOT NULL DEFAULT '0'</p>
<p>I am getting an error, when trying to insert data ($screen-&gt;create()) without setting value for since_last_screenshot field.
SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'since_last_screenshot' cannot be null</p>
<p>Does Phalcon understand the default values from MySQL table definition?
What is the right way to set default values? using ORM? </p>
<p>Phalcon version 1.0</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-4420094d3b76200f5ad4fcea-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-4420094d3b76200f5ad4fcea-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">3</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2991" href="#C2991">
                <time itemprop="dateCreated" datetime="2013-08-13T07:37:59-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can pass a raw value telling the database to use the 'default' value:</p>
<pre><code class="language-php">&lt;?php

use Phalcon\Db\RawValue;

$r = new Robots();
$r-&gt;name = 'Hello';
$r-&gt;type = new RawValue('default');
$r-&gt;create();</code></pre>
<p><a href="https://docs.phalcon.io/en/latest/reference/models.html#skipping-columns">https://docs.phalcon.io/en/latest/reference/models.html#skipping-columns</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2991" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2991" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/3232ac3d502de42d3be73b916ca007af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/116/alexzaporozhets" class="user-moderator-N"><span itemprop="name">alexzaporozhets</span></a>        </span>
        <br>

        <span class="karma">15.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3001" href="#C3001">
                <time itemprop="dateCreated" datetime="2013-08-13T08:18:07-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>yes, but it is quite annoying to do it at every place where we need do insert/edit.</p>
<p>It is possible to set it inside the Model class?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3001" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3001" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3006" href="#C3006">
                <time itemprop="dateCreated" datetime="2013-08-13T09:25:12-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yep, you can move that logic to your class:</p>
<pre><code class="language-php">&lt;?php

use Phalcon\Mvc\Model,
    Phalcon\Db\RawValue;

class Robots extends Model
{
    public function beforeCreate()
    {
        if (!$this-&gt;type) { // use default value if the value is not set
            $this-&gt;type = new RawValue('default');
        }
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3006" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3006" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/1baf5073b80f8a6e4a7bb5024f24939d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/833/alexconrad" class="user-moderator-N"><span itemprop="name">alexconrad</span></a>        </span>
        <br>

        <span class="karma">2.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C7681" href="#C7681">
                <time itemprop="dateCreated" datetime="2014-05-06T16:24:06-07:00" class="action-date">May '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i think it should be </p>
<pre><code class="language-php">if (is_null($this-&gt;type)) { ... }</code></pre>
<p>because you can set type to zero and the default to be something else ...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="7681" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="7681" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/4171ad5b106ef60a8ba5673833ebdf4b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2485/xfight0" class="user-moderator-N"><span itemprop="name">Xfight</span></a>        </span>
        <br>

        <span class="karma">1.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C3006"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img  src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Phalcon                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="13765" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '14</span>
              </span><br/><a name="C13765" href="#C13765">
                <time itemprop="dateCreated" datetime="2014-11-28T19:48:10-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think if the developer doesn't indicate the value of a field, the field should be default in SQL table definition rather than using <code>NULL</code> to replace it.<br />
In most cases, developers want to the fields which are not indicated to be <code>DEFAULT</code>.</p>
<blockquote>
<p>Yep, you can move that logic to your class:</p>
<pre><code class="language-php">&lt;?php

use Phalcon\Mvc\Model,
   Phalcon\Db\RawValue;

class Robots extends Model
{
   public function beforeCreate()
   {
       if (!$this-&gt;type) { // use default value if the value is not set
           $this-&gt;type = new RawValue('default');
       }
   }
}</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13765" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13765" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/509052acbb1e409637d9e18f07e2fbec?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1944/maurits150" class="user-moderator-N"><span itemprop="name">Maurits</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13831" href="#C13831">
                <time itemprop="dateCreated" datetime="2014-12-01T15:37:57-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have personally solved it by putting this in my base model:</p>
<pre><code class="language-php">public function beforeValidationOnCreate() {
    $metaData = $this-&gt;getModelsMetaData();
    $attributes = $metaData-&gt;getNotNullAttributes($this);

    // Set all not null fields to their default value.
    foreach($attributes as $field) {
        if(!isset($this-&gt;{$field}) || is_null($this-&gt;{$field})) {
            $this-&gt;{$field} = new RawValue('default');
        }
    }
}</code></pre>
<p>The only thing I'm not sure about are the possible complications of setting fields like 'id' to the default, but it seems to work fine in my use case. This might also be slow if you don't cache metadata properly.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13831" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13831" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/15c836c2cdd6f72e2fcf9a230632768d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1177/cvsguimaraes" class="user-moderator-N"><span itemprop="name">Carlos Guimaraes</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14275" href="#C14275">
                <time itemprop="dateCreated" datetime="2014-12-18T13:50:53-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Maurits">@Maurits</a> Thanks for sharing that!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14275" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14275" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/bcb86a03b78026a223f83ca3162cf7eb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4789/xerron" class="user-moderator-N"><span itemprop="name">Edwin Manuel Cerrón Angeles</span></a>        </span>
        <br>

        <span class="karma">40.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C40621" href="#C40621">
                <time itemprop="dateCreated" datetime="2016-09-21T07:12:24-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In PHP7:</p>
<pre><code class="language-php">$this-&gt;type ?? new RawValue('default');</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="40621" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="40621" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/7512241adf8b7fb3e19c19c06f775ee3?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6503/afbora" class="user-moderator-N"><span itemprop="name">Ahmet Bora</span></a>        </span>
        <br>

        <span class="karma">58.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="49367" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '17</span>
              </span><br/><a name="C49367" href="#C49367">
                <time itemprop="dateCreated" datetime="2017-07-07T01:29:29-07:00" class="action-date">Jul '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code>public $sort = 0;
public $views = 0;</code></pre>
<p>Is this correct assign for default value?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="49367" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="49367" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/5862e25f0985b70f0e27a16a354d16f9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/11379/itbdw" class="user-moderator-N"><span itemprop="name">IT不倒翁 (Zhao Binyan)</span></a>        </span>
        <br>

        <span class="karma">480</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C13831"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img  src="https://secure.gravatar.com/avatar/509052acbb1e409637d9e18f07e2fbec?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Maurits                    </a>
                </div><div class="posts-buttons" align="right"><a name="C56561" href="#C56561">
                <time itemprop="dateCreated" datetime="2018-07-05T10:58:42-07:00" class="action-date">Jul '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Cool</p>
<blockquote>
<p>I have personally solved it by putting this in my base model:</p>
<pre><code class="language-php">public function beforeValidationOnCreate() {
  $metaData = $this-&gt;getModelsMetaData();
  $attributes = $metaData-&gt;getNotNullAttributes($this);

  // Set all not null fields to their default value.
  foreach($attributes as $field) {
      if(!isset($this-&gt;{$field}) || is_null($this-&gt;{$field})) {
          $this-&gt;{$field} = new RawValue('default');
      }
  }
}</code></pre>
<p>The only thing I'm not sure about are the possible complications of setting fields like 'id' to the default, but it seems to work fine in my use case. This might also be slow if you don't cache metadata properly.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56561" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56561" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/5862e25f0985b70f0e27a16a354d16f9?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/11379/itbdw" class="user-moderator-N"><span itemprop="name">IT不倒翁 (Zhao Binyan)</span></a>        </span>
        <br>

        <span class="karma">480</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C49367"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img  src="https://secure.gravatar.com/avatar/7512241adf8b7fb3e19c19c06f775ee3?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Ahmet Bora                    </a>
                </div><div class="posts-buttons" align="right"><a name="C56563" href="#C56563">
                <time itemprop="dateCreated" datetime="2018-07-05T10:59:10-07:00" class="action-date">Jul '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is very clever choice!</p>
<blockquote>
<p>public $sort = 0;
public $views = 0;</p>
<p>Is this correct assign for default value?</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56563" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56563" data-cf-modified-4420094d3b76200f5ad4fcea-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="747" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>