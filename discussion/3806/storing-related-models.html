---
layout: default
title: 'Storing Related Models - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Storing Related Models</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a></span>
            <time itemprop="dateCreated" datetime="2014-10-28T14:39:26-07:00">Oct '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-10-28T14:39:26-07:00">Oct '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Oct '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>608</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/e0889aad597f265d2c7e7fcacbdd669e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a></span>
                <span class="karma">657</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3806" href="#C3806">
        <time class="action-date">Oct '14</time>
    </a>
</div>
<div class="post-content"><div><p>I have read same disussions of these topic here in forum, but I have still some problems.
I tried to do this example from doc
<a href="https://docs.phalcon.io/en/latest/reference/models.html#storing-related-records">https://docs.phalcon.io/en/latest/reference/models.html#storing-related-records</a>
But I get a error that artist_id can not be null
I have defined the relations:</p>
<pre><code class="language-php">class Artists {
public $id;
public $name;
...
$this-&gt;hasMany('id', 'Albums', 'artist');</code></pre>
<p>and</p>
<pre><code class="language-php">class Albums {
public $id;
public $name;
public $artist_id;
...
$this-&gt;belongsTo('artists_id', 'Artists', 'id');</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-da213e974cdcd435f5323e5f-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-da213e974cdcd435f5323e5f-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/89d4060266d6642f29027585c82d7223?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2498/Xerton" class="user-moderator-N"><span itemprop="name">Xerton</span></a>        </span>
        <br>

        <span class="karma">7.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12637" href="#C12637">
                <time itemprop="dateCreated" datetime="2014-10-28T15:45:19-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Try to had alias in relation :</p>
<pre><code class="language-php">class Artists {
public $id;
public $name;
...
$this-&gt;hasMany('id', 'Albums', 'artist', array('alias' =&gt; 'album'));</code></pre>
<pre><code class="language-php">class Albums {
public $id;
public $name;
public $artist_id;
...
$this-&gt;belongsTo('artists_id', 'Artists', 'id', array('alias' =&gt; 'artist'));</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12637" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12637" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e0889aad597f265d2c7e7fcacbdd669e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a>        </span>
        <br>

        <span class="karma">657</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12644" href="#C12644">
                <time itemprop="dateCreated" datetime="2014-10-29T00:40:38-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I also have tried this. But I got the same error.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12644" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12644" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e0889aad597f265d2c7e7fcacbdd669e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a>        </span>
        <br>

        <span class="karma">657</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="12646" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '14</span>
              </span><br/><a name="C12646" href="#C12646">
                <time itemprop="dateCreated" datetime="2014-10-29T01:02:28-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sorry, I have simplified the Probelm of the example in the doc, but I see that there seems to be a kritical difference. But in my special case I have:</p>
<pre><code class="language-php">class Artists {
public $id;
public $name;
public $main_album;
...
$this-&gt;hasOne('main_album', 'Albums', 'id');</code></pre>
<pre><code class="language-php">class Albums {
public $id;
public $name;
public $artist;
...
$this-&gt;belongsTo('artist', 'Artists', 'id');</code></pre>
<pre><code class="language-php">$album = new Albums();
$ablum-&gt;name='Test';

$artist = new Artist();
$artist-&gt;name='An Artist';
$artist-&gt;artists=$album;//here I use the Name of the hasOne Relation</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12646" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12646" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e0889aad597f265d2c7e7fcacbdd669e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a>        </span>
        <br>

        <span class="karma">657</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12647" href="#C12647">
                <time itemprop="dateCreated" datetime="2014-10-29T01:40:38-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think, I should solve this problem with assigning the Ids.
But I have another problem in this context.
When I have a Model A, with a b_id column und a Model B.
If I assign the Relation in this way:</p>
<pre><code class="language-php">$this-&gt;hasOne('b_id', 'ModelB', 'id');</code></pre>
<p>But $modelA-&gt;modelB=$modelB seems not to work, I get the error that b_id can not be null.
How a 1:1 Relation must be declared?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12647" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12647" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12658" href="#C12658">
                <time itemprop="dateCreated" datetime="2014-10-29T07:39:21-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think it's in the other way:</p>
<pre><code>$this-&gt;hasOne('id', 'ModelB', 'this_id');</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12658" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12658" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e0889aad597f265d2c7e7fcacbdd669e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a>        </span>
        <br>

        <span class="karma">657</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12665" href="#C12665">
                <time itemprop="dateCreated" datetime="2014-10-29T11:09:49-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So there is no way, to have the relation cloumn in ModelA?
Or belongsTo must be used?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12665" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12665" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12682" href="#C12682">
                <time itemprop="dateCreated" datetime="2014-10-30T08:33:43-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You're doing it well: you use <code>hasOne(...)</code> in the two models. It would be OK doing:</p>
<pre><code>ModelA
$this-&gt;hasOne('id', 'ModelB', 'a_id');

ModelB
$this-&gt;hasOne('id', 'ModelA', 'b_id');</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12682" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12682" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e0889aad597f265d2c7e7fcacbdd669e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a>        </span>
        <br>

        <span class="karma">657</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12695" href="#C12695">
                <time itemprop="dateCreated" datetime="2014-10-30T14:01:38-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>two columns for one relation?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12695" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12695" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12705" href="#C12705">
                <time itemprop="dateCreated" datetime="2014-10-30T16:02:36-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah; <code>modelA</code> has a column that points to a record of <code>ModelB</code>, and the same in the other way. You said that is a <code>1:1</code> relationship, so you need to specify a column in each model that points to the referenced ID (or whatever it references) in the other model. If you don't do that, how you can know which record owns which record?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12705" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12705" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e0889aad597f265d2c7e7fcacbdd669e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2542/Unlikus" class="user-moderator-N"><span itemprop="name">Unlikus</span></a>        </span>
        <br>

        <span class="karma">657</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12711" href="#C12711">
                <time itemprop="dateCreated" datetime="2014-10-30T22:49:23-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>ModelA:</p>
<p>id
name
b_id</p>
<p>ModelB
id
name</p>
<p>when ModelB is related to ModelA then i can query in ModelA with WHERE b_id = id, or something like that. So 2 colums would be redundant</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12711" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12711" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12720" href="#C12720">
                <time itemprop="dateCreated" datetime="2014-10-31T07:43:38-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Then you will put <code>hasOne(...)</code> in <code>ModelB</code> and <code>belongsTo(...)</code> in <code>ModelA</code>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12720" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12720" data-cf-modified-da213e974cdcd435f5323e5f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3806" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>