---
layout: default
title: 'Dispatcher doesn&#039;t match my controller and action - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/13/routing">Routing</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Dispatcher doesn&#039;t match my controller and action</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/8857/Br4x" class="user-moderator-N"><span itemprop="name">Br4x</span></a></span>
            <time itemprop="dateCreated" datetime="2016-12-27T09:36:52-07:00">Dec '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-12-27T09:36:52-07:00">Dec '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>1029</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/702467c11b7da667b687a51a8f06d743?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/8857/Br4x" class="user-moderator-N"><span itemprop="name">Br4x</span></a></span>
                <span class="karma">1.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C15149" href="#C15149">
        <time class="action-date">Dec '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi folks !</p>
<p>I'm new to Phalcon and I'm stuck with my router.
It does give me the action and controller name, but the dispatcher doesn't link the controller and the action (always the default route).</p>
<p>I don't really know why ;(</p>
<p>Please help me.</p>
<p>my dispatcher:</p>
<pre><code class="language-php">
$di-&gt;set(
    'dispatcher',
    function () use ($di) {
        $eventsManager = new EventsManager;
        /**
         * Handle access control list using SecurityPlugin
        */
        $eventsManager-&gt;attach('dispatch:beforeDispatch', new Security);
        $eventsManager-&gt;attach("dispatch:beforeException", function($event, $dispatcher, $exception) {
            //Handle 404 exceptions
            if ($exception instanceof \Phalcon\Mvc\Dispatcher\Exception) {
                $dispatcher-&gt;forward(array(
                    'controller' =&gt; 'errors',
                    'action' =&gt; 'show404'
                ));
                return false;
            }

            //Handle other exceptions
            $dispatcher-&gt;forward(array(
                'controller' =&gt; 'errors',
                'action' =&gt; 'show503'
            ));

            return false;
        });

        $dispatcher = new Dispatcher;
        $dispatcher-&gt;setEventsManager($eventsManager);

        return $dispatcher;
    }
);</code></pre>
<p>and my router :</p>
<pre><code class="language-php">
use Phalcon\Mvc\Router;

$router = new Router(false);
$router-&gt;add(
    "/",
    [
        "controller" =&gt; "index",
        "action"     =&gt; "index",
    ]
);
$router-&gt;add(
    "/users/login",
    [
        "controller" =&gt; "users",
        "action"     =&gt; "login",
    ]
);

$router-&gt;handle($_SERVER['REQUEST_URI']);
return $router;
</code></pre>
<p>Thanks a lot guys !</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C44351" href="#C44351">
                <time itemprop="dateCreated" datetime="2016-12-27T09:56:49-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Please edit and format your code :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44351" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44351" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f5c6ce717e91b110b115c9353611c070?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3520/SevaJmurov" class="user-moderator-N"><span itemprop="name">Seva Jmurov</span></a>        </span>
        <br>

        <span class="karma">15.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="44355" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '16</span>
              </span><br/><a name="C44355" href="#C44355">
                <time itemprop="dateCreated" datetime="2016-12-27T13:04:46-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Have you add router to your di:</p>
<pre><code class="language-php">$di-&gt;set('router', require BASE_DIR . '/pathto/router.php');</code></pre>
<p>Also you can put aside dispatcher events for a while and check how router handles example routes.</p>
<pre><code class="language-php">&lt;?php // These routes simulate real URIs
$testRoutes = [
    '/',
    '/index',
    '/index/index',
    '/users/login',
    '/users'    
];

// Testing each route
foreach ($testRoutes as $testRoute) {

    // Handle the route
    $router-&gt;handle($testRoute);

    echo 'Testing ', $testRoute, '&lt;br&gt;';

    // Check if some route was matched
    if ($router-&gt;wasMatched()) {
        echo 'Module: ', $router-&gt;getModuleName(), '&lt;br&gt;';
        echo 'Controller: ', $router-&gt;getControllerName(), '&lt;br&gt;';
        echo 'Action: ', $router-&gt;getActionName(), '&lt;br&gt;';
    } else {
        echo 'The route wasn\'t matched by any route&lt;br&gt;';
    }

    echo '&lt;br&gt;';
}

die;

?&gt;</code></pre>
<p>And finally I'm not sure you need $_SERVER['REQUEST_URI'] in router handle</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44355" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44355" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/702467c11b7da667b687a51a8f06d743?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8857/Br4x" class="user-moderator-N"><span itemprop="name">Br4x</span></a>        </span>
        <br>

        <span class="karma">1.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="44363" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '16</span>
              </span><br/><a name="C44363" href="#C44363">
                <time itemprop="dateCreated" datetime="2016-12-28T01:09:56-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>First, thanks a lot for your quick answers</p>
<p><a href="https://forum.phalcon.io/user/0/Nikolay">@Nikolay</a> Mihaylov  I don't understand, i used the  '''php to insert my code.</p>
<p><a href="https://forum.phalcon.io/user/0/JaySJay">@JaySJay</a>  I already did the test for routes, and everything seems to work pretty well. But it don't do the action called in the controller called.</p>
<p>Testing /
Module:
Controller: index
Action: index</p>
<p>Testing /index
The route wasn't matched by any route</p>
<p>Testing /index/index
The route wasn't matched by any route</p>
<p>Testing /users/login
Module:
Controller: users &lt;- It does not the loginAction in my UsersController
Action: login</p>
<p>Testing /users
The route wasn't matched by any route</p>
<p>I forgot to mention that I use a nginx server (I don't know if it can have an impact).</p>
<p>When I remove in my router :</p>
<pre><code class="language-php">$router-&gt;add(
    "/",
    [
        "controller" =&gt; "index",
        "action"     =&gt; "index",
    ]
);</code></pre>
<p>and add :</p>
<pre><code class="language-php">$router-&gt;notFound(array('controller' =&gt; 'errors', 'action' =&gt; 'show404'));</code></pre>
<p>I get only 404 even with the others matching routes... At least this time it link with correct controller et action ! (o_0' )</p>
<p>Maybe this post is related with this one :
<a href="https://forum.phalcon.io/discussion/514/nginx-routing-problem">https://forum.phalcon.io/discussion/514/nginx-routing-problem</a></p>
<p>I give you my nginx conf</p>
<pre><code class="language-php">
server {
  listen *:80;
  server_name           dev.test.fr preprod.test.fr test.fr;

  index  index.php;

  access_log            /srv/log/nginx/test.access.log combined;
  error_log             /srv/log/nginx/test.error.log;

  location / {
    root      /srv/www/wimmo/htdocs/public;
    index     index.php;
    try_files $uri $uri/ /index.php?$args;
  }

  location ~ \.php$ {
    root          /srv/www/wimmo/htdocs/public;
    include       /etc/nginx/fastcgi_params;
    try_files     $uri =404;

    fastcgi_pass  phpupstream;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
  }
}
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44363" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44363" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f5c6ce717e91b110b115c9353611c070?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3520/SevaJmurov" class="user-moderator-N"><span itemprop="name">Seva Jmurov</span></a>        </span>
        <br>

        <span class="karma">15.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C44371" href="#C44371">
                <time itemprop="dateCreated" datetime="2016-12-28T03:50:01-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sorry, I'm not good at nginx setup.
But, yes, it could be due web server setup, and having your url rewriten incorrectly can cause router fail to process it.
To ckeck this you can echo/dump $_SERVER['REQUEST_URI'] straight from your router, before processing it. It should be exactly<code>/users/login</code> if you going <code>dev.test.fr/user/login</code>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44371" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44371" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/702467c11b7da667b687a51a8f06d743?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8857/Br4x" class="user-moderator-N"><span itemprop="name">Br4x</span></a>        </span>
        <br>

        <span class="karma">1.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C44373" href="#C44373">
                <time itemprop="dateCreated" datetime="2016-12-28T04:09:07-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah i got  'REQUEST_URI' =&gt; string '/users/login' (length=12)
that why i put $router-&gt;handle($_SERVER['REQUEST_URI']); in my router</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44373" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44373" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f5c6ce717e91b110b115c9353611c070?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3520/SevaJmurov" class="user-moderator-N"><span itemprop="name">Seva Jmurov</span></a>        </span>
        <br>

        <span class="karma">15.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="44393" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '16</span>
              </span><br/><a name="C44393" href="#C44393">
                <time itemprop="dateCreated" datetime="2016-12-28T04:49:45-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hm. I'm not sure, but I think you shoud try</p>
<pre><code class="language-php">$router-&gt;handle();</code></pre>
<p>instead of</p>
<pre><code class="language-php">$router-&gt;handle($_SERVER['REQUEST_URI']);</code></pre>
<p>also try to comment out</p>
<pre><code class="language-php">$eventsManager-&gt;attach('dispatch:beforeDispatch', new Security);</code></pre>
<p>I don't know what you have in your Security class, but it potentially can stop dispatcher from transfering request to required controller. (Also I wonder why you call contructor without brackets).</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44393" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44393" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/702467c11b7da667b687a51a8f06d743?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8857/Br4x" class="user-moderator-N"><span itemprop="name">Br4x</span></a>        </span>
        <br>

        <span class="karma">1.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C44399" href="#C44399">
                <time itemprop="dateCreated" datetime="2016-12-28T05:08:32-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks<a href="https://forum.phalcon.io/user/0/JaySJay"> @JaySJay</a>
Allright I tried everything, still the same result ...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44399" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44399" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f5c6ce717e91b110b115c9353611c070?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3520/SevaJmurov" class="user-moderator-N"><span itemprop="name">Seva Jmurov</span></a>        </span>
        <br>

        <span class="karma">15.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="44401" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '16</span>
              </span><br/><a name="C44401" href="#C44401">
                <time itemprop="dateCreated" datetime="2016-12-28T05:32:07-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm almost ran out of ideas.
Maybe you could try attach this event to your dispatcher(instead of all the others):</p>
<pre><code class="language-php">$eventsManager-&gt;attach("dispatch:beforeExecuteRoute", function($event, $dispatcher, $exception) {
            echo($dispatcher -&gt; getControllerName());
            echo('&lt;/br&gt;');
            echo($dispatcher -&gt; getActionName());
            die;
        });</code></pre>
<p>If it echoing your controller and action than it founds corresponding class and function, if not - something wrong with your loader/namespaces.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44401" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44401" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/702467c11b7da667b687a51a8f06d743?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8857/Br4x" class="user-moderator-N"><span itemprop="name">Br4x</span></a>        </span>
        <br>

        <span class="karma">1.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="44405" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '16</span>
              </span><br/><a name="C44405" href="#C44405">
                <time itemprop="dateCreated" datetime="2016-12-28T05:45:52-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It give me index index ;(
even if i am on /users/login</p>
<p>I dump the event in the beforeExecuteRoute attachment
And it find a matched Route.</p>
<p>I don't know on what source it does the matches.
Even if I use $router-&gt;handle($_SERVER['REQUEST_URI']);
protected '_matchedRoute' =&gt;
object(Phalcon\Mvc\Router\Route)[55]
protected '_pattern' =&gt; string '/' (length=1)
protected '_compiledPattern' =&gt; string '/' (length=1)
protected '_paths' =&gt;
array (size=2)
'controller' =&gt; string 'index' (length=5)
'action' =&gt; string 'index' (length=5)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44405" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44405" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/702467c11b7da667b687a51a8f06d743?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8857/Br4x" class="user-moderator-N"><span itemprop="name">Br4x</span></a>        </span>
        <br>

        <span class="karma">1.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C44407" href="#C44407">
                <time itemprop="dateCreated" datetime="2016-12-28T06:50:53-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Oh guys I found the problem !</p>
<p>It's in the nginx conf:</p>
<p>location / {
root      /srv/www/wimmo/htdocs/public;
index     index.php;
try_files $uri $uri/ /index.php?_url=$uri&amp;$args;
}</p>
<p>I add the _url and it worked !</p>
<p>Thanks for your help<a href="https://forum.phalcon.io/user/0/JaySJay"> @JaySJay</a> !</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44407" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44407" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/f5c6ce717e91b110b115c9353611c070?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3520/SevaJmurov" class="user-moderator-N"><span itemprop="name">Seva Jmurov</span></a>        </span>
        <br>

        <span class="karma">15.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="44409" data-toggle="modal" data-target="#historyModal">
                edited <span>Dec '16</span>
              </span><br/><a name="C44409" href="#C44409">
                <time itemprop="dateCreated" datetime="2016-12-28T07:29:32-07:00" class="action-date">Dec '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Not at all. You solved it yourself.</p>
<p>Yep, we should have checked <code>$router-&gt;getRewriteUri()</code> in router instead of <code>$SERVER[REQUEST_URI]</code> to figure something was wrong in web server config. <code>$SERVER[REQUEST_URI]</code> is always equal to initially requested path.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="44409" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="44409" data-cf-modified-4182bcd1c7683700cab3ea6f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="15149" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>