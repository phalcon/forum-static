---
layout: default
title: 'Model  fetch from view with constraint (1 field in where clause), save to table - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Model  fetch from view with constraint (1 field in where clause), save to table</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2783/gavinb2c" class="user-moderator-N"><span itemprop="name">gavinb2c</span></a></span>
            <time itemprop="dateCreated" datetime="2016-01-26T09:16:05-07:00">Jan '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-01-26T09:16:05-07:00">Jan '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>None</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">0</span>
                </td>
                <td>
                    <label>Views</label><br>378</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/aba61b32aff1793760cb540fc01395f3?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2783/gavinb2c" class="user-moderator-N"><span itemprop="name">gavinb2c</span></a></span>
                <span class="karma">3.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C10319" href="#C10319">
        <time class="action-date">Jan '16</time>
    </a>
</div>
<div class="post-content"><div><p>I need a model to fetch and save to different sources.</p>
<p>The fetch would be a view, that requires a constraint in the where clause.
The save would be to a table that matches the views returned schema exactly.</p>
<p>To give some background,  we have some tables containing indirect content as part of a localisation system.</p>
<p>Item :
title - content1
descrption - content2</p>
<p>content:
content1 = 'Great item', languageId = 1
content2= 'great description' , languageId = 1</p>
<p>Currently we fetch a models data,  and after the fetch, we run queries to obtain the indirect content,  in the active language,  and swap the id's on the models localised fields with the resolved content.
When we save, we do something similar,  and parse out the content of the indirect fields,  save them in the content table,  replace these fields on the model with the content id's.</p>
<p>Works great,  however,  it is not performant.</p>
<p>So I would like to instead obtain the record from a view,  which has already joined the content table, or hydrate the record via a custom query which would deal with the join (possibly better as more dynamic).</p>
<p>Then I need to save the model to its original table,  not the view.</p>
<p>Problems :</p>
<ol>
<li>I need pass a constraint - languageId - to the where clause of the source view.  Where is the correct place to do this?</li>
<li>I need to switch the table source (getSource) of instantiated models, I would rather not invalidate the meta data cache as this is potentially another performance issue.  Is there a way to do this?</li>
</ol>
<p>Thanks for any feedback / advice.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-e4b3ca733ae3fc5be425c809-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-e4b3ca733ae3fc5be425c809-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="10319" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>