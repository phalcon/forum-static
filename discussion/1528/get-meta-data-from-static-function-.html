---
layout: default
title: 'Get meta data from static function? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Get meta data from static function?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a></span>
            <time itemprop="dateCreated" datetime="2014-01-31T11:15:46-07:00">Jan '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-01-31T11:15:46-07:00">Jan '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1069</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a></span>
                <span class="karma">125.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1528" href="#C1528">
        <time class="action-date">Jan '14</time>
    </a>
</div>
<div class="post-content"><div><p>I'm writing a helper method to findFirst() that will work with multiple-column and non-integer keys.</p>
<p>To do so, I need to find the primary key columns of whatever model I'm using the function with.  Currently I do this:</p>
<pre><code class="language-php">$class = get_called_class();
$MetaData = new \Phalcon\Mvc\Model\MetaData\Memory();
$primary_keys = $MetaData-&gt;getPrimaryKeyAttributes(new $class());</code></pre>
<p>I hate to duplicate work though, so I wonder if Phalcon already has that information somewhere that I can access?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="5353" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C5353" href="#C5353">
                <time itemprop="dateCreated" datetime="2014-01-31T14:36:50-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,
Try this inside your model class</p>
<pre><code class="language-php">$primary_keys = $this-&gt;getModelsMetaData()-&gt;getPrimaryKeyAttributes($this);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5353" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5353" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5355" href="#C5355">
                <time itemprop="dateCreated" datetime="2014-01-31T14:48:36-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Like findFirst(), my function (findFirstByKey()) is a static function, so $this doesn't exist, and getModelsMetaData() can't be called statically.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5355" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5355" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="5357" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C5357" href="#C5357">
                <time itemprop="dateCreated" datetime="2014-01-31T16:23:26-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Maybe</p>
<pre><code class="language-php">class Robots extends \Phalcon\Mvc\Model
{
    public static function findFirstByKey()
    {
        $class = __CLASS__;
        $object = new $class();
        $primary_keys = $object-&gt;getModelsMetaData()-&gt;getPrimaryKeyAttributes( $object );
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5357" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5357" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5358" href="#C5358">
                <time itemprop="dateCreated" datetime="2014-01-31T16:33:35-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>That's functionally equivalent to the code I already posted in my first post.</p>
<p>My code is working - it does what I want.  I was merely wondering if the work I'm doing has already been done by Phalcon by the time I call findFirstByKey().  If that data has already been retrieved and parsed by Phalcon, there's no sense me doing it again.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5358" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5358" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5359" href="#C5359">
                <time itemprop="dateCreated" datetime="2014-01-31T16:42:47-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes it is the same functionality, but at this example you have only one model which you can use in your function findFirstByKey(), you doesn't need second model and created model as parameter which you can't use later
Better write NFR, maybe this function you try to write could be done in final 1.3 ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5359" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5359" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5360" href="#C5360">
                <time itemprop="dateCreated" datetime="2014-01-31T16:55:27-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sorry, I don't understand what you mean.</p>
<p>However, looking closer I do see that with yours, I don't need to make a new MetaData object.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5360" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5360" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5361" href="#C5361">
                <time itemprop="dateCreated" datetime="2014-01-31T17:16:45-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sorry:
&quot;you doesn't need second model&quot; should be you doesn't need second object :)</p>
<pre><code class="language-php">class Robots extends \Phalcon\Mvc\Model
{
    public static function findFirstByKey()
    {
        $class = __CLASS__; //in static method get_called_class you get __CLASS__ but in non static method you get controller class name if you call your function from  for eg IndexController
        $object = new $class(); //you create object which you can use later for whatever you want, you don't need to use new object from another class
        $primary_keys = $object-&gt;getModelsMetaData()-&gt;getPrimaryKeyAttributes( $object ); // you use the same object 
    }
}</code></pre>
<p>But as you said at the end functionality is the same :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5361" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5361" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="5395" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '14</span>
              </span><br/><a name="C5395" href="#C5395">
                <time itemprop="dateCreated" datetime="2014-02-03T11:11:37-07:00" class="action-date">Feb '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>re: get_called_class() vs <strong>CLASS</strong></p>
<p>My findFirstByKey() is defined in a BaseModel class that all my models extend. In this situation, calling <strong>CLASS</strong> gives me BaseModel, but <code>get_called_class()</code> properly gives me Robots.  The rest of the code still works, I just needed to keep using <code>get_called_class()</code>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5395" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5395" data-cf-modified-3d6409d17d81f766b8fe6ef3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1528" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>