---
layout: default
title: 'Can get controller &amp; action name from $_SERVER[&#039;REQUEST_URI&#039;] on phalcon v3.0.3 - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Can get controller &amp; action name from $_SERVER[&#039;REQUEST_URI&#039;] on phalcon v3.0.3</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/9147/dev-abm" class="user-moderator-N"><span itemprop="name">dev-abm</span></a></span>
            <time itemprop="dateCreated" datetime="2017-04-05T04:13:02-07:00">Apr '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-04-05T04:13:02-07:00">Apr '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>780</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/89f9a821f7d296738bfeedf1e9905dde?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/9147/dev-abm" class="user-moderator-N"><span itemprop="name">dev-abm</span></a></span>
                <span class="karma">3.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C15895" href="#C15895">
        <time class="action-date">Apr '17</time>
    </a>
</div>
<div class="post-content"><div><p>Hi all!</p>
<p>[My Question]</p>
<h1>&quot;Can get controller &amp; action name from $_SERVER['REQUEST_URI'] on phalcon v3.0.3?&quot;</h1>
<p>nginx.conf(aws)</p>
<hr />
<pre><code>    location ~ \.php {
        fastcgi_pass php-fpm;
        try_files     $uri =404;
        fastcgi_index /index.php;
        include fastcgi_params;
        fastcgi_split_path_info       ^(.+\.php)(/.+)$;
    }</code></pre>
<hr />
<p>When </p>
<p>ec2 ( Amazon Linux AMI ), Phalcon version:3.0.3, nginx/1.10.1, PHP 7.0.14 (fpm-fcgi) (built: Jan 18 2017 19:14:35)</p>
<p>invo/public/index.php</p>
<hr />
<pre><code>echo $application-&gt;handle(!empty($_SERVER['REQUEST_URI']) ? $_SERVER['REQUEST_URI'] : null)-&gt;getContent();</code></pre>
<hr />
<p>This don't moved.</p>
<p>But,
When </p>
<p>ec2 ( Amazon Linux AMI ), Phalcon 2.1.0r, nginx/1.10.1, PHP 7.0.14 (fpm-fcgi) (built: Jan 18 2017 19:14:35)</p>
<p>invo/public/index.php</p>
<hr />
<pre><code>echo $application-&gt;handle(!empty($_SERVER['REQUEST_URI']) ? $_SERVER['REQUEST_URI'] : null)-&gt;getContent();</code></pre>
<hr />
<p>this is moved.</p>
<p>When </p>
<p>windows10 ,  XAMPP control Panel v3.2.2 ,  Apache 2.0  , PHP Version 7.0.13 , Phalcon 3.0.3</p>
<p>invo/public/index.php</p>
<hr />
<pre><code>echo $application-&gt;handle(!empty($_SERVER['PATH_INFO']) ? $_SERVER['PATH_INFO'] : null)-&gt;getContent();</code></pre>
<hr />
<p>this is moved.</p>
<p>The PHP source code is not the same on those servers.
I'm sorry.</p>
<p>If there is the reason  other than PHP source code,
Please tell me the solution in that case.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-b838ae2c9414ba67a317f797-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-b838ae2c9414ba67a317f797-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2be7b5d170f5e65ee64b6378b91d3c48?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9019/409H" class="user-moderator-N"><span itemprop="name">H</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="47309" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '17</span>
              </span><br/><a name="C47309" href="#C47309">
                <time itemprop="dateCreated" datetime="2017-04-05T06:22:59-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Perhaps I misunderstand your question, but there's 2 setups you can use on Phalcon on nginx: <a href="https://docs.phalcon.io/en/3.0.0/reference/nginx.html">https://docs.phalcon.io/en/3.0.0/reference/nginx.html</a></p>
<blockquote>
<p>Using <code>$_GET['_url']</code> as source of URIs</p>
<p>Using <code>$_SERVER['REQUEST_URI']</code> as source of URIs:</p>
</blockquote>
<p>It seems your location block for php is wrong if you're trying to use <code>$_SERVER['REQUEST_URI']</code>. It should be;</p>
<pre><code>    location ~ \.php$ {
        try_files     $uri =404;

        fastcgi_pass  127.0.0.1:9000;
        fastcgi_index /index.php;

        include fastcgi_params;
        fastcgi_split_path_info       ^(.+\.php)(/.+)$;
        fastcgi_param PATH_INFO       $fastcgi_path_info;
        fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }</code></pre>
<p>To get the controller name, just use the getter from the router service;</p>
<pre><code>echo  $this-&gt;router-&gt;getControllerName();</code></pre>
<p>When you call the <code>handle()</code>, it should be like this (how I do it on my nginx platform)</p>
<pre><code>echo $objApplication-&gt;handle()-&gt;getContent();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47309" data-cf-modified-b838ae2c9414ba67a317f797-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47309" data-cf-modified-b838ae2c9414ba67a317f797-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/89f9a821f7d296738bfeedf1e9905dde?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9147/dev-abm" class="user-moderator-N"><span itemprop="name">dev-abm</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C47337" href="#C47337">
                <time itemprop="dateCreated" datetime="2017-04-06T02:53:51-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi ! H!!</p>
<p>Thank you so so much!!!</p>
<p>I solved it with your advice!!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47337" data-cf-modified-b838ae2c9414ba67a317f797-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47337" data-cf-modified-b838ae2c9414ba67a317f797-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2be7b5d170f5e65ee64b6378b91d3c48?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9019/409H" class="user-moderator-N"><span itemprop="name">H</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C47337"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/89f9a821f7d296738bfeedf1e9905dde?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        dev-abm                    </a>
                </div><div class="posts-buttons" align="right"><a name="C47341" href="#C47341">
                <time itemprop="dateCreated" datetime="2017-04-06T03:43:48-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Awesome! Glad to help :)</p>
<blockquote>
<p>Hi ! H!!</p>
<p>Thank you so so much!!!</p>
<p>I solved it with your advice!!</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47341" data-cf-modified-b838ae2c9414ba67a317f797-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47341" data-cf-modified-b838ae2c9414ba67a317f797-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="15895" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>