---
layout: default
title: 'handling javascript files containing php code - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">handling javascript files containing php code</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2183/ongley" class="user-moderator-N"><span itemprop="name">ongley</span></a></span>
            <time itemprop="dateCreated" datetime="2015-01-10T15:28:39-07:00">Jan '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-01-10T15:28:39-07:00">Jan '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>758</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/539e42b9b0420d0b0ac26cc86073590a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2183/ongley" class="user-moderator-N"><span itemprop="name">ongley</span></a></span>
                <span class="karma">1.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4438" href="#C4438">
        <time class="action-date">Jan '15</time>
    </a>
</div>
<div class="post-content"><div><p>I need to add via <code>addJs</code> method javascript code, that is dynamically created and dependent of php variables.</p>
<p>I got all javascript at the end of the page, so I want core js files to load first and then my custom file to be loaded - that is why I cannot do it in the view.</p>
<p>So I parsed it as a view with <code>partial</code>, and now I need to somehow pass it to addJs method.
How it can be done, or mayby there is a more natural way to do that?</p>
<p>UPD: I got custom files of <code>.pjs</code> extensions interpreted as php code but assigned <code>Content-Type</code> header of <code>application/javacsript</code>. How do I handle them inside of phalcon?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-17bfebaacdca8abd4d062cab-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-17bfebaacdca8abd4d062cab-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/306b83436a7d0d972007bf2daebf51fd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/21/benfavre" class="user-moderator-N"><span itemprop="name">Webdesign29</span></a>        </span>
        <br>

        <span class="karma">5.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14727" href="#C14727">
                <time itemprop="dateCreated" datetime="2015-01-10T19:07:24-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You should be outputing the variables to an inlined &lt;script&gt; tag and not trying to load a specific file.
You can then pickup on said variables in your main script.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14727" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14727" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/539e42b9b0420d0b0ac26cc86073590a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2183/ongley" class="user-moderator-N"><span itemprop="name">ongley</span></a>        </span>
        <br>

        <span class="karma">1.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C14727"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/306b83436a7d0d972007bf2daebf51fd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Webdesign29                    </a>
                </div><div class="posts-buttons" align="right"><a name="C14736" href="#C14736">
                <time itemprop="dateCreated" datetime="2015-01-11T04:28:32-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>You should be outputing the variables to an inlined &lt;script&gt; tag and not trying to load a specific file.
You can then pickup on said variables in your main script.</p>
</blockquote>
<p>That is not what I need.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14736" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14736" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/306b83436a7d0d972007bf2daebf51fd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/21/benfavre" class="user-moderator-N"><span itemprop="name">Webdesign29</span></a>        </span>
        <br>

        <span class="karma">5.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C14754" href="#C14754">
                <time itemprop="dateCreated" datetime="2015-01-11T07:31:25-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think you'll find it's only what you think you want.</p>
<p>What you are asking for does not make sense so I'm going to keep pointing you away from it, because if you knew how to code it, you'd know it's wrong, and in most cases extremely inneficient.</p>
<p>A static file is meant to be static.
Having a dynamic view is allready enough of a load for us to worry about so people engineered systems's like phalcon in zephir/c.</p>
<p>Javascript has loaders that could load the right file or files conditionnaly.
Config vars should be in the main or sub scripts and potentially overloaded on a view per view basis (inline). That's were you get the dynamic part you want.</p>
<p>Prove me wrong or describe the problem rather than the expected output if I'm trolling you, but i'm 90% sure I'm not.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14754" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14754" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/401d7f7f94108405cf7b22ed342c3226?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/110/kazzkiq" class="user-moderator-N"><span itemprop="name">Claudio Holanda</span></a>        </span>
        <br>

        <span class="karma">58.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14781" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14781" href="#C14781">
                <time itemprop="dateCreated" datetime="2015-01-11T13:24:00-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Having server-side code (PHP) inside client-side code (JavaScript) its a bad practice. They were made for, and should, work independently and communicate via some kind of API if a communication is needed.</p>
<p>A better approach would create your JavaScript code receiving some parameters that you send via your server-side code. Example:</p>
<pre><code class="language-js">// JavaScript
function mySuperFuncion(param1, param2){
    if(param1 === undefined || param2 === undefined){
        throw "I need two parameters to work properly.";
    }
    // do something with param1 and param2
}</code></pre>
<p>And then (assuming you will not use AJAX for it) you could call this funcion into your view (for example) passing the variables like:</p>
<pre><code class="language-html">{# Volt view #}
&lt;!-- ... --&gt;
&lt;button onclick="mySuperFunction({% raw %}{{{% endraw %}param1{% raw %}}}{% endraw %}, {% raw %}{{{% endraw %}param2{% raw %}}}{% endraw %})"&gt;Run my super awesome function!&lt;/button&gt;
&lt;!-- ... --&gt;</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14781" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14781" data-cf-modified-17bfebaacdca8abd4d062cab-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4438" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>