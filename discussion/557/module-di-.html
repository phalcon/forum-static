---
layout: default
title: 'Module di? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/10/di-ioc">DI/IoC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Module di?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/70/lantian" class="user-moderator-N"><span itemprop="name">Ivan Vorontsov</span></a></span>
            <time itemprop="dateCreated" datetime="2013-07-09T12:35:26-07:00">Jul '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-07-09T12:35:26-07:00">Jul '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">7</span>
                </td>
                <td>
                    <label>Views</label><br>1453</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">3</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/d85988ab06bf0e1e57f72cda8fb7243e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/70/lantian" class="user-moderator-N"><span itemprop="name">Ivan Vorontsov</span></a></span>
                <span class="karma">18.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C557" href="#C557">
        <time class="action-date">Jul '13</time>
    </a>
</div>
<div class="post-content"><div><p>Is there any possibility to inject into di some components at initialization moment?
For example: we have ModuleA and ModuleB. ModuleA have some component that must be accesable in ModuleB, is there some possibility?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-5f99e703d37f9232a325a11d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-5f99e703d37f9232a325a11d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">3</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/1eb2415bda000b22fd1f801bb9e8c003?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2/niden" class="user-moderator-Y"><span itemprop="name">Nikolaos Dimopoulos</span></a>        </span>
        <br>

        <span class="karma">39.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2290" href="#C2290">
                <time itemprop="dateCreated" datetime="2013-07-09T16:16:50-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can always register services in the DI using a lamda function. For instance:</p>
<pre><code class="language-php">$di = \Phalcon\DI\FactoryDefault();

$config = $di['config'];
$di['mycomponent'] = function () use ($config) {

    // Some things here with the config - perhaps
    $myclass = new \My\Class();

    return $myclass;
};</code></pre>
<p>and then you can access the service like so:</p>
<pre><code class="language-php">// from controller
$comp = $this-&gt;mycomponent;

// anywhere else
$di = \Phalcon\DI\FactoryDefault();

$comp = $di['mycomponent'];</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2290" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2290" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2296" href="#C2296">
                <time itemprop="dateCreated" datetime="2013-07-09T22:52:10-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Should probably be:</p>
<pre><code class="language-php">$di = new \Phalcon\DI\FactoryDefault();

or

$di = \Phalcon\DI\FactoryDefault::getDefault();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2296" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2296" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d85988ab06bf0e1e57f72cda8fb7243e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/70/lantian" class="user-moderator-N"><span itemprop="name">Ivan Vorontsov</span></a>        </span>
        <br>

        <span class="karma">18.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2297" href="#C2297">
                <time itemprop="dateCreated" datetime="2013-07-09T23:15:58-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No, Nikolaos, you didn't understand. I mean - in what moment this should be done? 'registerAutoloaders' and 'registerServices' is invoked only if request is directed on controller of ModuleB, when in ModuleA this functions doesn't invoked.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2297" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2297" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2299" href="#C2299">
                <time itemprop="dateCreated" datetime="2013-07-10T00:03:06-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Probably you need HMVC: <a href="https://github.com/phalcon/mvc/tree/master/hmvc">https://github.com/phalcon/mvc/tree/master/hmvc</a>
<a href="http://techportal.inviqa.com/2010/02/22/scaling-web-applications-with-hmvc/">http://techportal.inviqa.com/2010/02/22/scaling-web-applications-with-hmvc/</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2299" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2299" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d85988ab06bf0e1e57f72cda8fb7243e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/70/lantian" class="user-moderator-N"><span itemprop="name">Ivan Vorontsov</span></a>        </span>
        <br>

        <span class="karma">18.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2300" href="#C2300">
                <time itemprop="dateCreated" datetime="2013-07-10T00:23:32-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No, it's not the same. I need a module services across all modules, i want to share only service between them, not requests. Like it done in Symfony2 per Bundle (Dependency injection) - <a href="http://martinsikora.com/symfony2-and-dependency-injection">http://martinsikora.com/symfony2-and-dependency-injection</a> (Not exactly like that - per config or anything else, i mean that all modules have some function that will be called always per request, even if that request isn't intended to this module)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2300" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2300" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2303" href="#C2303">
                <time itemprop="dateCreated" datetime="2013-07-10T00:40:14-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>so Nikolaos aswer your question.
from your reference atricle </p>
<pre><code class="language-php">Basically that's all. Now we can use MyService in any controller:</code></pre>
<p>if you register any class in DI, then you can access it in every controller in your application.
bootstrap file </p>
<pre><code class="language-php">$di['elements'] = function() {
    return new Elements();
};</code></pre>
<p>your Elements class can extends extends \Phalcon\Mvc\User[Plugin|Module|Component] to access DI, or not and then using your Class as container of useful functions</p>
<p>using in controllers</p>
<pre><code class="language-php">$this-&gt;elements-&gt;function_in_elements_class();</code></pre>
<p>Is not the same?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2303" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2303" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d85988ab06bf0e1e57f72cda8fb7243e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/70/lantian" class="user-moderator-N"><span itemprop="name">Ivan Vorontsov</span></a>        </span>
        <br>

        <span class="karma">18.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2304" href="#C2304">
                <time itemprop="dateCreated" datetime="2013-07-10T00:50:03-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Oh, damn =). Look at example:</p>
<pre><code class="language-text">ModuleA:
 IndexController.php (indexAction)
 Module.php has 'registerAutoloaders' and 'registerServices'</code></pre>
<p>and</p>
<pre><code class="language-text">ModuleB:
 IndexController.php (indexAction)
 Module.php has 'registerAutoloaders' and 'registerServices'</code></pre>
<p>In both modules we have echo (with message 'initServieModuleA(B)) in 'registerServices' method and echo in controllers with message 'This is moduleA(B)'. Let's go in browser at url <a href="http://somesite.com/moduleA/index/index">http://somesite.com/moduleA/index/index</a> - we will see 'initServieModuleAThis is moduleA' ... and no messages about module B... if we go at <a href="http://somesite.com/moduleB/index/index">http://somesite.com/moduleB/index/index</a>  - we will see 'initServieModuleBThis is moduleB'....
So .. as u can see - other module hasn't been initialized per request... and u saying to me add into di service from controller. So if i try to go to <a href="http://somesite.com/moduleA/index/index">http://somesite.com/moduleA/index/index</a> and to use some service from moduleB - if will have no chance to that, coz it will be not injected into di.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2304" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2304" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2305" href="#C2305">
                <time itemprop="dateCreated" datetime="2013-07-10T00:59:25-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>ok Ivan, i understand it now. I would like to know answer to your question too. For now i have no idea how to do this.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2305" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2305" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d85988ab06bf0e1e57f72cda8fb7243e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/70/lantian" class="user-moderator-N"><span itemprop="name">Ivan Vorontsov</span></a>        </span>
        <br>

        <span class="karma">18.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2332" href="#C2332">
                <time itemprop="dateCreated" datetime="2013-07-10T11:06:06-07:00" class="action-date">Jul '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>As was discussed with andresgut: there is no way to do that.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2332" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2332" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bd5c5ab9a257e58d1bcfed0a69831457?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/568/DaanBiesterbos" class="user-moderator-N"><span itemprop="name">DaanBiesterbos</span></a>        </span>
        <br>

        <span class="karma">91</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3590" href="#C3590">
                <time itemprop="dateCreated" datetime="2013-09-24T15:57:23-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The question is clear. Although from another one's perspective it may no be clear enough.  I suppose Symphony2 does the same as Zend Framework 2.
I've noticed that phalcon works different.   In ZF2 you would have a configuration file or you would return configurations in a initialisation method in Module.php.<br />
All the configurations are processed ( en cached ) before any controller is dispatched.   It is a pretty nice concept actually because you can keep all configurations within the module and just call the object providing a uniform interface with in turn allowes decoupling of components in an elegant way. </p>
<p><a href="https://forum.phalcon.io/user/0/ivan">@ivan</a>
Im not sure about Symphony2 but in zf2 there is a /config/autoload folder which is used to store configuration files of (third party) modules thus allowing developers to manage configurations in 1 place and you could leave the module itself completely untouched. I've chosen the same approach to solve the problem we're having here.<br />
Simply create a folder autoload within the main config folder. Then put this snippet in index.php:</p>
<p>$dir = <strong>DIR</strong> . '/../config/autoload';
$autoload = glob($dir . '/*.config.php');
foreach ($autoload as $file) {
include_once($file);
}</p>
<p>All files that end with  *.config.php are now included. Something you may do in the config file is:<br />
$di['myservice'] = 'SomeNamespace\SomeClass';
You can now access the service anywhere throughout your application.</p>
<p>If there is a better solution. I would like to hear it. I've chosen this method because I'm familiar with the concept.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3590" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3590" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bd5c5ab9a257e58d1bcfed0a69831457?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/568/DaanBiesterbos" class="user-moderator-N"><span itemprop="name">DaanBiesterbos</span></a>        </span>
        <br>

        <span class="karma">91</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3591" href="#C3591">
                <time itemprop="dateCreated" datetime="2013-09-24T16:07:41-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ohw I forgot to mention. It is a good idea to name each config file by the name of the module.  Or use a prefix.
I normally use:  modulename.configtitle.config.php .  Do not combine configurations from different modules.
If you want to use your module in another project just do not forget to look in the autoload folder.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3591" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3591" data-cf-modified-5f99e703d37f9232a325a11d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="557" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>