---
layout: default
title: 'Strange routing behavior... - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/13/routing">Routing</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Strange routing behavior...</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/702/dompie" class="user-moderator-N"><span itemprop="name">dompie</span></a></span>
            <time itemprop="dateCreated" datetime="2013-12-22T16:57:57-07:00">Dec '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-12-22T16:57:57-07:00">Dec '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>546</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/6f2dcf80b3a50fbab60f01e56d57e650?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/702/dompie" class="user-moderator-N"><span itemprop="name">dompie</span></a></span>
                <span class="karma">8.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1362" href="#C1362">
        <time class="action-date">Dec '13</time>
    </a>
</div>
<div class="post-content"><div><p>Hello,</p>
<p>I'm new to phalcon and I'm asking myself if this behavior is &quot;usual&quot; - to me it looks like a bug:</p>
<pre><code class="language-php">/**
 * Registering a router
 */
$di['router'] = function() {

    $router = new Router();

    $router-&gt;setDefaultModule("frontend");
    $router-&gt;setDefaultNamespace("Myspace\Frontend\Controllers");
    $router-&gt;addGet("/api1/:action", array(
        'module' =&gt; 'frontend',
        'controller' =&gt; 'api',
        'action' =&gt; 1
    ));
    $router-&gt;addGet('/', array(
        'module' =&gt; 'frontend',
        'controller' =&gt; 'index',
        'action' =&gt; 'index'
    ));
    return $router;
};</code></pre>
<p>When the first route is called with correct parameters, I receive the following error mesesage:</p>
<ul>
<li>Myspace\Frontend\Controllers\Api1Controller handler class cannot be loaded</li>
</ul>
<p>Which is correct, because I expect &quot;ApiController&quot; to be loaded instead of &quot;Api1Controller&quot;(see documentation: <a href="https://docs.phalcon.io/en/latest/reference/routing.html#parameters-with-names">https://docs.phalcon.io/en/latest/reference/routing.html#parameters-with-names</a> ).
Am I missing something? Can't believe routing is faulty at this level.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-ae30e0e0730507a0c1fe6204-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-ae30e0e0730507a0c1fe6204-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4757" href="#C4757">
                <time itemprop="dateCreated" datetime="2013-12-23T02:36:38-07:00" class="action-date">Dec '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You have not set autoloading namespace in autoloader, may be.
Autoloader can be set globally.
And you have not determine action in first route also, but it's secondary obstacle.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4757" data-cf-modified-ae30e0e0730507a0c1fe6204-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4757" data-cf-modified-ae30e0e0730507a0c1fe6204-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6f2dcf80b3a50fbab60f01e56d57e650?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/702/dompie" class="user-moderator-N"><span itemprop="name">dompie</span></a>        </span>
        <br>

        <span class="karma">8.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4759" href="#C4759">
                <time itemprop="dateCreated" datetime="2013-12-23T06:31:58-07:00" class="action-date">Dec '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Autloading was setup correctly. I have now added an action entry to the array (and updated the source code from my first post to reflect this), but this doesn't change anything.
Autoloading is setup properly because when I change</p>
<pre><code class="language-php">$router-&gt;addGet("/api1/:action/$latlngPattern/$latlngPattern/$latlngPattern/$latlngPattern", array(</code></pre>
<p>to</p>
<pre><code class="language-php">$router-&gt;addGet("/api/:action/$latlngPattern/$latlngPattern/$latlngPattern/$latlngPattern", array(</code></pre>
<p>the proper action + controller is called (\Myspace\Frontend\Controllers\ApiController).</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4759" data-cf-modified-ae30e0e0730507a0c1fe6204-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4759" data-cf-modified-ae30e0e0730507a0c1fe6204-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1362" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>