---
layout: default
title: 'Application level Session Destroy through a function in controller - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/28/session">Session</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Application level Session Destroy through a function in controller</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2706/dominickinyanjui" class="user-moderator-N"><span itemprop="name">Dominic Kinyanjui</span></a></span>
            <time itemprop="dateCreated" datetime="2014-11-25T02:24:19-07:00">Nov '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-11-25T02:24:19-07:00">Nov '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>2319</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/75296831c33eb668045916530552233f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2706/dominickinyanjui" class="user-moderator-N"><span itemprop="name">Dominic Kinyanjui</span></a></span>
                <span class="karma">31.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4082" href="#C4082">
        <time class="action-date">Nov '14</time>
    </a>
</div>
<div class="post-content"><div><p>I know similar questions has been asked but didn't find answer in the discussions.</p>
<p>I want to destroy a session through  a function in  the application but it is not working. Is the issue with cache or cookies. I would like to know exactly what I should do.</p>
<p>My code is as shown below;</p>
<pre><code>        public function logoutAction(){

         $this-&gt;session-&gt;destroy();

         return $this-&gt;response-&gt;redirect('');
    }</code></pre>
<p>The session id is still set when I ran the above.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-7f93490106bf856cc4fb6571-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-7f93490106bf856cc4fb6571-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/75296831c33eb668045916530552233f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2706/dominickinyanjui" class="user-moderator-N"><span itemprop="name">Dominic Kinyanjui</span></a>        </span>
        <br>

        <span class="karma">31.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13622" href="#C13622">
                <time itemprop="dateCreated" datetime="2014-11-25T03:04:41-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>When I ran this;</p>
<pre><code>    $result = $this-&gt;session-&gt;destroy();
    var_dump($result); exit;

    boolean true ; </code></pre>
<p>is returned</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13622" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13622" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bdee79ea2680ec179fa34b9201fc74b7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1873/RompePC" class="user-moderator-N"><span itemprop="name">RompePC</span></a>        </span>
        <br>

        <span class="karma">33.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13623" href="#C13623">
                <time itemprop="dateCreated" datetime="2014-11-25T03:26:16-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I use <code>$this-&gt;session-&gt;set("whateverYouWant", null)</code> because I had the same problem with <code>destroy()</code>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13623" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13623" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/75296831c33eb668045916530552233f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2706/dominickinyanjui" class="user-moderator-N"><span itemprop="name">Dominic Kinyanjui</span></a>        </span>
        <br>

        <span class="karma">31.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="13627" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '14</span>
              </span><br/><a name="C13627" href="#C13627">
                <time itemprop="dateCreated" datetime="2014-11-25T04:37:39-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have notice that $this-&gt;session-&gt;destroy(); actually is effective but within that function. the task here is to make it destroy the session outside the function</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13627" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13627" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13640" href="#C13640">
                <time itemprop="dateCreated" datetime="2014-11-25T14:19:53-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Destroying the session doesn't destroy the <em>session</em> itself, but rather destroys any data associated with the session.  From the documentation:</p>
<blockquote>
<p>session_destroy() destroys all of the data associated with the current session. It does not unset any of the global variables associated with the session, or unset the session cookie. To use the session variables again, session_start() has to be called.</p>
<p>In order to kill the session altogether, like to log the user out, the session id must also be unset. If a cookie is used to propagate the session id (default behavior), then the session cookie must be deleted. setcookie() may be used for that. </p>
</blockquote>
<p>For the purposes of logging out, calling <code>$this-&gt;session-&gt;destroy()</code> should probably be sufficient.  You may also want to call <code>session_regenerate_id()</code> too.  Remember that Phalcon's session class doesn't re-invent the wheel - it's just a wrapper for PHP's built in session functionality, so any built-in session functions also work.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13640" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13640" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C28387" href="#C28387">
                <time itemprop="dateCreated" datetime="2015-12-29T07:15:19-07:00" class="action-date">Dec '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>After calling session destroy, you need to reload page, so dispatch user to another controoler, redirect to the home page etc.</p>
<p>This test shows such behaviour, and thus per controller basis you should use remove method instead of destroy.</p>
<pre><code class="language-php">
$this-&gt;session-&gt;isStarted(); // bool(true)
$this-&gt;session-&gt;has('Connexion'); //bool(true)
$this-&gt;session-&gt;get('Connexion'); //array(2) {
  ["guid"]=&gt;
  int(1474815656)
  ["accountID"]=&gt;
  int(12)
}
$this-&gt;session-&gt;destroy(); //bool(true)
$this-&gt;session-&gt;has('Connexion'); //bool(true)
$this-&gt;session-&gt;get('Connexion'); //array(2) {
  ["guid"]=&gt;
  int(1474815656)
  ["accountID"]=&gt;
  int(12)
}
$this-&gt;session-&gt;remove('Connexion'); //NULL
$this-&gt;session-&gt;has('Connexion'); //bool(false)
$this-&gt;session-&gt;get('Connexion'); //NULL</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="28387" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="28387" data-cf-modified-7f93490106bf856cc4fb6571-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4082" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>