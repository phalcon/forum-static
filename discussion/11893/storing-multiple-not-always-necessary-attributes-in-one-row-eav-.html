---
layout: default
title: 'Storing multiple, not always necessary attributes in one row - EAV implementation? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Storing multiple, not always necessary attributes in one row - EAV implementation?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4791/Dublerq" class="user-moderator-N"><span itemprop="name">Łukasz</span></a></span>
            <time itemprop="dateCreated" datetime="2016-06-21T07:50:30-07:00">Jun '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-06-21T07:50:30-07:00">Jun '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>487</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/6bbdc3470cff84e09d02995ebd85529c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4791/Dublerq" class="user-moderator-N"><span itemprop="name">Łukasz</span></a></span>
                <span class="karma">4.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11893" href="#C11893">
        <time class="action-date">Jun '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, is there any good EAV implementation for Phalcon? Making one by setting manually relationships for every single attribute would be very inelegant and dirty job.</p>
<p>What I'm trying to do is a mysql table for storing notifications and data for them. Let's say that I've got a few types of notifications and every type needs a few different attributes. I can see only three way of solving it:</p>
<ol>
<li>add all attributes to same table and set nulls for unused ones (in my opinion inelegant, makes table large) </li>
<li>store all non universal attributes in json attribute (come on, no filtering in selects? inacceptable)</li>
<li>EAV - long phql code or hand made relationships for every attribute (both are kinda dirty)</li>
</ol>
<p>I'm out of ideas, can anyone think of a better idea? </p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="35847" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C35847" href="#C35847">
                <time itemprop="dateCreated" datetime="2016-06-21T08:33:27-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well what just about:</p>
<pre><code>table notification
id, type etc
table attribute
id, name
table attributenotification
notification_id, attirubte_id, value</code></pre>
<p>Why you need it in one row ? What's a problem with this ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35847" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35847" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/6bbdc3470cff84e09d02995ebd85529c?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4791/Dublerq" class="user-moderator-N"><span itemprop="name">Łukasz</span></a>        </span>
        <br>

        <span class="karma">4.9k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C35847"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="35855" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C35855" href="#C35855">
                <time itemprop="dateCreated" datetime="2016-06-21T10:04:16-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Well what just about:</p>
<pre><code>table notification
id, type etc
table attribute
id, name
table attributenotification
notification_id, attirubte_id, value</code></pre>
<p>Why you need it in one row ? What's a problem with this ?</p>
</blockquote>
<p>And how would you define the relationships in models and how would you use such model? remember that there is more than one type of attributes</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35855" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35855" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35929" href="#C35929">
                <time itemprop="dateCreated" datetime="2016-06-23T05:08:35-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>EAV is specific. There's up to developer to implement such business logic. I don't think ther'e an easy access in Phalcon / ORM.</p>
<p>Entity–attribute–value model (EAV) is a data model to encode, in a space-efficient manner, entities where the number of attributes (properties, parameters) that can be used to describe them is potentially vast, but the number that will actually apply to a given entity is relatively modest. Such entities correspond to the mathematical notion of a sparse matrix. EAV is also known as object–attribute–value model, vertical database model and open schema.</p>
<p><code>https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model</code></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35929" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35929" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="35933" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C35933" href="#C35933">
                <time itemprop="dateCreated" datetime="2016-06-23T05:49:12-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What you mean by type of attributes ? You mean that you want attributes with same type in one property and another type in another property in model ? If yes then:</p>
<pre><code>table notification
id, type etc
table attribute
id, name, type_id
table attribute_type
id, name
table attributenotification
notification_id, attirubte_id, value</code></pre>
<p>But the problem would be with defining relationships. You should need there joins etc, tbh it can be done but it would be nasty. In relations you can pass in options <code>params</code> option as far as i know which will be passed to <code>::find()</code> method, it's somehow possible to make joins, even in <code>::find()</code> method but this will be nasty.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35933" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35933" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35937" href="#C35937">
                <time itemprop="dateCreated" datetime="2016-06-23T06:34:48-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>(example) Catalog EAV Attribute Table </p>
<pre><code> Column     Type    Comment
attribute_id    smallint(5) unsigned    Attribute ID
frontend_input_renderer varchar(255) NULL   Frontend Input Renderer
is_global   smallint(5) unsigned [1]    Is Global
is_visible  smallint(5) unsigned [1]    Is Visible
is_searchable   smallint(5) unsigned [0]    Is Searchable
is_filterable   smallint(5) unsigned [0]    Is Filterable
is_comparable   smallint(5) unsigned [0]    Is Comparable
is_visible_on_front smallint(5) unsigned [0]    Is Visible On Front
is_html_allowed_on_front    smallint(5) unsigned [0]    Is HTML Allowed On Front
is_used_for_price_rules smallint(5) unsigned [0]    Is Used For Price Rules
is_filterable_in_search smallint(5) unsigned [0]    Is Filterable In Search
used_in_product_listing smallint(5) unsigned [0]    Is Used In Product Listing
used_for_sort_by    smallint(5) unsigned [0]    Is Used For Sorting
apply_to    varchar(255) NULL   Apply To
is_visible_in_advanced_search   smallint(5) unsigned [0]    Is Visible In Advanced Search
position    int(11) [0] Position
is_wysiwyg_enabled  smallint(5) unsigned [0]    Is WYSIWYG Enabled
is_used_for_promo_rules smallint(5) unsigned [0]    Is Used For Promo Rules
is_required_in_admin_store  smallint(5) unsigned [0]    Is Required In Admin Store
is_used_in_grid smallint(5) unsigned [0]    Is Used in Grid
is_visible_in_grid  smallint(5) unsigned [0]    Is Visible in Grid
is_filterable_in_grid   smallint(5) unsigned [0]    Is Filterable in Grid
search_weight   float [1]   Search Weight
additional_data text NULL   Additional swatch attributes data </code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35937" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35937" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35939" href="#C35939">
                <time itemprop="dateCreated" datetime="2016-06-23T06:43:17-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Oh he means this by type ? Then i guess only one way is to store all values in some column like text :/ And then in afterFetch cast it to type which you want or something, don't really know how to solve it another way.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35939" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35939" data-cf-modified-a4db80ea43249629e5a5b9c7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11893" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>