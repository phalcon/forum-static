---
layout: default
title: 'How to work with routing in multimodule applications? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/13/routing">Routing</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How to work with routing in multimodule applications?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a></span>
            <time itemprop="dateCreated" datetime="2013-01-29T09:55:32-07:00">Jan '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-01-29T09:55:32-07:00">Jan '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">8</span>
                </td>
                <td>
                    <label>Views</label><br>8117</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">14</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a></span>
                <span class="karma">36.0k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C18" href="#C18">
        <time class="action-date">Jan '13</time>
    </a>
</div>
<div class="post-content"><div><p>Hello again :)</p>
<p>Is there simple way to produce links in multimodule application with 2 or more modules?</p>
<p>I mean:
I want to make simple links with the function \Phalcon\Tag::linkTo(array(&quot;auth/login&quot;, &quot;Login&quot;)). And then, if this function was executed in some controller of the &quot;Admin&quot; module, it produces the link: &quot;<a href="https://site.com/admin/auth/login">https://site.com/admin/auth/login</a>&quot;. So this link routes to the &quot;Auth&quot; controller of the Admin module...</p>
<pre><code class="language-php">Now I need to use:
    $router-&gt;add('/admin/:controller/:action/:params', array(
            'module' =&gt; "backend",
            'controller' =&gt; 1,
            'action' =&gt; 2,
            'params' =&gt; 3
        ));</code></pre>
<p>And in every link of the &quot;Admin&quot; module I need to write \Phalcon\Tag::linkTo(array(&quot;admin/auth/login&quot;, &quot;Login&quot;))... but it still not work ^)</p>
<p>Dear Phalcon, maybe you have guidlines how to organize the multimodule application with the front-end and the back-end (without describing each route in \Phalcon\Mvc\Router() and with sharing model's structure for both modules)?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3ba726cf6b80db413ab71861-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3ba726cf6b80db413ab71861-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">14</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C57" href="#C57">
                <time itemprop="dateCreated" datetime="2013-01-29T10:52:07-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>My answer is:</p>
<pre><code>$router-&gt;add('/admin', array(
        'module' =&gt; "backend",
        'action' =&gt; "index",
        'params' =&gt; "index"
));

$router-&gt;add('/admin/:controller', array(
        'module' =&gt; "backend",
        'controller' =&gt; 1,
        'action' =&gt; "index"
));

$router-&gt;add('/admin/:controller/:action/', array(
        'module' =&gt; "backend",
        'controller' =&gt; 1,
        'action' =&gt; 2
));

$router-&gt;add('/admin/:controller/:action/:params', array(
        'module' =&gt; "backend",
        'controller' =&gt; 1,
        'action' =&gt; 2,
        'params' =&gt; 3
    ));</code></pre>
<p>And I need to produce my own \Tag class that extends \Phalcon\Tag.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="57" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="57" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/3cc298e4fa0255fc91cb527d59fa8c54?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/43/mrspartak" class="user-moderator-N"><span itemprop="name">Assorium</span></a>        </span>
        <br>

        <span class="karma">4.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C59" href="#C59">
                <time itemprop="dateCreated" datetime="2013-01-29T11:09:24-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://github.com/phalcon/cphalcon/issues/365">https://github.com/phalcon/cphalcon/issues/365</a>
У меня была похожая проблема. К сожалению нормально сконфигурировать не вышло. Я вынес в подпапку /public/admin/ файл index.php с инициализацией и немного другими параметрами, к сожалению настроить нормальный редирект так и не получилось.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="59" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="59" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C65" href="#C65">
                <time itemprop="dateCreated" datetime="2013-01-29T13:39:08-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Check the Album O' Rama example, it has a common models directory: </p>
<p><a href="https://github.com/phalcon/album-o-rama/tree/master/common/models">https://github.com/phalcon/album-o-rama/tree/master/common/models</a></p>
<p>Just point the autoloader in the module autoloader to this directory,</p>
<p>Your routes seems to be fine, if you name them you can use the URL-reverse generator to produce urls from them:</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/url.html#generating-uris">https://docs.phalcon.io/en/latest/reference/url.html#generating-uris</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="65" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="65" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C66" href="#C66">
                <time itemprop="dateCreated" datetime="2013-01-29T13:46:25-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Добрый Вам!
Спасибо!</p>
<p>Почитал, понял что:</p>
<ol>
<li>
<p>Нужно УРЛ для ДИ определять в модулях приложения, тогда с адресами будет все норм.</p>
</li>
<li>Нужно не забывать о чудесной штуке redirect() - я че-то увлекся форвардами сильно :)</li>
</ol></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="66" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="66" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C78" href="#C78">
                <time itemprop="dateCreated" datetime="2013-01-29T15:36:41-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ok, to create the multimodule application with dividing the frontend and the backend we need to do the next:
Folder's structure:</p>
<pre><code class="language-php">app
  frontend
    Module.php
  backend
    Module.php
  models
public
...trash...</code></pre>
<p>In every Module.php we need to put such strings:</p>
<pre><code class="language-php">    class Module implements \Phalcon\Mvc\ModuleDefinitionInterface
    {
        public function registerAutoloaders()
        {
            $loader = new \Phalcon\Loader();
            $loader-&gt;registerNamespaces(
                array(
                    'Backend\Controllers' =&gt; '../app/backend/controllers/',
// For frontend's module.php: 'Frontend\Controllers' =&gt; '../app/backend/controllers/',
                )
            );
            $loader-&gt;register();
        }
        public function registerServices($di)
        {
                   $di-&gt;set('dispatcher', function() use ($di){
                    $dispatcher = new \Phalcon\Mvc\Dispatcher();
                    $dispatcher-&gt;setDefaultNamespace("Backend\Controllers\\");
// For frontend's module.php: $dispatcher-&gt;setDefaultNamespace("Frontend\Controllers\\");
                     return $dispatcher;
            });
            $di-&gt;set('view', function() {
                    $view = new \Phalcon\Mvc\View();
                    $view-&gt;setViewsDir('../app/backend/views/');
// For frontend's module.php: $view-&gt;setViewsDir('../app/frontend/views/');
                    return $view;
            });

// This function will 'divide' parts of the application with the correct url:
            $di-&gt;set('url', function() use ($di) {
                    $url = new \Phalcon\Mvc\Url();
                    $url-&gt;setBaseUri("/adminko/");
// For frontend module.php:  $url-&gt;setBaseUri("/");
                    return $url;
            });</code></pre>
<p>and dont forget to instance $router:</p>
<pre><code class="language-php">$router-&gt;add('/adminko', array(
'module' =&gt; "backend",
'action' =&gt; "index",
'params' =&gt; "index"
));

$router-&gt;add('/adminko/:controller', array(
'module' =&gt; "backend",
'controller' =&gt; 1,
'action' =&gt; "index"
));

$router-&gt;add('/admin/:controller/:action/:params', array(
'module' =&gt; "backend",
'controller' =&gt; 1,
'action' =&gt; 2,
'params' =&gt; 3
));</code></pre>
<p>And now the link &quot;<a href="https://site.com/adminko">https://site.com/adminko</a>&quot; will forward us to backend, where all links on the page will be prefixed with &quot;adminko&quot;.
The link &quot;<a href="https://site.com">https://site.com</a>&quot; will forward us to frontend, where all links on the page will be not prefixed.
It is very good behavior. But, unfortunately, in this case \Phalcon\Tag::stylesheetLink() and \Phalcon\Tag::javascriptInclude() will not work correctly.</p>
<p>But I have an another problem:
How to redirect the user to the frontend from the backend when the user pressed the link in the frontend with the backend's prefix?
And how to not redirect the user to the frontend from the backend when the user pressed the same link in the backend?</p>
<p>It's all about authorization. I want to authorize my users in the frontend and in the backend with single AuthController that situated in the backend. Now if authorization was success the user forwards to the backend's index page:</p>
<pre><code class="language-php">...
if ($this-&gt;security-&gt;checkHash($password, $user-&gt;password)) 
      {
                    $this-&gt;session-&gt;set('auth', 1);
                    return $this-&gt;response-&gt;redirect('index/index');
                    // return $this-&gt;dispatcher-&gt;forward(array('controller'=&gt;'index')); // the same behavior as redirect
      }</code></pre>
<p>Help me, please :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="78" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="78" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C82" href="#C82">
                <time itemprop="dateCreated" datetime="2013-01-29T16:28:52-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think that the base URI must be / for both modules:</p>
<pre><code class="language-php">$di['url'] = function(){
     $url = new \Phalcon\Mvc\Url();
     $url-&gt;setBaseUri("/");
    return $url;
};</code></pre>
<p>Create your URLs with names:</p>
<pre><code class="language-php">
$router = new Phalcon\Mvc\Router(false);

$router-&gt;add('/', array(
    'module' =&gt; "frontend",
    'controller' =&gt; "index",
    'action' =&gt; "index"
))-&gt;setName('front-index');

$router-&gt;add('/:controller', array(
    'module' =&gt; "frontend",
    'controller' =&gt; 1,
    'action' =&gt; "index"
))-&gt;setName('front-controller');

$router-&gt;add('/:controller/:action/:params', array(
    'module' =&gt; "frontend",
    'controller' =&gt; 1,
    'action' =&gt; 2,
    'params' =&gt; 3
))-&gt;setName('front-full');

$router-&gt;add('/adminko', array(
    'module' =&gt; "backend",
    'controller' =&gt; "index",
    'action' =&gt; "index"
))-&gt;setName('back-index');

$router-&gt;add('/adminko/:controller', array(
    'module' =&gt; "backend",
    'controller' =&gt; 1,
    'action' =&gt; "index"
))-&gt;setName('back-controller');

$router-&gt;add('/adminko/:controller/:action/:params', array(
    'module' =&gt; "backend",
    'controller' =&gt; 1,
    'action' =&gt; 2,
    'params' =&gt; 3
))-&gt;setName('back-full');
</code></pre>
<p>Then you can generate URLs from them:</p>
<pre><code class="language-php">echo $this-&gt;url-&gt;get(array('for' =&gt; 'back-full', 'controller' =&gt; 'users', 'action' =&gt; 'edit')), PHP_EOL;
echo $this-&gt;url-&gt;get(array('for' =&gt; 'front-controller', 'controller' =&gt; 'users', 'action' =&gt; 'edit')), PHP_EOL;
echo $this-&gt;url-&gt;get(array('for' =&gt; 'front-index')), PHP_EOL;</code></pre>
<p>Every route is generated by the URL service in Phalcon:</p>
<pre><code class="language-php">$this-&gt;response-&gt;redirect(array('for' =&gt; 'back-full', 'controller' =&gt; 'users', 'action' =&gt; 'edit', 'params' =&gt; 150)); // /adminko/users/edit/150
Phalcon\Tag::form(array('for' =&gt; 'back-full', 'controller' =&gt; 'users', 'action' =&gt; 'save')); // /adminko/users/save</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="82" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="82" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C87" href="#C87">
                <time itemprop="dateCreated" datetime="2013-01-30T11:46:56-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><ol>
<li>Why I can't use baseUri for the module if it solves my problem with prefixing all links on the page?
I really don't want to write such huge links in my app.</li>
<li>Using named url can solve problem with forwarding user from the backend controller to the frontend controller.
But how not to forward the user from the backend to the frontend if authorization was performed in the backend?</li>
</ol></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="87" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="87" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C88" href="#C88">
                <time itemprop="dateCreated" datetime="2013-01-30T13:35:37-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The baseUri is also used to generate the paths to static content, if you set your baseUri to /adminko all the javascript and css resources are prepended with the baseUri, /adminko/css/ while they're probably in /css/ </p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="88" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="88" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C89" href="#C89">
                <time itemprop="dateCreated" datetime="2013-01-30T13:42:51-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sure it is. So, for static content I just use HTML tags :) There is some logic: for non-static contend - use Phalcon tags, for static content - use HTML tags.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="89" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="89" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C91" href="#C91">
                <time itemprop="dateCreated" datetime="2013-01-30T14:18:39-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>And... hello again!
When I trying to redirect user from the backend to the frontend - Phalcon doesn't redirecting, I wrote</p>
<pre><code class="language-php">$url = array("for" =&gt; "frontend-full", "controller" =&gt; "spunchbob", "action" =&gt; "sit");
return $this-&gt;response-&gt;redirect($url);</code></pre>
<p>but the $dispather's namespace is Backend\Controllers</p>
<pre><code class="language-php">  protected '_activeHandler' =&gt; null
  protected '_finished' =&gt; boolean true
  protected '_namespaceName' =&gt; string 'Backend\Controllers\' (length=20)
  protected '_handlerName' =&gt; string 'spunchbob' (length=9)
  protected '_actionName' =&gt; string 'sit' (length=3)</code></pre>
<p>So, Phalcon redirects user to the backend's controller &quot;spunchbob&quot;. What I doing wrong?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="91" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="91" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C92" href="#C92">
                <time itemprop="dateCreated" datetime="2013-01-30T15:03:05-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ok. I was wrong - &quot;baseURI&quot; must be set to &quot;/&quot; for both modules... else it may crash $dispatcher (example above).</p>
<p>Dear Phalcon, tell me please, am I correct in its conclusions?:
If I need to use 2 modules than I must:</p>
<ul>
<li>Use the same &quot;baseURI&quot; for all modules.</li>
<li>Set for each module 3 named routes (for index, controller and full)</li>
<li>In every module (in every file of module) use URI generated with using the named route (to generate correct links).
???</li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="92" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="92" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C94" href="#C94">
                <time itemprop="dateCreated" datetime="2013-01-30T15:51:30-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm running this gist <a href="https://gist.github.com/4677808">https://gist.github.com/4677808</a> here <a href="https://test.phalcon.io/z.php">https://test.phalcon.io/z.php</a></p>
<p>And yes, you must use &quot;/&quot; for both modules, a global router for all the modules must be set in the application bootstrap,</p>
<p>Generating URLs from the named routes is optional, in fact, this is a strategy to change your routes at any moment without affecting the application, since all the routes are generated from them. If some day you change the prefix /adminko, it will be changed in the whole application. </p>
<p>But that is up to you, If you don't plan to implement that, you can use the static string routes too:</p>
<pre><code class="language-php">$this-&gt;response-&gt;redirect('adminko/users/edit');</code></pre>
<p>Or override the redirect method in the response component to prepend the custom base uri:</p>
<pre><code class="language-php">class MyResponse extends \Phalcon\Http\Response
{
    public function redirect($uri, $externalRedirect=false, $statusCode=302)
    {
        if ($this-&gt;getDI()-&gt;getRouter()-&gt;getModuleName() == 'backend') {
            return parent::redirect('/adminko/' . $uri, $externalRedirect, $statusCode);
        }
        return parent::redirect($uri, $externalRedirect, $statusCode);
    }
}</code></pre>
<pre><code class="language-php">$di['response'] = function(){
    return MyResponse();    
};</code></pre>
<p>Or create your own redirect method in the Controller:</p>
<pre><code class="language-php">&lt;?php

class SessionController extends Phalcon\Mvc\Controller
{
    protected function redirect($uri)
    {
        if ($this-&gt;router-&gt;getModuleName() == 'backend') {
            return $this-&gt;response-&gt;redirect('/adminko/' . $uri);
        }
        return $this-&gt;response-&gt;redirect($uri);
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="94" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="94" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C95" href="#C95">
                <time itemprop="dateCreated" datetime="2013-01-30T16:14:38-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you very much. It's very helpfull!</p>
<p>Redirect now works correctly, but there is problem with $this-&gt;dispatcher-&gt;forward(array(&quot;for&quot; = &quot;front-index&quot;)). Phalcon redirects me to the backend's index page instead of the frontend's index page. I don't use &quot;redirect&quot; in this way because I want to &quot;flash&quot; some messages to the user. Tell me please how to output &quot;smthng&quot; to user in backend and forward him to the frontend?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="95" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="95" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C96" href="#C96">
                <time itemprop="dateCreated" datetime="2013-01-30T16:25:16-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Dispatcher cannot forward between modules, the dispatcher is unique for each module so it only can forward in the current module. You can use the session flasher to send flash messages between modules: <a href="https://docs.phalcon.io/en/latest/reference/flash.html#implicit-flush-vs-session">https://docs.phalcon.io/en/latest/reference/flash.html#implicit-flush-vs-session</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="96" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="96" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C97" href="#C97">
                <time itemprop="dateCreated" datetime="2013-01-30T16:47:24-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sure! I forgot about session flasher :) And I forgot about instancing dispather in Module.php, sorry.</p>
<p>Now it's all clear. Can I ask you one last question?</p>
<p>Dear Phalcon, how do you think an authorization controller must be implemented in every module or only in one module (for ex. backend)? </p>
<ul>
<li>If only in one - what module must contain an authorization module (front or back)?</li>
<li>If in every module - maybe there is sense to create AuthorizationBase class that will be the base class of each Authorization controller?</li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="97" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="97" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C100" href="#C100">
                <time itemprop="dateCreated" datetime="2013-01-30T17:37:16-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It depends, it seems more logical in the backend, I assume that administration options are implemented there, I'm not clear about how the application is currently structured. </p>
<p>The Acl plugin could be registered on both modules or just one: </p>
<p>This shows how to register an Acl plugin in a module definition:
<a href="https://github.com/phalcon/mvc/blob/master/multiple/apps/backend/Module.php#L25">https://github.com/phalcon/mvc/blob/master/multiple/apps/backend/Module.php#L25</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="100" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="100" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/48537ea6460838b67043b973f132cabd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/23/aavolkoff" class="user-moderator-N"><span itemprop="name">aavolkoff</span></a>        </span>
        <br>

        <span class="karma">36.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C101" href="#C101">
                <time itemprop="dateCreated" datetime="2013-01-30T18:13:34-07:00" class="action-date">Jan '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you!
I tried to do so - to put athorization controller in the backend. But in most cases users must log in to application from the frontend (guests) and from the backend (admins). Algorithms of authorization are identical to both groups of users. So I tried to put in the frontend only forms for authorization with routing links to the backend module. Then I had troubles with &quot;back redirection&quot; to the frontend from the backend's actions...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="101" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="101" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/62ad5f2af55d314a22e2337a389971c8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/898/dphn" class="user-moderator-N"><span itemprop="name">dphn</span></a>        </span>
        <br>

        <span class="karma">3.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C4960" href="#C4960">
                <time itemprop="dateCreated" datetime="2014-01-12T03:39:49-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi! If you want an extended multimodal, watch this:
<a href="https://github.com/dphn/SkeletonApplication">https://github.com/dphn/SkeletonApplication</a></p>
<p>Here everything is as you would expect, and forward to other modules, and everything else. Here authorization and authentication can be done as individual modules. All can be configured using configuration files. Nothing hardcoded.</p>
<p><a href="https://forum.phalcon.io/user/1/phalcon">@Phalcon</a> Look. perhaps this code will be useful for the next version.
I think it's no problem to add 9 listeners to standard phalcon code.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="4960" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="4960" data-cf-modified-3ba726cf6b80db413ab71861-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="18" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>