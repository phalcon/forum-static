---
layout: default
title: 'Avoid possible SQL injections when using Model::findFirst(&quot;column = &#039;$value&#039;&quot;) - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/18/escaping-filtering">Escaping/Filtering</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Avoid possible SQL injections when using Model::findFirst(&quot;column = &#039;$value&#039;&quot;)</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1445/CheckMater" class="user-moderator-N"><span itemprop="name">Walter Pulido</span></a></span>
            <time itemprop="dateCreated" datetime="2014-10-23T19:45:31-07:00">Oct '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-10-23T19:45:31-07:00">Oct '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jan '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>3210</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/8c53379b6527781429c9664d9277ed2b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1445/CheckMater" class="user-moderator-N"><span itemprop="name">Walter Pulido</span></a></span>
                <span class="karma">12.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3772" href="#C3772">
        <time class="action-date">Oct '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, I want to know if there is a way for phalcon to automatically parse the data inputs I'm sending to the model with the purpose to avoid possible SQL injections, for example if I use:</p>
<pre><code class="language-php">Model::findFirst("column = '$value'"); //This is very similar to the examples given in the Phalcon documentation</code></pre>
<p>And $value has a single quote then Phalcon will show an SQL error because the quotes are not correctly closed and I think it will give problems with SQL injections.</p>
<p>Is there other way to set the query parameters using the example above? or do I need to do it manually?</p>
<p>Thanks-.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12520" href="#C12520">
                <time itemprop="dateCreated" datetime="2014-10-23T23:19:35-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If you use the ORM that way you're vulnerable to SQL injections, you have to use bound parameters to avoid them: <a href="https://docs.phalcon.io/en/latest/reference/models.html#binding-parameters">https://docs.phalcon.io/en/latest/reference/models.html#binding-parameters</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12520" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12520" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2bd646b9e648aab8099ff127357be152?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/447/ovr" class="user-moderator-N"><span itemprop="name">Dmitry Patsura</span></a>        </span>
        <br>

        <span class="karma">5.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12542" href="#C12542">
                <time itemprop="dateCreated" datetime="2014-10-25T21:06:26-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>refs <a href="https://forum.phalcon.io/discussion/3764/do-findfirst-automatically-clean-database-injection#C12477">https://forum.phalcon.io/discussion/3764/do-findfirst-automatically-clean-database-injection#C12477</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12542" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12542" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12605" href="#C12605">
                <time itemprop="dateCreated" datetime="2014-10-27T12:47:05-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Change it to:</p>
<pre><code class="language-php">Model::findFirst(["column = :value:",'bind'=&gt;['value'=&gt;$value]]);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12605" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12605" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a>        </span>
        <br>

        <span class="karma">20.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C12703" href="#C12703">
                <time itemprop="dateCreated" datetime="2014-10-30T15:53:14-07:00" class="action-date">Oct '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The documentation is very unclear on this. Or at least, badly worded. In one paragraph it says that Phalcon does this for you, then a few paragraphs later, it says you should use &quot;bound paramaters&quot; to safegurad against SQL injections. As a result I am still confused with what is safe and what isn't, so I tend to potencially waste time by over programming by preg_replacing (and other manual filtering) queries first, as I can't trust what is safe and what isn't. The DB side of things is probably the most complicated part of Phalcon, and there is no clear documentation for it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="12703" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">3</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="12703" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e57de23929009c54de7217c7419573b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2470/Pajamaman" class="user-moderator-N"><span itemprop="name">Pajamaman</span></a>        </span>
        <br>

        <span class="karma">5.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C12703"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Al                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="14563" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '15</span>
              </span><br/><a name="C14563" href="#C14563">
                <time itemprop="dateCreated" datetime="2015-01-04T20:47:57-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>The documentation is very unclear on this. Or at least, badly worded. In one paragraph it says that Phalcon does this for you, then a few paragraphs later, it says you should use &quot;bound paramaters&quot; to safegurad against SQL injections.</p>
</blockquote>
<p>I was under the impression Phalcon did this for you as well until reading this thread. But after reading the documentation again, I realized it's quite clear on this:</p>
<blockquote>
<p>Bound parameters are also supported in Phalcon\Mvc\Model. Although there is a minimal performance impact by using bound parameters, you are encouraged to use this methodology so as to eliminate the possibility of your code being subject to SQL injection attacks.</p>
</blockquote>
<p>This comes right after the section on filtering resultsets, so it means: when <strong>reading</strong> from the database, you should use bound parameters to avoid SQL injection. See <a href="https://docs.phalcon.io/en/latest/reference/models.html#binding-parameters">Binding Parameters</a>.</p>
<p>The part that may confuse beginners comes a little bit later under <a href="https://docs.phalcon.io/en/latest/reference/models.html#creating-updating-records">Creating/Updating Records</a>:</p>
<blockquote>
<p>Values assigned directly or via the array of attributes are escaped/sanitized according to the related attribute data type. So you can pass an insecure array without worrying about possible SQL injections:</p>
</blockquote>
<p>Then under <a href="https://docs.phalcon.io/en/latest/reference/models.html#avoiding-sql-injections">Avoiding SQL Injections</a>:</p>
<blockquote>
<p>Every value assigned to a model attribute is escaped depending of its data type. A developer doesn’t need to escape manually each value before storing it on the database. Phalcon uses internally the bound parameters capability provided by PDO to automatically escape every value to be stored in the database.</p>
</blockquote>
<p>In other words: when <strong>saving</strong> to the database, you don't need to worry about using bound parameters because Phalcon does this for you.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14563" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14563" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a>        </span>
        <br>

        <span class="karma">20.4k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C14563"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/e57de23929009c54de7217c7419573b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Pajamaman                    </a>
                </div><div class="posts-buttons" align="right"><a name="C14564" href="#C14564">
                <time itemprop="dateCreated" datetime="2015-01-04T22:40:15-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Pajamaman,
That's pretty good detective work! The docs are a bit cryptic, but your translation makes it much more clear. Thanks. I completed my first Phalcon development never being completely sure on this point and so I was manually filtering for good measure.</p>
<p>So data going in is automatically filtered and sanitised. Queries/data coming out need to be bound. That's concise. Thanks again!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="14564" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="14564" data-cf-modified-ed7e1e1a6f7881d8991b34c0-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3772" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>