---
layout: default
title: 'Clear the filled data of form in Phalcon Framework - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Clear the filled data of form in Phalcon Framework</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/11239/staroneweb" class="user-moderator-N"><span itemprop="name">staroneweb</span></a></span>
            <time itemprop="dateCreated" datetime="2018-05-29T07:50:53-07:00">May '18</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2018-05-29T07:50:53-07:00">May '18</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '18</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>919</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/7eca4fce7cc1e9ca3fd4ce518a04b151?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/11239/staroneweb" class="user-moderator-N"><span itemprop="name">staroneweb</span></a></span>
                <span class="karma">1.0k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C18331" href="#C18331">
        <time class="action-date">May '18</time>
    </a>
</div>
<div class="post-content"><div><p>I am new to phalcon and trying to learn this framework. I have created a simple form. Now, When I fill up the form, I am able to store the data in database. After submitting the form I want to be on the same page. Now the issue is, form is still have the filled data it is not clearing up. I have googled and found the clear() method to clear the form data but it seems that its not working. What to do?</p>
<p>Here is my code //Controller</p>
<pre><code>use Phalcon\Mvc\Controller;
class ProfileController extends Controller
{
    public function indexAction()
    {

        // Add some local CSS resources
        $this-&gt;assets-&gt;addCss("css/styles.css");
        $this-&gt;assets-&gt;addCss("css/bootstrap.min.css");

        // And some local JavaScript resources
        $this-&gt;assets-&gt;addJs("js/jquery.js");
        $this-&gt;assets-&gt;addJs("js/bootstrap.min.js");

    }

    public function createAction(){

        //create object of model class
        $profile = new Tbl_profile();

        $profile-&gt;fname= $this-&gt;request-&gt;getPost('firstname');
        $profile-&gt;lname= $this-&gt;request-&gt;getPost('lastname');
        $profile-&gt;email= $this-&gt;request-&gt;getPost('email');
        $success=$profile-&gt;save();

        if($success) {
            $this-&gt;flash-&gt;success("Profile created!");
            //redirect to same page.

            $this-&gt;dispatcher-&gt;forward(['action' =&gt; 'index']);
        }else {

        }

    }
}</code></pre>
<p>//views</p>
<pre><code>
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;?php $this-&gt;assets-&gt;outputCss(); ?&gt;
&lt;/head&gt;
&lt;body&gt;
        &lt;h4 class="ml-5 mt-2"&gt; Create Profile&lt;/h4&gt;
        &lt;?php echo $this-&gt;getContent(); ?&gt;
        &lt;?php echo $this-&gt;tag-&gt;form("profile/create") ?&gt;
        &lt;table class="table"&gt;
            &lt;tbody&gt;
                &lt;tr scope="row"&gt;
                    &lt;td&gt;First Name&lt;/td&gt;
                    &lt;td&gt;&lt;?php echo $this-&gt;tag-&gt;textField("firstname"); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr scope="row"&gt;
                    &lt;td&gt;Last Name&lt;/td&gt;
                    &lt;td&gt;&lt;?php echo $this-&gt;tag-&gt;textField("lastname"); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr scope="row"&gt;
                    &lt;td&gt;Email&lt;/td&gt;
                    &lt;td&gt;&lt;?php echo $this-&gt;tag-&gt;textField("email"); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr scope="row"&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;?php echo  $this-&gt;tag-&gt;submitButton("Create");?&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/tbody&gt;

        &lt;/table&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;```</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="55839" data-toggle="modal" data-target="#historyModal">
                edited <span>May '18</span>
              </span><br/><a name="C55839" href="#C55839">
                <time itemprop="dateCreated" datetime="2018-05-29T07:59:05-07:00" class="action-date">May '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>its jsut before your $_POST is filled with data otherwise this wont happen.</p>
<p>I use $this-&gt;response-&gt;redicrect(&quot;/home/index/register&quot;);//for ex in this cases to clear $_POST fields</p>
<p>otherwise if you F5 after submit, a new record will be created </p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="55839" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="55839" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/cfe29c6fec2b71ae311c675cdc3d7562?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6853/Hoet" class="user-moderator-N"><span itemprop="name">Hoet</span></a>        </span>
        <br>

        <span class="karma">4.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="55899" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '18</span>
              </span><br/><a name="C55899" href="#C55899">
                <time itemprop="dateCreated" datetime="2018-06-01T03:14:40-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Lets give you an example of how I handle forms in my applications nowadays.</p>
<p>Assume we have the following structure</p>
<pre><code>\
|-&gt; app
|   |-&gt; controllers
|   |   |-&gt; TestController.php
|   |-&gt; models
|   |   |-&gt; Test.php
|   |-&gt; forms
|   |   |-&gt; TestForm.php
|   |-&gt; views
|       |-&gt; index.volt
|-&gt; config
|   |-&gt; .....
|-&gt; public
|   |-&gt; index.php</code></pre>
<p>The file TestController.php</p>
<pre><code>&lt;?php
  namespace Controllers;

  use Models\Test;
  use Forms\TestForm;
  use Phalcon\Mvc\Controller;

  class TestController extends Controller
  {
    public function indexAction()
    {
      // Create a new and clean form object
      $form =new TestForm();

      // Check to see if we have a post submit
      if( $this-&gt;request-&gt;isPost( ))
      {
        // Create a new instance of the test model
        $model =new Test();

        // Bind the data from the $_POST into the form and model alike
        // The models set functions are used to set the files that can be set
        $form-&gt;bind( $this-&gt;request-&gt;getPost(), $model );

        // Validate the input
        if( $form-&gt;isValid( ))
        {
          // Save the model
          $result =$model-&gt;create();
          if( $result )
          {
            // If we get here then the instance of the test model was saved
            // Set you flash messages and redirect to another page
          }
          else
          {
            // Something went wrong when creating the test model.
            // Use $model-&gt;getMessages() to see what went wrong
            // var_dump( $model-&gt;getMessages())
          }
        }
        else
        {
          // The form could not be validated for some reason.
          // You can use the $form-&gt;getMessages() to see why that is the case
          // var_dump( $form-&gt;getMessages())
        }
      }

      // This sets a volt variable form so that you can use it in the index.volt template
      $this-&gt;view-&gt;setVar( 'form', $form );
    }
  }</code></pre>
<p>The content for the model Test.php</p>
<pre><code>&lt;?php
  namespace Models;

  use Phalcon\Mvc\Model;

  class Test extends Model
  {
    protected $id;
    protected $name;
    protected $surname;

    public function initialize()
    {
      $this-&gt;setSource( 'test' );
    }

    // =================
    // = Get Functions =
    // =================
    public function getId()
    {
      return $this-&gt;id;
    }

    public function getName()
    {
      return $this-&gt;name;
    }

    public function getSurname()
    {
      return $this-&gt;surname;
    }

    // =================
    // = Set Functions =
    // =================
    public function setName( $value )
    {
      $this-&gt;name =$value;
    }

    public function setSurname( $value )
    {
      $this-&gt;surname =$value;
    }
  }</code></pre>
<p>The file TestForm.php</p>
<pre><code>&lt;?php
  namespace Forms;

  use Phalcon\Forms\Form;
  use Phalcon\Forms\Element\Text;
  use Phalcon\Forms\Element\Hidden;
  use Phalcon\Forms\Element\TextArea;
  use Phalcon\Validation\Validator\PresenceOf;

  class TestForm extends Form
  {
    public function initialize( $entity=null, $options=null )
    {
      parent::initialize( $entity, $options );

      // Id
      $this-&gt;add(( new Hidden( 'id' )));

      // Csrf
      $this-&gt;add(
        ( new Hidden( 'csrf' ))
          -&gt;addValidators([
            new Identical([ 'value' =&gt; $this-&gt;security-&gt;getSessionToken() ]),
            new PresenceOf([ 'message' =&gt; 'csrf is required' ]),
          ]));

      // Name
      $this-&gt;add(
        ( new Text( 'name' ))
          -&gt;setLabel( 'Name' )
          -&gt;addValidators([
            new PresenceOf([ 'message' =&gt; 'Name is required' ]),
          ]));

      // Surname
      $this-&gt;add(
        ( new TextArea( 'surname' ))
          -&gt;setLabel( 'Surname' )
          -&gt;addValidators([
            new PresenceOf([ 'message' =&gt; 'Surname is required' ]),
          ]));
    }

    public function getValidationErrors( $field )
    {
      $output =[];

      foreach( $this-&gt;getMessagesFor( $field ) as $error ) $output[] =$error-&gt;getMessage();

      return $output;
    }
  }</code></pre>
<p>The file index.volt</p>
<pre><code>{# new.volt #}
&lt;div id="new" class="panel grid"&gt;

  {% raw %}{{{% endraw %} form( 'id':'test-form', 'name':'test-form', 'class': 'grid col-1-2' ) {% raw %}}}{% endraw %}

    {% raw %}{{{% endraw %} form.render( "id" ) {% raw %}}}{% endraw %}
    {#{% raw %}{{{% endraw %} form.render( "csrf", [ 'value': security.getToken() ]) {% raw %}}}{% endraw %}#}

    &lt;div class="form-group row"&gt;
      {% raw %}{{{% endraw %} form.label( 'name', [ 'class': 'col-4 col-form-label' ]) {% raw %}}}{% endraw %}
      &lt;div class="col-8"&gt;
        {% raw %}{{{% endraw %} form.render( "name", [ 'class': 'form-control' ]) {% raw %}}}{% endraw %}
        &lt;div class="errors"&gt;
          {% raw %}{%{% endraw %} for error in form.getValidationErrors( "name" ) {% raw %}%}{% endraw %}
            &lt;span&gt;{% raw %}{{{% endraw %} error {% raw %}}}{% endraw %}&lt;/span&gt;
          {% raw %}{%{% endraw %} endfor {% raw %}%}{% endraw %}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="form-group row"&gt;
      {% raw %}{{{% endraw %} form.label( 'surname', [ 'class': 'col-4 col-form-label' ]) {% raw %}}}{% endraw %}
      &lt;div class="col-8"&gt;
        {% raw %}{{{% endraw %} form.render( "surname", [ 'class': 'form-control' ]) {% raw %}}}{% endraw %}
        &lt;div class="errors"&gt;
          {% raw %}{%{% endraw %} for error in form.getValidationErrors( "surname" ) {% raw %}%}{% endraw %}
            &lt;span&gt;{% raw %}{{{% endraw %} error {% raw %}}}{% endraw %}&lt;/span&gt;
          {% raw %}{%{% endraw %} endfor {% raw %}%}{% endraw %}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="form-block col right"&gt;
      &lt;button type="submit"&gt;Create&lt;/button&gt;
    &lt;/div&gt;

  {% raw %}{{{% endraw %} end_form() {% raw %}}}{% endraw %}

&lt;/div&gt;</code></pre>
<p>I have disabled the csrf line in the template. Every form you use must have a csrf in it to protected it. If you like I can give you my base form class that I use in all my projects.</p>
<p>This is a just a simple set-up to handle a simple form. All the action is in the controller.</p>
<p>A few things of notice:</p>
<ul>
<li>The names that I give to my input fields match the names I use in the model. Doing it this way can save you a lot of time and huge pieces of code. The bind function in the controller will take care of the assignments in the model as wel as it will set the post data into the form. The set functions in the model are used to populate the fields and if a set function does not exist the public propererty with the same name is set.</li>
</ul>
<ul>
<li>
<p>I would advice you to never use public properties for a class always use protected if you plan on extending the class and the extended class should be able to access the properties or use private to make sure that  the set/get functions are used instead.</p>
</li>
<li>
<p>I have added an extra function to the form so that I have an easy way to get the the errors messages for the various elements if they occur. And when they do I print them below the form field in the volt file so the user can see what he did wrong.</p>
</li>
<li>The form will always be void of data because it will only be populated when you have a post action. See the bind function in the controller.</li>
</ul>
<p>I hope this is of use to you. If you have any questions regarding the above, feel free to ask them :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="55899" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="55899" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="56099" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '18</span>
              </span><br/><a name="C56099" href="#C56099">
                <time itemprop="dateCreated" datetime="2018-06-13T08:17:47-07:00" class="action-date">Jun '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>A good practice is to redirect the user after a form submission.  You're almost doing that, but you're forwarding instead.  Forwarding doesn't make a new HTTP request, it just causes the request to be handled by the action you're forwarding to.  You need that new HTTP request to clear out the form data both on your side and the browser side.</p>
<p>In <code>createAction()</code>, change this:</p>
<pre><code class="language-php">$this-&gt;dispatcher-&gt;forward(['action' =&gt; 'index']);</code></pre>
<p>to this:</p>
<pre><code class="language-php">$this-&gt;response-&gt;redirect('profile/index');</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="56099" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="56099" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/267b1b1ce374e4076f4baa7f4b7557be?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1712/scrnjakovic" class="user-moderator-N"><span itemprop="name">Stefan Crnjaković</span></a>        </span>
        <br>

        <span class="karma">5.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C56099"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Dylan Anderson                    </a>
                </div><div class="posts-buttons" align="right"><a name="C57191" href="#C57191">
                <time itemprop="dateCreated" datetime="2018-09-02T06:49:37-07:00" class="action-date">Sep '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Maybe I'm missing something, but if I don't need to redirect and I can achieve everything I want in that single request, issuing a HTTP redirect just to reset the form would be opposite of good practice.</p>
<p>The benefit of redirecting after successful form input would be, I guess, to prevent duplicate submissions on refresh?</p>
<blockquote>
<p>A good practice is to redirect the user after a form submission.  You're almost doing that, but you're forwarding instead.  Forwarding doesn't make a new HTTP request, it just causes the request to be handled by the action you're forwarding to.  You need that new HTTP request to clear out the form data both on your side and the browser side.</p>
<p>In <code>createAction()</code>, change this:</p>
<pre><code class="language-php">$this-&gt;dispatcher-&gt;forward(['action' =&gt; 'index']);</code></pre>
<p>to this:</p>
<pre><code class="language-php">$this-&gt;response-&gt;redirect('profile/index');</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="57191" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="57191" data-cf-modified-b6f09f86ad86cf5004d88f21-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="18331" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>