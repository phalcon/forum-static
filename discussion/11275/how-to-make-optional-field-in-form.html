---
layout: default
title: 'How to make optional field in form. - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How to make optional field in form.</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/6831/vadim-job-hg" class="user-moderator-N"><span itemprop="name">Vadim Kuznetsov</span></a></span>
            <time itemprop="dateCreated" datetime="2016-04-25T00:45:33-07:00">Apr '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-04-25T00:45:33-07:00">Apr '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>1077</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/9a326954164ed9db9fbd9a71541af7d2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/6831/vadim-job-hg" class="user-moderator-N"><span itemprop="name">Vadim Kuznetsov</span></a></span>
                <span class="karma">1.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11275" href="#C11275">
        <time class="action-date">Apr '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hello. I'm trying to create a simple form that stores the user. However, some fields have to be optional. Their values can be empty. Nevertheless phalcon form use  PresenceOf validator with   'allowEmpty' =&gt; false, by default. I dont know how to remove this validator. I can only add new one.</p>
<p>So, can you help me? How to create optional element in phalcon form? What I am doing wrong? </p>
<blockquote>
<p>class UserForm extends Form
{</p>
<pre><code>public function initialize($entity = null, $options = array())
{

    $this-&gt;setValidation(array(
        'notNullValidations' =&gt; false ));
    if (!isset($options['edit']) &amp;&amp; !isset($options['add'])){
        $element = new Text("id");
        $this-&gt;add($element-&gt;setLabel("Id"));
    } else
        $this-&gt;add(new Hidden("id"));

    $email = new Text("email", array('id'   =&gt; 'userEmail'));
    $email-&gt;setLabel("Email");
    $email-&gt;setFilters(array('striptags', 'string'));
    $email-&gt;addValidators(
        array(
            new PresenceOf(
                array(
                    'message' =&gt; 'Email обязательно'
                )
            )
        )
    );
    $this-&gt;add($email);
    $this-&gt;add(new TextArea('admin_comment', array('id'=&gt;'userComment')));
    $lastname = new Text('lastname', array('id'   =&gt; 'fUser'));
    $this-&gt;add(new Text('firstname', array('id'   =&gt; 'iUser')));
    $this-&gt;add($lastname);
    $this-&gt;add(new Text('patronymic', array('id'   =&gt; 'oUser')));
    $this-&gt;add(new Numeric('phone', array('id'   =&gt; 'telFaxUser')));
    if (isset($options['add'])) {
        $password = new Password('password');
        $password-&gt;setLabel("Пароль");
        $password-&gt;setFilters(array('striptags', 'string'));
        $password-&gt;addValidators(
            array(
                new PresenceOf(
                    array(
                        'message' =&gt; 'пароль обязательно'
                    )
                )
            )
        );
        $this-&gt;add($password);
    }
    $this-&gt;add(
        new Select(
            "status",
            array(
                '1' =&gt; 'Активный',
                '0' =&gt; 'Заблокированый'
            )
        )
    );
}</code></pre>
<p>}</p>
</blockquote></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-b899344a8c39b0a2db281579-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-b899344a8c39b0a2db281579-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C32993" href="#C32993">
                <time itemprop="dateCreated" datetime="2016-04-25T01:53:55-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hey, if I understood you correctly, you can just remove the validation part. I mean just dont add validation for that field:</p>
<pre><code class="language-php">   $email = new Text("email", array('id'   =&gt; 'userEmail'));
   $email-&gt;setLabel("Email");
   $email-&gt;setFilters(array('striptags', 'string'));
   // Remove below and field validation will not be added
 /*  $email-&gt;addValidators(
       array(
           new PresenceOf(
               array(
                   'message' =&gt; 'Email обязательно'
               )
           )
       )
   );*/</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32993" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32993" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9a326954164ed9db9fbd9a71541af7d2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6831/vadim-job-hg" class="user-moderator-N"><span itemprop="name">Vadim Kuznetsov</span></a>        </span>
        <br>

        <span class="karma">1.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C32995" href="#C32995">
                <time itemprop="dateCreated" datetime="2016-04-25T02:09:50-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The deal, than there is still check for emptyness for fields &quot;lastname&quot;, &quot;firstname&quot;, &quot;patronymic&quot;. I do not use any validators but $form-&gt;isValid() returns lastname is reqired if the field value is &quot;&quot;.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32995" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32995" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a20d655bbeff97e2c393510348ddb7cd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3162/Graphmatic" class="user-moderator-N"><span itemprop="name">graphmatic</span></a>        </span>
        <br>

        <span class="karma">11.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33053" href="#C33053">
                <time itemprop="dateCreated" datetime="2016-04-26T00:46:27-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>maybe your lastname field is set to NOT NULL at db level?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33053" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33053" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9a326954164ed9db9fbd9a71541af7d2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6831/vadim-job-hg" class="user-moderator-N"><span itemprop="name">Vadim Kuznetsov</span></a>        </span>
        <br>

        <span class="karma">1.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33055" href="#C33055">
                <time itemprop="dateCreated" datetime="2016-04-26T01:11:00-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ok thanks. It seems that I need to set -&gt;allowEmptyStringValues(['admin_comment', 'firstname', 'lastname', 'patronymic', 'phone']);
In the model. Than I can save the empty strings.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33055" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33055" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eff69f4e1760f1b3c652281d4030d3cf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2503/mraspor" class="user-moderator-N"><span itemprop="name">mraspor</span></a>        </span>
        <br>

        <span class="karma">12.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C33081" href="#C33081">
                <time itemprop="dateCreated" datetime="2016-04-26T10:00:04-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Vadim">@Vadim</a></p>
<p>or just add</p>
<pre><code class="language-php">['allowEmpty'     =&gt; true],</code></pre>
<p>to the validator and don't use PresenceOf validator. For example, validate email against email or stringlength validator:</p>
<pre><code class="language-php">use Phalcon\Validation\Validator\Email as EmailValidator;

$email-&gt;addValidator(
    new EmailValidator(
            [
                'message' =&gt; 'Blabla',
                'allowEmpty =&gt; true,
            ]
    )
);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="33081" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="33081" data-cf-modified-b899344a8c39b0a2db281579-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11275" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>