---
layout: default
title: 'use Phalcon\Session\Adapter\Redis to store seesion&#039;s user - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/28/session">Session</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">use Phalcon\Session\Adapter\Redis to store seesion&#039;s user</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/7709/phamdien" class="user-moderator-N"><span itemprop="name">phamdien</span></a></span>
            <time itemprop="dateCreated" datetime="2016-07-12T01:18:41-07:00">Jul '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-07-12T01:18:41-07:00">Jul '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">7</span>
                </td>
                <td>
                    <label>Views</label><br>1836</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/429c319a23100f17c3e0aa3e97aec3c5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/7709/phamdien" class="user-moderator-N"><span itemprop="name">phamdien</span></a></span>
                <span class="karma">4.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C12087" href="#C12087">
        <time class="action-date">Jul '16</time>
    </a>
</div>
<div class="post-content"><div><p>anyone can help me to store session on redis!!!
can step by step....i use MVC  same phalcon homepage..
and show tutorials
thanks so much!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36639" href="#C36639">
                <time itemprop="dateCreated" datetime="2016-07-12T01:36:59-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In your services.php:</p>
<pre><code class="language-php">$di-&gt;setShared('session',function(){
    $session = new \Phalcon\Session\Adapter\Redis(array(
    'uniqueId' =&gt; 'my-private-app',
      'host' =&gt; 'localhost',
      'port' =&gt; 6379,
      'auth' =&gt; 'foobared',
    'persistent' =&gt; false,
    'lifetime' =&gt; 3600,
    'prefix' =&gt; 'my_'
 ));
 return $session;
});</code></pre>
<p>Basically that's all you have to do because Phalcon abstracts the session adapter.</p>
<p>More info in the docs: <a href="https://api.phalcon.io/class/Phalcon/Session/Adapter/Redis.html">https://api.phalcon.io/class/Phalcon/Session/Adapter/Redis.html</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36639" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36639" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36641" href="#C36641">
                <time itemprop="dateCreated" datetime="2016-07-12T01:41:59-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i use this btw</p>
<p><a href="https://github.com/phpredis/phpredis">https://github.com/phpredis/phpredis</a></p>
<p>and its kind a &quot;automatic&quot;, and its in C again same as the framework</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36641" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36641" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/429c319a23100f17c3e0aa3e97aec3c5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7709/phamdien" class="user-moderator-N"><span itemprop="name">phamdien</span></a>        </span>
        <br>

        <span class="karma">4.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36639"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Lajos Bencz                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36643" href="#C36643">
                <time itemprop="dateCreated" datetime="2016-07-12T02:01:18-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i config it in index.php file, same below</p>
<p>$di-&gt;set('session', function() {
$session = new Redis([
'path' =&gt; 'tcp://127.0.0.1:6379?weight=1'
]);</p>
<pre><code>    $session-&gt;start();

    return $session;
});</code></pre>
<p>what is the differents??? thanks bro</p>
<blockquote>
<p>In your services.php:</p>
<pre><code class="language-php">$di-&gt;setShared('session',function(){
  $session = new \Phalcon\Session\Adapter\Redis(array(
   'uniqueId' =&gt; 'my-private-app',
    'host' =&gt; 'localhost',
    'port' =&gt; 6379,
    'auth' =&gt; 'foobared',
   'persistent' =&gt; false,
   'lifetime' =&gt; 3600,
   'prefix' =&gt; 'my_'
));
return $session;
});</code></pre>
<p>Basically that's all you have to do because Phalcon abstracts the session adapter.</p>
<p>More info in the docs: <a href="https://api.phalcon.io/class/Phalcon/Session/Adapter/Redis.html">https://api.phalcon.io/class/Phalcon/Session/Adapter/Redis.html</a></p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36643" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36643" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/429c319a23100f17c3e0aa3e97aec3c5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7709/phamdien" class="user-moderator-N"><span itemprop="name">phamdien</span></a>        </span>
        <br>

        <span class="karma">4.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36641"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Izo                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36647" href="#C36647">
                <time itemprop="dateCreated" datetime="2016-07-12T02:04:10-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>so you can show me how config in project phalcon??
thanks so</p>
<blockquote>
<p>i use this btw</p>
<p><a href="https://github.com/phpredis/phpredis">https://github.com/phpredis/phpredis</a></p>
<p>and its kind a &quot;automatic&quot;, and its in C again same as the framework</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36647" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36647" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36643"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/429c319a23100f17c3e0aa3e97aec3c5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        phamdien                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36651" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C36651" href="#C36651">
                <time itemprop="dateCreated" datetime="2016-07-12T02:30:41-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It looks like you are not using phalcon bulit-in class. I don't know is this option but it doesn't exists in phalcon <code>_construct</code> method - <a href="https://github.com/phalcon/cphalcon/blob/master/phalcon/session/adapter/redis.zep#L61">https://github.com/phalcon/cphalcon/blob/master/phalcon/session/adapter/redis.zep#L61</a></p>
<blockquote>
<p>i config it in index.php file, same below</p>
<p>$di-&gt;set('session', function() {
$session = new Redis([
'path' =&gt; 'tcp://127.0.0.1:6379?weight=1'
]);</p>
<pre><code>   $session-&gt;start();

   return $session;</code></pre>
<p>});
what is the differents??? thanks bro</p>
<blockquote>
<p>In your services.php:</p>
<pre><code class="language-php">$di-&gt;setShared('session',function(){
 $session = new \Phalcon\Session\Adapter\Redis(array(
   'uniqueId' =&gt; 'my-private-app',
   'host' =&gt; 'localhost',
   'port' =&gt; 6379,
   'auth' =&gt; 'foobared',
   'persistent' =&gt; false,
   'lifetime' =&gt; 3600,
   'prefix' =&gt; 'my_'
));
return $session;
});</code></pre>
<p>Basically that's all you have to do because Phalcon abstracts the session adapter.</p>
<p>More info in the docs: <a href="https://api.phalcon.io/class/Phalcon/Session/Adapter/Redis.html">https://api.phalcon.io/class/Phalcon/Session/Adapter/Redis.html</a></p>
</blockquote>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36651" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36651" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36647"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/429c319a23100f17c3e0aa3e97aec3c5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        phamdien                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36657" href="#C36657">
                <time itemprop="dateCreated" datetime="2016-07-12T03:52:53-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>that's the thing, you dont need to configure anything special. Just register session service and thats it.</p>
<blockquote>
<p>so you can show me how config in project phalcon??
thanks so</p>
<blockquote>
<p>i use this btw</p>
<p><a href="https://github.com/phpredis/phpredis">https://github.com/phpredis/phpredis</a></p>
<p>and its kind a &quot;automatic&quot;, and its in C again same as the framework</p>
</blockquote>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36657" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36657" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/acae05b384722b20a839ce0a3827eda6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8635/shobhit-v" class="user-moderator-N"><span itemprop="name">Shobhit Verma</span></a>        </span>
        <br>

        <span class="karma">697</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="43181" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '16</span>
              </span><br/><a name="C43181" href="#C43181">
                <time itemprop="dateCreated" datetime="2016-11-22T09:00:49-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sorry for asking my question here:
I want to know that as you mentioned </p>
<pre><code>$di-&gt;setShared('session',function(){

$session = new \Phalcon\Session\Adapter\Redis(array(    
'uniqueId' =&gt; 'my-private-app', 
  'host' =&gt; 'localhost',
  'port' =&gt; 6379,
  'auth' =&gt; 'foobared',
'persistent' =&gt; false,
'lifetime' =&gt; 3600,
'prefix' =&gt; 'my_'
));
 return $session;
});</code></pre>
<p>similarly i want like:</p>
<pre><code>$di-&gt;setShared('session',function(){
$session = new \Phalcon\Session\Adapter\files();
return $session;
});</code></pre>
<p>And</p>
<pre><code>$di-&gt;setShared('redisSession',function(){
$session = new \Phalcon\Session\Adapter\Redis(array(
'uniqueId' =&gt; 'my-private-app',
  'host' =&gt; 'localhost',
  'port' =&gt; 6379,
  'auth' =&gt; 'foobared',
'persistent' =&gt; false,
'lifetime' =&gt; 3600,
'prefix' =&gt; 'my_'
));
return $session;
});</code></pre>
<p>So that i can use both, but Redis session is not working when i am doing like above. it is always storing in files not in Redis, even if i am calling $this-&gt;redisSession.
When i remove session with file part($di-&gt;setShared('session')) it start storing in Redis. </p>
<p>i want a solution that when call $this-&gt;redisSession it should setup with Redis, and when $this-&gt;session it should save in files.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43181" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43181" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C43185" href="#C43185">
                <time itemprop="dateCreated" datetime="2016-11-22T09:20:54-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>But why ? You can use redis or files. Not both. Why you need such a feature ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43185" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43185" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/acae05b384722b20a839ce0a3827eda6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/8635/shobhit-v" class="user-moderator-N"><span itemprop="name">Shobhit Verma</span></a>        </span>
        <br>

        <span class="karma">697</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C43207" href="#C43207">
                <time itemprop="dateCreated" datetime="2016-11-22T22:42:50-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Presently we are having Redis server on a separate machine, So I want to write both service. So any developer from team want access regular file sessions then he can, and specifically any one want Redis then he can also for that he need not change services.</p>
<p>As you say it not possible then is it possible that i can create a configuration setting which can decide that what will be your adaptor, So that if there is a down time of redis server or any xyz reason so we can switch back to files</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43207" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43207" data-cf-modified-f8f003072b2c5ea84f0951f5-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="12087" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>