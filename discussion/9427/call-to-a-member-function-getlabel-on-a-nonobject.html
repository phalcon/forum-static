---
layout: default
title: 'Call to a member function getLabel() on a non-object - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Call to a member function getLabel() on a non-object</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3802/rwinkler" class="user-moderator-N"><span itemprop="name">rwinkler</span></a></span>
            <time itemprop="dateCreated" datetime="2015-11-12T13:08:20-07:00">Nov '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-11-12T13:08:20-07:00">Nov '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1694</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/ae8f2ccc5d0a5624560db3a349d83239?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3802/rwinkler" class="user-moderator-N"><span itemprop="name">rwinkler</span></a></span>
                <span class="karma">3.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C9427" href="#C9427">
        <time class="action-date">Nov '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hello,</p>
<p>I have the following files:</p>
<ul>
<li><strong><em>views/register.phtml</em></strong> view for a registration page</li>
<li><strong><em>forms/RegisterForm.php</em></strong> for the registration form on the registration page</li>
<li><strong><em>controllers/SessionController.php</em></strong> with a <em>RegisterAction()</em></li>
<li><strong><em>models/Users.php</em></strong> model for database interaction. </li>
</ul>
<p>The <em>Users.php</em> model contains a Uniqueness Validator for username and email, so users can't add duplicate records. Everything is working perfectly fine, the form is displayed correctly, labels are displayed, when someone submits the registration form, the record gets added to the database, however, when i try to add a record that already exists, it gives me &quot;Fatal error: Call to a member function getLabel() on a non-object in C:\wamp\www\test.local\app\views\session\register.phtml on line 11&quot; instead of getting an error message from the Uniqueness validator in the model. The same thing happens with everything else, everytime an interaction with the database fails (e.g. adding/removing/querying), it breaks the form and gives me &quot;Fatal error: Call to a member function getLabel() on a non-object&quot;.</p>
<p>I'm not really sure where to start from here, does anyone know what i might be doing wrong?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eadd1abb0cff0326fedcef0b3b95b3e0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4719/sky003" class="user-moderator-N"><span itemprop="name">sky003</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26313" href="#C26313">
                <time itemprop="dateCreated" datetime="2015-11-12T13:36:31-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hello,
I think <em>registerAction()</em> works not correct. Please, show a code of the method.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26313" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26313" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ae8f2ccc5d0a5624560db3a349d83239?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3802/rwinkler" class="user-moderator-N"><span itemprop="name">rwinkler</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26315" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26315" href="#C26315">
                <time itemprop="dateCreated" datetime="2015-11-12T13:55:02-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Here's my code:</p>
<p>registerAction() in controllers/SessionController.php</p>
<pre><code class="language-php">public function registerAction() {
        $form = new RegisterForm();

        if ($this-&gt;request-&gt;isPost()) {
            if ($this-&gt;security-&gt;checkToken()) {
                if ($form-&gt;isValid($_POST)) {

                        $user = new Users;
                        $user-&gt;username =   $this-&gt;request-&gt;getPost('username');
                        $user-&gt;email =      $this-&gt;request-&gt;getPost('email');
                        $user-&gt;password =   $this-&gt;security-&gt;hash($this-&gt;request-&gt;getPost('password'));
                        $user-&gt;created_at = time();

                        $user-&gt;create();

                }
                else
                {       
                    echo $form-&gt;getMessages()[0];
                }
            }
        }
        $this-&gt;view-&gt;form = $form;
}</code></pre>
<p>models/User.php Model:</p>
<pre><code class="language-php">use Phalcon\Mvc\Model\Validator\Uniqueness;

class Users extends Phalcon\Mvc\Model
{

    public function validation()
    {

        $this-&gt;validate(new Uniqueness(array(
            'field' =&gt; 'email',
            "message" =&gt; "Value of field 'email' is already present in another record"
        )));

        $this-&gt;validate(new Uniqueness(array(
            'field' =&gt; 'username',
            "message" =&gt; "Value of field 'username' is already present in another record"

        )));

        if ($this-&gt;validationHasFailed() == true) {
            return false;
        }
    }

    public function initialize() {

        $this-&gt;skipAttributesOnCreate(array('status'));
    }
}</code></pre>
<p>views/session/register.phtml</p>
<pre><code class="language-php">&lt;?=$this-&gt;getContent();?&gt;

&lt;?php use Phalcon\Tag; ?&gt;

&lt;h1 class="main_heading"&gt;Create a new Account!&lt;/h1&gt;

&lt;div class="form"&gt;
    &lt;form action="register" method="post"&gt;
        &lt;p&gt;
            &lt;label for="username"&gt;&lt;?=$form-&gt;getLabel('username');?&gt;&lt;/label&gt;
            &lt;?=$form-&gt;render('username');?&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for="email"&gt;&lt;?=$form-&gt;getLabel('email');?&gt;&lt;/label&gt;
            &lt;?=$form-&gt;render('email');?&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for="email"&gt;&lt;?=$form-&gt;getLabel('password');?&gt;&lt;/label&gt;
            &lt;?=$form-&gt;render('password');?&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;input type="submit" value="Register" name="submit"&gt;
        &lt;/p&gt;
        &lt;input type="hidden" name="&lt;?php echo $this-&gt;security-&gt;getTokenKey() ?&gt;" value="&lt;?php echo $this-&gt;security-&gt;getToken() ?&gt;"/&gt;
    &lt;/form&gt;
&lt;/div&gt;</code></pre>
<p>forms/RegisterForm.php</p>
<pre><code class="language-php">use Phalcon\Forms\Form,
    Phalcon\Forms\Element\Text,
    Phalcon\Forms\Element\Password,
    Phalcon\Forms\Element\Submit,
    Phalcon\Forms\Element\Check,
    Phalcon\Forms\Element\Hidden,
    Phalcon\Validation\Validator\Regex,
    Phalcon\Validation\Validator\PresenceOf,
    Phalcon\Validation\Validator\StringLength,
    Phalcon\Validation\Validator\Email,
    Phalcon\Validation\Validator\Identical,
    Phalcon\Validation\Validator\Uniqueness;

class RegisterForm extends Form
{

    public function initialize()
    {

        /**
         *  Validate Username
         */

        $username = new Text('username', array(
            'placeholder' =&gt; 'Username'
        ));

        $username-&gt;setLabel('Username');

        $username-&gt;addValidators(array(
            new PresenceOf(array(
                'message' =&gt; 'Please enter a username.'
            )),
            new Regex(array(
                'pattern' =&gt; '/^[A-Za-z][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*$/',
                'message' =&gt; 'Only letters, numbers and underscores allowed in the username'
            )),
            new StringLength(array(
              'max' =&gt; 16,
              'min' =&gt; 4,
              'messageMaximum' =&gt; 'Username too long. Max. 16 characters allowed.',
              'messageMinimum' =&gt; 'The username is too short. Please enter at least 4 characters.'
        ))
        ));

        $this-&gt;add($username);

        /**
         *  Validate E-Mail Address
         */

        $email = new Text('email', array(
            'placeholder' =&gt; 'Email'
        ));
        $email-&gt;setLabel('E-Mail');

        $email-&gt;addValidators(array(
            new PresenceOf(array(
                'message' =&gt; 'Please enter an email address.'
            )),
            new Email(array(
                'message' =&gt; 'Please enter a valid email address.'
            ))
        ));

        $this-&gt;add($email);

        /**
         *  Validate Password
         */

        $password = new Text('password', array(
            'placeholder' =&gt; 'Password'
        ));

        $password-&gt;setLabel('Password');

        $password-&gt;addValidators(array(
            new PresenceOf(array(
                'message' =&gt; 'You did not enter a password.'
            )),
            new StringLength(array(
              'max' =&gt; 40,
              'min' =&gt; 4,
              'messageMaximum' =&gt; 'The password must be max 40 characters.',
              'messageMinimum' =&gt; 'The password must be at least 4 characters.'
        ))
        ));

        $this-&gt;add($password);

    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26315" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26315" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eadd1abb0cff0326fedcef0b3b95b3e0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4719/sky003" class="user-moderator-N"><span itemprop="name">sky003</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26319" href="#C26319">
                <time itemprop="dateCreated" datetime="2015-11-12T14:40:05-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Try to add Uniquiness validator in the form.</p>
<pre><code class="language-php">
use Phalcon\Validation\Validator\Uniqueness;

...

new Uniqueness(array(
      'field' =&gt; 'email',
      'model' =&gt; Users::class,
      'message' =&gt; $email-&gt;getLabel() . ' is not unique.'
));

...

new Uniqueness(array(
      'field' =&gt; 'username',
      'model' =&gt; Users::class,
      'message' =&gt; $username-&gt;getLabel() . ' is not unique.'
));
</code></pre>
<p>Display form errors in the template</p>
<pre><code>&lt;?=$this-&gt;getContent();?&gt;

&lt;?php use Phalcon\Tag; ?&gt;

&lt;h1 class="main_heading"&gt;Create a new Account!&lt;/h1&gt;

&lt;div class="form"&gt;
    &lt;form action="register" method="post"&gt;
        &lt;p&gt;
            &lt;label for="username"&gt;&lt;?=$form-&gt;getLabel('username');?&gt;&lt;/label&gt;
            &lt;?=$form-&gt;render('username');?&gt;
            &lt;?php if ($form-&gt;hasMessagesFor('username')): ?&gt;
                &lt;?=$form-&gt;getMessagesFor('username')[0];?&gt;
            &lt;?php endif; ?&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for="email"&gt;&lt;?=$form-&gt;getLabel('email');?&gt;&lt;/label&gt;
            &lt;?=$form-&gt;render('email');?&gt;
            &lt;?php if ($form-&gt;hasMessagesFor('email')): ?&gt;
                &lt;?=$form-&gt;getMessagesFor('email')[0];?&gt;
            &lt;?php endif; ?&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for="email"&gt;&lt;?=$form-&gt;getLabel('password');?&gt;&lt;/label&gt;
            &lt;?=$form-&gt;render('password');?&gt;
            &lt;?php if ($form-&gt;hasMessagesFor('password')): ?&gt;
                &lt;?=$form-&gt;getMessagesFor('password')[0];?&gt;
            &lt;?php endif; ?&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;input type="submit" value="Register" name="submit"&gt;
        &lt;/p&gt;
        &lt;input type="hidden" name="&lt;?php echo $this-&gt;security-&gt;getTokenKey() ?&gt;" value="&lt;?php echo $this-&gt;security-&gt;getToken() ?&gt;"/&gt;
    &lt;/form&gt;
&lt;/div&gt;</code></pre>
<pre><code class="language-php">public function registerAction() {
        $form = new RegisterForm();

        if ($this-&gt;request-&gt;isPost()) {
            if ($this-&gt;security-&gt;checkToken()) {
                if ($form-&gt;isValid($_POST)) {

                        $user = new Users;
                        $user-&gt;username =    $this-&gt;request-&gt;getPost('username');
                        $user-&gt;email =       $this-&gt;request-&gt;getPost('email');
                        $user-&gt;password =    $this-&gt;security-&gt;hash($this-&gt;request-&gt;getPost('password'));
                        $user-&gt;created_at =  time();

                        $user-&gt;create();

                }
                else
                {     
                    //echo $form-&gt;getMessages()[0]; 
                }
            }
        }

        $this-&gt;view-&gt;form = $form;
}</code></pre>
<pre><code class="language-php">use Phalcon\Mvc\Model\Validator\Uniqueness;

class Users extends Phalcon\Mvc\Model
{

    public function validation()
    {

        $this-&gt;validate(new Uniqueness(array(
            'field' =&gt; 'email',
            "message" =&gt; "Value of field 'email' is already present in another record"
        )));

        $this-&gt;validate(new Uniqueness(array(
            'field' =&gt; 'username',
            "message" =&gt; "Value of field 'username' is already present in another record"

        )));

        // I think the problem is there
        /*if ($this-&gt;validationHasFailed() == true) {
            return false;
        }*/

        return $this-&gt;validationHasFailed() != true;
    }

    public function initialize() {

        $this-&gt;skipAttributesOnCreate(array('status'));
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26319" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26319" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ae8f2ccc5d0a5624560db3a349d83239?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3802/rwinkler" class="user-moderator-N"><span itemprop="name">rwinkler</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26329" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26329" href="#C26329">
                <time itemprop="dateCreated" datetime="2015-11-12T15:26:36-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Tried everything of that. I'm always getting </p>
<p><em>Fatal error: Call to a member function getLabel() on a non-object in C:\wamp\www\test.local\app\views\session\register.phtml on line 11</em></p>
<p>if there is a duplicate or other error with the db</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26329" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26329" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eadd1abb0cff0326fedcef0b3b95b3e0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4719/sky003" class="user-moderator-N"><span itemprop="name">sky003</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26335" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26335" href="#C26335">
                <time itemprop="dateCreated" datetime="2015-11-12T15:52:45-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Try to use $this-&gt;form in the template.</p>
<pre><code>&lt;label for="username"&gt;&lt;?=$this-&gt;form-&gt;getLabel('username');?&gt;&lt;/label&gt;
&lt;?=$this-&gt;form-&gt;render('username');?&gt;
&lt;?php if ($this-&gt;form-&gt;hasMessagesFor('username')): ?&gt;
&lt;?=$this-&gt;form-&gt;getMessagesFor('username')[0];?&gt;
&lt;?php endif; ?&gt;</code></pre>
<p>and so on</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26335" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26335" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ae8f2ccc5d0a5624560db3a349d83239?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3802/rwinkler" class="user-moderator-N"><span itemprop="name">rwinkler</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26337" href="#C26337">
                <time itemprop="dateCreated" datetime="2015-11-12T16:05:06-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Using  $this-&gt;form breaks the page completely, and i'm getting &quot;Call to a member function getLabel() on a non-object&quot; without submitting the form already</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26337" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26337" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b371e0a214c26257d92000638039302a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2756/tobasar" class="user-moderator-N"><span itemprop="name">Jimmy Chandra</span></a>        </span>
        <br>

        <span class="karma">879</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C26345" href="#C26345">
                <time itemprop="dateCreated" datetime="2015-11-13T00:24:09-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Try to skip or comment $this-&gt;form-&gt;getLabel('username');</p>
<pre><code>&lt;label for="username"&gt;Username&lt;/label&gt;
&lt;?=$this-&gt;form-&gt;render('username');?&gt;
&lt;?php if ($this-&gt;form-&gt;hasMessagesFor('username')): ?&gt;
&lt;?=$this-&gt;form-&gt;getMessagesFor('username')[0];?&gt;
&lt;?php endif; ?&gt;</code></pre>
<p>What is error said now?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26345" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26345" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ae8f2ccc5d0a5624560db3a349d83239?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3802/rwinkler" class="user-moderator-N"><span itemprop="name">rwinkler</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="26423" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '15</span>
              </span><br/><a name="C26423" href="#C26423">
                <time itemprop="dateCreated" datetime="2015-11-14T08:17:04-07:00" class="action-date">Nov '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>When i remove all the $form-&gt; variables from the register view and add a record that already exists, it just reloads the page, the error messages from the registerAction() are not triggered, but they should, this only happens if the record already exists in the database or if database connection fails, im not really sure where to go from here.</p>
<p>It is the $user-&gt;create(); in registerAction that is causing this, everytime this fails, it breaks the whole action and nothing is executed and it breaks the form on register view saying &quot;Fatal error: Call to a member function getLabel() on a non-object in C:\wamp\www\test.local\app\views\session\register.phtml on line 11&quot;</p>
<p>Here is my registerAction again with some comments</p>
<pre><code class="language-php">    public function signupAction() {
        $form = new RegisterForm();

        if ($this-&gt;request-&gt;isPost()) {
            if ($this-&gt;security-&gt;checkToken()) {
                if ($form-&gt;isValid($_POST)) {

                        $user = new Users;
                        $user-&gt;username =   $this-&gt;request-&gt;getPost('username');
                        $user-&gt;email =      $this-&gt;request-&gt;getPost('email');
                        $user-&gt;password =   $this-&gt;security-&gt;hash($this-&gt;request-&gt;getPost('password'));
                        $user-&gt;created_at = time();

                        if ($user-&gt;create()) {
                            echo 'success';
                        }

                        echo 'dead'; // not executed if $user-&gt;create() fails, but it should

                }
                else
                {
                    echo $form-&gt;getMessages()[0];
                }
            }
        }
        $this-&gt;view-&gt;form = $form;  // not executed if $user-&gt;create() fails (= breaks registration form)
    }</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="26423" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="26423" data-cf-modified-3aaa00fca55ac35306a5bd0e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="9427" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>