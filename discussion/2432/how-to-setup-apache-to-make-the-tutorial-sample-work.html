---
layout: default
title: 'How to setup apache to make the tutorial sample work - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How to setup apache to make the tutorial sample work</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1726/mobilesoftsmith" class="user-moderator-N"><span itemprop="name">mobilesoftsmith</span></a></span>
            <time itemprop="dateCreated" datetime="2014-05-29T20:34:13-07:00">May '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-05-29T20:34:13-07:00">May '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>3008</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/ded1c883d80f3b940de1ad8e40c570bf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1726/mobilesoftsmith" class="user-moderator-N"><span itemprop="name">mobilesoftsmith</span></a></span>
                <span class="karma">3.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2432" href="#C2432">
        <time class="action-date">May '14</time>
    </a>
</div>
<div class="post-content"><div><p>I downloaded the sample code &quot;tutorial-master&quot;.</p>
<p>I am using debian 7. I have enabled mod_rewrite for apache. Then I edit file /etc/apache2/sites-available/default to setup a virtual directory pointing to&quot;tutorial-master/public&quot; folder like following:</p>
<pre><code class="language-html">&lt;VirtualHost *:80&gt;
    ServerAdmin <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="186f7d7a75796b6c7d6a5874777b797470776b6c">[email&#160;protected]</a>

    DocumentRoot /var/www
    &lt;Directory /&gt;
        Options FollowSymLinks
        AllowOverride All
    &lt;/Directory&gt;
    &lt;Directory /var/www/&gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    &lt;Directory "/usr/lib/cgi-bin"&gt;
        AllowOverride All
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;

    Alias /tutorial/ /home/xyz/Documents/Projects/tutorial-master/public/
    &lt;Directory "/home/xyz/Documents/Projects/tutorial-master/public"&gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;</code></pre>
<p>Then I go to <a href="http://localhost/tutorial/">http://localhost/tutorial/</a>, it shows:</p>
<pre><code class="language-html">Hello!
Sign Up Here!</code></pre>
<p>When I click link &quot;Sign Up Here!&quot;, I get the 404 error:</p>
<pre><code class="language-html">Not Found

The requested URL /home/xyz/Documents/Projects/tutorial-master/public/index.php was not found on this server.</code></pre>
<p>Because the source code is downloaded from Phalcon, it should not have problem. I think it's something wrong with my apache configuration. Please advise. Thanks.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/401a5ffd308e346dd317bfc6ea755a9a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1724/Ak-Army" class="user-moderator-N"><span itemprop="name">Ak-Army</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="8253" data-toggle="modal" data-target="#historyModal">
                edited <span>May '14</span>
              </span><br/><a name="C8253" href="#C8253">
                <time itemprop="dateCreated" datetime="2014-05-30T00:49:42-07:00" class="action-date">May '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think u do not enable the .htaccess in ur apache properly.
U can test it if u take an error in ur htaccess and than u get an 500 Internal Server Error :)</p>
<p>Check this too in ur httpd.conf:</p>
<pre><code># use .htaccess files for overriding,
AccessFileName .htaccess
# and never show them
&lt;Files ~ "^\.ht"&gt;
    Order allow,deny
    Deny from all
&lt;/Files&gt;</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8253" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8253" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ded1c883d80f3b940de1ad8e40c570bf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1726/mobilesoftsmith" class="user-moderator-N"><span itemprop="name">mobilesoftsmith</span></a>        </span>
        <br>

        <span class="karma">3.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="8263" data-toggle="modal" data-target="#historyModal">
                edited <span>May '14</span>
              </span><br/><a name="C8263" href="#C8263">
                <time itemprop="dateCreated" datetime="2014-05-30T14:05:41-07:00" class="action-date">May '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks, Ak-Army,</p>
<p>I have checked apache2.conf, which is the main apache configure file on Debian 7. The AccessFileName .htaccess and related &lt;Files&gt; directives are there. And I added some garbage in the .htaccess files, I did get 500 error. This means the .htaccess files are working. It looks like I have to change the rewrite rules inside the .htaccess files. Since I am new to LAMP, I have no idea how to change these files. I paste the content of these files as following:</p>
<p>tutorial-master/.htaccess:</p>
<pre><code class="language-html">&lt;IfModule mod_rewrite.c&gt;
    RewriteEngine on
    RewriteRule  ^$ public/    [L]
    RewriteRule  (.*) public/$1 [L]
&lt;/IfModule&gt;</code></pre>
<p>tutorial-master/public/.htaccess:</p>
<pre><code class="language-html">AddDefaultCharset UTF-8
&lt;IfModule mod_rewrite.c&gt;
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?_url=/$1 [QSA,L]
&lt;/IfModule&gt;</code></pre>
<p>Do you or anyone have an idea how to setup these files so that the &quot;Sign Up Here&quot; link of  tutorial project can work?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8263" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8263" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ded1c883d80f3b940de1ad8e40c570bf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1726/mobilesoftsmith" class="user-moderator-N"><span itemprop="name">mobilesoftsmith</span></a>        </span>
        <br>

        <span class="karma">3.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="8288" data-toggle="modal" data-target="#historyModal">
                edited <span>May '14</span>
              </span><br/><a name="C8288" href="#C8288">
                <time itemprop="dateCreated" datetime="2014-05-31T11:12:41-07:00" class="action-date">May '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well,</p>
<p>Finally, I make it works although it is not working as I expected. To who may be interested, I put the solution below.</p>
<p>I changed my apache configure file &quot;/etc/apache2/sites-available/default&quot; to use tutorial-master/public as website root as following:</p>
<pre><code class="language-html">
&lt;VirtualHost *:80&gt;
    ServerAdmin <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="225547404f4351564750624e4d41434e4a4d5156">[email&#160;protected]</a>

    DocumentRoot /home/xyz/Documents/Projects/tutorial-master/public

    &lt;Directory "/home/xyz/Documents/Projects/tutorial-master"&gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;

    &lt;Directory "/home/xyz/Documents/Projects/tutorial-master/public"&gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>
<p>Now, I can see the signup page at <a href="http://localhost/signup">http://localhost/signup</a>. But what I expected to do is setup a virtual difrectory to access the tutorial project signup page by access <a href="http://localhost/tutorial/signup">http://localhost/tutorial/signup</a>. It still needs more work (on rewrite rule I guess).</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8288" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8288" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ded1c883d80f3b940de1ad8e40c570bf?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1726/mobilesoftsmith" class="user-moderator-N"><span itemprop="name">mobilesoftsmith</span></a>        </span>
        <br>

        <span class="karma">3.1k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C8361" href="#C8361">
                <time itemprop="dateCreated" datetime="2014-06-03T18:29:51-07:00" class="action-date">Jun '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Finally, I figured out how to setup.</p>
<p>1). Move tutorial-master folder to /var/www/tutorial</p>
<p>2). Change /etc/apache2/sites-available/default to:</p>
<pre><code class="language-html">
&lt;VirtualHost *:80&gt;
    ServerAdmin <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ea9d8f88878b999e8f98aa8685898b868285999e">[email&#160;protected]</a>

    DocumentRoot /var/www
    &lt;Directory /&gt;
        Options FollowSymLinks
        AllowOverride All
    &lt;/Directory&gt;
    &lt;Directory /var/www/&gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    &lt;Directory "/usr/lib/cgi-bin"&gt;
        AllowOverride All
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>
<p>3). Add following lines to tutorial/public/index.php:</p>
<pre><code class="language-html">
    //Setup a base URI so that all generated URIs include the "tutorial" folder
    $di-&gt;set('url', function(){
        $url = new \Phalcon\Mvc\Url();
        $url-&gt;setBaseUri('/tutorial/');
        return $url;
    });
</code></pre>
<p>4). Now, you can input <a href="http://localhost/tutorial">http://localhost/tutorial</a> in browser to access the tutoial project. When you click &quot;Sign Up Here!&quot;, you will be direct to <a href="http://localhost/tutoial/signup">http://localhost/tutoial/signup</a> as expected.</p>
<p>This solution adds a base url to generated url rather than changes the .htaccess file in the project. Maybe changing rewrite rules can get the same result. But this solution is more comprehensible and works perfect for me.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="8361" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="8361" data-cf-modified-aa75efb376db838e4c6fd0dc-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2432" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>