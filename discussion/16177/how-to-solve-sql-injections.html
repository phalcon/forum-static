---
layout: default
title: 'How to solve SQL injections - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">How to solve SQL injections</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/5119/salvipascual" class="user-moderator-N"><span itemprop="name">Salvi Pascual</span></a></span>
            <time itemprop="dateCreated" datetime="2017-05-23T07:47:26-07:00">May '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-05-23T07:47:26-07:00">May '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '19</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>877</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/edc5d4bb1dc16e25fec01e0b97634cd8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/5119/salvipascual" class="user-moderator-N"><span itemprop="name">Salvi Pascual</span></a></span>
                <span class="karma">1.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C16177" href="#C16177">
        <time class="action-date">May '17</time>
    </a>
</div>
<div class="post-content"><div><p>Hi,</p>
<p>I am using Phalcon but not the ORM. I am sending my own queries to the database.</p>
<p>Few days ago I realized that when I call $this-&gt;get(&quot;name&quot;) from any controller, the String passed by the user is not sanitized, so I am potentially sending dangerous SQL code straight to the database. </p>
<p>My projetc is around a milling lines of code now and I cannot go though every single get() and add the second parameter. I need a way to overwrite the get() method from the bootstrap and sanitize all responses at once. </p>
<p>I have been trying this for few days without luck. Can you guys point me on the right direction, or help with a better solution?</p>
<p>Thank you!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-90d30964e63dbe941074dea1-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-90d30964e63dbe941074dea1-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e527d7bd9f5a49b921abedad26819841?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9455/elroliv" class="user-moderator-N"><span itemprop="name">elroliv</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48321" data-toggle="modal" data-target="#historyModal">
                edited <span>May '17</span>
              </span><br/><a name="C48321" href="#C48321">
                <time itemprop="dateCreated" datetime="2017-05-23T07:57:41-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>hello, you can use PDO or something like this</p>
<p><a href="http://php.net/manual/en/security.database.sql-injection.php"><a href="http://php.net/manual/en/security.database.sql-injection.php">http://php.net/manual/en/security.database.sql-injection.php</a></a></p>
<p><a href="http://php.net/manual/en/pdo.prepared-statements.php"><a href="http://php.net/manual/en/pdo.prepared-statements.php">http://php.net/manual/en/pdo.prepared-statements.php</a></a></p>
<p><a href="http://php.net/manual/en/mysqli.quickstart.prepared-statements.php"><a href="http://php.net/manual/en/mysqli.quickstart.prepared-statements.php">http://php.net/manual/en/mysqli.quickstart.prepared-statements.php</a></a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48321" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48321" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/edc5d4bb1dc16e25fec01e0b97634cd8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/5119/salvipascual" class="user-moderator-N"><span itemprop="name">Salvi Pascual</span></a>        </span>
        <br>

        <span class="karma">1.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C48321"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/e527d7bd9f5a49b921abedad26819841?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        elroliv                    </a>
                </div><div class="posts-buttons" align="right"><a name="C48339" href="#C48339">
                <time itemprop="dateCreated" datetime="2017-05-23T10:01:24-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for your response. I am actually using the Phalcon framework to contact the DB, just not the ORM. In instance, I am using the following code to run a query:</p>
<p>$sql = &quot;SELECT blah FROM blah&quot;;
$this-&gt;di-&gt;get('db')-&gt;query($sql);</p>
<p>The good part, this code is centralized inside a function that I call thouth all the system. Maybe I can sanitize here... Any ideas how? </p>
<blockquote>
<p>hello, you can use PDO or something like this</p>
<p><a href="http://php.net/manual/en/security.database.sql-injection.php"><a href="http://php.net/manual/en/security.database.sql-injection.php">http://php.net/manual/en/security.database.sql-injection.php</a></a></p>
<p><a href="http://php.net/manual/en/pdo.prepared-statements.php"><a href="http://php.net/manual/en/pdo.prepared-statements.php">http://php.net/manual/en/pdo.prepared-statements.php</a></a></p>
<p><a href="http://php.net/manual/en/mysqli.quickstart.prepared-statements.php"><a href="http://php.net/manual/en/mysqli.quickstart.prepared-statements.php">http://php.net/manual/en/mysqli.quickstart.prepared-statements.php</a></a></p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48339" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48339" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/e527d7bd9f5a49b921abedad26819841?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9455/elroliv" class="user-moderator-N"><span itemprop="name">elroliv</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48341" data-toggle="modal" data-target="#historyModal">
                edited <span>May '17</span>
              </span><br/><a name="C48341" href="#C48341">
                <time itemprop="dateCreated" datetime="2017-05-23T10:13:20-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>try to adapt something like this</p>
<pre><code class="language-php">$resultset = $connection-&gt;query(
    "SELECT * FROM robots WHERE type = ?",
    [
        "mechanical",
    ]
);</code></pre>
<pre><code class="language-php">$statement = $db-&gt;prepare(
    "SELECT * FROM robots WHERE name = :name"
);

$result = $connection-&gt;executePrepared(
    $statement,
    [
        "name" =&gt; "Voltron",
    ],
    [
        "name" =&gt; Column::BIND_PARAM_INT,
    ]
);</code></pre>
<pre><code class="language-php">https://docs.phalcon.io/en/3.0.0/api/Phalcon_Db_Adapter_Pdo_Mysql.html</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48341" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48341" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Åšlawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48343" data-toggle="modal" data-target="#historyModal">
                edited <span>May '17</span>
              </span><br/><a name="C48343" href="#C48343">
                <time itemprop="dateCreated" datetime="2017-05-23T12:29:59-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Use binding.</p>
<p>Why not use ORM? You can build your own queries in phql too, and having oop is much nicer and cleaner.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48343" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48343" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/7aa3953370ba8f621d284c9ef34e47e6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/10801/gracylayla" class="user-moderator-N"><span itemprop="name">gracylayla</span></a>        </span>
        <br>

        <span class="karma">137</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C53949" href="#C53949">
                <time itemprop="dateCreated" datetime="2018-02-13T05:36:59-07:00" class="action-date">Feb '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It is a mechanism of getting secure data from database.</p>
<p><strong>SQL Injection Attacks::</strong></p>
<p>By providing proper validations for input fields.
By using parameterised queries.
By using stored procedures
By using frequent code reviews
We must not display database error messages in frontend
<a href="https://mindmajix.com/sql-interview-questions">SQL injection</a> is a code injection technique, used to attack data-driven applications.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="53949" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="53949" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/dabaee32fe49d05f6aeb6226af284252?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/9887/JABirchall" class="user-moderator-N"><span itemprop="name">Jake Birchall</span></a>        </span>
        <br>

        <span class="karma">8.2k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C48339"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/edc5d4bb1dc16e25fec01e0b97634cd8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Salvi Pascual                    </a>
                </div><div class="posts-buttons" align="right"><a name="C53951" href="#C53951">
                <time itemprop="dateCreated" datetime="2018-02-13T06:00:40-07:00" class="action-date">Feb '18</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>The good part, this code is centralized inside a function that I call thouth all the system. Maybe I can sanitize here... Any ideas how? </p>
</blockquote>
<p>That is the whole construct of ORM Models, Your database constraints are contained within a singurlarity classes mapped to tables where all your manipulation methods would be stored.
You are currently using an phalcon ORM to misuse it, You are doing no different to mysql_query() as phalcon ORM is only a wrapper around PDO. </p>
<p>I currently have a server control panel for my client in which the servers model is 600 lines and alot of methods all used many times over. If did raw sql queries across the 580k lines for the app, I wouldn't know what I was doing.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="53951" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="53951" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a>        </span>
        <br>

        <span class="karma">20.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C59331" href="#C59331">
                <time itemprop="dateCreated" datetime="2019-03-19T20:06:32-07:00" class="action-date">Mar '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm looking for a solution for this too when using mysql raw within Phalcon which I have to do with some of the more complicated queries and when using queries that use <code>ORDER BY CASE</code> etc. Is there a way of binding when using sql raw?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="59331" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="59331" data-cf-modified-90d30964e63dbe941074dea1-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="16177" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>