---
layout: default
title: 'Is it a bug of Phql ? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Is it a bug of Phql ?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2485/xfight0" class="user-moderator-N"><span itemprop="name">Xfight</span></a></span>
            <time itemprop="dateCreated" datetime="2014-11-30T05:23:32-07:00">Nov '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-11-30T05:23:32-07:00">Nov '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Dec '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>738</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/4171ad5b106ef60a8ba5673833ebdf4b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2485/xfight0" class="user-moderator-N"><span itemprop="name">Xfight</span></a></span>
                <span class="karma">1.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4137" href="#C4137">
        <time class="action-date">Nov '14</time>
    </a>
</div>
<div class="post-content"><div><p>The query occurs a error below code, it is a bug of Phalcon?<br />
Why is wrongï¼Ÿ Thanks.</p>
<pre><code class="language-php">$money = '111';
$phql = 'update User set money = :money: + money WHERE id = 17';
$result = $this-&gt;modelsManager-&gt;executeQuery($phql,[
   'money' =&gt; $money
]);</code></pre>
<p>This is the error message:</p>
<pre><code>PDOException: SQLSTATE[HY093]: Invalid parameter number: mixed named and positional parameters</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-87a8c07d017443cea623948b-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-87a8c07d017443cea623948b-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13784" href="#C13784">
                <time itemprop="dateCreated" datetime="2014-11-30T09:28:36-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think you wrong, should be look like :)</p>
<pre><code class="language-php">$money = '111';
$phql = 'update User set money = :money:  WHERE id = 17';
$result = $this-&gt;modelsManager-&gt;executeQuery($phql,[
   'money' =&gt; $money + $money
]);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13784" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13784" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/4171ad5b106ef60a8ba5673833ebdf4b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2485/xfight0" class="user-moderator-N"><span itemprop="name">Xfight</span></a>        </span>
        <br>

        <span class="karma">1.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C13784"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Thien Tran                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="13797" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '14</span>
              </span><br/><a name="C13797" href="#C13797">
                <time itemprop="dateCreated" datetime="2014-11-30T18:49:02-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you. But it is not the result I want, I want to add 111 to the value of the original
Like this SQL :</p>
<pre><code class="language-sql">update user set money = money + 111 where id = 17</code></pre>
<p>This is right. I would update column value in this way, but in phql it is wrong.</p>
<blockquote>
<p>I think you wrong, should be look like :)</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13797" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13797" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/011321ad4bf943107062b774140f00e5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2683/brainformatik" class="user-moderator-N"><span itemprop="name">Brainformatik</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13809" href="#C13809">
                <time itemprop="dateCreated" datetime="2014-12-01T01:13:07-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I don't know if there is any difference in using another type of placeholder but maybe you can try</p>
<pre><code class="language-php">$money = '111';
$phql = 'update User set money = ?0 + money WHERE id = 17';
$result = $this-&gt;modelsManager-&gt;executeQuery($phql,[
   0 =&gt; $money
]);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13809" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13809" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13844" href="#C13844">
                <time itemprop="dateCreated" datetime="2014-12-02T13:54:32-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This isn't really trivial - but try turning on query logging, then check your query log after this query is run.  That error happens when you mix &quot;:money:&quot; type parameters and &quot;?0&quot; type parameters.  Since your query only has the former, I'm guessing somewhere in the parsing chain, the later format gets put in.  Checking the query log should show you exactly what query is being sent to MySQL and causing the error.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13844" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13844" data-cf-modified-87a8c07d017443cea623948b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4137" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>