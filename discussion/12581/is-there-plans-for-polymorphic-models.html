---
layout: default
title: 'is there plans for polymorphic models? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">is there plans for polymorphic models?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/6153/udarkness" class="user-moderator-N"><span itemprop="name">udarkness</span></a></span>
            <time itemprop="dateCreated" datetime="2016-08-05T05:46:14-07:00">Aug '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-08-05T05:46:14-07:00">Aug '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>742</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/85757999d6beb0c9af6d94c9f8f2c077?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/6153/udarkness" class="user-moderator-N"><span itemprop="name">udarkness</span></a></span>
                <span class="karma">2.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C12581" href="#C12581">
        <time class="action-date">Aug '16</time>
    </a>
</div>
<div class="post-content"><div><p>I cannot find any example or anything in the documentation about polymorphic models in phalcon.
As far as I understand, Phalcon and Zephir boast of being OOP PHP tools. But in the other hand, the models (at least, maybe other components as well) constrain the user to use ifs/switchs instead of polymorphism.
Maybe it is possible to achieve with postgres(it supports polymorphism in the database) , but what about mysql? Propel (and maybe Doctrine?) allows polymorphism based on some columns (&quot;type&quot; for example).
If this feature would exist, Phalcon users would be able to write true OOP code. In PHP ifs are optional for procedural code lovers; but with Phalcon models, ifs are still a must!
Or maybe the ORM can be renamed to SRM (struct-relational mapper) to avoid the confusions :)</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37865" href="#C37865">
                <time itemprop="dateCreated" datetime="2016-08-05T07:22:47-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Im not sure what you mean, can you show any example ? What you want to achievie etc ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37865" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37865" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/85757999d6beb0c9af6d94c9f8f2c077?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6153/udarkness" class="user-moderator-N"><span itemprop="name">udarkness</span></a>        </span>
        <br>

        <span class="karma">2.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="38119" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C38119" href="#C38119">
                <time itemprop="dateCreated" datetime="2016-08-10T06:00:16-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Sure, polymorphism is a pillar of OOP. Without it, we cannot say we are using OOP.</p>
<p>Phalcon ORM achieves encapsulation. And Inheritance? Well, no. It just extend from a generic Model class, but never from indivisual classes based on DB data (that would be useful for user cases)</p>
<p>I refered to Propel, I was expecting readers to search for it. But ok, take a look here... <a href="http://propelorm.org/Propel/documentation/09-inheritance.html">http://propelorm.org/Propel/documentation/09-inheritance.html</a>
For the moment, I cannot or I don't know how to achieve this in Phalcon. So I have to use procedural workarounds, for example:</p>
<pre><code class="language-php">&lt;?php
class Demo extends Model {
function getPrice() {
    if ($this-&gt;type === self::TYPE_STATIC)
        return $this-&gt;price;
    if($this-&gt;type === self::TYPE_WEEKLY)
        return $this-&gt;weeks * $this-&gt;price;
}
}</code></pre>
<p>instead of:</p>
<pre><code class="language-php">&lt;?php
class DemoWeekly extends Demo {
function getPrice() {
        return $this-&gt;weeks * $this-&gt;price;
}
}</code></pre>
<p>As you can see, OOP code (with inheritance, and polymorphism) is easier to read than the procedural version.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="38119" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="38119" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="38121" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C38121" href="#C38121">
                <time itemprop="dateCreated" datetime="2016-08-10T06:07:28-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What you mean ? I already have something you posted :) Like one model extending other model etc.</p>
<p>Also imho for demo weekly you should just have stored calculated value under database in my opinion. Or calculate it in database to avoid method calls and other things(like selecting columns from <code>DemoWeekly</code> then your <code>getPrice()</code> wouldn't be used at all beacause phalcon is not using your model objects when selecting columns.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="38121" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="38121" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/85757999d6beb0c9af6d94c9f8f2c077?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6153/udarkness" class="user-moderator-N"><span itemprop="name">udarkness</span></a>        </span>
        <br>

        <span class="karma">2.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C38169" href="#C38169">
                <time itemprop="dateCreated" datetime="2016-08-11T00:34:05-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>At least, it is not documented in this page: <a href="https://docs.phalcon.io/en/latest/reference/models.html">https://docs.phalcon.io/en/latest/reference/models.html</a>
can you share the documentation for this feature?</p>
<p>Well, yes and not, it depends, it is similar to virtual columns in mariadb/mysql. It is an expression, not a materialized value.  But that is not the main point of this discussion. It was just an example. You can also see examples of inheritance in <code>class Console extends \Phalcon\Application</code> (but this doesn't store anything in DB).</p>
<p>Please check the Propel docummentation I provided, to see what means &quot;inheritance&quot; for models, notice that a PHP object is not a DB row in all the cases.
There is a basic table and other tables with extra fields.</p>
<p>Of course, this is a feature for those who have to use MySQL, as I said PostgreSQL and other ORDBMS don't benefit so much from this. Take a look in the documentation: <a href="https://www.postgresql.org/docs/9.1/static/ddl-inherit.html">https://www.postgresql.org/docs/9.1/static/ddl-inherit.html</a> So, in this particular case, we don't need a column &quot;type&quot; and other complementary tables. I guess that inheriting from a parent class can make the trick. But in MySQL we still need some solution.</p>
<p>What do you think about this?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="38169" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="38169" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C38175" href="#C38175">
                <time itemprop="dateCreated" datetime="2016-08-11T01:30:23-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>But same in phalcon - you can have one model with a few fields, and other model extending it with more fields and more columns in database - no problem with this at all. Why document such obvious things ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="38175" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="38175" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/85757999d6beb0c9af6d94c9f8f2c077?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6153/udarkness" class="user-moderator-N"><span itemprop="name">udarkness</span></a>        </span>
        <br>

        <span class="karma">2.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="38181" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C38181" href="#C38181">
                <time itemprop="dateCreated" datetime="2016-08-11T02:23:06-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It seems you are not reading the propel documentation: <a href="http://propelorm.org/Propel/documentation/09-inheritance.html">http://propelorm.org/Propel/documentation/09-inheritance.html</a> </p>
<p>Notice there is a column <strong>class_key</strong>, if you do a $o-&gt;find(); it may return objects of different classes, for example: $book-&gt;find() = [$essey,$comic, $biography], in what way is this obvious? How is it obvious where to specify to Phalcon the polimorphic column?
Where should I specify this? Can you provide an example?
something like</p>
<pre><code class="language-php">public function initialize()
{
    $this-&gt;setClassKey('class_key', [1 =&gt; "Book\Essay", 2 =&gt; "Book\Comic"]);
}</code></pre>
<p>So if i read {id:n, type:1, ... } I will get a Essay object, and not a generic book. The same for {id:n, type:2, ... } = Comic object</p>
<p>And , how to specify the name of the additional tables to compound the object, also in the <code>initialize</code>?
The <code>find</code> method in Comic will have to join the book and book_comic table in order to read the whole object.</p>
<p>Please read the documentation of Propel, before answering again</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="38181" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="38181" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C38183" href="#C38183">
                <time itemprop="dateCreated" datetime="2016-08-11T02:30:51-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>First of all find method in phalcon is not joining anything at all.</p>
<p>I mean you can currently do something like this:</p>
<pre><code class="language-php">class A extends Phalcon/Mvc/Model
{
    public $id;
    public $name;
}</code></pre>
<pre><code class="language-php">class B extends A 
{
public $price;
}</code></pre>
<p>This will just work as it should be. But this things you are writing looks like really more complex, for me active record pattern shouldn't do such a stuff. If you need to select rows from few tables then as far as i know you need to use raw sql for this and union select.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="38183" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="38183" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/85757999d6beb0c9af6d94c9f8f2c077?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/6153/udarkness" class="user-moderator-N"><span itemprop="name">udarkness</span></a>        </span>
        <br>

        <span class="karma">2.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C38185" href="#C38185">
                <time itemprop="dateCreated" datetime="2016-08-11T02:46:40-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes, I know it is possible to achieve that, but that implies 2 different tables that are not related at all in the database, just we humans know there is a relationship.
But that doesn't achieve the desired result, like that propel can do:</p>
<pre><code class="language-php">&lt;?php
$books = BookQuery::create()-&gt;find();
foreach ($books as $book) {
  echo get_class($book) . ': ' . $book-&gt;getTitle() . "\n";
}
// Book: War And Peace
// Essay: On the Duty of Civil Disobedience
// Comic: Little Nemo In Slumberland
// Novel: Harry Potter</code></pre>
<p>Book in that example just refers to one table in mysql.
Maybe Phalcon team is not aware of this kind of features or maybe it is not really interested on it.</p>
<p>Your proposal works good for postgresql, where we have tables like</p>
<pre><code>CREATE TABLE cities (
    name            text,
    population      float,
    altitude        int     -- in feet
);

CREATE TABLE capitals (
    state           char(2)
) INHERITS (cities);</code></pre>
<p>where capitals.name is stored in cities but capitals.state in other place.
But not perfect, because we couldn't retrieve all the columns of the capital while querying from cities.</p>
<p>Nobody said that an ORM is an easy and simple task :) it is the most leaked abstraction ever (maybe impossible to abstract?). But it is still possible to map relations to objects (inheritance and polymorphism is not optional in OOP, they are the key features)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="38185" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="38185" data-cf-modified-7bcc6bd31ba2c3be30d79b96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="12581" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>