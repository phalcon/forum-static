---
layout: default
title: 'Laravel Inspired Devtools: Migrations, Model Factories, Database Seeding - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/24/show-community">Show to Community</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Laravel Inspired Devtools: Migrations, Model Factories, Database Seeding</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/9137/zachleigh" class="user-moderator-N"><span itemprop="name">Zach Leigh</span></a></span>
            <time itemprop="dateCreated" datetime="2017-03-24T14:45:56-07:00">Mar '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-03-24T14:45:56-07:00">Mar '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '20</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>1312</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">8</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/246ad49bed5e214e3ae0c0de4896a399?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/9137/zachleigh" class="user-moderator-N"><span itemprop="name">Zach Leigh</span></a></span>
                <span class="karma">5.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C15815" href="#C15815">
        <time class="action-date">Mar '17</time>
    </a>
</div>
<div class="post-content"><div><p><strong>Laravel Inspired Devtools for Phalcon</strong></p>
<p><a href="https://github.com/zachleigh/yarak">https://github.com/zachleigh/yarak</a><br />
Currently, I've got migrations, model factories, database seeding, and user defined custom commands done. Here's a run down of each feature:</p>
<p><strong>Migrations</strong>     </p>
<ul>
<li>Migration files are in a single directory and are timestamped to keep them in order.</li>
<li>Just like the migrations in the official devtools, migrations use Phalcon's Database Abstraction Layer to interact with the database.</li>
<li>Migrations can be rolled back in steps.</li>
<li>Migrations can be used to reset and refresh the database.</li>
</ul>
<p><strong>Model Factories</strong></p>
<ul>
<li>Model factories allow you to create model instances and persist them on the fly. If you want three test users, simply do this:
<ul>
<li><code>factory(Users::class, 3)-&gt;create();</code></li>
</ul></li>
<li>Factories make use of the Faker library to create sample test data.</li>
<li>You can create multiple factories for a single model and name them. This is very useful if you want to do something specific like create an admin user and then a guest user.</li>
<li>Default model factory logic can be overridden to create custom models that don't use Faker.
<ul>
<li><code>factory(Users::class)-&gt;create(["username" =&gt; "bobsmith"]);</code></li>
</ul></li>
</ul>
<p><strong>Database Seeding</strong></p>
<ul>
<li>The database seeding component allows you to instantly create test data or even seed a production database.</li>
<li>Seeders can call other seeders so you can better organize seeding logic.</li>
<li>Integrated with the migration component to allow seemless database reset. Want to rollback everything and re-seed? No problem:
<ul>
<li><code>php yarak migrate --refresh --seed</code></li>
</ul></li>
</ul>
<p><strong>Custom Commands</strong></p>
<ul>
<li>You can create your own commands that can be called just like any other Yarak command.</li>
<li>Yarak commands wrap around the Symfony console component and allow you to write commands in a simple manner. Here's an example command definition:
<ul>
<li><code>protected $signature = "spell {word=example} {--b|backwards}";</code></li>
</ul></li>
<li>Call commands exactly as you write them:
<ul>
<li><code>php yarak spell myWord --backwards</code></li>
</ul></li>
</ul>
<p>I'd love to get some feedback on it. If there's anything you think I can do better or have suggestions, please let me know!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-d3a0c240e0f107b418621238-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-d3a0c240e0f107b418621238-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">8</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C46931" href="#C46931">
                <time itemprop="dateCreated" datetime="2017-03-25T02:15:33-07:00" class="action-date">Mar '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>superb man. well done!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46931" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46931" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C46933" href="#C46933">
                <time itemprop="dateCreated" datetime="2017-03-25T02:22:36-07:00" class="action-date">Mar '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yea looks nice, but i just wonder why not make changes into phalcon devtools?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46933" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46933" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/246ad49bed5e214e3ae0c0de4896a399?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9137/zachleigh" class="user-moderator-N"><span itemprop="name">Zach Leigh</span></a>        </span>
        <br>

        <span class="karma">5.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C46933"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C46937" href="#C46937">
                <time itemprop="dateCreated" datetime="2017-03-25T02:42:18-07:00" class="action-date">Mar '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Yea looks nice, but i just wonder why not make changes into phalcon devtools?</p>
</blockquote>
<p>The main reason I created this package was the migrations. They are structured completely differently than the official devtools migrations so would have been incompatable. Because migrations are so closely tied to the other functionalities, it made sense to add them to this project. However, the logic that performs the actions is separated from the command line interface so the different components should be easy to extract and integrate into the official devtools if somebody wanted to.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46937" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46937" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C46941" href="#C46941">
                <time itemprop="dateCreated" datetime="2017-03-25T09:48:04-07:00" class="action-date">Mar '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well for me migrations in phalcon devtools are fine enough.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46941" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46941" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/246ad49bed5e214e3ae0c0de4896a399?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9137/zachleigh" class="user-moderator-N"><span itemprop="name">Zach Leigh</span></a>        </span>
        <br>

        <span class="karma">5.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C47371" href="#C47371">
                <time itemprop="dateCreated" datetime="2017-04-06T17:19:14-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I added custom, user defined commands to this. You can now create custom commands by using a simple, easy to use interface. This is the example command from the project:</p>
<pre><code class="language-php">use Yarak\Console\Command;

class ExampleCommand extends Command
{
    /**
     * The command signature.
     *
     * @var string
     */
    protected $signature = 'example
                            {word=example : A word of your choice.}
                            {--b|backwards : Spell the word backwards}';

    /**
     * The command description.
     *
     * @var string
     */
    protected $description = 'Basic example command.';

    /**
     * Handle the command.
     */
    protected function handle()
    {
        $word = ucfirst($this-&gt;argument('word'));

        if ($this-&gt;option('backwards')) {
            $this-&gt;spellBackwards($word);
        } else {
            $this-&gt;spell($word);
        }
    }

    /**
     * Spell the word backwards.
     *
     * @param  string $word
     */
    protected function spellBackwards($word)
    {
        $backwards = strrev($word);

        $spelling = strtolower(implode('-', str_split($backwards)));

        $this-&gt;output-&gt;writeInfo("{$word} spelled backwards is {$spelling}.");
    }

    /**
     * Spell the word.
     *
     * @param  string $word
     */
    protected function spell($word)
    {
        $spelling = strtolower(implode('-', str_split($word)));

        $this-&gt;output-&gt;writeInfo("{$word} is spelled {$spelling}.");
    }
}</code></pre>
<p>I've been thinking about making this even more modular than it already is. If I build a basic command system and a component registration system, then people can easily create addons for it and all the components(migrations etc.) can be installed spearately. This would make it much more customizable and wouldn't force people to use components they don't want. Thoughts?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47371" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47371" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ab08778c748c53bc9df90ca4e4d294ea?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9519/micheleangioni" class="user-moderator-N"><span itemprop="name">Michele Angioni</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C47901" href="#C47901">
                <time itemprop="dateCreated" datetime="2017-04-28T08:05:36-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Really good package with a lot of potential!
Finally something that really helps testist! Phalcon is really behind in this.</p>
<p>Probably in the medium/long run this whole package should be merged into the dev tools, but there is still much work to do.
I hope the whole community can contribute! :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47901" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47901" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d0f92a9a5bfd0e225aba2f70ef70f62d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2632/linxlad" class="user-moderator-N"><span itemprop="name">Nathan Daly</span></a>        </span>
        <br>

        <span class="karma">3.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48509" href="#C48509">
                <time itemprop="dateCreated" datetime="2017-05-31T22:59:20-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>We definitely need a good seeding tool in Phalcon.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48509" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48509" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/44de4373202ea6b787f1a3b2a1b0a69e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/14165/biroa" class="user-moderator-N"><span itemprop="name">Bíró Ádám</span></a>        </span>
        <br>

        <span class="karma">67</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C64317" href="#C64317">
                <time itemprop="dateCreated" datetime="2020-09-17T15:17:37-07:00" class="action-date">Sep '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>HI Guys, I am new to phalcon and I have a question. I want to seed data to my tables. Can I use this with palcon 4.0? Is this compatible with it?
If not, could you point me out to the right direction?
Many Thanks,
Adam</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="64317" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="64317" data-cf-modified-d3a0c240e0f107b418621238-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="15815" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>