---
layout: default
title: 'Where to write common functions/variables - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Where to write common functions/variables</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3789/needhiaagrawal" class="user-moderator-N"><span itemprop="name">needhiaagrawal</span></a></span>
            <time itemprop="dateCreated" datetime="2015-05-12T23:28:48-07:00">May '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-05-12T23:28:48-07:00">May '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>911</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c616fc43945d55a5e329577d4f9a293b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3789/needhiaagrawal" class="user-moderator-N"><span itemprop="name">needhiaagrawal</span></a></span>
                <span class="karma">3.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6717" href="#C6717">
        <time class="action-date">May '15</time>
    </a>
</div>
<div class="post-content"><div><p>I am very new to phalcon and I have to use some common variables or functions in the whole project then where I have to write these? For example I have to use phalcon logging and I have written the following code in <strong>public/index.php</strong> file as:</p>
<blockquote>
<p>use Phalcon\Mvc\Controller;
use Phalcon\Logger\Adapter\File as FileAdapter;
$logger = new FileAdapter(&quot;../app/logs/test-&quot;.date(&quot;Y-m-d&quot;).&quot;.log&quot;, array('mode' =&gt; 'w'));</p>
</blockquote>
<p>But when I use <strong>$logger-&gt;log(&quot;Test&quot;);</strong> this in controller then it gave me an error of undefined variable.</p>
<p>Hence please give me a proper flow so that I can write common things and used them into my whole project.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d6143a9ff65d2d5222c30fb0d76664a7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3646/Surt" class="user-moderator-N"><span itemprop="name">Erik Wiesenthal</span></a>        </span>
        <br>

        <span class="karma">23.6k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="18256" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C18256" href="#C18256">
                <time itemprop="dateCreated" datetime="2015-05-13T02:58:37-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ideally you set all your services on the Di/Service Locator so they are accesible where ever the Di is inyected (Controllers, Plugins, etc), also you can get the default Di by using Di::getDefault() and get the Di like a singleton.</p>
<p>check out the <a href="https://docs.phalcon.io/en/latest/reference/di.html">https://docs.phalcon.io/en/latest/reference/di.html</a>  and read it well, using it could lead you to a good way of solve common problems through services.</p>
<p>P.D. also, if you are doing OOP try to encapsulate the responsabilities of each object. This is, if you want to log something try to do it out of the class that does the action, the loggin responsability must be in its own class. You can check the observer pattern, or use the eventsManager from phalcon... doing it this way you avoid multiple dependencies between classes.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18256" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18256" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d6143a9ff65d2d5222c30fb0d76664a7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3646/Surt" class="user-moderator-N"><span itemprop="name">Erik Wiesenthal</span></a>        </span>
        <br>

        <span class="karma">23.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18258" href="#C18258">
                <time itemprop="dateCreated" datetime="2015-05-13T03:12:47-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yo can see an example here:</p>
<p><a href="https://github.com/phalcon/mvc/blob/master/simple-volt/app/config/services.php">https://github.com/phalcon/mvc/blob/master/simple-volt/app/config/services.php</a></p>
<p>the app define services to live on the Di, then on the controllers (thanks to some magic from phalcon inyectable interface) they can use the services:</p>
<p><a href="https://docs.phalcon.io/en/latest/reference/controllers.html#injecting-services">https://docs.phalcon.io/en/latest/reference/controllers.html#injecting-services</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18258" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18258" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c616fc43945d55a5e329577d4f9a293b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3789/needhiaagrawal" class="user-moderator-N"><span itemprop="name">needhiaagrawal</span></a>        </span>
        <br>

        <span class="karma">3.8k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C18256"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/d6143a9ff65d2d5222c30fb0d76664a7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Erik Wiesenthal                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="18259" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C18259" href="#C18259">
                <time itemprop="dateCreated" datetime="2015-05-13T03:40:19-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks but in service.php I have write this code use \Phalcon\Logger\Adapter\File as LoggerFile;</p>
<blockquote>
<p>//Register a service 'logger' with a class name and its parameters
$di-&gt;set('logger', array(
'className' =&gt; 'Phalcon\Logger\Adapter\File',
'arguments' =&gt; array(
array(
'type'  =&gt; 'parameter',
'value' =&gt; '../apps/logs/error.log'
)
)
));.</p>
</blockquote>
<p>Then how can I call it on my controller to set log.</p>
<blockquote>
<p>Ideally you set all your services on the Di/Service Locator so they are accesible where ever the Di is inyected (Controllers, Plugins, etc), also you can get the default Di by using Di::getDefault() and get the Di like a singleton.</p>
<p>check out the <a href="https://docs.phalcon.io/en/latest/reference/di.html">https://docs.phalcon.io/en/latest/reference/di.html</a>  and read it well, using it could lead you to a good way of solve common problems through services.</p>
<p>P.D. also, if you are doing OOP try to encapsulate the responsabilities of each object. This is, if you want to log something try to do it out of the class that does the action, the loggin responsability must be in its own class. You can check the observer pattern, or use the eventsManager from phalcon... doing it this way you avoid multiple dependencies between classes.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18259" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18259" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9d7de3a1434d9cc5b7c2ab9f31c655b3?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2568/Celoain" class="user-moderator-N"><span itemprop="name">Christof Gundelach</span></a>        </span>
        <br>

        <span class="karma">2.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18266" href="#C18266">
                <time itemprop="dateCreated" datetime="2015-05-13T07:00:03-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You'd use the logger from the di:</p>
<pre><code class="language-php">$this-&gt;getLogger()-&gt;log('test');</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18266" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18266" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d6143a9ff65d2d5222c30fb0d76664a7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3646/Surt" class="user-moderator-N"><span itemprop="name">Erik Wiesenthal</span></a>        </span>
        <br>

        <span class="karma">23.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C18259"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/c616fc43945d55a5e329577d4f9a293b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        needhiaagrawal                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="18292" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C18292" href="#C18292">
                <time itemprop="dateCreated" datetime="2015-05-13T10:45:21-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>yep, the controller tries to find a service on the di for whatever non defined property, so been inside a controller you just need to :</p>
<pre><code class="language-php">
    $this-&gt;logger-&gt;log('this is a message');
    // or
    $this-&gt;getDi()-&gt;get('logger')-&gt;log('this is a message');
    // pr
    Di::getDefault()-&gt;get('logger')-&gt;log('this is a message');
    // etc... there is more examples on the last link i posted.</code></pre>
<blockquote>
<p>Thanks but in service.php I have write this code use \Phalcon\Logger\Adapter\File as LoggerFile;</p>
<blockquote>
<p>//Register a service 'logger' with a class name and its parameters
$di-&gt;set('logger', array(
'className' =&gt; 'Phalcon\Logger\Adapter\File',
'arguments' =&gt; array(
array(
'type'  =&gt; 'parameter',
'value' =&gt; '../apps/logs/error.log'
)
)
));.</p>
</blockquote>
<p>Then how can I call it on my controller to set log.</p>
<blockquote>
<p>Ideally you set all your services on the Di/Service Locator so they are accesible where ever the Di is inyected (Controllers, Plugins, etc), also you can get the default Di by using Di::getDefault() and get the Di like a singleton.</p>
<p>check out the <a href="https://docs.phalcon.io/en/latest/reference/di.html">https://docs.phalcon.io/en/latest/reference/di.html</a>  and read it well, using it could lead you to a good way of solve common problems through services.</p>
<p>P.D. also, if you are doing OOP try to encapsulate the responsabilities of each object. This is, if you want to log something try to do it out of the class that does the action, the loggin responsability must be in its own class. You can check the observer pattern, or use the eventsManager from phalcon... doing it this way you avoid multiple dependencies between classes.</p>
</blockquote>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18292" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18292" data-cf-modified-7e0c0b5f06c51634b6ac021a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6717" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>