---
layout: default
title: 'Fatal error: Call to a member function isAllowed() on a non-object - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Fatal error: Call to a member function isAllowed() on a non-object</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a></span>
            <time itemprop="dateCreated" datetime="2013-04-16T09:31:55-07:00">Apr '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-04-16T09:31:55-07:00">Apr '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>2988</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">4</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a></span>
                <span class="karma">2.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C221" href="#C221">
        <time class="action-date">Apr '13</time>
    </a>
</div>
<div class="post-content"><div><p>Hi everyone,</p>
<p>When I first time run website it is always show me this error, after refresh it is works normal. This kind of issue not depend of running system. The same with *nix or windows.</p>
<p>Fatal error: Call to a member function isAllowed() on a non-object in D:\WebServer\domains\745221\public_html\app\plugins\Security.php on line 89</p>
<p>Fragment of code has taken from sample invo-master </p>
<p>Any idea? What problem is?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">4</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C871" href="#C871">
                <time itemprop="dateCreated" datetime="2013-04-16T12:42:50-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Can you download the latest code for the security plugin? I think a bug fix was added in the recent days</p>
<p><a href="https://github.com/phalcon/invo/blob/master/app/plugins/Security.php">https://github.com/phalcon/invo/blob/master/app/plugins/Security.php</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="871" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="871" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a>        </span>
        <br>

        <span class="karma">2.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C874" href="#C874">
                <time itemprop="dateCreated" datetime="2013-04-16T13:26:11-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>There is also something strange with validation.
Situation next:</p>
<ol>
<li>I created form similar to Products edit form (D:\WebServer\domains\745221\public_html\app\views\products\edit.phtml)</li>
<li>After I fill the form and if entered value not get validation, application show me error (Value of field 'ident' doesn't match regular expression) - it is a true. But the same time it show me &quot;Warning: Missing argument 1 for AccountsController::editAction() in D:\WebServer\domains\745221\public_html\app\controllers\AccountsController.php on line 112&quot; - function editAction the same as in Products.</li>
<li>If i click to Save button one more time (without any changes), application take me out and show error Account does not exist 74522119 (i have account 745221, but what does 19 mean, because i am not editing record id 19, i am just editing record with id 5).</li>
</ol>
<p>If my explanation not clear i can sent screenshots.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="874" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="874" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C875" href="#C875">
                <time itemprop="dateCreated" datetime="2013-04-16T14:37:32-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Could you please post the full code in a Gist (<a href="https://gist.github.com/">https://gist.github.com/</a>)?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="875" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="875" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a>        </span>
        <br>

        <span class="karma">2.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C876" href="#C876">
                <time itemprop="dateCreated" datetime="2013-04-16T14:46:19-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://gist.github.com/zunnar/22f07a631408254e2f08">https://gist.github.com/zunnar/22f07a631408254e2f08</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="876" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="876" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a>        </span>
        <br>

        <span class="karma">2.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C877" href="#C877">
                <time itemprop="dateCreated" datetime="2013-04-16T15:30:06-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Scenario like this:</p>
<ol>
<li>I fill the form</li>
<li>Application check value according my validation rule</li>
<li>
<p>Code find that my value is wrong
if (!$accounts-&gt;save()) {
foreach ($accounts-&gt;getMessages() as $message) {
$this-&gt;flash-&gt;error((string) $message);
}</p>
<pre><code>    return $this-&gt;forward("accounts/edit/".$accounts-&gt;id); // let id equal 1</code></pre>
<p>}
3'. forward me to accounts/edit/1 links</p>
</li>
<li>But when we look at address bar we can see that url not accounts/edit/, but /accounts/save</li>
<li>This mean that this code
public function editAction($id)
{
...
}
Couldn't get $id from URL and edit.phtml recieve error message as value of id input
&lt;input type=&quot;hidden&quot; name=&quot;id&quot; id=&quot;id&quot; value=&quot;&lt;br /&gt;
&lt;b&gt;Notice&lt;/b&gt;:  Undefined variable: id in &lt;b&gt;D:\WebServer\domains\745221\public_html\app\views\accounts\edit.phtml&lt;/b&gt; on line &lt;b&gt;19&lt;/b&gt;&lt;br /&gt;
&quot; /&gt;</li>
</ol>
<p>Something wrong in code, but not in framework as i see.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="877" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="877" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a>        </span>
        <br>

        <span class="karma">2.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C878" href="#C878">
                <time itemprop="dateCreated" datetime="2013-04-16T15:31:38-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>My code the same as sample INVO-master.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="878" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="878" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C879" href="#C879">
                <time itemprop="dateCreated" datetime="2013-04-16T15:44:40-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think $this-&gt;forward is not completely implemented in INVO, it was just a helper to write forwards in an easier way, check how it is implemented:</p>
<p><a href="https://github.com/phalcon/invo/blob/master/app/controllers/ControllerBase.php#L13">https://github.com/phalcon/invo/blob/master/app/controllers/ControllerBase.php#L13</a></p>
<p>It's only taking into account, controller/action, doing a direct forward will fix this problem:</p>
<pre><code class="language-php">return $this-&gt;dispatcher-&gt;forward(array(
     'controller' =&gt; 'accounts',
     'action' =&gt; 'edit',  
     'params' =&gt; array($accounts-&gt;id)
)); </code></pre>
<p>Or fix the forward helper to have this behavior</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="879" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="879" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a>        </span>
        <br>

        <span class="karma">2.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C885" href="#C885">
                <time itemprop="dateCreated" datetime="2013-04-16T20:07:51-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I also try do like this but result the same.</p>
<p>&lt;input type=&quot;hidden&quot; name=&quot;id&quot; id=&quot;id&quot; value=&quot;&lt;br /&gt;
&lt;b&gt;Notice&lt;/b&gt;:  Undefined variable: id in &lt;b&gt;D:\WebServer\domains\745221\public_html\app\views\accounts\edit.phtml&lt;/b&gt; on line &lt;b&gt;19&lt;/b&gt;&lt;br /&gt;
&quot; /&gt;</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="885" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="885" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C886" href="#C886">
                <time itemprop="dateCreated" datetime="2013-04-16T20:11:01-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Did you fixed the forward?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="886" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="886" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a>        </span>
        <br>

        <span class="karma">2.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C891" href="#C891">
                <time itemprop="dateCreated" datetime="2013-04-17T05:51:09-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I don't know why, but i see that editAction function couldn't get parameters (if) from<br />
return $this-&gt;dispatcher-&gt;forward(array(
'controller' =&gt; 'accounts',
'action' =&gt; 'edit',<br />
'params' =&gt; array($accounts-&gt;id)
));</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="891" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="891" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/74ba2f8e840bead0d58da7699b810515?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/157/zunnar" class="user-moderator-N"><span itemprop="name">zunnar</span></a>        </span>
        <br>

        <span class="karma">2.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C975" href="#C975">
                <time itemprop="dateCreated" datetime="2013-04-22T10:19:28-07:00" class="action-date">Apr '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes i fixed it with bit change:
return $this-&gt;dispatcher-&gt;forward(array(
'controller' =&gt; 'accounts',
'action' =&gt; 'edit',
'params' =&gt; array(&quot;id&quot; =&gt; $accounts-&gt;id, ...) // for every variable
)); </p>
<p>Is there way send all variables by params, or i must right every variable separate as i did with 'id'?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="975" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="975" data-cf-modified-5c414cfbf86d7e6ba98d38f9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="221" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>