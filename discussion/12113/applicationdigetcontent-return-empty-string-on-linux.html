---
layout: default
title: 'application($di)-&gt;getContent(); return empty string on Linux - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">application($di)-&gt;getContent(); return empty string on Linux</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/7601/Qvil-Young" class="user-moderator-N"><span itemprop="name">qvil young</span></a></span>
            <time itemprop="dateCreated" datetime="2016-07-16T21:48:47-07:00">Jul '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-07-16T21:48:47-07:00">Jul '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1316</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/2f391118a71c6e6a1a8fdf7d19cbc9b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/7601/Qvil-Young" class="user-moderator-N"><span itemprop="name">qvil young</span></a></span>
                <span class="karma">5.0k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C12113" href="#C12113">
        <time class="action-date">Jul '16</time>
    </a>
</div>
<div class="post-content"><div><h3>The difference between windows and Linux</h3>
<p>####### Code : (new \Phalcon\Mvc\Application($di))-&gt;handle()-&gt;getContent();</p>
<p>Hi,All!</p>
<p>I have a problem on linux system...</p>
<h3>First of all,I have a controller file...</h3>
<pre><code class="language-php">public function getAction()
{
    return "f**k man~~~";
}</code></pre>
<h3>In the index.php file...</h3>
<pre><code class="language-php">  echo (new \Phalcon\Mvc\Application($di))-&gt;handle()-&gt;getContent();</code></pre>
<h2>So,output result as follow...</h2>
<h5>1.on windows(aphache)</h5>
<p>&quot;f**k man~~~&quot;</p>
<h5>2.but on linux(nginx),the result is a empty string~~~</h5>
<h3>~~if I modify the controller code...</h3>
<pre><code class="language-php">public function getAction()
{
    echo "f**k man~~~";
}</code></pre>
<h4>on the linux,the result is successful!</h4>
<h4>So,I found,on linux(nginx), the follow code return a empty string!</h4>
<pre><code class="language-php">(new \Phalcon\Mvc\Application($di))-&gt;handle()-&gt;getContent();</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-a3e3197221aa0ccce03333de-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-a3e3197221aa0ccce03333de-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/571/duythien" class="user-moderator-Y"><span itemprop="name">Thien Tran</span></a>        </span>
        <br>

        <span class="karma">58.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C36829" href="#C36829">
                <time itemprop="dateCreated" datetime="2016-07-16T22:20:32-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hello</p>
<p>I see your code difference betweent windows and Linux</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36829" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36829" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2f391118a71c6e6a1a8fdf7d19cbc9b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7601/Qvil-Young" class="user-moderator-N"><span itemprop="name">qvil young</span></a>        </span>
        <br>

        <span class="karma">5.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36829"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/97cfdb3586f82c3e1e4fe562bda688b8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Thien Tran                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36831" href="#C36831">
                <time itemprop="dateCreated" datetime="2016-07-16T23:36:53-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Hello</p>
<p>I see your code difference betweent windows and Linux
Thanks for your help<ins></ins></p>
</blockquote>
<p>code in github site:
<a href="https://github.com/q-phalcon/q-phalcon">https://github.com/q-phalcon/q-phalcon</a></p>
<p>you can use composer tool to download this code：</p>
<pre><code class="language-bash">composer create-project q-phalcon/q-phalcon</code></pre>
<p>The code on the two system is exactly the same.</p>
<p>My nginx config is</p>
<pre><code class="language-bash">
server {
        listen          12333;
        server_name     localhost;
        root            /home/qvil/www/public;
        error_page 404  /404.html;
        index index.php index.html index.htm;

        location ~* \.(ico|jpg|png|gif|jpeg|swf|flv|zip)$ {
                if (!-e $request_filename) {
                        return 404;
                }
        }

        location / {
                try_files $uri $uri/ /index.php?$query_string;
        }

        location ~ \.php$ {
                fastcgi_pass   127.0.0.1:12334;
                fastcgi_index  index.php;
                fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
                include        fastcgi_params;
    }
}
</code></pre>
<p>Thanks again！！</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36831" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36831" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36837" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C36837" href="#C36837">
                <time itemprop="dateCreated" datetime="2016-07-18T01:16:56-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Why do you use parenthesis here?</p>
<pre><code class="language-php">echo (new \Phalcon\Mvc\Application($di))-&gt;handle()-&gt;getContent();
//try this:
new \Phalcon\Mvc\Application($di)-&gt;handle()-&gt;getContent();</code></pre>
<p>On success, if your controller returns response it will be flushed automatically to the client. For testing purposes you can still <code>echo</code> it, but the main purpose for getContent() method is to flush output buffers to the client, if any, so <code>echo</code> should be avoided.</p>
<p>The most important - how did you defined your Routes, i.e. Caps?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36837" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36837" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2f391118a71c6e6a1a8fdf7d19cbc9b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7601/Qvil-Young" class="user-moderator-N"><span itemprop="name">qvil young</span></a>        </span>
        <br>

        <span class="karma">5.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36837"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Jonathan Aaron Steel                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36849" href="#C36849">
                <time itemprop="dateCreated" datetime="2016-07-18T02:55:55-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have defined my Routers as follow: (  /home/tome/www/public/index.php  )</p>
<pre><code class="language-php">
try {
    require_once "../app/Controllers/IndexController.php";

    define('MY_ROOT_PATH','/home/tome/www/');
    define('MY_VIEW_PATH','/home/tome/www/view/');

    $di = new \Phalcon\DI\FactoryDefault();
    $router = new \Phalcon\Mvc\Router();

    $router-&gt;setDefaults([
        "namespace" =&gt; 'App\Controllers',
        "controller" =&gt; 'Index',
        "action" =&gt; 'test',
    ]);

    $di-&gt;set('url', function () {
        $url = new \Phalcon\Mvc\Url();
        $url-&gt;setBaseUri(MY_ROOT_PATH);
        return $url;
    });

    $di-&gt;set('view', function () {
        $view = new \Phalcon\Mvc\View();
        $view-&gt;setViewsDir(MY_VIEW_PATH);
        return $view;
    });

    $app = new \Phalcon\Mvc\Application($di);
    $content = $app-&gt;handle()-&gt;getContent();

    $response = new \Phalcon\Http\Response();
    $response-&gt;setContent($content);
    $response-&gt;send();

    } catch (\Exception $ex) {
        echo $ex-&gt;getMessage();
}
</code></pre>
<p>I had tested this code,under the windwos,it is successful,but,uder the linux,,,also return a empty string!</p>
<p>My controller file as follow. (  /home/tome/www/app/Controllers/IndexController.php  )</p>
<pre><code class="language-php">    namespace App\Controllers;
    use Phalcon\Mvc\Controller;

    class IndexController extends Controller
    {
        public function testAction()
        {
            return "f**k man~~~";
        }
    }
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36849" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36849" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36851" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C36851" href="#C36851">
                <time itemprop="dateCreated" datetime="2016-07-18T05:27:12-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So you set your URL component and setBaseUri as an absolute path on a filesystem? How is that suppose to work on a GNU/Linux, you need to supply your public directory for setBaseUri() method.</p>
<p>Check official docs: <a href="https://docs.phalcon.io/en/latest/reference/url.html#generating-urls-and-paths">https://docs.phalcon.io/en/latest/reference/url.html#generating-urls-and-paths</a></p>
<p>All of this should be in relation with your web server configuration. So if your root path is /full/path/to/phalcon/app/public you only need to set <code>setBaseUri</code> to <code>/</code>.</p>
<p>Also turn on error reporting on Linux to see what else it complains.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36851" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36851" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2f391118a71c6e6a1a8fdf7d19cbc9b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7601/Qvil-Young" class="user-moderator-N"><span itemprop="name">qvil young</span></a>        </span>
        <br>

        <span class="karma">5.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36851"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Jonathan Aaron Steel                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36867" href="#C36867">
                <time itemprop="dateCreated" datetime="2016-07-18T23:49:58-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for your help~~
I will use relation path to my web server! </p>
<p>But, the problem of &quot;empty response&quot; ,I haven't come up with a solution ~~~ oh...
I was not found any error log for Nginx or Php-fpm...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36867" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36867" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2f391118a71c6e6a1a8fdf7d19cbc9b5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/7601/Qvil-Young" class="user-moderator-N"><span itemprop="name">qvil young</span></a>        </span>
        <br>

        <span class="karma">5.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C36851"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Jonathan Aaron Steel                    </a>
                </div><div class="posts-buttons" align="right"><a name="C36869" href="#C36869">
                <time itemprop="dateCreated" datetime="2016-07-19T00:26:04-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,My friend~~</p>
<p>I was found a doubt,So this problem has to de solved!</p>
<p>In my web server ( nginx ) , My root directory is '/home/tome/www/',</p>
<p>my public directory is '/home/tome/www/public',</p>
<p>my view directory is '/home/tome/www/app_view'</p>
<p>erenow,my view directory was empty,</p>
<p>now ,I create a file - &quot;/home/tome/www/app_view/Index/test.phtml&quot;, the file content as follow:</p>
<p>&quot;hello, my phtml string...&quot;</p>
<p>Like this, the code</p>
<pre><code class="language-php"> $content = $app-&gt;handle()-&gt;getContent();</code></pre>
<p>return the view file's content!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36869" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36869" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="36897" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '16</span>
              </span><br/><a name="C36897" href="#C36897">
                <time itemprop="dateCreated" datetime="2016-07-19T04:39:01-07:00" class="action-date">Jul '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>1st, you should set your nginx to target /public directory at it's absolute path. So your home page (with domain, if any) would become <code>www.domain.com</code> and not <code>www.domain.com/public</code>.
Then set your views, controllers etc dirs relative to the root path.</p>
<p>In your <code>index.php</code> set constant:</p>
<pre><code class="language-php">define('APP_PATH', realpath('..'));
//resolve config object
$config = new \Phalcon\Config\Adapter\Ini(APP_PATH . '/config/config.ini');</code></pre>
<p>Then in your <code>config.ini</code> (or .php) set dirs one level up from current:
NOTE: your config file is in <code>config</code> directory, thus resulting your models, controllers etc are one level up:</p>
<pre><code>modelsDir     = ../models/
controllersDir     = ../controllers/
migrationsDir = ../migrations/
viewsDir      = ../views/
baseUri       = /</code></pre>
<p><code>baseUrl</code> needs to be referred in your services container as:</p>
<pre><code class="language-php">//URL service
$di-&gt;setShared('url', function () use ($config) {
    $url = new UrlResolver(); // alias of: \Phalcon\Mvc\Url
    $url-&gt;setBaseUri($config-&gt;application-&gt;baseUri);
    return $url;
});</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="36897" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="36897" data-cf-modified-a3e3197221aa0ccce03333de-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="12113" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>