---
layout: default
title: 'Guys, please help me to understand Models and returning data to views - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Guys, please help me to understand Models and returning data to views</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1035/deb0rian" class="user-moderator-N"><span itemprop="name">Boris Lapouga</span></a></span>
            <time itemprop="dateCreated" datetime="2014-03-19T13:22:46-07:00">Mar '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-03-19T13:22:46-07:00">Mar '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>1163</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/c881fdbfe1d8539fe30f87b2de5bd777?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1035/deb0rian" class="user-moderator-N"><span itemprop="name">Boris Lapouga</span></a></span>
                <span class="karma">6.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1845" href="#C1845">
        <time class="action-date">Mar '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hey,</p>
<p>So I have a few issues setting up my application.</p>
<p>First, I created a model and:</p>
<pre><code class="language-php">use Phalcon\Mvc\Model;

class TelegraphGroup extends Model {
    protected $id;
    protected $name;
}</code></pre>
<ol>
<li>It wants me to implement getConnectionService, setForceExists etc.. nothing like that in documentation. What is it?</li>
<li>When I try to instantiate a model in my controller &quot;$model = new TelegraphGroup();&quot; it says &quot;Fatal error: Class 'TelegraphGroup' not found&quot;
Though in my loader.php I have this:</li>
</ol>
<pre><code class="language-php">$loader-&gt;registerDirs(
    array(
        $config-&gt;application-&gt;controllersDir,
        $config-&gt;application-&gt;modelsDir,
        $config-&gt;application-&gt;pluginsDir
    )
)-&gt;register();</code></pre>
<p>Models are registered.. :/</p>
<p>Second,
Lets say I have a form built within a view:</p>
<pre><code class="language-html">{% raw %}{%{% endraw %} block content {% raw %}%}{% endraw %}
    &lt;form role="form" id="form-group-add" action="/groups/create"&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="group-name"&gt;Название группы&lt;/label&gt;
            &lt;input type="text" class="form-control" id="name" name="name"&gt;
            &lt;div class="form-error"&gt;&lt;/div&gt;
        &lt;/div&gt;
        &lt;button type="submit" class="btn btn-default"&gt;Создать&lt;/button&gt;
    &lt;/form&gt;
{% raw %}{%{% endraw %} endblock {% raw %}%}{% endraw %}</code></pre>
<ol>
<li>How can I use Phalcon filters and validation in controller if my form wasn't created with Phalcon's form object? I don't want to write weird validations with php and not using the pwoer of Phalcon....</li>
<li>My form goes to /groups/create, which adds the record to database and now I want to go back to the same &quot;add&quot; view and tell the user that It's all right or there's an error, how can i properly redirect back with some new variable values injected into the view?</li>
</ol>
<p>Thanks guys!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-b8787656212606697753bcaf-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-b8787656212606697753bcaf-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c393137504e3c8e04fec99f187fcc33e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1057/maxgalbu" class="user-moderator-N"><span itemprop="name">Max Galbusera</span></a>        </span>
        <br>

        <span class="karma">3.2k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6387" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C6387" href="#C6387">
                <time itemprop="dateCreated" datetime="2014-03-20T07:37:57-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>.</p>
<pre><code>It wants me to implement getConnectionService, setForceExists etc.. nothing like that in documentation. What is it?</code></pre>
<p>Never saw that error - did you set a <code>db</code> service in the dependency injector?</p>
<pre><code class="language-php">$di-&gt;setShared('db', function() {
    return new \Phalcon\Db\Adapter\Pdo\Mysql(array(
        "host" =&gt; $config-&gt;database-&gt;host,
        "username" =&gt; $config-&gt;database-&gt;username,
        "password" =&gt; $config-&gt;database-&gt;password,
        "dbname" =&gt; $config-&gt;database-&gt;name,
    ));
});</code></pre>
<pre><code>When I try to instantiate a model in my controller "$model = new TelegraphGroup();" it says "Fatal error: Class 'TelegraphGroup' not found" Though in my loader.php I have this:</code></pre>
<p>Can you please share your config and how you define it?</p>
<pre><code>How can I use Phalcon filters and validation in controller if my form wasn't created with Phalcon's form object? I don't want to write weird validations with php and not using the pwoer of Phalcon....</code></pre>
<p>You can use validation (<a href="https://docs.phalcon.io/en/1.2.6/reference/validation.html">https://docs.phalcon.io/en/1.2.6/reference/validation.html</a>), either by creating a <code>Phalcon\Validation</code> object in the controller and then adding rules, or by defining your own class <code>MyValidation</code> and then calling <code>MyValidation::validate()</code> in the controller</p>
<pre><code>My form goes to /groups/create, which adds the record to database and now I want to go back to the same "add" view and tell the user that It's all right or there's an error, how can i properly redirect back with some new variable values injected into the view?</code></pre>
<p>I think you can use flashsession for that:</p>
<p><a href="https://docs.phalcon.io/en/latest/api/Phalcon_Flash_Session.html">https://docs.phalcon.io/en/latest/api/Phalcon_Flash_Session.html</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6387" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6387" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c881fdbfe1d8539fe30f87b2de5bd777?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1035/deb0rian" class="user-moderator-N"><span itemprop="name">Boris Lapouga</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6407" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C6407" href="#C6407">
                <time itemprop="dateCreated" datetime="2014-03-20T10:23:29-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah, my config:</p>
<pre><code class="language-php">&lt;?php

return new \Phalcon\Config(array(
    'database' =&gt; array(
        'adapter'     =&gt; 'Mysql',
        'host'        =&gt; 'localhost',
        'username'    =&gt; 'webdb',
        'password'    =&gt; 'xxx',
        'dbname'      =&gt; 'xxx',
    ),
    'application' =&gt; array(
        'name'          =&gt; 'Xxx',
        'controllersDir' =&gt; __DIR__ . '/../../app/controllers/',
        'modelsDir'      =&gt; __DIR__ . '/../../app/models/',
        'viewsDir'       =&gt; __DIR__ . '/../../app/views/',
        'pluginsDir'     =&gt; __DIR__ . '/../../app/plugins/',
        'libraryDir'     =&gt; __DIR__ . '/../../app/library/',
        'cacheDir'       =&gt; __DIR__ . '/../../app/cache/',
        'vendorPath'     =&gt; __DIR__ . '/../../vendor/',
        'baseUri'        =&gt; 'https://catechize.com/',
    ),
    'steam' =&gt; array(
        'apiKey' =&gt; 'Xxx',
        'identity' =&gt; 'https://steamcommunity.com/openid/?l=english'
    ),
    'openid' =&gt; array(
        'domain' =&gt; 'https://www.xxx.com'
    )
));</code></pre>
<p>And my services.php:</p>
<pre><code class="language-php">&lt;?php

use Phalcon\DI\FactoryDefault;
use Phalcon\Mvc\View;
use Phalcon\Mvc\Url as UrlResolver;
use Phalcon\Db\Adapter\Pdo\Mysql as DbAdapter;
use Phalcon\Mvc\View\Engine\Volt as VoltEngine;
use Phalcon\Mvc\Model\Metadata\Memory as MetaDataAdapter;
use Phalcon\Session\Adapter\Files as SessionAdapter;

$di = new FactoryDefault();

// Store config in DI
$di-&gt;set('config', $config);

$di-&gt;set('url', function () use ($config) {
    $url = new UrlResolver();
    $url-&gt;setBaseUri($config-&gt;application-&gt;baseUri);

    return $url;
}, true);

$di-&gt;set('openIdDecorator', function() use ($di) {
    $openId = new OpenIdDecorator($di);

    return $openId;
});

$di-&gt;set('view', function () use ($config) {

    $view = new View();

    $view-&gt;setViewsDir($config-&gt;application-&gt;viewsDir);

    $view-&gt;registerEngines(array(
        '.volt' =&gt; function ($view, $di) use ($config) {

            $volt = new VoltEngine($view, $di);

            $volt-&gt;setOptions(array(
                'compiledPath' =&gt; $config-&gt;application-&gt;cacheDir,
                'compiledSeparator' =&gt; '_',
                'stat' =&gt; true,
                'compileAlways' =&gt; true
            ));

            return $volt;
        },
        '.phtml' =&gt; 'Phalcon\Mvc\View\Engine\Php'
    ));

    return $view;
}, true);

$di-&gt;set('db', function () use ($config) {
    return new DbAdapter(array(
        'host' =&gt; $config-&gt;database-&gt;host,
        'username' =&gt; $config-&gt;database-&gt;username,
        'password' =&gt; $config-&gt;database-&gt;password,
        'dbname' =&gt; $config-&gt;database-&gt;dbname
    ));
});

$di-&gt;set('modelsMetadata', function () {
    return new MetaDataAdapter();
});

$di-&gt;set('session', function () {
    $session = new SessionAdapter();
    $session-&gt;start();

    return $session;
});</code></pre>
<p>P.S I can't fix the php highlight for second file.. it works weirdly here.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6407" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6407" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c881fdbfe1d8539fe30f87b2de5bd777?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1035/deb0rian" class="user-moderator-N"><span itemprop="name">Boris Lapouga</span></a>        </span>
        <br>

        <span class="karma">6.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6480" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C6480" href="#C6480">
                <time itemprop="dateCreated" datetime="2014-03-23T14:24:23-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Guys seriously, what is this issue with Model that wants me to extend some weird methods and nto being able to expose Model in Controller? I'm using 1.3.0 btw..</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6480" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6480" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c393137504e3c8e04fec99f187fcc33e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1057/maxgalbu" class="user-moderator-N"><span itemprop="name">Max Galbusera</span></a>        </span>
        <br>

        <span class="karma">3.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6621" href="#C6621">
                <time itemprop="dateCreated" datetime="2014-03-26T16:12:53-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I don't see anything wrong with your code, so i can only guess :) maybe your mysql user doesn't have enough permissions? As i was saying before, I do not have this problem, and my code is similar to yours, so the problem could be outside phalcon. I'm sorry i can't help more than that.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6621" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6621" data-cf-modified-b8787656212606697753bcaf-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1845" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>