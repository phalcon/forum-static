---
layout: default
title: 'how to change urls in the routing file - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/13/routing">Routing</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">how to change urls in the routing file</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a></span>
            <time itemprop="dateCreated" datetime="2015-05-05T04:10:44-07:00">May '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-05-05T04:10:44-07:00">May '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">8</span>
                </td>
                <td>
                    <label>Views</label><br>1965</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a></span>
                <span class="karma">6.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6630" href="#C6630">
        <time class="action-date">May '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, </p>
<p>I'm trying to change the url for the user, for expample: www.site.com/user/username. and this is my code:</p>
<blockquote>
<p>$router-&gt;add(
'/user/:param',
array(
'controller' =&gt; 'user',
'action'     =&gt; 'username',
'param'     =&gt; 1,
)
);</p>
</blockquote>
<p>it shows me the page is not found, but when I change the code to the following:</p>
<blockquote>
<p>$router-&gt;add(
'/user/:params',
array(
'controller' =&gt; 'user',
'action'     =&gt; 'username',
'params'     =&gt; 1,
)
);</p>
</blockquote>
<p>it works but all the methods for user controller doesn't work. I would like also to add some more urls like this: www.site.com/user/username/settings</p>
<p>how to solve this? Thanks</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C17930" href="#C17930">
                <time itemprop="dateCreated" datetime="2015-05-05T04:41:06-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>hi</p>
<blockquote>
<p>it works but all the methods for user controller doesn't work</p>
</blockquote>
<p>??</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17930" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17930" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C17930"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        le51                    </a>
                </div><div class="posts-buttons" align="right"><a name="C17938" href="#C17938">
                <time itemprop="dateCreated" datetime="2015-05-05T05:58:23-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>hi</p>
<blockquote>
<p>it works but all the methods for user controller doesn't work</p>
</blockquote>
<p>??</p>
</blockquote>
<p>I mean all the other functions of the controller (user) not working any more. Functions like register and log in ..etc. It show me page not found. This happened only if I use the second code in my topic.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17938" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17938" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fb35f447c5edce740bc88e405d5eb3af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/742/cspeak" class="user-moderator-N"><span itemprop="name">Steven</span></a>        </span>
        <br>

        <span class="karma">5.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="17955" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C17955" href="#C17955">
                <time itemprop="dateCreated" datetime="2015-05-05T09:52:23-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Is there a specific reason you're using <strong>:param</strong> instead of giving your variable a descriptive name such as &quot;<strong>username</strong>&quot;?</p>
<p>Take a look here for more info on supported placeholders <a href="http://docs.phalcon.io/en/latest/reference/routing.html#defining-routes">http://docs.phalcon.io/en/latest/reference/routing.html#defining-routes</a></p>
<p>In any case, have you tried this syntax?</p>
<pre><code class="language-php">$router-&gt;add( '/user/{username}', array( 'controller' =&gt; 'user', 'action' =&gt; 'username') ); // Option 1
//or
$router-&gt;add( '/user/{param}', array( 'controller' =&gt; 'user', 'action' =&gt; 'username') ); // Option 2</code></pre>
<p>Then in the controller just reference the username like so:</p>
<pre><code class="language-php">$username = $this-&gt;dispatcher-&gt;getParam('username'); // Use with Option 1 from above
// or - Depending on the method above
$username = $this-&gt;dispatcher-&gt;getParam('param'); // Use with Option 2 from above</code></pre>
<p>For adding more URLs, you should be able to do so like this:</p>
<pre><code class="language-php">$router-&gt;add( '/user/{username}/settings', array( 'controller' =&gt; 'user', 'action' =&gt; 'settings') );
/**
 * The in the controller get the param values like so:
 * $username = $this-&gt;dispatcher-&gt;getParam('username');
 */

// And for specific settings
$router-&gt;add( '/user/{username}/settings/{setting_name}', array( 'controller' =&gt; 'user', 'action' =&gt; 'specificSetting') );
/**
 * The in the controller get the param values like so:
 * $username = $this-&gt;dispatcher-&gt;getParam('username');
 * $setting_name = $this-&gt;dispatcher-&gt;getParam('setting_name');
 */
</code></pre>
<p>Also, as your application grows, it would be a good idea to start naming your routes:</p>
<pre><code class="language-php">$router-&gt;add( '/user/{username}/settings', 
    array(
        'controller' =&gt; 'user',
        'action' =&gt; 'settings'
    )
)-&gt;setName('user_settings');</code></pre>
<p>Then in your views you can use the url function (Volt Example):</p>
<pre><code class="language-volt">&lt;a href="{% raw %}{{{% endraw %} url(['for' : 'user_settings','username' : user.getUsername() ]) {% raw %}}}{% endraw %}"&gt;{% raw %}{{{% endraw %} user.getUsername() {% raw %}}}{% endraw %}&lt;/a&gt; 

If you pass the user object/model from the controller to the view, this will render &lt;a href="/user/my_username/settings"&gt;my_username&lt;/a&gt;</code></pre>
<p>So later on if you change your URL for that route, your application will automatically render the new URL without you having to update anything else.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17955" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17955" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C17968" href="#C17968">
                <time itemprop="dateCreated" datetime="2015-05-05T15:01:16-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code class="language-php">
// After experiencig some issues with

$router-&gt;add( '/user/:param', array( 'controller' =&gt; 'user', 'action' =&gt; 'username', 'param' =&gt; 1, ) );

// I prefer 

$router-&gt;add( '/user/{username}', array( 'controller' =&gt; 'user', 'action' =&gt; 'username') ); // Option 1

// In UserController

public function usernameAction($username)

// So there is no need of $username = $this-&gt;dispatcher-&gt;getParam('username');
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17968" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17968" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="17986" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C17986" href="#C17986">
                <time itemprop="dateCreated" datetime="2015-05-06T05:00:16-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi, I have tried the both options and it works, but all the other functions of user controller not working. It keep showing page not found.</p>
<p>here is my route</p>
<pre><code class="language-php">&lt;?php

$router = new Phalcon\Mvc\Router();

$router-&gt;add(
     '/user/{username}',
     array(
         'controller' =&gt; 'user',
         'action'     =&gt; 'username',
     )
 );

$router-&gt;add(
     '/user/{username}/information',
     array(
        'controller' =&gt; 'user',
        'action'     =&gt; 'information'
     )
 );

 return $router;</code></pre>
<p>here is my action</p>
<pre><code class="language-php">&lt;?php

public function usernameAction($username)
{
      $username = $this-&gt;dispatcher-&gt;getParam('username');

      $user = User::findFirstByUsername($username);

      if(!$user)
      {
          $this-&gt;dispatcher-&gt;forward(array(
          'controller' =&gt; 'Error',
          'action' =&gt; '_404'
          ));
          return false;
      } 

      $this-&gt;tag-&gt;setTitle($username .' profile');

      if($this-&gt;session-&gt;has('usersession'))
      {
          $session = $this-&gt;session-&gt;get('usersession');

          $user_follow = User_follow::findFirstByid($session-&gt;id);
      }

      $this-&gt;view-&gt;setVar('user', $user);
      $this-&gt;view-&gt;setVar('user_follow', $user_follow);
      $this-&gt;view-&gt;setVar('count_followers', count(User_follow::find("follower = ".$user-&gt;id."")));
      $this-&gt;view-&gt;setVar('count_following', count(User_follow::find("following = ".$user-&gt;id."")));
}
</code></pre>
<p>any thing I missed?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17986" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17986" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C17988" href="#C17988">
                <time itemprop="dateCreated" datetime="2015-05-06T05:38:32-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>you say &quot;it works&quot;, did you mean &quot;usernameAction&quot; from UserController works,  but none of the others UserController actions works ?</p>
<p>In that case, you should have better shown us the code from the others UserController actions ;-)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17988" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17988" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18001" href="#C18001">
                <time itemprop="dateCreated" datetime="2015-05-06T12:32:27-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes correct, here is my code</p>
<pre><code class="language-php">
&lt;?php

namespace FC\Controllers;

use Phalcon\Mvc\Controller,
    FC\Controllers\ErrorController as Error,
    FC\Models\User,
    FC\Models\User_follow;

class UserController extends ControllerBase
{
    public function createAction()
    {
        $this-&gt;tag-&gt;setTitle('Create a user');

        $this-&gt;view-&gt;setLayout('NoHeaderAside');

        $user = new User();
        $user-&gt;username      = $this-&gt;request-&gt;getPost('username');
        $user-&gt;userpass      = $this-&gt;security-&gt;hash($this-&gt;request-&gt;getPost('userpass'));
        $user-&gt;useremail     = $this-&gt;request-&gt;getPost('useremail');
        $user-&gt;name          = $this-&gt;request-&gt;getPost('name');
        $user-&gt;country       = $this-&gt;request-&gt;getPost('country');
        $user-&gt;avatar        = 1;
        $user-&gt;created_at    = date('Y-m-d H:i:s');
        $user-&gt;last_activity = date('Y-m-d H:i:s');

        if ($this-&gt;request-&gt;isPost())
        {
            if($user-&gt;save()) 
            {
                $this-&gt;session-&gt;set('usersession', $user);

                $this-&gt;flash-&gt;success('The user has been created successfully.');
            }
            else
            {
                foreach($user-&gt;getMessages() as $message) 
                {
                    $this-&gt;flash-&gt;error((string) $message);
                }
            }
        }
    }

    public function loginAction()
    {
        if($this-&gt;session-&gt;has('usersession'))
        {
            $this-&gt;response-&gt;redirect('index');
        }

        $this-&gt;tag-&gt;setTitle('Log in');

        $this-&gt;view-&gt;setLayout('NoHeaderAside');

        $username  = $this-&gt;request-&gt;getPost('username');
        $userpass  = $this-&gt;request-&gt;getPost('userpass');

        $user = User::findFirstByUsername($username);

        if($this-&gt;request-&gt;isPost())
        {
            if($user)
            {
                if($this-&gt;security-&gt;checkHash($userpass, $user-&gt;userpass))
                {
                    $this-&gt;session-&gt;set('usersession', $user);
                    $this-&gt;response-&gt;redirect('index');
                }
                else
                {
                    $this-&gt;flash-&gt;error('The information is not correct.');
                }
            }
            else
            {
                $this-&gt;flash-&gt;error('The information is not correct.');
            }
        }
    }

    public function forgotAction()
    {
        if($this-&gt;session-&gt;has('usersession'))
        {
            $this-&gt;response-&gt;redirect('index');
        }

        $this-&gt;tag-&gt;setTitle('Forgot Password');

        $this-&gt;view-&gt;setLayout('NoHeaderAside');

        $useremail  = $this-&gt;request-&gt;getPost('useremail');

        $user = User::findFirstByUseremail($useremail);

        if($this-&gt;request-&gt;isPost())
        {
            if($user)
            {
                $this-&gt;flash-&gt;success('An email has been sent to '. $useremail);
            }
            else
            {
                $this-&gt;flash-&gt;error('We cannot find this email.');
            }
        }
    }

    public function usernameAction()
    {
        $username = $this-&gt;dispatcher-&gt;getParam('username');

        $user = User::findFirstByUsername($username);

        if(!$user)
        {
            $this-&gt;dispatcher-&gt;forward(array(
                'controller' =&gt; 'Error',
                'action' =&gt; '_404'
            ));
            return false;
        } 

        $this-&gt;tag-&gt;setTitle($username .' profile');

        if($this-&gt;session-&gt;has('usersession'))
        {
             $session = $this-&gt;session-&gt;get('usersession');

            $user_follow = User_follow::findFirstByFollower($session-&gt;id);
        }

        $this-&gt;view-&gt;setVar('user', $user);
        $this-&gt;view-&gt;setVar('user_follow', $user_follow);
        $this-&gt;view-&gt;setVar('count_followers', count(User_follow::find("follower = ".$user-&gt;id."")));
        $this-&gt;view-&gt;setVar('count_following', count(User_follow::find("following = ".$user-&gt;id."")));
    }

    public function informationAction($username)
    {
        if(!$this-&gt;session-&gt;has('usersession'))
        {
            $this-&gt;response-&gt;redirect('index');
        }

        $user = User::findFirstByUsername($username);

        if(!$user)
        {
            $this-&gt;dispatcher-&gt;forward(array(
                'controller' =&gt; 'Error',
                'action' =&gt; '_404'
            ));
            return false;
        } 

        $this-&gt;tag-&gt;setTitle('Information');

        $user = User::findFirstByUsername($username);

        $this-&gt;view-&gt;setVar('user', $user);
        $this-&gt;view-&gt;setVar('user_follow', $user_follow);
        $this-&gt;view-&gt;setVar('count_followers', count(User_follow::find("follower = ".$user-&gt;id."")));
        $this-&gt;view-&gt;setVar('count_following', count(User_follow::find("following = ".$user-&gt;id."")));

    }

    public function logoutAction()
    {
        $this-&gt;tag-&gt;setTitle('Log Out');

        if(!$this-&gt;session-&gt;has('usersession'))
        {
            $this-&gt;flash-&gt;error('You need to sign in first.');
        }
        else
        {
            $this-&gt;session-&gt;remove('usersession');
            $this-&gt;session-&gt;destroy();
            $this-&gt;flash-&gt;success('You have logged out successfully.');
        }
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18001" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18001" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fb35f447c5edce740bc88e405d5eb3af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/742/cspeak" class="user-moderator-N"><span itemprop="name">Steven</span></a>        </span>
        <br>

        <span class="karma">5.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C18001"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Khaledzcom                    </a>
                </div><div class="posts-buttons" align="right"><a name="C18039" href="#C18039">
                <time itemprop="dateCreated" datetime="2015-05-07T10:31:41-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>We will also need to see how your routes are defined to find out why the routes are not mapping to the controllers correctly.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18039" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18039" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C18039"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/fb35f447c5edce740bc88e405d5eb3af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Steven                    </a>
                </div><div class="posts-buttons" align="right"><a name="C18045" href="#C18045">
                <time itemprop="dateCreated" datetime="2015-05-07T13:07:55-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>We will also need to see how your routes are defined to find out why the routes are not mapping to the controllers correctly.</p>
</blockquote>
<p>Okay, I have a file I called it route.php  and it's inside folder called config. here is route.php</p>
<pre><code class="language-php">&lt;?php

$router = new Phalcon\Mvc\Router();

$router-&gt;add(
     '/user/{username}',
     array(
         'controller' =&gt; 'user',
         'action'     =&gt; 'username',
     )
 );

$router-&gt;add(
     '/user/{username}/information',
     array(
        'controller' =&gt; 'user',
        'action'     =&gt; 'information'
     )
 );

 return $router;</code></pre>
<p>config/service.php</p>
<pre><code class="language-php"> &lt;?php

use Phalcon\Mvc\Url as UrlResolver;
use Phalcon\Mvc\View\Engine\Volt;
use Phalcon\Mvc\View;
use Phalcon\Db\Adapter\Pdo\Mysql as DatabaseConnection;
use Phalcon\Events\Manager as EventsManager;
use Phalcon\Logger\Adapter\File as FileLogger;
use Phalcon\Session\Adapter\Files as SessionAdapter;
use Phalcon\Cache\Backend\File as FileCache;
use Phalcon\Mvc\Dispatcher as MvcDispatcher;

/**
 * The URL component is used to generate all kind of urls in the application
 */
$di-&gt;set(
    'url',
    function () use ($config) {
        $url = new UrlResolver();
        if (!$config-&gt;application-&gt;debug) {
            $url-&gt;setBaseUri($config-&gt;application-&gt;production-&gt;baseUri);
            $url-&gt;setStaticBaseUri($config-&gt;application-&gt;production-&gt;staticBaseUri);
        } else {
            $url-&gt;setBaseUri($config-&gt;application-&gt;development-&gt;baseUri);
            $url-&gt;setStaticBaseUri($config-&gt;application-&gt;development-&gt;staticBaseUri);
        }
        return $url;
    },
    true
);

/**
 * Setting up volt
 */
$di-&gt;set(
    'volt',
    function ($view, $di) use ($config) {

        $volt = new Volt($view, $di);

        $volt-&gt;setOptions(
            array(
                "compiledPath"      =&gt; APP_PATH . "/app/cache/volt/",
                "compiledSeparator" =&gt; "_",
                "compileAlways"     =&gt; $config-&gt;application-&gt;debug
            )
        );

        $volt-&gt;getCompiler()-&gt;addFunction('number_format', function ($resolvedArgs) {
            return 'number_format(' . $resolvedArgs . ')';
        });

        return $volt;
    },
    true
);

/**
 * Setting up the view component
 */
$di-&gt;set(
    'view',
    function () use ($config) {

        $view = new View();

        $view-&gt;setViewsDir($config-&gt;application-&gt;viewsDir);

        $view-&gt;registerEngines(
            array(
                ".volt" =&gt; 'volt'
            )
        );

        return $view;
    },
    true
);

/**
 * Database connection is created based in the parameters defined in the configuration file
 */
$di-&gt;set(
    'db',
    function () use ($config) {

        $connection = new DatabaseConnection($config-&gt;database-&gt;toArray());

        $debug = $config-&gt;application-&gt;debug;
        if ($debug) {

            $eventsManager = new EventsManager();

            $logger = new FileLogger(APP_PATH . "/app/logs/db.log");

            //Listen all the database events
            $eventsManager-&gt;attach(
                'db',
                function ($event, $connection) use ($logger) {
                    /** @var Phalcon\Events\Event $event */
                    if ($event-&gt;getType() == 'beforeQuery') {
                        /** @var DatabaseConnection $connection */
                        $variables = $connection-&gt;getSQLVariables();
                        if ($variables) {
                            $logger-&gt;log($connection-&gt;getSQLStatement() . ' [' . join(',', $variables) . ']', \Phalcon\Logger::INFO);
                        } else {
                            $logger-&gt;log($connection-&gt;getSQLStatement(), \Phalcon\Logger::INFO);
                        }
                    }
                }
            );

            //Assign the eventsManager to the db adapter instance
            $connection-&gt;setEventsManager($eventsManager);
        }

        return $connection;
    }
);

/**
 * Start the session the first time some component request the session service
 */
$di-&gt;set(
    'session',
    function () {
        $session = new SessionAdapter();
        $session-&gt;start();
        return $session;
    },
    true
);

/**
 * Router
 */
$di-&gt;set(
    'router',
    function () {
        return include APP_PATH . "/app/config/routes.php";
    },
    true
);

/**
 * Register the configuration itself as a service
 */
$di-&gt;set('config', $config);

/**
 * Register the flash service with the Twitter Bootstrap classes
 */
$di-&gt;set(
    'flash',
    function () {
        return new Phalcon\Flash\Direct(array(
            'error' =&gt; 'alert alert-dismissable alert-danger',
            'success' =&gt; 'alert alert-dismissable alert-success',
            'notice' =&gt; 'alert alert-dismissable alert-info',
        ));
    }
);

/**
 * Register the session flash service with the Twitter Bootstrap classes
 */
$di-&gt;set(
    'flashSession',
    function () {
        return new Phalcon\Flash\Session(array(
            'error' =&gt; 'alert alert-dismissable alert-danger',
            'success' =&gt; 'alert alert-dismissable alert-success',
            'notice' =&gt; 'alert alert-dismissable alert-info',
        ));
    }
);

$di-&gt;set(
    'dispatcher',
    function () {
        $dispatcher = new MvcDispatcher();

        $eventsManager = new \Phalcon\Events\Manager();

        $eventsManager-&gt;attach("dispatch:beforeException", function($event, $dispatcher, $exception) {

        //Handle 404 exceptions
        if ($exception instanceof \Phalcon\Mvc\Dispatcher\Exception) {
            $dispatcher-&gt;forward(array(
                'controller' =&gt; 'Error',
                'action' =&gt; '_404'
            ));
            return false;
        }

        //Handle other exceptions
        $dispatcher-&gt;forward(array(
            'controller' =&gt; 'Error',
            'action' =&gt; '_503'
        ));

            return false;
        });

        //Bind the EventsManager to the dispatcher
        $dispatcher-&gt;setEventsManager($eventsManager);

        $dispatcher-&gt;setDefaultNamespace('FC\Controllers');

        return $dispatcher;
    },
    true
);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18045" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18045" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fb35f447c5edce740bc88e405d5eb3af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/742/cspeak" class="user-moderator-N"><span itemprop="name">Steven</span></a>        </span>
        <br>

        <span class="karma">5.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="18048" data-toggle="modal" data-target="#historyModal">
                edited <span>May '15</span>
              </span><br/><a name="C18048" href="#C18048">
                <time itemprop="dateCreated" datetime="2015-05-07T13:19:17-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Try changing </p>
<pre><code class="language-php">public function informationAction($username){
</code></pre>
<p>to</p>
<pre><code class="language-php">public function informationAction(){
$username = $this-&gt;dispatcher-&gt;getParam('username');</code></pre>
<p>I don't see where you're getting the username from the dispatcher in informationAction()</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18048" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18048" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C18048"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/fb35f447c5edce740bc88e405d5eb3af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Steven                    </a>
                </div><div class="posts-buttons" align="right"><a name="C18117" href="#C18117">
                <time itemprop="dateCreated" datetime="2015-05-08T15:03:40-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Try changing </p>
<pre><code class="language-php">public function informationAction($username){
</code></pre>
<p>to</p>
<pre><code class="language-php">public function informationAction(){
$username = $this-&gt;dispatcher-&gt;getParam('username');</code></pre>
<p>I don't see where you're getting the username from the dispatcher in informationAction()</p>
</blockquote>
<p>Same result unless I add the route manually like this:</p>
<pre><code class="language-php">
&lt;?php
$router-&gt;add(
    '/user/create',
    array(
       'controller' =&gt; 'user',
       'action'     =&gt; 'create'
    )
);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18117" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18117" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18146" href="#C18146">
                <time itemprop="dateCreated" datetime="2015-05-10T11:55:05-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>anything that I missed?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18146" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18146" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fb35f447c5edce740bc88e405d5eb3af?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/742/cspeak" class="user-moderator-N"><span itemprop="name">Steven</span></a>        </span>
        <br>

        <span class="karma">5.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C18146"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Khaledzcom                    </a>
                </div><div class="posts-buttons" align="right"><a name="C18150" href="#C18150">
                <time itemprop="dateCreated" datetime="2015-05-10T17:42:11-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Honestly,</p>
<p>I don't use parameters to determine my modules, controllers, or actions. I know HOW they work. But I don't use the reserved params for dynamic routing, just the variables I need to pass (user_id, account_id, etc..). I create a route for every single possible link within my systems. I'd actually recommend it because it gives you the most control and the least likely way to have your system fo unexplainable things</p>
<blockquote>
<p>anything that I missed?</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18150" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18150" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18238" href="#C18238">
                <time itemprop="dateCreated" datetime="2015-05-12T12:45:47-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Okay thanks, I will try to solve this problem :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18238" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18238" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18239" href="#C18239">
                <time itemprop="dateCreated" datetime="2015-05-12T13:02:55-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>everything looks good in your code (imho;-)</p>
<p>But most of the &quot;non working&quot; methods above (login, create, forgot) have statements with </p>
<blockquote>
<p>if($this-&gt;request-&gt;isPost())</p>
</blockquote>
<p>And you've got &quot;not found&quot;. So maybe your urls in form views aren't well formed.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18239" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18239" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/54ecac43138627b4480573c53b73465f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2325/Khaledzcom" class="user-moderator-N"><span itemprop="name">Khaledzcom</span></a>        </span>
        <br>

        <span class="karma">6.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C18253" href="#C18253">
                <time itemprop="dateCreated" datetime="2015-05-13T00:28:59-07:00" class="action-date">May '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think I know what was the problem, because all the methods is using this url by default: user/{methodName}</p>
<p>so when I add this code, </p>
<pre><code class="language-php">&lt;?php
$router-&gt;add(
    '/user/{username}',
    array(
       'controller' =&gt; 'user',
       'action'     =&gt; 'username'
    )
);</code></pre>
<p>I changed all the default urls to User controller to be: user/username, so I need to add url for other methods manually and that solved my problem :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="18253" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="18253" data-cf-modified-bec991e8c29c24ef1d5cf355-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6630" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>