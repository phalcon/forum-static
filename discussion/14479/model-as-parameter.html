---
layout: default
title: 'Model as parameter - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Model as parameter</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a></span>
            <time itemprop="dateCreated" datetime="2016-10-17T04:58:29-07:00">Oct '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-10-17T04:58:29-07:00">Oct '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Oct '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>529</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a></span>
                <span class="karma">41.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C14479" href="#C14479">
        <time class="action-date">Oct '16</time>
    </a>
</div>
<div class="post-content"><div><p>It's possible to create a function and send a Model Object in the parameter to make a find ? E.g </p>
<pre><code>// The function
public  function findWithArray($model, $array){
    return $model::find(array(
        "id IN ({ids:array})",
        "bind" =&gt; array('ids' =&gt; $array)
    ))-&gt;toArray();
}

// The call
$var = this-&gt;findWithArray(Robots, $myArray);
$var2 = this-&gt;findWithArray(Users, $myArray);</code></pre>
<p>This will not working but I want to know if there is a solution for that. If not I have to create this function in each model</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-89699328a350f7df64b1ed22-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-89699328a350f7df64b1ed22-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C41713" href="#C41713">
                <time itemprop="dateCreated" datetime="2016-10-17T05:19:54-07:00" class="action-date">Oct '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Here is a hacky solution that will work. I'm using something similar in my custom CRUD helper to generate annoying admin forms :)</p>
<pre><code class="language-php">$obj = new $model; // Your function param
$obj-&gt;find();</code></pre>
<p>Or if your models are always in the same namespace, you could even do:</p>
<pre><code class="language-php">$model = 'Models\\'. $model; // Your function param
$obj = new $model;
$obj-&gt;find();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41713" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41713" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a>        </span>
        <br>

        <span class="karma">41.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C41715" href="#C41715">
                <time itemprop="dateCreated" datetime="2016-10-17T05:27:38-07:00" class="action-date">Oct '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for your answer. I'm trying to use my function and send the parameter but I have this notice in the error log:</p>
<pre><code>PHP Notice:  Use of undefined constant Robots - assumed 'Robots'</code></pre>
<p>How can we fix that ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41715" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41715" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="41717" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '16</span>
              </span><br/><a name="C41717" href="#C41717">
                <time itemprop="dateCreated" datetime="2016-10-17T05:30:35-07:00" class="action-date">Oct '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You must pass <code>Robots::class</code> or <code>Users::class</code></p>
<p>Also get rid of array, and use [].</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41717" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41717" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a>        </span>
        <br>

        <span class="karma">41.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C41719" href="#C41719">
                <time itemprop="dateCreated" datetime="2016-10-17T05:36:13-07:00" class="action-date">Oct '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks guys ! It's awesome. This will help me to optimize my code</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41719" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41719" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C41721" href="#C41721">
                <time itemprop="dateCreated" datetime="2016-10-17T05:39:09-07:00" class="action-date">Oct '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Also i recommend putting all finding stuff to seperated classes.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41721" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41721" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6003c6340c95be89eb57aa50a7cf5beb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4627/Johngtrs" class="user-moderator-N"><span itemprop="name">Jonathan Vandal</span></a>        </span>
        <br>

        <span class="karma">41.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C41721"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="41723" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '16</span>
              </span><br/><a name="C41723" href="#C41723">
                <time itemprop="dateCreated" datetime="2016-10-17T05:42:15-07:00" class="action-date">Oct '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What do you mean ? Could you show a code snippet please ?</p>
<blockquote>
<p>Also i recommend putting all finding stuff to seperated classes.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41723" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41723" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C41725" href="#C41725">
                <time itemprop="dateCreated" datetime="2016-10-17T05:49:04-07:00" class="action-date">Oct '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>From my current multi-module app</p>
<pre><code class="language-php">/**
 * Class ArticleRepository
 *
 * @package Suzuki\Module\News\Repository
 */
class ArticleRepository extends AbstractRepository
{
    /**
     * @param $parameters
     * @return Article|Row
     */
    public function findFirst($parameters = null)
    {
        return Article::findFirst($parameters);
    }

    /**
     * @param $parameters
     * @return \Phalcon\Mvc\Model\ResultsetInterface|Article[]
     */
    public function find($parameters = null)
    {
        return Article::find($parameters);
    }

    /**
     * @param $adminId
     * @return ResultsetInterface
     */
    public function findByAdminId($adminId)
    {
        return $this-&gt;modelsManager-&gt;createBuilder()
            -&gt;columns('id,title,addDate')
            -&gt;from(['Article' =&gt; 'N:Article'])
            -&gt;where('adminId = :adminId:', ['adminId' =&gt; $adminId])
            -&gt;getQuery()
            -&gt;execute();
    }

    /**
     * @param $limit
     * @param $offset
     * @param $handledParams
     * @return ResultsetInterface
     */
    public function findByLimitOffsetConditions($limit, $offset, $handledParams)
    {
        $builder = $this-&gt;modelsManager-&gt;createBuilder()
            -&gt;columns('Article.id,title,Article.addDate,adminId,Article.active,updateDate,description,firstName,lastName,
            image,notify')
            -&gt;from(['Article' =&gt; 'N:Article'])
            -&gt;leftJoin('A:Admin', 'Article.adminId = Admin.id', 'Admin')
            -&gt;orderBy('Article.id DESC');
        if (!empty($handledParams)) {
            $builder-&gt;where($handledParams['where'], $handledParams['bind']);
        }
        if (!empty($limit)) {
            $builder-&gt;limit($limit, $offset);
        }

        return $builder-&gt;orderBy('Article.addDate DESC,Article.updateDate DESC')
            -&gt;getQuery()
            -&gt;execute();
    }</code></pre>
<pre><code class="language-php">abstract class AbstractRepository implements RepositoryInterface
{
    /**
     * @var Manager
     */
    protected $modelsManager;

    /**
     * AbstractRepository constructor.
     */
    public function __construct()
    {
        $this-&gt;modelsManager = Di::getDefault()-&gt;get('modelsManager');
    }

    /**
     * @param $parameters
     * @return mixed
     */
    public abstract function findFirst($parameters = null);

    /**
     * @param $parameters
     * @return mixed
     */
    public abstract function find($parameters = null);
}</code></pre>
<pre><code class="language-php">class Repositories
{
    static $repositories = [];

    /**
     * @param string $name name provided as Modulename:Classname
     * @return mixed
     * @throws Exception
     */
    public static function get($name)
    {
        $names = explode(':', $name);
        $modelClassName = "Suzuki\\Module\\{$names[0]}\\Model\\{$names[1]}";
        if (class_exists($modelClassName)) {
            $repositoryClassName = "Suzuki\\Module\\{$names[0]}\\Repository\\{$names[1]}Repository";
            if (class_exists($repositoryClassName)) {
                // Check if repository was already created
                if(isset(self::$repositories[$repositoryClassName])) {
                    return self::$repositories[$repositoryClassName];
                }
                $repository = new $repositoryClassName;
                self::$repositories[$repositoryClassName] = $repository;
                return $repository;
            }
            throw new Exception("Repository for model $modelClassName not found");
        }
        throw new Exception("Model $modelClassName was not found");
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41725" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41725" data-cf-modified-89699328a350f7df64b1ed22-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="14479" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>