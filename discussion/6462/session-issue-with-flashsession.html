---
layout: default
title: 'Session issue with flashSession - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/28/session">Session</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Session issue with flashSession</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1942/andrefigueira" class="user-moderator-N"><span itemprop="name">André Figueira</span></a></span>
            <time itemprop="dateCreated" datetime="2015-04-20T13:31:55-07:00">Apr '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-04-20T13:31:55-07:00">Apr '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>462</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a93871fc7077b69587626ca90e738ece?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1942/andrefigueira" class="user-moderator-N"><span itemprop="name">André Figueira</span></a></span>
                <span class="karma">12.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6462" href="#C6462">
        <time class="action-date">Apr '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi guys, seem to be having an issue with flash session, only happening on one action</p>
<pre><code>public function confirmAction()
{
    $email = urldecode($this-&gt;dispatcher-&gt;getParam('email'));

    $user = Users::findFirstByEmail($email);

    if ($user) {
        $user-&gt;setConfirmed(Users::USER_CONFIRMED_TRUE);

        if ($user-&gt;save()) {
            $this-&gt;flash-&gt;success('Account confirmed, you may now login');
        } else {
            $this-&gt;flash-&gt;error('Failed to confirm account...');
        }
    } else {
        $this-&gt;flash-&gt;error('Failed to confirm account...');
    }

    return $this-&gt;response-&gt;redirect('/');
}</code></pre>
<p>This works everywhere else but here, and the issue is, the session is set but only shown after you refresh one more time after the redirect so not entirely sure what the issue is. has anyone else experienced this issue?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-8c387aad53e543a0381b1463-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-8c387aad53e543a0381b1463-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/70f7c47c69e36bd5d4913499abb91bd4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3624/jcheron" class="user-moderator-N"><span itemprop="name">jcheron</span></a>        </span>
        <br>

        <span class="karma">1.4k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="17448" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '15</span>
              </span><br/><a name="C17448" href="#C17448">
                <time itemprop="dateCreated" datetime="2015-04-20T16:00:07-07:00" class="action-date">Apr '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>the injected <strong>flash</strong> service is there an instance of Phalcon\Flash\Session ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="17448" data-cf-modified-8c387aad53e543a0381b1463-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="17448" data-cf-modified-8c387aad53e543a0381b1463-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6462" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>