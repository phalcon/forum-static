---
layout: default
title: 'Dynamic roles [ACL] - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/17/acl">Acl</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Dynamic roles [ACL]</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/7021/Bundas" class="user-moderator-N"><span itemprop="name">Jan Burda</span></a></span>
            <time itemprop="dateCreated" datetime="2016-05-24T03:17:26-07:00">May '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-05-24T03:17:26-07:00">May '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>862</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/45f3d253b3d92ee8ec5e0c6db22f49bd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/7021/Bundas" class="user-moderator-N"><span itemprop="name">Jan Burda</span></a></span>
                <span class="karma">1.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11643" href="#C11643">
        <time class="action-date">May '16</time>
    </a>
</div>
<div class="post-content"><div><p>What is best way to create dynamic roles in ACL? I mean, creating role at runtime. </p>
<p>I am not sure how ACL works. Actually, I have never used that yet. If is ACL executed only once -&gt; I have no idea how to do dynamic roles. </p>
<p>If ACL is executed with every http request, I would create entity 'Role' and entity 'Permission'. Every role would have some permissions. ACL would look for these roles and associated permission with every request in database.. Does it make sense? How you do that?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34535" href="#C34535">
                <time itemprop="dateCreated" datetime="2016-05-24T03:24:26-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Unless you store ACL somewhere in a persistent back-end storage, they're created at runtime each time, i.e. just like your IoC services container with other services / components.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34535" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34535" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="34537" data-toggle="modal" data-target="#historyModal">
                edited <span>May '16</span>
              </span><br/><a name="C34537" href="#C34537">
                <time itemprop="dateCreated" datetime="2016-05-24T03:26:33-07:00" class="action-date">May '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Using ACL as <code>Memory</code> adapter means that is created and exists only for request time. You can speed up it by storing serialized created object in memcache or something like this, also memory gives your more ability and options in 2.1.x</p>
<p>Well you can just access acl service and call <code>addRole</code> in runtime - it will add new role to acl. If you are using <code>Database</code> adapter - it will add it to database too. If you are using memory adapter. I would recommend to save serialized object to file and memcache if you need to create new roles on the fly, if it doesn't exists in memcache - load it from file and save to memcache.</p>
<p>In <code>Memory</code> adapter(2.1.x) i added option to use acl on objects and adding custom defined user functions which will be called when checking permission(so we can add advanced check if user have access to some entity).</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34537" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34537" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C34937" href="#C34937">
                <time itemprop="dateCreated" datetime="2016-06-01T04:43:31-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>i added option to use acl on objects and adding custom defined user functions which will be called when checking permission</p>
</blockquote>
<p>Excellent job. Thank you !</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34937" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34937" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C34937"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        le51                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="34943" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C34943" href="#C34943">
                <time itemprop="dateCreated" datetime="2016-06-01T05:44:39-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well by mistake someone added it in current 2.0.x documentation :/ <a href="https://docs.phalcon.io/en/latest/reference/acl.html#function-based-access">https://docs.phalcon.io/en/latest/reference/acl.html#function-based-access</a> But as i wrote it's only available in <strong>2.1.x</strong></p>
<blockquote>
<blockquote>
<p>i added option to use acl on objects and adding custom defined user functions which will be called when checking permission</p>
</blockquote>
<p>Excellent job. Thank you !</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="34943" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="34943" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/19ab9d3ddd8078ae08ba8f67fa972d65?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7583/pendiplp" class="user-moderator-N"><span itemprop="name">Fendy Kharisma</span></a>        </span>
        <br>

        <span class="karma">96</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C34537"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><a name="C39441" href="#C39441">
                <time itemprop="dateCreated" datetime="2016-08-30T08:23:30-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank you !</p>
<blockquote>
<p>Using ACL as <code>Memory</code> adapter means that is created and exists only for request time. You can speed up it by storing serialized created object in memcache or something like this, also memory gives your more ability and options in 2.1.x</p>
<p>Well you can just access acl service and call <code>addRole</code> in runtime - it will add new role to acl. If you are using <code>Database</code> adapter - it will add it to database too. If you are using memory adapter. I would recommend to save serialized object to file and memcache if you need to create new roles on the fly, if it doesn't exists in memcache - load it from file and save to memcache.</p>
<p>In <code>Memory</code> adapter(2.1.x) i added option to use acl on objects and adding custom defined user functions which will be called when checking permission(so we can add advanced check if user have access to some entity).</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39441" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39441" data-cf-modified-d42e6aec0415d8e2f7ff01ca-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11643" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>