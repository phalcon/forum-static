---
layout: default
title: 'Model id setting problem [Phalcon v.1.2.1] - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Model id setting problem [Phalcon v.1.2.1]</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/121/inzurrekt" class="user-moderator-N"><span itemprop="name">AlonsoSoto</span></a></span>
            <time itemprop="dateCreated" datetime="2013-08-07T12:05:55-07:00">Aug '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-08-07T12:05:55-07:00">Aug '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>1116</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/396011c9c28f04f34414c2e249c08ab4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/121/inzurrekt" class="user-moderator-N"><span itemprop="name">AlonsoSoto</span></a></span>
                <span class="karma">6.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C727" href="#C727">
        <time class="action-date">Aug '13</time>
    </a>
</div>
<div class="post-content"><div><p>Is there anyway to force-set the id in a new record?</p>
<p>when i do:</p>
<pre><code class="language-php">
$model = new anyModelClass;
$model-&gt;id = $di-&gt;getShared('uniqueness')-&gt;generateUid();

$model-&gt;save();</code></pre>
<p>I got the register in theDatabase but not the recordTimestamp for create (it fires in the beforeCreate).</p>
<p>My question is : is there a problem with setting id manually? </p>
<p>Thanks!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c17126b287f7a68ffaf35acc558391d5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/203/dimhoLt" class="user-moderator-N"><span itemprop="name">dimhoLt</span></a>        </span>
        <br>

        <span class="karma">22.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2921" href="#C2921">
                <time itemprop="dateCreated" datetime="2013-08-08T11:43:17-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The ID is just added to the model and set when saved, so if the column configuration allows that field and the database accepts it, you can set it like you did. Do you receive some kind of error when using the solution in your example?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2921" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2921" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/396011c9c28f04f34414c2e249c08ab4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/121/inzurrekt" class="user-moderator-N"><span itemprop="name">AlonsoSoto</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2922" href="#C2922">
                <time itemprop="dateCreated" datetime="2013-08-08T11:58:52-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No error, but it doesnot fires the beforeCreate Event that i really need it.</p>
<p>I have now a middle solution; not for this problem but for the application to work properly.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2922" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2922" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c17126b287f7a68ffaf35acc558391d5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/203/dimhoLt" class="user-moderator-N"><span itemprop="name">dimhoLt</span></a>        </span>
        <br>

        <span class="karma">22.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2925" href="#C2925">
                <time itemprop="dateCreated" datetime="2013-08-08T12:53:00-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Do a beforeSave() instead:</p>
<pre><code class="language-php">
class anyModelClass {

    public function beforeSave() {
        if(!isset($this-&gt;id)) {
             $this-&gt;id = "Your awesome ID generation here.";
        }
    }

}
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2925" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2925" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/396011c9c28f04f34414c2e249c08ab4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/121/inzurrekt" class="user-moderator-N"><span itemprop="name">AlonsoSoto</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2926" href="#C2926">
                <time itemprop="dateCreated" datetime="2013-08-08T13:02:09-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>yeah i tried it, the problem i had is the ID is not NULLABLE and when trying to save the ORM returning this message. I thing a validation stuff...</p>
<p>About making id NULLABLE, its not possible because its PrimaryKey.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2926" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2926" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c17126b287f7a68ffaf35acc558391d5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/203/dimhoLt" class="user-moderator-N"><span itemprop="name">dimhoLt</span></a>        </span>
        <br>

        <span class="karma">22.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2927" href="#C2927">
                <time itemprop="dateCreated" datetime="2013-08-08T13:16:55-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hmm, that shouldn't be a problem, since it hasn't been saved. Using my code, an ID would have been created when connecting to the DB and nullification problem should not occur. It sounds like the problem is elsewhere to me. Try this code:</p>
<pre><code class="language-php">
$obj = new myModel();
if(!$obj-&gt;save()) {
    foreach($obj-&gt;getMessages() as $m) {
        echo $m . "&lt;br /&gt;\n";
    }
}
</code></pre>
<p>What are the exact error messages you receive?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2927" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2927" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/396011c9c28f04f34414c2e249c08ab4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/121/inzurrekt" class="user-moderator-N"><span itemprop="name">AlonsoSoto</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2935" href="#C2935">
                <time itemprop="dateCreated" datetime="2013-08-09T10:41:06-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>yeah you're right i was sure i tried that way </p>
<p>anyway, dou you know when this ocurrs?</p>
<p>Array ( [0] =&gt; Phalcon\Mvc\Model\Message Object ( [_type:protected] =&gt; PresenceOf [_message:protected] =&gt; id is required [_field:protected] =&gt; id [_model:protected] =&gt; ) )</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2935" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2935" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c17126b287f7a68ffaf35acc558391d5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/203/dimhoLt" class="user-moderator-N"><span itemprop="name">dimhoLt</span></a>        </span>
        <br>

        <span class="karma">22.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C2949" href="#C2949">
                <time itemprop="dateCreated" datetime="2013-08-09T15:23:27-07:00" class="action-date">Aug '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah, a validation fails =)
<a href="http://docs.phalcon.io/en/latest/api/Phalcon_Mvc_Model_Message.html">http://docs.phalcon.io/en/latest/api/Phalcon_Mvc_Model_Message.html</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="2949" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="2949" data-cf-modified-ca4e67fbdadd38ef12d1277f-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="727" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>