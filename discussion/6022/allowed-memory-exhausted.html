---
layout: default
title: 'Allowed memory exhausted - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/25/configuration">Configuration</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Allowed memory exhausted</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3360/subharb" class="user-moderator-N"><span itemprop="name">subharb</span></a></span>
            <time itemprop="dateCreated" datetime="2015-02-25T15:41:37-07:00">Feb '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-02-25T15:41:37-07:00">Feb '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">4</span>
                </td>
                <td>
                    <label>Views</label><br>979</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/710a519035457e1271b8e8ce9b660b9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3360/subharb" class="user-moderator-N"><span itemprop="name">subharb</span></a></span>
                <span class="karma">3.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6022" href="#C6022">
        <time class="action-date">Feb '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hello, </p>
<p>Im trying to fetch all the users in my Model by doing a simple Users::find() and I keep on getting a fatal error, Allowed memory exhausted, I have 512MB, which I believe should be sufficient, it shouldn't need more.</p>
<p>Other feches on smaller tables return results, so it's a problem of the size of the result fetched.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/83c11918052630e4dda79206c336924d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/569/kaioken" class="user-moderator-N"><span itemprop="name">Max Castro</span></a>        </span>
        <br>

        <span class="karma">16.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16187" href="#C16187">
                <time itemprop="dateCreated" datetime="2015-02-25T19:04:00-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>How big is the table?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16187" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16187" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/710a519035457e1271b8e8ce9b660b9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3360/subharb" class="user-moderator-N"><span itemprop="name">subharb</span></a>        </span>
        <br>

        <span class="karma">3.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16191" href="#C16191">
                <time itemprop="dateCreated" datetime="2015-02-26T02:48:17-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It has 65.000 rows, it also happens to me when I fetch in a model with
16.000 rows, it doesnt when I fetch smaller ones.</p>
<p>2015-02-26 2:58 GMT+01:00 Max Castro <a href="/cdn-cgi/l/email-protection#cabaa2a5b9baa2a5b8bfa78abaa2aba6a9a5a4e4a3a5"><span class="__cf_email__" data-cfemail="dbabb3b4a8abb3b4a9aeb69babb3bab7b8b4b5f5b2b4">[email&#160;protected]</span></a>:</p>
<blockquote>
<p>How big is the table?</p>
<p>â€”
Reply to this email directly or view the complete thread on Phosphorum
<a href="https://forum.phalcon.io/discussion/6022/allowed-memory-exhausted#C16187">https://forum.phalcon.io/discussion/6022/allowed-memory-exhausted#C16187</a>.
Change your e-mail preferences here <a href="https://forum.phalcon.io/settings">https://forum.phalcon.io/settings</a></p>
</blockquote>
<p>--
David Shaikh Urbina
Mobile: (+34) 647 727 132
Mail: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cbafaabda2af8bbcaab8aaa9a2aabbbbadaaa8bfa4b9b2e5a8a4a6">[email&#160;protected]</a>
Web: www.wasabiappfactory.com</p>
<p>This email and its attached files are confidential. Any kind of
distribution or publication of its content is not allowed and needs the
prior consent of Wasabi App Factory SL. Advertencia/Confidentiality Notice
<a href="https://www.wasabiappfactory.com/advertenciaconfidentiality-notice/">https://www.wasabiappfactory.com/advertenciaconfidentiality-notice/</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16191" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16191" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/83c11918052630e4dda79206c336924d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/569/kaioken" class="user-moderator-N"><span itemprop="name">Max Castro</span></a>        </span>
        <br>

        <span class="karma">16.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16196" href="#C16196">
                <time itemprop="dateCreated" datetime="2015-02-26T07:32:46-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah, but how big in megas is the tables? also paste the code plz.</p>
<p>Thanks</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16196" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16196" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16200" href="#C16200">
                <time itemprop="dateCreated" datetime="2015-02-26T07:56:51-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is a feature of PDO driver PHP.</p>
<p>You can use sparing algorithms.</p>
<p>Or use msqli driver.</p>
<p>See :  <a href="https://forum.phalcon.io/discussion/3793/phalcon-resultsets-and-large-mysql-tables">https://forum.phalcon.io/discussion/3793/phalcon-resultsets-and-large-mysql-tables</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16200" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16200" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/710a519035457e1271b8e8ce9b660b9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3360/subharb" class="user-moderator-N"><span itemprop="name">subharb</span></a>        </span>
        <br>

        <span class="karma">3.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16213" href="#C16213">
                <time itemprop="dateCreated" datetime="2015-02-27T05:10:36-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It's 1.57GB, I didnt realise how big it was.</p>
<p>The code is a simple $usersNewbies = Users::find();, you need something
more?</p>
<blockquote>
<p>Yeah, but how big in megas is the tables? also paste the code plz.</p>
<p>Thanks</p>
<p>â€”
Reply to this email directly or view the complete thread on Phosphorum
<a href="https://forum.phalcon.io/discussion/6022/allowed-memory-exhausted#C16196">https://forum.phalcon.io/discussion/6022/allowed-memory-exhausted#C16196</a>.
Change your e-mail preferences here <a href="https://forum.phalcon.io/settings">https://forum.phalcon.io/settings</a></p>
</blockquote>
<p>--
David Shaikh Urbina
Mobile: (+34) 647 727 132
Mail: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="640005120d002413051705060d051414020507100b161d4a070b09">[email&#160;protected]</a>
Web: www.wasabiappfactory.com</p>
<p>This email and its attached files are confidential. Any kind of
distribution or publication of its content is not allowed and needs the
prior consent of Wasabi App Factory SL. Advertencia/Confidentiality Notice
<a href="https://www.wasabiappfactory.com/advertenciaconfidentiality-notice/">https://www.wasabiappfactory.com/advertenciaconfidentiality-notice/</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16213" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16213" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/83c11918052630e4dda79206c336924d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/569/kaioken" class="user-moderator-N"><span itemprop="name">Max Castro</span></a>        </span>
        <br>

        <span class="karma">16.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16258" href="#C16258">
                <time itemprop="dateCreated" datetime="2015-03-02T06:02:35-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/subhard">@subhard</a> did<a href="https://forum.phalcon.io/user/0/Oleg"> @Oleg</a> suggestion work?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16258" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16258" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/710a519035457e1271b8e8ce9b660b9b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3360/subharb" class="user-moderator-N"><span itemprop="name">subharb</span></a>        </span>
        <br>

        <span class="karma">3.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16260" href="#C16260">
                <time itemprop="dateCreated" datetime="2015-03-02T06:11:03-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Changing to mysqli wasnt an option for us.</p>
<p>I tried several ways, and apparently using Users::find(); involves bringing all the data from the table and that uses all the memory when it's a big table. I suposed phalcon would optimize that. Using Users::find(array(&quot;columns&quot; =&gt; idUser)); made the query faster and it didnt use all the memory.
But I ended up using Depency Injector and mysql querys, which are very fast and also don't use up all the memory.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16260" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16260" data-cf-modified-f144fab48341ca0c1bdb1a93-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6022" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>