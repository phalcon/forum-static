---
layout: default
title: 'Setting templates dynamically in controller - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/3/volt">Volt</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Setting templates dynamically in controller</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1230/wwotoole" class="user-moderator-N"><span itemprop="name">Warwick O&#039;Toole</span></a></span>
            <time itemprop="dateCreated" datetime="2014-03-12T01:54:20-07:00">Mar '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-03-12T01:54:20-07:00">Mar '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>1470</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/9758d1bba79fea690ffc9a60324aec79?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1230/wwotoole" class="user-moderator-N"><span itemprop="name">Warwick O&#039;Toole</span></a></span>
                <span class="karma">1.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1761" href="#C1761">
        <time class="action-date">Mar '14</time>
    </a>
</div>
<div class="post-content"><div><p>Just starting to move an existing php project over to phalcon 1.2.6 and having some difficulty with volt templates.
In the original project, layout choices are determined dynamically in the controller depending on login status and if logged in, the type of user (There are 2 types).</p>
<p>Examples of layout names being used are &quot;one-column&quot;, &quot;two-column&quot; and &quot;three-column&quot;
They are mostly the same. The difference is that each template has a content section that contains 1, 2 or 3 volt blocks to match the name.</p>
<p>If I declare extends at the top of my views like this {% raw %}{%{% endraw %} extends &quot;../layouts/two-column.phtml&quot; {% raw %}%}{% endraw %}
That works fine.The blocks are recognised and everything is rendered as expected.</p>
<p>However I would like to determine the layout used from the controller.
So in my controllers I've tried using $this-&gt;view-&gt;setMainView('two-column');
But doing that has no affect.</p>
<p>I think I must find a way to alter the extends &quot;filename&quot; value, but have been unable to do that by passing a string to the view and using it in the extends declaration.</p>
<p>If I leave the extends declaration out, then the blocks are not recognized.</p>
<p>Does anybody know of a way to handle a situation like this?
Any ideas appreciated.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/693cd29a926f2659ccec45ba126abd71?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/11/doit76" class="user-moderator-N"><span itemprop="name">Karol Marcinkiewicz</span></a>        </span>
        <br>

        <span class="karma">40.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6119" href="#C6119">
                <time itemprop="dateCreated" datetime="2014-03-12T02:42:17-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code class="language-php">$this-&gt;view-&gt;setMainView("two-column"); 
//suggest you have your layout in app/views/two-column.phtml </code></pre>
<p>but </p>
<pre><code class="language-php">{% raw %}{%{% endraw %} extends "../layouts/two-column.phtml" {% raw %}%}{% endraw %}
//suggest you have your layout in app/views/layouts/two-column.phtml</code></pre>
<p>Can you paste how you setup your view in DI, or try to copy  app/views/layouts/two-column.phtml to app/views/two-column.phtml</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6119" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6119" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c393137504e3c8e04fec99f187fcc33e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1057/maxgalbu" class="user-moderator-N"><span itemprop="name">Max Galbusera</span></a>        </span>
        <br>

        <span class="karma">3.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6123" href="#C6123">
                <time itemprop="dateCreated" datetime="2014-03-12T04:22:11-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I don't know about volt, but Twig (which is similar to volt) allows to use a variable or a ternary operator in the extends tag:
<a href="http://twig.sensiolabs.org/doc/tags/extends.html#dynamic-inheritance">http://twig.sensiolabs.org/doc/tags/extends.html#dynamic-inheritance</a></p>
<pre><code class="language-volt">{% raw %}{%{% endraw %} extends some_var {% raw %}%}{% endraw %}
{# or #}
{% raw %}{%{% endraw %} extends standalone ? "minimum.html" : "base.html" {% raw %}%}{% endraw %}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6123" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6123" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9758d1bba79fea690ffc9a60324aec79?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1230/wwotoole" class="user-moderator-N"><span itemprop="name">Warwick O&#039;Toole</span></a>        </span>
        <br>

        <span class="karma">1.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6151" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C6151" href="#C6151">
                <time itemprop="dateCreated" datetime="2014-03-12T17:26:57-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi Karol. I think the view setup is working but since you asked, here is a copy</p>
<p>The view setup</p>
<pre><code class="language-php">    $di-&gt;set('view', function() use ($config) {
        $view = new Phalcon\Mvc\View();

        $view-&gt;setViewsDir(APPLICATION_PATH . $config-&gt;application-&gt;viewsDir);
        $view-&gt;setLayoutsDir('/../layouts/');

        $view-&gt;registerEngines(array(
            '.phtml' =&gt; function($view, $di) use ($config) {
                            $volt = new \Phalcon\Mvc\View\Engine\Volt($view, $di);
                            $volt-&gt;setOptions(array(
                                'compiledPath' =&gt; APPLICATION_PATH . $config-&gt;application-&gt;compiledDir,
                                'stat' =&gt; true,
                                'compileAlways' =&gt; (bool)$config-&gt;application-&gt;compileAlways,
                            ));
                            return $volt;
                        }
        ));
        return $view;
    });</code></pre>
<p>and the prod config that goes with it</p>
<pre><code class="language-php">    [application]
    ; relative to APPLICATION_PATH
    controllersDir = /controllers/
    modelsDir      = /models/
    viewsDir       = /views/scripts/

    ; relative to viewsDr
    layoutsDir     = /../layouts/

    baseUri        = /
    compiledDir    = /../data/volt/
    compileAlways  = 0</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6151" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6151" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9758d1bba79fea690ffc9a60324aec79?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1230/wwotoole" class="user-moderator-N"><span itemprop="name">Warwick O&#039;Toole</span></a>        </span>
        <br>

        <span class="karma">1.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6152" href="#C6152">
                <time itemprop="dateCreated" datetime="2014-03-12T17:30:05-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi maxgalbu,
Yes, I think Twig does allow for that. Which makes me wonder whether we should be using Twig, or stick with Volt in the hope that support will be added in the not too distant future</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6152" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6152" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/9758d1bba79fea690ffc9a60324aec79?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1230/wwotoole" class="user-moderator-N"><span itemprop="name">Warwick O&#039;Toole</span></a>        </span>
        <br>

        <span class="karma">1.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6153" href="#C6153">
                <time itemprop="dateCreated" datetime="2014-03-12T18:20:18-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for your input guys. FYI we're going to stick with volt for now and just declare the layout extension in each view.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6153" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6153" data-cf-modified-0ce30a46688e989a2c8d5d01-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1761" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>