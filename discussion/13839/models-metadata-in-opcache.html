---
layout: default
title: 'Models Metadata in Opcache - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Models Metadata in Opcache</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/7823/seitechsoftware" class="user-moderator-N"><span itemprop="name">SEITECH Software</span></a></span>
            <time itemprop="dateCreated" datetime="2016-09-28T04:25:40-07:00">Sep '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-09-28T04:25:40-07:00">Sep '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">7</span>
                </td>
                <td>
                    <label>Views</label><br>778</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/ed7d9ba9055599c1be9a52bd441f0cd8?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/7823/seitechsoftware" class="user-moderator-N"><span itemprop="name">SEITECH Software</span></a></span>
                <span class="karma">1.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C13839" href="#C13839">
        <time class="action-date">Sep '16</time>
    </a>
</div>
<div class="post-content"><div><p>Hi everybody, it is possible to cache models metadata in opcache ?
APC is not supported on PHP7, and opcache is the best alternative. I use phalcon v3 and PHP7 on ubuntu 16.04. </p>
<p>Thanks</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="41011" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '16</span>
              </span><br/><a name="C41011" href="#C41011">
                <time itemprop="dateCreated" datetime="2016-09-28T05:07:55-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes, apc is supported on PHP7. You just need to install <code>apcu_bc</code> from pecl and then change names of apc.ini and apcu.ini to make apc.ini being loaded after apcu.</p>
<p>Or just use memcached or redis because they are <strong>best</strong> alternative.</p>
<p>Just in apcu for php 7 there were removed APC emulation which was in apcu for php 5.x and it wasn't decoupled to <code>apcu_bc</code>.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41011" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41011" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="41033" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '16</span>
              </span><br/><a name="C41033" href="#C41033">
                <time itemprop="dateCreated" datetime="2016-09-28T16:41:21-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/7823/seitechsoftware">@seitechsoftware</a>: You need to understand that OPcache is not a regular cache subsystem for your app stuff like data from database etc.</p>
<blockquote>
<p>The only important thing to remember when migrating from APC to OpCache is the fact that the latter doesn’t work as a data caching engine. If you have already implemented APC, you may be using its apc_add() and apc_fetch() functions which serve as an interface to a data caching service. OpCache is only a bytecode caching engine so it won’t offer a similar functionality. If you’re planning to switch from APC to OpCache, remember to consider this limitation. </p>
</blockquote>
<p>OPcache stores precompiled script bytecode in the system memory. That means only code, not data (only literals). Actual data is being served at runtime from a database, file system etc.</p>
<p>For exact same purpose of caching models metadata I use (lib)Memcached. It works flawlessly. I would avoid <code>APC*</code> stuff.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="41033" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="41033" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2c9ff6bd4a4539bc99f9533346eec0ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9389/ilya-slabukarov" class="user-moderator-N"><span itemprop="name">ilya-slabukarov</span></a>        </span>
        <br>

        <span class="karma">1.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C47367" href="#C47367">
                <time itemprop="dateCreated" datetime="2017-04-06T14:05:39-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>As far as I understand, if in a production I define the models metadata manually and use OpCache - it should work faster, than using Memcached or Redis?</p>
<p>Is this assumption correct?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47367" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47367" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="47369" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '17</span>
              </span><br/><a name="C47369" href="#C47369">
                <time itemprop="dateCreated" datetime="2017-04-06T16:20:24-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Faster yes - but it will use more memory i guess. Still the difference will be almost none comparedto memcached or redis and it's much easier to use them when having some big application imho.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47369" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47369" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2c9ff6bd4a4539bc99f9533346eec0ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9389/ilya-slabukarov" class="user-moderator-N"><span itemprop="name">ilya-slabukarov</span></a>        </span>
        <br>

        <span class="karma">1.8k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C47369"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Wojciech Ślawski                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="47381" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '17</span>
              </span><br/><a name="C47381" href="#C47381">
                <time itemprop="dateCreated" datetime="2017-04-07T01:55:58-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Faster yes - but it will use more memory i guess. Still the difference will be almost none comparedto memcached or redis and it's much easier to use them when having some big application imho.</p>
</blockquote>
<p>Thanks.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47381" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47381" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C47367"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/2c9ff6bd4a4539bc99f9533346eec0ac?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        ilya-slabukarov                    </a>
                </div><div class="posts-buttons" align="right"><a name="C47439" href="#C47439">
                <time itemprop="dateCreated" datetime="2017-04-08T15:45:43-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>As far as I understand, if in a production I define the models metadata manually and use OpCache - it should work faster, than using Memcached or Redis?</p>
<p>Is this assumption correct?</p>
</blockquote>
<p>Not quite. Models metadata is using some of the cache adapters to store metadata (i.e. your tables and columns definition). OPcache has nothing to do with Models metadata directly. You still need a certain data cache layer for such data, i.e. Memcached.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47439" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47439" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C47439"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Jonathan Aaron Steel                    </a>
                </div><div class="posts-buttons" align="right"><a name="C47447" href="#C47447">
                <time itemprop="dateCreated" datetime="2017-04-09T00:47:03-07:00" class="action-date">Apr '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<blockquote>
<p>As far as I understand, if in a production I define the models metadata manually and use OpCache - it should work faster, than using Memcached or Redis?</p>
<p>Is this assumption correct?</p>
</blockquote>
<p>Not quite. Models metadata is using some of the cache adapters to store metadata (i.e. your tables and columns definition). OPcache has nothing to do with Models metadata directly. You still need a certain data cache layer for such data, i.e. Memcached.</p>
</blockquote>
<p>If you in model will define method metaData which will return array then you don't need any adapter, it won't be ever hit. S o opcache + metaData method will be fastest way, but it's dirty and bad.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47447" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47447" data-cf-modified-7bee017a34b44e9a32a7e66c-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="13839" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>