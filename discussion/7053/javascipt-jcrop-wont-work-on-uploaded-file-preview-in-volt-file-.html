---
layout: default
title: 'Javascipt (jcrop) wont work on uploaded file preview in volt file, same code/files works perfectly in html and blade. - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/3/volt">Volt</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Javascipt (jcrop) wont work on uploaded file preview in volt file, same code/files works perfectly in html and blade.</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/3982/PlentyPeeps" class="user-moderator-N"><span itemprop="name">PlentyPeeps</span></a></span>
            <time itemprop="dateCreated" datetime="2015-06-09T07:10:22-07:00">Jun '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-06-09T07:10:22-07:00">Jun '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>2570</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/deae60c0c71d15369b3caca051c9c0e2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/3982/PlentyPeeps" class="user-moderator-N"><span itemprop="name">PlentyPeeps</span></a></span>
                <span class="karma">11.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C7053" href="#C7053">
        <time class="action-date">Jun '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hello!</p>
<p>I'm using Jcrop to select cordinates to crop a image. The user selects a image, it is shown and then the user selects on the preview where they want to crop. This workes perfectly in a simple .html and on a previous laravel project (blade). Only difference is how I import the js and css, but still the exact same code and files. </p>
<p>However the moment I use .volt then Jcrop refuses to work on the preview. The preview is shown, but I can't drag across it. Note that Jcrop works perfectly if I select a file on the server, for example point to a forest.jpg image (in the public folder). It just refuses to work on preview pictures. I don't want to have to upload the image to crop it, I want to crop based on the preview.</p>
<p>To clarify, in volt:</p>
<p><a href="https://i.imgur.com/JosCz5v.png">Volt</a></p>
<p>in html:</p>
<p><a href="https://i.imgur.com/qOQwaMO.png">Html</a></p>
<p>The Controller function is empty, so all that is shown is the view.</p>
<p>Picture.volt</p>
<pre><code>
{% raw %}{{{% endraw %} content() {% raw %}}}{% endraw %}&lt;br&gt;&lt;br&gt;
{% raw %}{{{% endraw %} javascript_include('jcrop/js/jquery.min.js') {% raw %}}}{% endraw %}
{% raw %}{{{% endraw %} javascript_include('jcrop/js/jquery.Jcrop.js') {% raw %}}}{% endraw %}
{% raw %}{{{% endraw %} javascript_include('jcrop/js/lol.js') {% raw %}}}{% endraw %}

{% raw %}{{{% endraw %} stylesheet_link('jcrop/css/jquery.Jcrop.css') {% raw %}}}{% endraw %}
{% raw %}{{{% endraw %} stylesheet_link('jcrop/css/lol.css') {% raw %}}}{% endraw %}

&lt;div class="bbody"&gt;

    &lt;!-- upload form --&gt;
    &lt;form id="upload_form" enctype="multipart/form-data" method="post" files="true" action="upload.php" onsubmit="return checkForm()"&gt;
        &lt;!-- hidden crop params --&gt;
        &lt;input type="hidden" id="x1" name="x1" /&gt;
        &lt;input type="hidden" id="y1" name="y1" /&gt;
        &lt;input type="hidden" id="x2" name="x2" /&gt;
        &lt;input type="hidden" id="y2" name="y2" /&gt;

        &lt;h2&gt;Step1: Please select image file&lt;/h2&gt;
        &lt;div&gt;&lt;input type="file" name="image_file" id="image_file" onchange="fileSelectHandler()" /&gt;&lt;/div&gt;

        &lt;div class="error"&gt;&lt;/div&gt;

        &lt;div class="step2"&gt;
            &lt;h2&gt;Step2: Please select a crop region&lt;/h2&gt;
            &lt;img id="preview" /&gt;

            &lt;div class="info"&gt;
                &lt;label&gt;File size&lt;/label&gt; &lt;input type="text" id="filesize" name="filesize" /&gt;
                &lt;label&gt;Type&lt;/label&gt; &lt;input type="text" id="filetype" name="filetype" /&gt;
                &lt;label&gt;Image dimension&lt;/label&gt; &lt;input type="text" id="filedim" name="filedim" /&gt;
                &lt;label&gt;W&lt;/label&gt; &lt;input type="text" id="w" name="w" /&gt;
                &lt;label&gt;H&lt;/label&gt; &lt;input type="text" id="h" name="h" /&gt;
            &lt;/div&gt;

            &lt;input type="submit" value="Upload" /&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;</code></pre>
<p>lol.js</p>
<pre><code>
// convert bytes into friendly format
function bytesToSize(bytes) {
    var sizes = ['Bytes', 'KB', 'MB'];
    if (bytes == 0) return 'n/a';
    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
    return (bytes / Math.pow(1024, i)).toFixed(1) + ' ' + sizes[i];
};

// check for selected crop region
function checkForm() {
    if (parseInt($('#w').val())) return true;
    $('.error').html('Please select a crop region and then press Upload').show();
    return false;
};

// update info by cropping (onChange and onSelect events handler)
function updateInfo(e) {
    $('#x1').val(e.x);
    $('#y1').val(e.y);
    $('#x2').val(e.x2);
    $('#y2').val(e.y2);
    $('#w').val(e.w);
    $('#h').val(e.h);
};

// clear info by cropping (onRelease event handler)
function clearInfo() {
    $('.info #w').val('');
    $('.info #h').val('');
};

// Create variables (in this scope) to hold the Jcrop API and image size
var jcrop_api, boundx, boundy;

var img = document.getElementById('line'); 
var width = 0;
//or however you get a handle to the IMG
var width = img.clientWidth;

function fileSelectHandler() {

    // get selected file
    var oFile = $('#image_file')[0].files[0];

    // hide all errors
    $('.error').hide();

    // check for image type (jpg and png are allowed)
    var rFilter = /^(image\/jpeg|image\/png)$/i;
    if (! rFilter.test(oFile.type)) {
        $('.error').html('Please select a valid image file (jpg and png are allowed)').show();
        return;
    }

    // check for file size
    if (oFile.size &gt; 250 * 1024) {
        $('.error').html('You have selected too big file, please select a one smaller image file').show();
        return;
    }

    // preview element
    var oImage = document.getElementById('preview');

    // prepare HTML5 FileReader
    var oReader = new FileReader();
    oReader.onload = function(e) {

        // e.target.result contains the DataURL which we can use as a source of the image
        oImage.src = e.target.result;
        oImage.onload = function () { // onload event handler

            // display step 2
            $('.step2').fadeIn(500);

            // display some basic image info
            var sResultFileSize = bytesToSize(oFile.size);
            $('#filesize').val(sResultFileSize);
            $('#filetype').val(oFile.type);
            $('#filedim').val(oImage.naturalWidth + ' x ' + oImage.naturalHeight);

            // destroy Jcrop if it is existed
            if (typeof jcrop_api != 'undefined') {
                jcrop_api.destroy();
                jcrop_api = null;
                $('#preview').width(oImage.naturalWidth);
                $('#preview').height(oImage.naturalHeight);
            }

            setTimeout(function(){
                // initialize Jcrop
                $('#preview').Jcrop({
                    minSize: [150, 150], // min crop size
                    aspectRatio : 1, // keep aspect ratio 1:1
                    bgFade: true, // use fade effect
                    bgOpacity: .3, // fade opacity         
                    boxWidth: width,

                    onChange: updateInfo,
                    onSelect: updateInfo,
                    onRelease: clearInfo
                }, function(){

                    // use the Jcrop API to get the real image size
                    var bounds = this.getBounds();
                    boundx = bounds[0];
                    boundy = bounds[1];

                    // Store the Jcrop API in the jcrop_api variable
                    jcrop_api = this;
                });
            },3000);

        };
    };

    // read selected file as DataURL
    oReader.readAsDataURL(oFile);
}
</code></pre>
<p>Why won't it work in volt? I've tried with simpler code and it refuses to execute the Jcrop declaration inside the Timeout function...</p>
<p>Thank you!!!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a02056c65b3dbdc340f1c2d82b280139?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/770/SparoHawk" class="user-moderator-N"><span itemprop="name">SparoHawk</span></a>        </span>
        <br>

        <span class="karma">2.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="19235" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '15</span>
              </span><br/><a name="C19235" href="#C19235">
                <time itemprop="dateCreated" datetime="2015-06-09T07:20:51-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Please fix the code part of the post. It's kinda messed up.</p>
<p>Could we please see the ouput source code you get from Volt (the page source code).</p>
<p>Did you check for any Javascript errors using the browser's console? (Or any other console add-on/extension like Firebug.)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19235" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19235" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/deae60c0c71d15369b3caca051c9c0e2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3982/PlentyPeeps" class="user-moderator-N"><span itemprop="name">PlentyPeeps</span></a>        </span>
        <br>

        <span class="karma">11.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C19237" href="#C19237">
                <time itemprop="dateCreated" datetime="2015-06-09T07:23:42-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Fixed it, sorry for that.</p>
<p>Here is the source code of the volt:</p>
<pre><code>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;title&gt;INVO | Profile&lt;/title&gt;
        &lt;link rel="stylesheet" type="text/css" href="/hangstr/css/bootstrap.min.css" /&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
        &lt;meta name="description" content="Your invoices"&gt;
        &lt;meta name="author" content="Phalcon Team"&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;nav class="navbar navbar-default navbar-inverse" role="navigation"&gt;
    &lt;div class="container-fluid"&gt;
        &lt;div class="navbar-header"&gt;
            &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"&gt;
                &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
                &lt;span class="icon-bar"&gt;&lt;/span&gt;
                &lt;span class="icon-bar"&gt;&lt;/span&gt;
                &lt;span class="icon-bar"&gt;&lt;/span&gt;
            &lt;/button&gt;
            &lt;a class="navbar-brand" href="#"&gt;INVO&lt;/a&gt;
        &lt;/div&gt;
        &lt;div class="nav-collapse"&gt;&lt;ul class="nav navbar-nav navbar-left"&gt;&lt;li&gt;&lt;a href="/hangstr/index/index"&gt;Home&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="/hangstr/invoices/index"&gt;Invoices&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="/hangstr/about/index"&gt;About&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="/hangstr/contact/index"&gt;Contact&lt;/a&gt;&lt;/li&gt;&lt;li class="active"&gt;&lt;a href="/hangstr/profile/show"&gt;Show Profile&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class="nav-collapse"&gt;&lt;ul class="nav navbar-nav navbar-right"&gt;&lt;li class="active"&gt;&lt;a href="/hangstr/profile/edit"&gt;Edit Profile&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="/hangstr/session/end"&gt;Log Out&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;    &lt;/div&gt;
&lt;/nav&gt;

&lt;div class="container"&gt;
        &lt;br&gt;&lt;br&gt;
&lt;script type="text/javascript" src="/hangstr/jcrop/js/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/hangstr/jcrop/js/jquery.Jcrop.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/hangstr/jcrop/js/lol.js"&gt;&lt;/script&gt;

&lt;link rel="stylesheet" type="text/css" href="/hangstr/jcrop/css/jquery.Jcrop.css" /&gt;
&lt;link rel="stylesheet" type="text/css" href="/hangstr/jcrop/css/lol.css" /&gt;
&lt;div class="bbody"&gt;

    &lt;!-- upload form --&gt;
    &lt;form id="upload_form" enctype="multipart/form-data" method="post" files="true" action="upload.php" onsubmit="return checkForm()"&gt;
        &lt;!-- hidden crop params --&gt;
        &lt;input type="hidden" id="x1" name="x1" /&gt;
        &lt;input type="hidden" id="y1" name="y1" /&gt;
        &lt;input type="hidden" id="x2" name="x2" /&gt;
        &lt;input type="hidden" id="y2" name="y2" /&gt;

        &lt;h2&gt;Step1: Please select image file&lt;/h2&gt;
        &lt;div&gt;&lt;input type="file" name="image_file" id="image_file" onchange="fileSelectHandler()" /&gt;&lt;/div&gt;

        &lt;div class="error"&gt;&lt;/div&gt;

        &lt;div class="step2"&gt;
            &lt;h2&gt;Step2: Please select a crop region&lt;/h2&gt;
            &lt;img id="preview" /&gt;

            &lt;div class="info"&gt;
                &lt;label&gt;File size&lt;/label&gt; &lt;input type="text" id="filesize" name="filesize" /&gt;
                &lt;label&gt;Type&lt;/label&gt; &lt;input type="text" id="filetype" name="filetype" /&gt;
                &lt;label&gt;Image dimension&lt;/label&gt; &lt;input type="text" id="filedim" name="filedim" /&gt;
                &lt;label&gt;W&lt;/label&gt; &lt;input type="text" id="w" name="w" /&gt;
                &lt;label&gt;H&lt;/label&gt; &lt;input type="text" id="h" name="h" /&gt;
            &lt;/div&gt;

            &lt;input type="submit" value="Upload" /&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;    &lt;hr&gt;
    &lt;footer&gt;
        &lt;p&gt;&amp;copy; Company 2014&lt;/p&gt;
    &lt;/footer&gt;
&lt;/div&gt;
        &lt;script type="text/javascript" src="/hangstr/js/jquery.min.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="/hangstr/js/bootstrap.min.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="/hangstr/js/utils.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19237" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19237" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a02056c65b3dbdc340f1c2d82b280139?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/770/SparoHawk" class="user-moderator-N"><span itemprop="name">SparoHawk</span></a>        </span>
        <br>

        <span class="karma">2.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C19243" href="#C19243">
                <time itemprop="dateCreated" datetime="2015-06-09T07:31:36-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You have <code>jquery.min.js</code> included two times. Just pointing that out. Sometimes doing this without doing the <code>jQuery.noConflict()</code> can cause conflicts, even if they are the same version. Besides this the HTML code looks good. I'm looking carefully at the code to see if I notice any other problems.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19243" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19243" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/deae60c0c71d15369b3caca051c9c0e2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3982/PlentyPeeps" class="user-moderator-N"><span itemprop="name">PlentyPeeps</span></a>        </span>
        <br>

        <span class="karma">11.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="19245" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '15</span>
              </span><br/><a name="C19245" href="#C19245">
                <time itemprop="dateCreated" datetime="2015-06-09T07:38:58-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks SparoHawk, I noticed that so I played around with it a bit.</p>
<p>The preview only works if I delete js-include the <em>index.php</em> file and include it in the volt file. If I include the js file in the index and not in the volt, it doesn't work :O</p>
<p>If I include both, then the</p>
<pre><code>
{% raw %}{{{% endraw %} image('lol.jpg', 'id': 'target', 'name': 'target'){% raw %}}}{% endraw %}
</code></pre>
<p>works with Jcrop but <strong>not</strong> the preview.</p>
<p>If I use </p>
<pre><code>
{% raw %}{{{% endraw %} javascript_include('jcrop/js/jquery.min.js') {% raw %}}}{% endraw %}
</code></pre>
<p>only in index.php, neither works. Maybe this is because in index.php js include is loaded after contect?</p>
<p>index.php</p>
<pre><code>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        {% raw %}{{{% endraw %} get_title() {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} stylesheet_link('css/bootstrap.min.css') {% raw %}}}{% endraw %}
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
        &lt;meta name="description" content="Your invoices"&gt;
        &lt;meta name="author" content="Phalcon Team"&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {% raw %}{{{% endraw %} content() {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} javascript_include('jcrop/js/jquery.min.js') {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} javascript_include('js/bootstrap.min.js') {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} javascript_include('js/utils.js') {% raw %}}}{% endraw %}
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Thanks once again!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19245" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19245" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/deae60c0c71d15369b3caca051c9c0e2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3982/PlentyPeeps" class="user-moderator-N"><span itemprop="name">PlentyPeeps</span></a>        </span>
        <br>

        <span class="karma">11.7k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="19249" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '15</span>
              </span><br/><a name="C19249" href="#C19249">
                <time itemprop="dateCreated" datetime="2015-06-09T07:40:25-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I tried:</p>
<p>index.php</p>
<pre><code>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        {% raw %}{{{% endraw %} get_title() {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} stylesheet_link('css/bootstrap.min.css') {% raw %}}}{% endraw %}
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
        &lt;meta name="description" content="Your invoices"&gt;
        &lt;meta name="author" content="Phalcon Team"&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {% raw %}{{{% endraw %} javascript_include('jcrop/js/jquery.min.js') {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} javascript_include('js/bootstrap.min.js') {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} javascript_include('js/utils.js') {% raw %}}}{% endraw %}
        {% raw %}{{{% endraw %} content() {% raw %}}}{% endraw %}
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Basically just moving <strong> {% raw %}{{{% endraw %} content() {% raw %}}}{% endraw %}</strong> down three steps.</p>
<p>And now it works without including jquery in the volt file. I guess it requires the Javascript files to be loaded before the contect. I'll go with this for now.</p>
<p>Thank you!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19249" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19249" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a02056c65b3dbdc340f1c2d82b280139?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/770/SparoHawk" class="user-moderator-N"><span itemprop="name">SparoHawk</span></a>        </span>
        <br>

        <span class="karma">2.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C19251" href="#C19251">
                <time itemprop="dateCreated" datetime="2015-06-09T08:18:13-07:00" class="action-date">Jun '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ah. When working with jQuery I always use the <code>domContentLoaded</code> way.</p>
<blockquote>
<p>$(function(){</p>
<pre><code>// Your code here</code></pre>
<p>});</p>
</blockquote>
<p>This helps avoid problems if your files are included before or after the place where you need them to act.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="19251" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="19251" data-cf-modified-09a6d210b5f3a6b8db22991a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="7053" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>