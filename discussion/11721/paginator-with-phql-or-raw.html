---
layout: default
title: 'Paginator with PHQL or Raw - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/29/database">Database</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Paginator with PHQL or Raw</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a></span>
            <time itemprop="dateCreated" datetime="2016-06-02T15:43:46-07:00">Jun '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-06-02T15:43:46-07:00">Jun '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>837</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a></span>
                <span class="karma">20.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C11721" href="#C11721">
        <time class="action-date">Jun '16</time>
    </a>
</div>
<div class="post-content"><div><p>So there are 3 addaptors for paginator <code>Model</code>, <code>NativeArray</code> and <code>QueryBuilder</code>. Can any of these be used to paginate PHQL or Raw MySql queries? I was under the assumption that <code>QueryBuilder</code> was just an alternative to PHQL and would produce the same result, so I was hoping the paginator would work with PHQL as it does with QueryBulder.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/11889885154f2e535bc8130edfd02c2a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2038/icewing02" class="user-moderator-N"><span itemprop="name">icewing02</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="35013" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C35013" href="#C35013">
                <time itemprop="dateCreated" datetime="2016-06-02T19:06:54-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>I am not sure what you are trying to achieve. Is it to support your front-end by having the back-end do queries in your table that specify limit and starting index? If so, you can do it this way:</p>
<pre><code class="language-php">Model::find([
    &lt;filter_here&gt;,
    'offset'=&gt; &lt;start_index&gt;,
    'limit'=&gt; &lt;limit_size&gt;, 
]);</code></pre>
<p>This code is not tested but it should be around there. Let me know if that works for you. You can edit it in PHQL or MySQL queries, whatever suits you. If it is another thing that you need to achieve, please advise.</p>
<p>Cheers,</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35013" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35013" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a>        </span>
        <br>

        <span class="karma">20.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35015" href="#C35015">
                <time itemprop="dateCreated" datetime="2016-06-02T20:23:32-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I am talking about Phalcon\Paginator and Phalcon\Paginator\Adaptor and wheather it can work with PHQL and/or raw queries. It has an adaptor for models and that works well, and it has an adaptor for query builder and that works well, and it has a native array adaptor which works, but would not be efficient in this case.  I have some queries that have joins, sub queries etc. that are too complex for <code>Model::find()</code> and therefor need to be written in sql. However, I would like to use Phalcon\Paginator to page through the results of the queries rather than have to create a separate pager just for PHQL and raw.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35015" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35015" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35029" href="#C35029">
                <time itemprop="dateCreated" datetime="2016-06-03T00:19:44-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Joins and sub queries work in query builder.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35029" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35029" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a>        </span>
        <br>

        <span class="karma">20.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35049" href="#C35049">
                <time itemprop="dateCreated" datetime="2016-06-03T05:28:47-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes, I actually got this particular query to work with query builder after a lot of messing about, but as soon as I add pagination, the paginator some how breaks the query! I posted <a href="https://github.com/phalcon/cphalcon/issues/11852">the issue on github</a>.</p>
<p>I some times find that using query builder on some more complex queries requires a lot of adaptation to make it work. For example, <code>ORDER BY CASE WHEN...</code> doesn't seem to work (although I read some where that it is now supported) and I have to use <code>IF</code> instead. So some times it's easier to actually write out the query as a string in PHQL or raw. In some cases it's more semantic to do that too, especially if a database god later wants to take a look at a query. So it would be good to be able to use paginator with such queries.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35049" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35049" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35051" href="#C35051">
                <time itemprop="dateCreated" datetime="2016-06-03T06:21:47-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Case is working, there is just other syntax. You need to use case like this for example:</p>
<pre><code>CASE Admin.id WHEN :adminId: THEN User.email ELSE NULL END as email'</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35051" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35051" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35137" href="#C35137">
                <time itemprop="dateCreated" datetime="2016-06-06T08:54:25-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If you're doing a big fancy query in PHQL or raw SQL, I think the easiest pagination solution will be to just do it yourself with a limit &amp; offset clause.  The paginator works great when you're using the QueryBuilder or some other Phalcon construct, but when you're not using them, I don't think it adds a whole lot.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35137" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35137" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ff9a2f43efac70da87e23ddd6ac5061f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1663/al35mm" class="user-moderator-N"><span itemprop="name">Al</span></a>        </span>
        <br>

        <span class="karma">20.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35139" href="#C35139">
                <time itemprop="dateCreated" datetime="2016-06-06T09:10:31-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks Dylan. The custom paginator is the rout I've had to take. However, I did convert a query to queryBuilder so that I could paginate it, but strangly as soon as I added the paginator, it would break the query! I posted this issue on GH, but no replies - <a href="hhttps%3A//github.com/phalcon/cphalcon/issues/11852">see here</a>. Have you any ideas on that?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35139" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35139" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/178421e202336a00e33320fd099c3687?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/7437/katingtongpark" class="user-moderator-N"><span itemprop="name">Katingtong Park (Thailand).</span></a>        </span>
        <br>

        <span class="karma">629</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35153" href="#C35153">
                <time itemprop="dateCreated" datetime="2016-06-07T04:43:06-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35153" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35153" data-cf-modified-ef10a1b94b173ceaaeb5e87d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="11721" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>