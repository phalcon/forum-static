---
layout: default
title: 'Change default Base Url - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/25/configuration">Configuration</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Change default Base Url</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1432/danieljmg" class="user-moderator-N"><span itemprop="name">Daniel Jesús Muñoz Guerra</span></a></span>
            <time itemprop="dateCreated" datetime="2015-03-02T13:23:47-07:00">Mar '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-03-02T13:23:47-07:00">Mar '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>2038</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/af92f0010d8513efb7ec8f4515f9a865?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1432/danieljmg" class="user-moderator-N"><span itemprop="name">Daniel Jesús Muñoz Guerra</span></a></span>
                <span class="karma">9.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6073" href="#C6073">
        <time class="action-date">Mar '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi there, I'm struggling with this for some hours already.
I have a multilingual site by subfolders, so URL/es/ for spanish, URL for english(default), etc... The problem are the redirections or the normal hrefs/forms, doesn't catch the url/language/ as a base like the ajax calls.(So if i click in login href in mysite/es goes to mysite/login and not mysite/es/login).After tried everything, nothing works but the cleanest solution would be to change the base URL of the site for the /language/ version but I just cannot! I can change it for an specific controller but not for all system dinamically. I've tried accesing by new DI, a factorydefault one but no luck. How can I change the default Base URL on demand? I've even tried with PHP plain code but still I cannot.
If that isnt as well the proper way please enlight me, coz I'm really blocked.
The routers are properly configured, I've tried choosing the language as a namespace as well but then the routers doesnt work...</p>
<p>EDIT: Ok, i figure out something but I don't think is the best way, I set the language param as a variable in the view and I add $language to the URLs and the redirections. I wait for a better solution anyway.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-2f689d0a329df0b8c385e120-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-2f689d0a329df0b8c385e120-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/479faaafc4b76e24e950451a09530927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2703/callmeNewbie" class="user-moderator-N"><span itemprop="name">Enad Heljhum</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16303" href="#C16303">
                <time itemprop="dateCreated" datetime="2015-03-03T17:57:42-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>just post your code i will check whats the best solution for you</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16303" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16303" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/af92f0010d8513efb7ec8f4515f9a865?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1432/danieljmg" class="user-moderator-N"><span itemprop="name">Daniel Jesús Muñoz Guerra</span></a>        </span>
        <br>

        <span class="karma">9.2k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C16303"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/479faaafc4b76e24e950451a09530927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Enad Heljhum                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16317" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16317" href="#C16317">
                <time itemprop="dateCreated" datetime="2015-03-04T02:56:17-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>just post your code i will check whats the best solution for you</p>
</blockquote>
<p>Ok, routing is like this type, just for languages available. If not available or is english I just rewrite to plain url(without /([a-z]{2}) subfolder) :</p>
<pre><code class="language-php">$router-&gt;add(
    "/([a-z]{2})/:controller/:action",
    array(
        "language"   =&gt; 1,
        "controller" =&gt; 2,
        "action"     =&gt; 3
    )
);</code></pre>
<p>The &lt;a&gt; tags are typical ones with an standard href but if I am in localhost/es and I press LogIn, I want to go to localhost/es/login and not localhost/login. </p>
<pre><code class="language-php">&lt;a href="login" title='Login'&gt;Log In&lt;/a&gt;</code></pre>
<p>Also happend the same if I do a redirect in the controller.</p>
<pre><code class="language-php">$this-&gt;response-&gt;redirect('/login');</code></pre>
<p>I've used the phalcon boostrap so I just set up in config.pho the base URL(ie. in local):</p>
<pre><code class="language-php">'baseUri'        =&gt; 'http://localhost',</code></pre>
<p>So the problem is that base Uri, it always erase the language subfolder from the base URL, even if I do:</p>
<pre><code class="language-php">    $di = new Phalcon\DI\FactoryDefault();
    $di-&gt;set('url', function (){
        $url = new Phalcon\Mvc\Url();
        $url-&gt;setBaseUri('http://localhost/'.$language);
        return $url;
    }, true);</code></pre>
<pre><code>or</code></pre>
<pre><code class="language-php">    $this-&gt;di-&gt;set('url', function (){
        $url = new Phalcon\Mvc\Url();
        $url-&gt;setBaseUri('http://localhost/'.$language);
        return $url;
    }, true);</code></pre>
<p>As much it just work for the actuall controller, for new calls it doesnt(I've tried with setshared as well). I've found few workarounds and for now seems the best: </p>
<pre><code class="language-php"> public function beforeExecuteRoute(){
    $language=$this-&gt;dispatcher-&gt;getParam("language");
     $this-&gt;di-&gt;set('url', function (){
        $url = new Phalcon\Mvc\Url();
        $url-&gt;setBaseUri('http://localhost/'.$language);
        return $url;
    }, true);
 }</code></pre>
<p>or</p>
<p>$language='/'.$this-&gt;dispatcher-&gt;getParam(&quot;language&quot;); + preappend $language to every call and redirection.</p>
<p>The best would be to catch that language subfolder in the config(or services) php files and set that modified baseUri but I just don't find the way.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16317" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16317" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/af92f0010d8513efb7ec8f4515f9a865?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1432/danieljmg" class="user-moderator-N"><span itemprop="name">Daniel Jesús Muñoz Guerra</span></a>        </span>
        <br>

        <span class="karma">9.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16322" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16322" href="#C16322">
                <time itemprop="dateCreated" datetime="2015-03-04T05:44:34-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ok, I've managed a bit better solution(cleaner). I have this code on every controller:</p>
<pre><code class="language-php">    public function beforeExecuteRoute()
    {
        $language=$this-&gt;dispatcher-&gt;getParam("language");
        if($language !== null) $this-&gt;url-&gt;setBaseUri($this-&gt;url-&gt;getBaseUri().'/'.$language);
    }</code></pre>
<p>Like that redirections works perfect, plain hrefs no, but with this for example href={% raw %}{{{% endraw %} url('/login') {% raw %}}}{% endraw %} does it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16322" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16322" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/479faaafc4b76e24e950451a09530927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/2703/callmeNewbie" class="user-moderator-N"><span itemprop="name">Enad Heljhum</span></a>        </span>
        <br>

        <span class="karma">3.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16345" href="#C16345">
                <time itemprop="dateCreated" datetime="2015-03-05T03:29:16-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>its ok but just try also the link_to from view</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16345" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16345" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/af92f0010d8513efb7ec8f4515f9a865?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1432/danieljmg" class="user-moderator-N"><span itemprop="name">Daniel Jesús Muñoz Guerra</span></a>        </span>
        <br>

        <span class="karma">9.2k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C16345"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/479faaafc4b76e24e950451a09530927?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Enad Heljhum                    </a>
                </div><div class="posts-buttons" align="right"><a name="C16347" href="#C16347">
                <time itemprop="dateCreated" datetime="2015-03-05T04:51:00-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I feel comfortable with plain html. Also allows me to compress and minimize with automatic tools.</p>
<blockquote>
<p>its ok but just try also the link_to from view</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16347" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16347" data-cf-modified-2f689d0a329df0b8c385e120-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6073" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>