---
layout: default
title: 'Invo: security and products page warning - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Invo: security and products page warning</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/3151/sboudoux" class="user-moderator-N"><span itemprop="name">stephane</span></a></span>
            <time itemprop="dateCreated" datetime="2015-02-11T10:31:54-07:00">Feb '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-02-11T10:31:54-07:00">Feb '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>516</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/076d8254b3d82407f201a00995d41c96?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/3151/sboudoux" class="user-moderator-N"><span itemprop="name">stephane</span></a></span>
                <span class="karma">24.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C4715" href="#C4715">
        <time class="action-date">Feb '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi there,</p>
<p>I'm working on the INVO tutorial to learn a bit more abpout phalcon.
Working well so far, but I have an issue with the security/products page: the tutorial explains that trying to access the protected page (<a href="http://mydomain.dev/products/">http://mydomain.dev/products/</a> ) it should display the home page with a warning.  </p>
<p>When trying on my dev version, I end up with a blank page.
I've added a trace (dump $_SERVER)  in the index.php file to see what's happening and where I ended up:</p>
<p>$_SERVER = array (
'FCGI_ROLE' =&gt; 'RESPONDER',
'QUERY_STRING' =&gt; '_url=/products/index',
'REQUEST_METHOD' =&gt; 'GET',
'SCRIPT_NAME' =&gt; '/index.php',
'REQUEST_URI' =&gt; '/products/index',
'DOCUMENT_URI' =&gt; '/index.php',
'DOCUMENT_ROOT' =&gt; '/data/www/invo/public',
'SERVER_PROTOCOL' =&gt; 'HTTP/1.1',
'GATEWAY_INTERFACE' =&gt; 'CGI/1.1',
'SERVER_SOFTWARE' =&gt; 'nginx/1.6.2',
'REMOTE_PORT' =&gt; '52551',
'SERVER_PORT' =&gt; '80',
'SERVER_NAME' =&gt; 'phalcon.nis.dev',
'REDIRECT_STATUS' =&gt; '200',
'SCRIPT_FILENAME' =&gt; '/data/www/invo/public/index.php',
'HTTP_HOST' =&gt; 'phalcon.nis.dev',
'HTTP_COOKIE' =&gt; 'PHPSESSID=nojsgpfu2ooi49b8nljrfkbmd7',
'PHP_SELF' =&gt; '/index.php',
...
)</p>
<p>Checked the dispatcher and SecurtyPlugins are called, but nothing significant there.
Plus even though the page displays the trace, the HTTP hreader show the status 404...  o_O<br />
I'm a bit lost there.</p>
<p>Is that a bug in the INVO tuto or something wrong with my setting ?
Best.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-fe01e632fb94791a70bad34d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-fe01e632fb94791a70bad34d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/c0ce8f5e133750a4dfea4712e533a178?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/15/le51" class="user-moderator-N"><span itemprop="name">le51</span></a>        </span>
        <br>

        <span class="karma">43.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C15859" href="#C15859">
                <time itemprop="dateCreated" datetime="2015-02-11T12:02:43-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>http error 404 with a blank page, that's strange indeed. Because Invo implements a notFound handler and a dedicated view ...</p>
<p>What does appache error.log tells you ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15859" data-cf-modified-fe01e632fb94791a70bad34d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15859" data-cf-modified-fe01e632fb94791a70bad34d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/076d8254b3d82407f201a00995d41c96?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3151/sboudoux" class="user-moderator-N"><span itemprop="name">stephane</span></a>        </span>
        <br>

        <span class="karma">24.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="15867" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '15</span>
              </span><br/><a name="C15867" href="#C15867">
                <time itemprop="dateCreated" datetime="2015-02-12T03:12:25-07:00" class="action-date">Feb '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,</p>
<p>Nothing in the error log, that's why I've added traces myself.
Digged a bit deeper... the beforeException method is executed in the notFoundPlugin class, and it's supposed to redirect me to the error page
[ $dispatcher-&gt;forward(array(   'controller' =&gt; 'errors',   'action'     =&gt; 'show500')); ]</p>
<p>But the show500Action() method doesn't seem to be called/executed. Is there any way to trace what's happening when the forward method is called ?</p>
<p>Cheers</p>
<p>[edit]
I've tried to use the forward method on the home page, and it doesn't work. Throwing an exception and sending me to the show500 method.
Seems like the problem come from there.</p>
<p>[edit2]
I believe I've located exactly where the problem is: SecurityPlugin, line 114.
The plugin figure out I'm trying to access a restricted page, tries to redirect me to the ErrorController-&gt;show401() but that fails, the function show401 is never executed.</p>
<p>[edit3]
It seems there's a double problem with the INVO project: </p>
<ul>
<li>securityPlugin:  the action show401 is not listed in the publicResources array leading to an infinite loop</li>
<li>even after making show401 public, the forward method can't reach it (so ... redicret to show401)</li>
</ul></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15867" data-cf-modified-fe01e632fb94791a70bad34d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15867" data-cf-modified-fe01e632fb94791a70bad34d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/048a16e02aea295f6bdee77d3e837b70?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3449/sebastianrz" class="user-moderator-N"><span itemprop="name">Sebastian Er</span></a>        </span>
        <br>

        <span class="karma">82</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C15867"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/076d8254b3d82407f201a00995d41c96?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        stephane                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16495" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16495" href="#C16495">
                <time itemprop="dateCreated" datetime="2015-03-10T21:33:15-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>That was so obvious if you think about it.
Just needed somone to point it out.
Thank you...
Was gona trace route myself, since log was useless, but then i thought of google, and found Sutefu.
Nice thanks again.</p>
<blockquote>
<p>It seems there's a double problem with the INVO project: </p>
<ul>
<li>securityPlugin:  the action show401 is not listed in the publicResources array leading to an infinite loop</li>
<li>even after making show401 public, the forward method can't reach it (so ... redicret to show401)</li>
</ul>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16495" data-cf-modified-fe01e632fb94791a70bad34d-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16495" data-cf-modified-fe01e632fb94791a70bad34d-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="4715" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>