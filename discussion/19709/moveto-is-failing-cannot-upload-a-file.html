---
layout: default
title: 'moveTo is failing, cannot upload a file - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">moveTo is failing, cannot upload a file</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/6439/driscojs" class="user-moderator-N"><span itemprop="name">driscojs</span></a></span>
            <time itemprop="dateCreated" datetime="2019-05-30T07:57:39-07:00">May '19</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2019-05-30T07:57:39-07:00">May '19</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jun '19</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">1</span>
                </td>
                <td>
                    <label>Views</label><br>242</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a5b43087f87fb8c04b5da94d30c489f2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/6439/driscojs" class="user-moderator-N"><span itemprop="name">driscojs</span></a></span>
                <span class="karma">6.6k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C19709" href="#C19709">
        <time class="action-date">May '19</time>
    </a>
</div>
<div class="post-content"><div><p>I'm trying to uplaod a file, and move it to a folder that is not publicly accessible. I'm doing via an ajax uploader for some wiki code that we moved over to phalcon. I seem to get all the way to the upload, Chrome indicates that the file is uploading, but the return says the file was not uploaded. I'm hoping I just screwed up the permissions.</p>
<p>In my application folder, same dir level as the app folder, I have the target folder. Permissions are: </p>
<pre><code>drwxrwxrwx 2 www-data www-data 12288 Apr 26 11:21 wikiFiles</code></pre>
<p>My function:</p>
<pre><code>public function upload_fileAction($wiki_word)
    {
        #check if there is any file
        if( $this-&gt;request-&gt;hasFiles() == true )
        {
            $uploads = $this-&gt;request-&gt;getUploadedFiles();
            $isUploaded = false;
            die( var_dump($uploads));
            #do a loop to handle each file individually
            foreach($uploads as $upload)
            {
                $path = BASE_PATH . '/wikiFiles/' .  strtolower( $upload-&gt;getname() );

                #move the file and simultaneously check if everything was ok
                ( $upload-&gt;moveTo($path) ) ? $isUploaded = true : $isUploaded = false;
         }

         #if any file couldn’t be moved, then throw an message
         ( $isUploaded ) ? '' : die( $path . ' ' . 'A file upload error ocurred.' );
        }
        else
        {
            #if no files were sent, throw a message warning user
            die('You must choose at least one file to send. Please try again.');
        }

        //Disable the view so it won't try to show a view for THIS Controller/Action
        $this-&gt;view-&gt;disable();
    }</code></pre>
<p>The response msg is: &quot;/var/www/html/myApp/wikiFiles/testcapture.png A file upload error ocurred.&quot;</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-2b3057eceae854842fd73f1b-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-2b3057eceae854842fd73f1b-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a5b43087f87fb8c04b5da94d30c489f2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6439/driscojs" class="user-moderator-N"><span itemprop="name">driscojs</span></a>        </span>
        <br>

        <span class="karma">6.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="59917" data-toggle="modal" data-target="#historyModal">
                edited <span>May '19</span>
              </span><br/><a name="C59917" href="#C59917">
                <time itemprop="dateCreated" datetime="2019-05-30T08:03:59-07:00" class="action-date">May '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>If it helps, this is what I get when I die and var_dump $this-&gt;request-&gt;getUploadedFiles() :</p>
<pre><code>{responseText: "array(1) {↵  [0]=&amp;gt;↵  object(Phalcon\Http\Reques…nsion":protected]=&amp;gt;↵    string(3) "PNG"↵  }↵}↵", responseXML: document}responseText: "array(1) {↵  [0]=&amp;gt;↵  object(Phalcon\Http\Request\File)#52 (8) {↵    ["_name":protected]=&amp;gt;↵    string(15) "TestCapture.PNG"↵    ["_tmp":protected]=&amp;gt;↵    string(0) ""↵    ["_size":protected]=&amp;gt;↵    int(0)↵    ["_type":protected]=&amp;gt;↵    string(0) ""↵    ["_realType":protected]=&amp;gt;↵    NULL↵    ["_error":protected]=&amp;gt;↵    int(1)↵    ["_key":protected]=&amp;gt;↵    string(10) "userfile.0"↵    ["_extension":protected]=&amp;gt;↵    string(3) "PNG"↵  }↵}↵"responseXML: documentURL: "https://myapp.domain.com/wikiajax/upload_file/TestbyJeff"activeElement: bodyadoptedStyleSheets: []alinkColor: ""all: HTMLAllCollection(4) [html, head, style#stndz-style, body, stndz-style: style#stndz-style]anchors: HTMLCollection []applets: HTMLCollection []baseURI: "https://myapp.domain.com/wikiajax/upload_file/TestbyJeff"bgColor: ""body: bodycharacterSet: "UTF-8"charset: "UTF-8"childElementCount: 1childNodes: NodeList [html]children: HTMLCollection [html]compatMode: "BackCompat"contentType: "text/html"cookie: ""createElement: ƒ ()currentScript: nulldefaultView: nulldesignMode: "off"dir: ""doctype: nulldocumentElement: htmldocumentURI: "https://myapp.domain.com/wikiajax/upload_file/TestbyJeff"domain: "myapp.domain.com"embeds: HTMLCollection []featurePolicy: FeaturePolicy {}fgColor: ""firstChild: htmlfirstElementChild: htmlfonts: FontFaceSet {onloading: null, onloadingdone: null, onloadingerror: null, ready: undefined, status: "loaded", …}forms: HTMLCollection []fullscreen: falsefullscreenElement: nullfullscreenEnabled: falsehead: headhidden: trueimages: HTMLCollection []implementation: DOMImplementation {}inputEncoding: "UTF-8"isConnected: truelastChild: htmllastElementChild: htmllastModified: "05/30/2019 11:01:34"linkColor: ""links: HTMLCollection []location: nullnextSibling: nullnodeName: "#document"nodeType: 9nodeValue: nullonabort: nullonauxclick: nullonbeforecopy: nullonbeforecut: nullonbeforepaste: nullonblur: nulloncancel: nulloncanplay: nulloncanplaythrough: nullonchange: nullonclick: nullonclose: nulloncontextmenu: nulloncopy: nulloncuechange: nulloncut: nullondblclick: nullondrag: nullondragend: nullondragenter: nullondragleave: nullondragover: nullondragstart: nullondrop: nullondurationchange: nullonemptied: nullonended: nullonerror: nullonfocus: nullonfreeze: nullonfullscreenchange: nullonfullscreenerror: nullongotpointercapture: nulloninput: nulloninvalid: nullonkeydown: nullonkeypress: nullonkeyup: nullonload: nullonloadeddata: nullonloadedmetadata: nullonloadstart: nullonlostpointercapture: nullonmousedown: nullonmouseenter: nullonmouseleave: nullonmousemove: nullonmouseout: nullonmouseover: nullonmouseup: nullonmousewheel: nullonpaste: nullonpause: nullonplay: nullonplaying: nullonpointercancel: nullonpointerdown: nullonpointerenter: nullonpointerleave: nullonpointerlockchange: nullonpointerlockerror: nullonpointermove: nullonpointerout: nullonpointerover: nullonpointerup: nullonprogress: nullonratechange: nullonreadystatechange: nullonreset: nullonresize: nullonresume: nullonscroll: nullonsearch: nullonseeked: nullonseeking: nullonselect: nullonselectionchange: nullonselectstart: nullonstalled: nullonsubmit: nullonsuspend: nullontimeupdate: nullontoggle: nullonvisibilitychange: nullonvolumechange: nullonwaiting: nullonwebkitfullscreenchange: nullonwebkitfullscreenerror: nullonwheel: nullownerDocument: nullparentElement: nullparentNode: nullpictureInPictureElement: nullpictureInPictureEnabled: falseplugins: HTMLCollection []pointerLockElement: nullpreviousSibling: nullreadyState: "complete"referrer: ""rootElement: nullscripts: HTMLCollection []scrollingElement: bodystyleSheets: StyleSheetList {0: CSSStyleSheet, length: 1}textContent: nulltitle: ""visibilityState: "hidden"vlinkColor: ""wasDiscarded: falsewebkitCurrentFullScreenElement: nullwebkitFullscreenElement: nullwebkitFullscreenEnabled: falsewebkitHidden: truewebkitIsFullScreen: falsewebkitVisibilityState: "hidden"xmlEncoding: nullxmlStandalone: falsexmlVersion: null__proto__: HTMLDocument__proto__: Object</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="59917" data-cf-modified-2b3057eceae854842fd73f1b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="59917" data-cf-modified-2b3057eceae854842fd73f1b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a5b43087f87fb8c04b5da94d30c489f2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6439/driscojs" class="user-moderator-N"><span itemprop="name">driscojs</span></a>        </span>
        <br>

        <span class="karma">6.6k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C59919" href="#C59919">
                <time itemprop="dateCreated" datetime="2019-05-30T09:25:36-07:00" class="action-date">May '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm a fool. It was a file size limit issue.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="59919" data-cf-modified-2b3057eceae854842fd73f1b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="59919" data-cf-modified-2b3057eceae854842fd73f1b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C59919"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/a5b43087f87fb8c04b5da94d30c489f2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        driscojs                    </a>
                </div><div class="posts-buttons" align="right"><a name="C59935" href="#C59935">
                <time itemprop="dateCreated" datetime="2019-06-03T02:00:16-07:00" class="action-date">Jun '19</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>I'm a fool. It was a file size limit issue.</p>
</blockquote>
<p>Welcome to the club :D</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="59935" data-cf-modified-2b3057eceae854842fd73f1b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="59935" data-cf-modified-2b3057eceae854842fd73f1b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="19709" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>