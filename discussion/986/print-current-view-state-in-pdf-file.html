---
layout: default
title: 'print current view state in pdf file - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">print current view state in pdf file</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/584/nedim23" class="user-moderator-N"><span itemprop="name">nedim23</span></a></span>
            <time itemprop="dateCreated" datetime="2013-10-05T15:16:23-07:00">Oct '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-10-05T15:16:23-07:00">Oct '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>None</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">0</span>
                </td>
                <td>
                    <label>Views</label><br>1094</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/37b17a163909334a1a9b9eec1a062e29?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/584/nedim23" class="user-moderator-N"><span itemprop="name">nedim23</span></a></span>
                <span class="karma">18.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C986" href="#C986">
        <time class="action-date">Oct '13</time>
    </a>
</div>
<div class="post-content"><div><p>I work in Phalcon framework. I have a search form and empty div tag where i want my search results to appear. So, when i end my search i want to create pdf from that view. But, when i try this I only print the first state of a view in pdf file without search result. Here is my controller function:</p>
<pre><code>     public function dajPdfAction(){
$this-&gt;view-&gt;disable();
// Creates the autoloader
$loader = new \Phalcon\Loader();
$loader-&gt;registerClasses(</code></pre>
<p>array(
&quot;mpdf&quot;=&gt; &quot;C:/wamp/www/phalcon1/mpdf/mpdf.php&quot;
)
);</p>
<p>// register autoloader
$loader-&gt;register();
//$string = &quot;Ja se zovem Nedim Omerbegovic&quot;;
$view = new \Phalcon\Mvc\View();
$view-&gt;setViewsDir('../app/views/');
$cont = $this-&gt;view-&gt;getRender('test', 'pretraga');
//generisanje pdf dokumenta
$pdf = new mpdf();
$pdf-&gt;WriteHTML($cont, 2);
$br = rand(0,100000);
$ispis = &quot;Pobjeda Rudet-Izvjestaj-&quot;.$br;
$pdf-&gt;Output($ispis, 'I');
}</p>
<p>&lt;?php
use Phalcon\Tag;
?&gt;
&lt;?php
echo Phalcon\Tag::javascriptInclude(&quot;<a href="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js</a>&quot;, false);
echo Phalcon\Tag::javascriptInclude(&quot;javascript/jquery.js&quot;);
echo Phalcon\Tag::stylesheetLink(&quot;css/test.css&quot;);
echo Phalcon\Tag::stylesheetLink(&quot;<a href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css</a>&quot;, false);
echo Phalcon\Tag::javascriptInclude(&quot;<a href="https://code.jquery.com/ui/1.10.3/jquery-ui.js">https://code.jquery.com/ui/1.10.3/jquery-ui.js</a>&quot;, false);</p>
<p>?&gt;</p>
<p>&lt;script type=&quot;text/javascript&quot;&gt;</p>
<p>$(document).ready(function(){</p>
<pre><code>$("#opcije").menu();
//alert($("#nesto").val());
//atr = $(".klasa").attr("id");
//alert("Id je: " + atr)</code></pre>
<p>//  alert('&lt;?php echo  $this-&gt;url-&gt;get(&quot;public/img&quot;);?&gt;/spinner1.gif');
$(&quot;#poruka&quot;).dialog();
var imena=new Array();
$(&quot;#loader&quot;).fadeIn('600');
$(&quot;#loader&quot;).append(&quot;&lt;p id='poruka1'&gt;Ovdje idu rezultati vase pretrage...&lt;/p&gt;&quot;);
$.ajax({
url: '&lt;?php echo $this-&gt;url-&gt;get(&quot;test/getAllKorisnik&quot;); ?&gt;',
type: 'POST',
dataType: 'json',
success: function(data){
for (i=0; i&lt;data.length; i++) {
imena.push(data[i]);
}
$( &quot;#nesto&quot; ).autocomplete({
source: imena
});
},
error: function(){
alert(&quot;Neuspjesan JSON zahtjev!&quot;);
}</p>
<pre><code>});

$("#opcije").change(function(){
var n = $(this).val();
    switch(n)
    {
    case '1':
        $("#2").fadeOut();
        $("#3").fadeOut();
        $("#1").fadeIn();
        break;
    case '2':
        $("#1").fadeOut();
        $("#3").fadeOut();
        $("#2").fadeIn();
        break;
     case '3':
       $("#1").fadeOut();
        $("#2").fadeOut();
        $("#3").fadeIn();
        break;</code></pre>
<p>}
});</p>
<pre><code>//ajax poziv za sve korisnike</code></pre>
<p>$('#search').click(function(){
var visina = $(document).height();
$(document).scrollTop(visina*0.5);
//alert(&quot;Visina je:&quot; + visina);
var dodatak = $('#nesto').val();
//$(&quot;#loader&quot;).addClass('loading');
$(&quot;#loader&quot;).empty();
$(&quot;#loader&quot;).append(&quot;&lt;div id='lltest'&gt; &lt;div&gt;&quot;);
//alert(&quot;Unio si: &quot; + dodatak);
//$(&quot;#loader&quot;).fadeIn(&quot;200&quot;);
var ime = $('#nesto').val();
var prezime = $('#prez').val();
var email = $('#email').val();</p>
<pre><code>    $.ajax({
    url: '&lt;?php echo  $this-&gt;url-&gt;get("test/getKorisnik");?&gt;',
    type: 'POST',
    dataType: 'json',
    data: {ime:ime, prezime:prezime, email:email},
    success: function(data){
        if (data==null) {
            $("#loader").empty();
            $("#loader").append("&lt;div id='greska'&gt; &lt;/div&gt;");

        }
        else{
         setTimeout(function(){
        //$("#loader").removeClass('loading');
        $("#loader").empty();
        $("#loader").append("&lt;p id='naslov'&gt;Rezultat pretrage:&lt;/p&gt;&lt;hr /&gt;");
        $("#loader").append("&lt;table id='tab' border='1'/&gt;");
        $("#loader table").append("&lt;tr&gt;&lt;th class='zag'&gt;Ime&lt;/th&gt;&lt;th class='zag'&gt;Prezime&lt;/th&gt;&lt;th class='zag'&gt;Adresa stanovanja&lt;/th&gt;&lt;th class='zag'&gt;Email&lt;/th&gt;&lt;/tr&gt;");

        for (i=0; i&lt;data.length; i++) {
            //$("#loader").append("&lt;p class='izlaz'&gt;Ime: " + data[i].ime + "&lt;/p&gt;" + "&lt;p class='izlaz'&gt;Prezime: " + data[i].prezime + "&lt;br /&gt;");

            $("#loader table").append("&lt;tr&gt;&lt;td class='sadr'&gt;" + data[i].ime + "&lt;/td&gt;&lt;td class='sadr'&gt;" + data[i].prezime + "&lt;/td&gt;&lt;td class='sadr'&gt;" + data[i].adresa + "&lt;/td&gt;"+
            "&lt;td class='sadr'&gt;" + data[i].email + "&lt;/td&gt;&lt;/tr&gt;");   

        }
        },600);

    }

    },
    error: function(){
        alert("greska...");
    }
  });

   $('#nesto').val("");
   $('#prez').val("");
   $('#email').val("");
  // $("#loader").empty();

}) ;

});</code></pre>
<p>&lt;/script&gt;</p>
<p>&lt;p id=&quot;poruka&quot; style=&quot;display:none&quot;&gt;Dobro dosli na pretragu artikala.&lt;/p&gt;
&lt;p style=&quot;padding-left:20px;&quot;&gt;Choose search category: &lt;select id=&quot;opcije&quot;&gt;
&lt;option value=&quot;1&quot; selected=&quot;1&quot;&gt;Packing list&lt;/option&gt;
&lt;option value=&quot;2&quot;&gt;Artupal&lt;/option&gt;
&lt;option value=&quot;3&quot;&gt;Paket&lt;/option&gt;
&lt;option value=&quot;4&quot;&gt;Micro&lt;/option&gt;
&lt;option value=&quot;5&quot;&gt;Palete&lt;/option&gt;
&lt;option value=&quot;6&quot;&gt;Jedinicno&lt;/option&gt;
&lt;/select&gt;&lt;/p&gt;
&lt;div id=&quot;1&quot; class=&quot;wrapper&quot; style=&quot;&quot;&gt;
&lt;div class=&quot;steps&quot;&gt;
&lt;fieldset class=&quot;step&quot;&gt;
&lt;legend&gt;Search form Packing List&lt;/legend&gt;
&lt;p&gt;
&lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;
&lt;?php $opt = array('name', 'id'=&gt;'nesto', 'size'=&gt;'20');
$buttopt = array('Show', 'id'=&gt;'dugme','class'=&gt;'klasa');
$topt1 = array('surname', 'id'=&gt;'prez', 'size'=&gt;'20');
$topt2 = array('email', 'id'=&gt;'email', 'size'=&gt;'20');
?&gt;
&lt;?php echo Tag::textField($opt) ?&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;surname&quot;&gt;Surname&lt;/label&gt;
&lt;?php echo Tag::textField($topt1) ?&gt;</p>
<p>&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
&lt;?php echo Tag::textField($topt2) ?&gt;
&lt;/p&gt;</p>
<p>&lt;input type=&quot;image&quot; id=&quot;search&quot; src=&quot;/phalcon1/public/img/pretraga.jpg&quot;/&gt;
&lt;/fieldset&gt;
&lt;/div&gt;</p>
<p>&lt;/div&gt;</p>
<p>&lt;div id=&quot;2&quot; class=&quot;wrapper&quot; style=&quot;display: none;&quot;&gt;
&lt;div class=&quot;steps&quot;&gt;
&lt;fieldset class=&quot;step&quot;&gt;
&lt;legend&gt;Search form Artupal&lt;/legend&gt;
&lt;p&gt;
&lt;label for=&quot;name&quot;&gt;Param1&lt;/label&gt;
&lt;?php $opt = array('name', 'id'=&gt;'nesto', 'size'=&gt;'20');
$buttopt = array('Show', 'id'=&gt;'dugme','class'=&gt;'klasa');
$topt1 = array('surname', 'id'=&gt;'prez', 'size'=&gt;'20');
$topt2 = array('email', 'id'=&gt;'email', 'size'=&gt;'20');
?&gt;
&lt;?php echo Tag::textField($opt) ?&gt;
&lt;p&gt;
&lt;p&gt;
&lt;label for=&quot;surname&quot;&gt;Param2&lt;/label&gt;
&lt;?php echo Tag::textField($topt1) ?&gt;</p>
<p>&lt;/p&gt;
&lt;p&gt;
&lt;label for=&quot;email&quot;&gt;Param3&lt;/label&gt;
&lt;?php echo Tag::textField($topt2) ?&gt;
&lt;/p&gt;</p>
<p>&lt;input type=&quot;image&quot; id=&quot;search&quot; src=&quot;/phalcon1/public/img/pretraga.jpg&quot;/&gt;
&lt;/fieldset&gt;
&lt;/div&gt;</p>
<p>&lt;/div&gt;</p>
<p>&lt;?php echo Tag::form(&quot;test/dajPdf&quot;); ?&gt;</p>
<p>&lt;p&gt;
&lt;?php echo Tag::submitButton(&quot;OK&quot;) ?&gt;
&lt;/p&gt;</p>
<p>&lt;/form&gt;</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-aa92efeb5dcb6c6873defe35-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-aa92efeb5dcb6c6873defe35-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="986" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>