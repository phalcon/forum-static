---
layout: default
title: 'Multiple Instances of dependent dropdowns, how to filter values? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Multiple Instances of dependent dropdowns, how to filter values?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/5743/gnikolopoulos" class="user-moderator-N"><span itemprop="name">George Nikolopoulos</span></a></span>
            <time itemprop="dateCreated" datetime="2017-06-01T01:03:46-07:00">Jun '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-06-01T01:03:46-07:00">Jun '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>None</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">0</span>
                </td>
                <td>
                    <label>Views</label><br>524</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a283fd4a491592977f7dc217beaeac4a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/5743/gnikolopoulos" class="user-moderator-N"><span itemprop="name">George Nikolopoulos</span></a></span>
                <span class="karma">8.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C16239" href="#C16239">
        <time class="action-date">Jun '17</time>
    </a>
</div>
<div class="post-content"><div><p>Hi all,</p>
<p>I have a form that can have multiple instances of a field group which includes 2 dropdowns, the second dependent of the first.
Inside each group, the first dropdown (independent) lists Labels and the second (dependent) lists Values
Each label can have multiple values in the database, but each value can only belong to a single label.</p>
<p>While creating an Entry, I am using AJAX to correctly re-populate each dependent dropdown according to the value of the adjastent independent field (Labels) and it works just fine, saving the values to the related tables.</p>
<p>However, while editing an Entry, I would like each field in the form to be pre-populated with the correct values before the option is selected (Each dropdown should only include values that belong to the label selected). So the end result should be multiple groups with the correct value selected and only the relevant options in each dependent dropdown.</p>
<p>Here is some code...
The fields in the form:</p>
<pre><code>$this-&gt;add(new Select('label_id[]', AttributeLabels::find(array( 'conditions' =&gt; 'user_id = :user:', 'bind' =&gt; array('user' =&gt; $this-&gt;auth-&gt;getUser()-&gt;id) )), array(
  'using' =&gt; array(
      'id',
      'label',
  ),
  'useEmpty' =&gt; true,
  'emptyText' =&gt; '...',
  'emptyValue' =&gt; '',
  'class' =&gt; 'form-control validate-required',
  'id' =&gt; 'label_id'
)));

$this-&gt;add(new Select('value_id[]', $values, array(
    'using' =&gt; array(
        'id',
        'value',
    ),
    'useEmpty' =&gt; true,
    'emptyText' =&gt; '...',
    'emptyValue' =&gt; '',
    'class' =&gt; 'form-control validate-required',
    'id' =&gt; 'value_id'
  )));</code></pre>
<p><code>$values</code> just comes from an SQL query and this is where I need help. Since I can have multiple <code>label_id[]</code> and <code>value_id[]</code> fields (generated in a foreach loop according to the total number of label/value sets), I want to be able to use the current <code>label_id</code> from the loop to change the SQL query that creates the <code>$values</code>.</p>
<p>Here is how I am creating each field in the foreach loop (using Volt):</p>
<pre><code>{% raw %}{{{% endraw %} form.render("label_id[]", [ 'value': attribute.label_id ]) {% raw %}}}{% endraw %}
{% raw %}{{{% endraw %} form.render("value_id[]", [ 'value': attribute.value_id ]) {% raw %}}}{% endraw %}</code></pre>
<p>I have already tried to use <code>$entity</code> in the form, but this gives me all the <code>label_id</code> values and not the only currently being populated.</p>
<p>Any ideas?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-fff4d7caff40e5d5757ed856-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-fff4d7caff40e5d5757ed856-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="16239" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>