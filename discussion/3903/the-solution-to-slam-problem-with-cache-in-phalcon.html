---
layout: default
title: 'The solution to slam problem with cache in phalcon - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/8/cache">Cache</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">The solution to slam problem with cache in phalcon</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1320/tztztztz" class="user-moderator-N"><span itemprop="name">Tomasz Zadora</span></a></span>
            <time itemprop="dateCreated" datetime="2014-11-08T18:59:20-07:00">Nov '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-11-08T18:59:20-07:00">Nov '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>None</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">0</span>
                </td>
                <td>
                    <label>Views</label><br>635</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/07dedd51671291aca4f3f84a115c534e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1320/tztztztz" class="user-moderator-N"><span itemprop="name">Tomasz Zadora</span></a></span>
                <span class="karma">10.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3903" href="#C3903">
        <time class="action-date">Nov '14</time>
    </a>
</div>
<div class="post-content"><div><p>I found solution regarding slam problem with cache (I've mentioned it before: <a href="http://forum.phalcon.io/discussion/1873/cache-and-process-synchronisation">http://forum.phalcon.io/discussion/1873/cache-and-process-synchronisation</a>).</p>
<p>There is new extension that provides elegant and cross-platform mutex solution:</p>
<p><a href="http://php.net/manual/en/intro.sync.php">http://php.net/manual/en/intro.sync.php</a></p>
<p>Please incorporate this into Phalcon as optional way to synchronise cache-calls, so the slam problem can be avoided.</p>
<p>I think it could work in this way:</p>
<p>$cache-&gt;get($cacheKey, $optionalMutexTimeout);</p>
<p>$cache-&gt;save($cacheKey, $cacheItem, $optionalMutexTimeout);</p>
<p>If $optionalMutexTimeout is not null, it means we use synchronisation if available.</p>
<p>In case of two or more threads want to create item, only one is creating it and rest just waiting until item is created and lock released, after that they're getting newly created item. The same scenario applies to Readers while item is created.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-6554421fda8da82fa751329d-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-6554421fda8da82fa751329d-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3903" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>