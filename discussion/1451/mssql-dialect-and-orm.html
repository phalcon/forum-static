---
layout: default
title: 'MSSQL Dialect And ORM - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">MSSQL Dialect And ORM</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/795/mapirelli" class="user-moderator-N"><span itemprop="name">Mariano Pirelli</span></a></span>
            <time itemprop="dateCreated" datetime="2014-01-15T10:29:25-07:00">Jan '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-01-15T10:29:25-07:00">Jan '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Oct '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>2076</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/35da59ba8838bb138d8f70f8c16ce7ab?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/795/mapirelli" class="user-moderator-N"><span itemprop="name">Mariano Pirelli</span></a></span>
                <span class="karma">9.5k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C1451" href="#C1451">
        <time class="action-date">Jan '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hi,</p>
<p>i use a mssql adapter to connect to mssql with my Phalcon project.</p>
<p>i have got a problem with mssql and the database's field type &quot;varbinary(MAX)&quot; .
The &quot;varbinary(MAX)&quot; in mssql are used to store images.</p>
<p>When i save my model using mssql i get this error.</p>
<pre><code class="language-php">PDOException : SQLSTATE[42000]: [Microsoft][SQL Server Native Client 11.0][SQL Server]Implicit conversion from data type varchar(max) to varbinary(max) is not allowed. Use the CONVERT function to run this query.</code></pre>
<p>According with Microsoft i have to convert the type in the query SQL, like you can see in the examples below: </p>
<pre><code class="language-php">//INSERT
$query = "INSERT INTO images (ext, size, image) VALUES ('$ext', $filesize, CONVERT(varbinary(MAX),'$data'))";
//SELECT
$sql = "SELECT CONVERT(varchar(MAX), 'image') as image  FROM  images WHERE image_id = '$id'";</code></pre>
<p>My question is:
How can i do this using my model class in Phlacon ?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/35da59ba8838bb138d8f70f8c16ce7ab?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/795/mapirelli" class="user-moderator-N"><span itemprop="name">Mariano Pirelli</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5121" href="#C5121">
                <time itemprop="dateCreated" datetime="2014-01-16T03:19:18-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi, </p>
<p>i solved my problem using the data type text instead of varbinary(MAX) in MS SQL Server.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5121" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5121" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5848fda512344b0bda8b2212441136ad?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/927/maciej-sz" class="user-moderator-N"><span itemprop="name">maciej-sz</span></a>        </span>
        <br>

        <span class="karma">2.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5147" href="#C5147">
                <time itemprop="dateCreated" datetime="2014-01-18T06:53:54-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Can I ask where did you get the MsSQL adapter? I'm currently looking for one, and to my knowledge there is no such thing shipped natively with Phalcon. Did you write your own?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5147" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5147" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/35da59ba8838bb138d8f70f8c16ce7ab?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/795/mapirelli" class="user-moderator-N"><span itemprop="name">Mariano Pirelli</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C5223" href="#C5223">
                <time itemprop="dateCreated" datetime="2014-01-21T05:08:20-07:00" class="action-date">Jan '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,
i do not, i used this implementation:
<a href="https://github.com/fishjerky/phalcon-mssql">https://github.com/fishjerky/phalcon-mssql</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="5223" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="5223" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/69ae1a848d35901b2c2392813c8bb2ea?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1200/chesney" class="user-moderator-N"><span itemprop="name">Chesney</span></a>        </span>
        <br>

        <span class="karma">22.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6058" href="#C6058">
                <time itemprop="dateCreated" datetime="2014-03-10T06:07:14-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/795/mapirelli">@mapirelli</a> how did di you get the MSSQL driver implementation to work? Can you provide an example please?
and where do I put the files.</p>
<p>Thanks</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6058" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6058" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/35da59ba8838bb138d8f70f8c16ce7ab?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/795/mapirelli" class="user-moderator-N"><span itemprop="name">Mariano Pirelli</span></a>        </span>
        <br>

        <span class="karma">9.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6182" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '14</span>
              </span><br/><a name="C6182" href="#C6182">
                <time itemprop="dateCreated" datetime="2014-03-13T15:59:13-07:00" class="action-date">Mar '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi,
i used the files contained inside the test folder of the repository:
From git:  <strong>phalcon-mssql / test / app / library / db /</strong>
There are two class inside here, and each class has a namespace.
So than, you can register the namespaces with Phalcon.</p>
<p>copy the folder DB where you like example -&gt; app / vendor / db /</p>
<pre><code class="language-php">//Register some namespaces
$loader-&gt;registerNamespaces(
    array(
       " Twm\Db\Adapter\Pdo"    =&gt; "vendor/db/mssql/adapter/",
       "Twm\Db\Dialect" =&gt; "vendor/db/mssql/dialect/",
    )
);</code></pre>
<p>Then you have to modify the <strong>DI</strong> instance, add the MSSQL Adapter in the service.php  of Phalcon.</p>
<p>$db = array(
'host'      =&gt; 'PC\SQLEXPRESS',
'username'  =&gt; 'root',
'password'  =&gt; 'root',
'dbname'    =&gt; 'mango',
'dialectClass'  =&gt; '\Twm\Db\Dialect\Mssql'<br />
);</p>
<p>Here you will see an example.
<a href="https://github.com/fishjerky/phalcon-mssql/blob/master/test/app/library/db/test.php"><a href="https://github.com/fishjerky/phalcon-mssql/blob/master/test/app/library/db/test.php">https://github.com/fishjerky/phalcon-mssql/blob/master/test/app/library/db/test.php</a></a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6182" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6182" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/822b50b35f0919717b47c2c4deccd1b6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2902/davideairaghi" class="user-moderator-N"><span itemprop="name">davideairaghi</span></a>        </span>
        <br>

        <span class="karma">175</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C24395" href="#C24395">
                <time itemprop="dateCreated" datetime="2015-10-10T01:07:39-07:00" class="action-date">Oct '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>e <a href="https://forum.phalcon.io/discussion/4046/how-to-connect-to-sql-server">https://forum.phalcon.io/discussion/4046/how-to-connect-to-sql-server</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24395" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24395" data-cf-modified-c9543ec2ff9ac31d49798e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="1451" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>