---
layout: default
title: 'Use both file and Redis for session - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/28/session">Session</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Use both file and Redis for session</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/8635/shobhit-v" class="user-moderator-N"><span itemprop="name">Shobhit Verma</span></a></span>
            <time itemprop="dateCreated" datetime="2016-11-22T06:07:48-07:00">Nov '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-11-22T06:07:48-07:00">Nov '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Nov '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>544</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/acae05b384722b20a839ce0a3827eda6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/8635/shobhit-v" class="user-moderator-N"><span itemprop="name">Shobhit Verma</span></a></span>
                <span class="karma">698</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C14863" href="#C14863">
        <time class="action-date">Nov '16</time>
    </a>
</div>
<div class="post-content"><div><p>Recently i have started using Phalcon,
I want use Redis for session management, But i don't want to stop using php session as well,
Presently i am able to make session with each of them but one at a time,
So what i tried is as following :</p>
<blockquote>
<p>use Phalcon\Session\Adapter\Files as SessionAdapter;</p>
<p>use Phalcon\Session\Adapter\Redis as RedisSessionAdapter;</p>
<p>$di-&gt;setShared('session',</p>
<pre><code>function () {

$session = new SessionAdapter();

$session-&gt;start();

return $session;</code></pre>
<p>});</p>
<p>$di-&gt;setShared('sessionRedis',</p>
<pre><code>function () {

$session = new RedisSessionAdapter(array(

        "scheme" =&gt; "tcp",

        'uniqueId' =&gt; 'my-private-app',

        'host' =&gt; '192.168.3.2',

        'port' =&gt; '6379',

        'persistent' =&gt; false,

        'lifetime' =&gt; '60',

        'prefix' =&gt; 'my_'

      ));

$session-&gt;start();

return $session;</code></pre>
<p>});</p>
</blockquote>
<p>Plz can some one answer this?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C43177" href="#C43177">
                <time itemprop="dateCreated" datetime="2016-11-22T07:07:08-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What you mean stop using php session ? Php session will be used anyway. Redis will be only adapter for storing it.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43177" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43177" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/acae05b384722b20a839ce0a3827eda6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8635/shobhit-v" class="user-moderator-N"><span itemprop="name">Shobhit Verma</span></a>        </span>
        <br>

        <span class="karma">698</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="43179" data-toggle="modal" data-target="#historyModal">
                edited <span>Nov '16</span>
              </span><br/><a name="C43179" href="#C43179">
                <time itemprop="dateCreated" datetime="2016-11-22T07:45:28-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for reply,</p>
<p>I meant that, I have included both file( Phalcon\Session\Adapter\Files as SessionAdapter;) and redis(Phalcon\Session\Adapter\Redis as RedisSessionAdapter;) as service ,
And when i use as mention bellow  it is not working, To make it work i have to remove files service( Phalcon\Session\Adapter\Files as SessionAdapter;) from services</p>
<p>public function indexAction()
{</p>
<pre><code>    $session = $this-&gt;sessionRedis;

    $session-&gt;set( 'abc', '56589' );

    echo $session-&gt;get( 'abc' );

    die;

}

So what i want is when i use $session = $this-&gt;sessionRedis; it should use redis, and when i use $session = $this-&gt;session; it should use files.</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43179" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43179" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/acae05b384722b20a839ce0a3827eda6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8635/shobhit-v" class="user-moderator-N"><span itemprop="name">Shobhit Verma</span></a>        </span>
        <br>

        <span class="karma">698</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C43183" href="#C43183">
                <time itemprop="dateCreated" datetime="2016-11-22T09:05:26-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have asked same question here too, So if any one not getting what is my doubt, Please read my question at  bellow url </p>
<p><a href="https://forum.phalcon.io/discussion/12087/use-phalconsessionadapterredis-to-store-seesions-user#C43181">https://forum.phalcon.io/discussion/12087/use-phalconsessionadapterredis-to-store-seesions-user#C43181</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43183" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43183" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C43187" href="#C43187">
                <time itemprop="dateCreated" datetime="2016-11-22T09:21:34-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can use files or redis. Not both. Not sure why you even need both.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43187" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43187" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/acae05b384722b20a839ce0a3827eda6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8635/shobhit-v" class="user-moderator-N"><span itemprop="name">Shobhit Verma</span></a>        </span>
        <br>

        <span class="karma">698</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C43191" href="#C43191">
                <time itemprop="dateCreated" datetime="2016-11-22T11:51:59-07:00" class="action-date">Nov '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Presently we are having Redis server on a separate machine, So I want to write both service.
So any developer from team want access regular file sessions then he can, and specifically any one want Redis then he can also for that he need not change services. </p>
<p>As you say it not possible then is it possible that i can create a configuration setting which can decide that what will be your adaptor, So that if there is a down time of redis server or any xyz reason so we can switch back to files</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="43191" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="43191" data-cf-modified-44a8f283e6b2eb6f15c7dbc3-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="14863" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>