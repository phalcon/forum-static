---
layout: default
title: 'Using controllers as task - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/22/micro">Micro</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Using controllers as task</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/8837/cosmy81" class="user-moderator-N"><span itemprop="name">Cosimo</span></a></span>
            <time itemprop="dateCreated" datetime="2017-10-13T17:09:38-07:00">Oct '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-10-13T17:09:38-07:00">Oct '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Oct '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>511</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a2658b5645f7a791cd1fbf709c4eb9b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/8837/cosmy81" class="user-moderator-N"><span itemprop="name">Cosimo</span></a></span>
                <span class="karma">12.1k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C17105" href="#C17105">
        <time class="action-date">Oct '17</time>
    </a>
</div>
<div class="post-content"><div><p>Hello, I've got a webservice that runs as a module of my phalcon application. All the controller responses are in  json and it doesn't use the view.
I'd like to call the webservice through the command line but i can't make tasks working with controller actions withour rewriting al the task actions.
I want to call an url like <a href="https://www.mysite.com/webservice/order/get/323">https://www.mysite.com/webservice/order/get/323</a> with:<br />
$ php cli.php webservice order get 323<br />
My cli support the modules. Any ideas?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-4badb9144d99d6de0e3ba462-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-4badb9144d99d6de0e3ba462-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51543" href="#C51543">
                <time itemprop="dateCreated" datetime="2017-10-14T06:20:11-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi</p>
<p><a href="https://olddocs.phalcon.io/en/3.0.0/reference/cli.html">https://olddocs.phalcon.io/en/3.0.0/reference/cli.html</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51543" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51543" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a2658b5645f7a791cd1fbf709c4eb9b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8837/cosmy81" class="user-moderator-N"><span itemprop="name">Cosimo</span></a>        </span>
        <br>

        <span class="karma">12.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51571" href="#C51571">
                <time itemprop="dateCreated" datetime="2017-10-15T14:56:25-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Maybe I've been not clear, sorry. I already have my cli environment. What I need is something like an adapter in order to use my web service controllers through command line without rewriting every single action in tasks (why doing the same thing two times) .
the only idea I have is to call directly the web service by curl or wget... But it's very inelegant and slower.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51571" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51571" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5915f25e654c4f9e60fe51700cdee683?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4769/Izopi4a" class="user-moderator-Y"><span itemprop="name">Izo</span></a>        </span>
        <br>

        <span class="karma">85.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51573" href="#C51573">
                <time itemprop="dateCreated" datetime="2017-10-15T23:51:24-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>you can use exec/shall_exec etc.., call_user_func somehow, no idea really</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51573" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51573" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="51593" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '17</span>
              </span><br/><a name="C51593" href="#C51593">
                <time itemprop="dateCreated" datetime="2017-10-17T00:02:19-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well, your API response is JSON, but via HTTP protocol. Thus, you need a way to send HTTP request and fetch response, i.e. trim out HTPP headers. Cli by default does not work with HTTP. So exactly CURL is the way to. You could also go with plain and simple <code>file_get_contents</code> of your endpoints, but I suggest (php) cURL for maximum control over your requests.</p>
<p>That would be microservice architecture, you're using standardized protocol (HTTP) to fetch remote results from another app (in this case your app), connecting two separate apps to work together in one eco system.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51593" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51593" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a2658b5645f7a791cd1fbf709c4eb9b0?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8837/cosmy81" class="user-moderator-N"><span itemprop="name">Cosimo</span></a>        </span>
        <br>

        <span class="karma">12.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C51623" href="#C51623">
                <time itemprop="dateCreated" datetime="2017-10-17T16:38:13-07:00" class="action-date">Oct '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>My API use default module/controller/action/params url. So I can achieve what you are suggesting modifying my Bootstrap and sending every  cli command to the main task of webservice module, than using that task for connecting via curl to the webservice controllers.
I would have prefered to do everything avoiding  external calls but it means I will user localhost address and curl in this way</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="51623" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="51623" data-cf-modified-4badb9144d99d6de0e3ba462-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="17105" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>