---
layout: default
title: 'MongoDb Find and include only specific fields - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/23/odm">ODM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">MongoDb Find and include only specific fields</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/89/netblue" class="user-moderator-N"><span itemprop="name">netblue</span></a></span>
            <time itemprop="dateCreated" datetime="2013-05-18T22:29:11-07:00">May '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-05-18T22:29:11-07:00">May '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">7</span>
                </td>
                <td>
                    <label>Views</label><br>8496</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">7</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/b0284d88474362790ed6906136ce64dd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/89/netblue" class="user-moderator-N"><span itemprop="name">netblue</span></a></span>
                <span class="karma">12.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C338" href="#C338">
        <time class="action-date">May '13</time>
    </a>
</div>
<div class="post-content"><div><p>With the PHP MongoDb Client, the find function allows a second argument to specifiy the fields you want to include in the result.</p>
<pre><code class="language-php">$cursor = $collection-&gt;find(
        array('_id' =&gt; array('$in' =&gt; $ids)),
        array('_id' =&gt; true, 'title' =&gt; true, 'subtitle' =&gt; true, 'slug' =&gt; true, 'description' =&gt; true)
);</code></pre>
<p>I'm having trouble trying to do similar with the Phalcon ODM.  Is it possible to set field options in the conditions?</p>
<pre><code class="language-php">$articles = Article::find( 
    array(
        'conditions' =&gt; array('_id' =&gt; array('$in' =&gt; $ids)), 
    )
);</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">7</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1406" href="#C1406">
                <time itemprop="dateCreated" datetime="2013-05-19T07:37:39-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>An ODM is an Object-Document-Mapper which means that a document must be mapped to a full object, returning only a partial list of columns will produce an incomplete object which when saved will produce unexpected results due to the missing fields in the object. An object must represent its counterpart in the database and vice versa.</p>
<p>Maybe an option to return incomplete objects could be added in a further release.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1406" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1406" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b093b89189356f75729709bdea89cf03?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/173/lobostome" class="user-moderator-N"><span itemprop="name">lobostome</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1420" href="#C1420">
                <time itemprop="dateCreated" datetime="2013-05-19T23:15:13-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This seems to be a much needed feature. Unless terribly mistaken, I believe that executing a query that returns specific fields falls in the realm of an ODM.</p>
<p>Is there an authoritative source on the matter?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1420" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1420" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1430" href="#C1430">
                <time itemprop="dateCreated" datetime="2013-05-20T08:15:05-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>We already have implemented a solution in the ORM, but here there is the same problem.</p>
<p>Let's pretend we already support that feature:</p>
<pre><code class="language-php">//Save an article with all its fields
$article = new Article();
$article-&gt;title = "hello";
$article-&gt;content = "what is the content";
$article-&gt;save();

//Get the article but only 'title'
$article = Article::findFirst(array(
    'fields' =&gt; array('title')  
));

//How do we save the record if "_id" is not available because it wasn't queried?
//What should be the behavior saving this if 'content' was initially set but now it isn't available?
$article-&gt;save();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1430" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1430" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b093b89189356f75729709bdea89cf03?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/173/lobostome" class="user-moderator-N"><span itemprop="name">lobostome</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1435" href="#C1435">
                <time itemprop="dateCreated" datetime="2013-05-20T09:32:02-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Since I have just been a user of ORMs, I would like to take the time to explore the topic further before I can continue this discussion. From my research, it seems that Martin Fowler's book on enterprise patterns is a good start. I would not want to offer a feature just for the sake of being available and with no proper justification.</p>
<p>To address your questions. There is a fortunate effect of calling find() on the PHP driver. It always returns _id. For the second question, that example can be pushed further and use the already available aggregation with some form of projection. That could introduce set of problems.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1435" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1435" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1437" href="#C1437">
                <time itemprop="dateCreated" datetime="2013-05-20T09:45:46-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>We can return stdClass instances instead of Article instances (when a partial list of fields are requested), this is how we treat that issue in the ORM. Of course, stdClasses are only intended to read purposes, those cannot be saved due to the missing fields.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1437" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1437" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b0284d88474362790ed6906136ce64dd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/89/netblue" class="user-moderator-N"><span itemprop="name">netblue</span></a>        </span>
        <br>

        <span class="karma">12.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1443" href="#C1443">
                <time itemprop="dateCreated" datetime="2013-05-20T10:22:31-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes, my intent was only for greater efficiency in read only situations where I only need a few of the fields rather than the whole document.  For example, I'd be querying a collection of articles where I would like to generate a list of the links to each article and do not need to pull the entire article text.  MongoDb is completely new to me, though, so maybe I should not be using the ODM for this, but should query directly through the PHP Mongo Client.  In the SQL world, I've used some ORM (a little Yii and PHPActiveRecord).  It's great for the typical CRUD.  But larger results, I just do raw queries and use a row mapping function.  Anyhow, when dumping the enormous resulting object of an ORM query I I thought I saw booleans set on the columns for each record to denote which could be saved/updated.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1443" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1443" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b093b89189356f75729709bdea89cf03?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/173/lobostome" class="user-moderator-N"><span itemprop="name">lobostome</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C1444" href="#C1444">
                <time itemprop="dateCreated" datetime="2013-05-20T11:07:43-07:00" class="action-date">May '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/1/phalcon">@Phalcon</a> That seems like a very reasonable solution. Thank you for your hard work. Always appreciated.<a href="https://forum.phalcon.io/user/89/netblue"> @netblue</a> I use the PHP Mongo Client right now for such queries since I have documents that are 2-5 MB each.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="1444" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="1444" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/646ac28d8f6fe984f45988fb758aa1fd?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/6671/sql1" class="user-moderator-N"><span itemprop="name">sql1</span></a>        </span>
        <br>

        <span class="karma">199</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C32013" href="#C32013">
                <time itemprop="dateCreated" datetime="2016-04-03T05:04:09-07:00" class="action-date">Apr '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hello....</p>
<p>Not familiar with MongoDB but here is a possible resource....
Hope it will help... :-)</p>
<p><a href="https://zappysys.com/blog/ssis-loading-data-into-mongodb-upsert-update-delete-insert/"><a href="https://zappysys.com/blog/ssis-loading-data-into-mongodb-upsert-update-delete-insert/">https://zappysys.com/blog/ssis-loading-data-into-mongodb-upsert-update-delete-insert/</a></a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="32013" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="32013" data-cf-modified-b235b97f0eab7cc8f2b6b27b-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="338" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>