---
layout: default
title: 'Model::find(&#039;col IN ()&#039;) with bind - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Model::find(&#039;col IN ()&#039;) with bind</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2145/DestinyMKas" class="user-moderator-N"><span itemprop="name">Karolis Ma훾iulskis</span></a></span>
            <time itemprop="dateCreated" datetime="2014-09-17T03:17:01-07:00">Sep '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-09-17T03:17:01-07:00">Sep '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>May '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">17</span>
                </td>
                <td>
                    <label>Views</label><br>9416</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/6549777fa33638d0674db65d9111d400?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2145/DestinyMKas" class="user-moderator-N"><span itemprop="name">Karolis Ma훾iulskis</span></a></span>
                <span class="karma">26.3k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3469" href="#C3469">
        <time class="action-date">Sep '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hello,</p>
<p>I have strange issue. I'll start from example:</p>
<pre><code class="language-php">$collection = Model::find(array(
                'id IN (:ids:)',
                'bind' =&gt; array('ids' =&gt; '15,17,18')
            ));
var_dump(count($collection));</code></pre>
<pre><code>int 1</code></pre>
<pre><code class="language-php">$collection = Model::find(array(
                'id IN (15,17,18)'
            ));
var_dump(count($collection));</code></pre>
<pre><code>int 3</code></pre>
<pre><code class="language-php">$collection = Model::find(array(
                'id IN (:ids:)'
                'bind' =&gt; array('ids' =&gt; array(15,17,18))
            ));
var_dump(count($collection));</code></pre>
<pre><code>Notice: Array to string conversion in...........
int 0</code></pre>
<p>How to properly bind WHERE col IN () arguments?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-6dd26976a2e754dff819ba0a-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-6dd26976a2e754dff819ba0a-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11389" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11389" href="#C11389">
                <time itemprop="dateCreated" datetime="2014-09-17T03:23:13-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Check this:</p>
<p><a href="https://forum.phalcon.io/discussion/2159/phql-binding-array-with-the-in-operator">https://forum.phalcon.io/discussion/2159/phql-binding-array-with-the-in-operator</a></p>
<p>You can't bind an array as a PDO parameter, making this:</p>
<pre><code class="language-php">$collection = Model::find(array(
                'id IN (:ids:)'
                'bind' =&gt; array('ids' =&gt; array(15,17,18))
));</code></pre>
<p>Means this:</p>
<pre><code class="language-php">$collection = Model::find(array(
                'id IN ("15")'
));</code></pre>
<p>You have to create a placeholder for each parameter:</p>
<pre><code class="language-php">$collection = Model::find(array(
                'id IN (?0, ?1, ?2)'
                'bind' =&gt; array(15,17,18)
));</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11389" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11389" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6549777fa33638d0674db65d9111d400?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2145/DestinyMKas" class="user-moderator-N"><span itemprop="name">Karolis Ma훾iulskis</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C11390" href="#C11390">
                <time itemprop="dateCreated" datetime="2014-09-17T03:52:47-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Has phalcon plans to make easier to bind a lot of params (auto count arguments)? Binding idea is to prevent sql injection, but if i parse my array manualy, then I don't need to bind.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11390" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11390" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1/phalcon" class="user-moderator-Y"><span itemprop="name">Phalcon</span></a>        </span>
        <br>

        <span class="karma">98.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11391" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '15</span>
              </span><br/><a name="C11391" href="#C11391">
                <time itemprop="dateCreated" datetime="2014-09-17T03:55:59-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No, we don't have plans to add it, but if someone wants to implement it in Phalcon 2 it would be great.</p>
<p>Update: it's supported in Phalcon 2.0.4: <a href="https://blog.phalcon.io/post/phalcon-2-0-4-released">https://blog.phalcon.io/post/phalcon-2-0-4-released</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11391" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11391" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6549777fa33638d0674db65d9111d400?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2145/DestinyMKas" class="user-moderator-N"><span itemprop="name">Karolis Ma훾iulskis</span></a>        </span>
        <br>

        <span class="karma">26.3k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11393" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11393" href="#C11393">
                <time itemprop="dateCreated" datetime="2014-09-17T05:27:33-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So I created a function to make possible to pass arrays in bind.</p>
<pre><code class="language-php">class Model extends \Phalcon\Mvc\Model
{
    public static function find($parameters = NULL)
    {
        return parent::find(self::_prepareBinds($parameters));
    }

    /*
     * FROM:
     * 0 =&gt; string 'id IN (:ids:)' (length=13)
     * 'bind' =&gt; 
     *   array (size=1)
     *     'ids' =&gt; 
     *       array (size=4)
     *         0 =&gt; int 15
     *         1 =&gt; int 17
     *         2 =&gt; int 18
     *         3 =&gt; int 19
     * 'for_update' =&gt; boolean true
     *
     * TO:
     * 0 =&gt; &amp;string 'id IN (?0, ?1, ?2, ?3)' (length=22)
     * 'bind' =&gt; 
     *   array (size=4)
     *     0 =&gt; int 15
     *     1 =&gt; int 17
     *     2 =&gt; int 18
     *     3 =&gt; int 19
     * 'for_update' =&gt; boolean true
     */
    private static function _prepareBinds($parameters = NULL)
    {
        // binding is allowed only in array
        if (!is_array($parameters))
            return $parameters;

        // getting conditions from 0 or conditions parameter
        if (!empty($parameters['conditions']))
            $conditions =&amp; $parameters['conditions'];
        elseif (!empty($parameters[0]))
            $conditions =&amp; $parameters[0];
        else
            $conditions = '';

        // finding largest already set placeholder to avoid conflicts
        if (preg_match('/.*\?(\d+)/', $conditions, $matches))
            $i = $matches[1] + 1;
        else
            $i = 0;

        /*
         * check if exists bind and replace all arrays to ?0 ?1 etc
         */
        if (!empty($parameters['bind']))
            foreach ($parameters['bind'] as $key =&gt; $binded)
                if (is_array($binded))
                {
                    $placeholders = array();
                    $binds = array();
                    foreach ($binded as $bind)
                    {
                        $placeholders[] = '?'.$i;
                        $parameters['bind'][$i] = $bind;
                        $i++;
                    }
                    unset($parameters['bind'][$key]);
                    $conditions = str_replace(':'.$key.':', implode(', ', $placeholders), $conditions);
                }
        return $parameters;
    }
}</code></pre>
<pre><code class="language-php">class Entity extends Model
{

}</code></pre>
<pre><code class="language-php">class EntityController extends \Phalcon\Mvc\Controller
{
    public function indexAction($checks)
    {
        $entityCollection = Entity::find(array(
                'id IN (:ids:) AND entity_id IN (?99, :entities:)',
                'bind' =&gt; array('ids' =&gt; array(15,17,18,19), 99 =&gt; 1, 'entities' =&gt; array(1,5,9,7)),
            ));
    }
}</code></pre>
<p>Result:</p>
<pre><code>array (size=3)
  0 =&gt; string 'id IN (:ids:) AND entity_id IN (?99, :entities:)' (length=48)
  'bind' =&gt; 
    array (size=3)
      'ids' =&gt; 
        array (size=4)
          0 =&gt; int 15
          1 =&gt; int 17
          2 =&gt; int 18
          3 =&gt; int 19
      99 =&gt; int 1
      'entities' =&gt; 
        array (size=4)
          0 =&gt; int 1
          1 =&gt; int 5
          2 =&gt; int 9
          3 =&gt; int 7
  'for_update' =&gt; boolean true

array (size=3)
  0 =&gt; &amp;string 'id IN (?100, ?101, ?102, ?103) AND entity_id IN (?99, ?104, ?105, ?106, ?107)' (length=77)
  'bind' =&gt; 
    array (size=9)
      99 =&gt; int 1
      100 =&gt; int 15
      101 =&gt; int 17
      102 =&gt; int 18
      103 =&gt; int 19
      104 =&gt; int 1
      105 =&gt; int 5
      106 =&gt; int 9
      107 =&gt; int 7
  'for_update' =&gt; boolean true</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11393" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11393" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/41f112ce3fb66bb31f9489ec33e43480?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2319/dexx086" class="user-moderator-N"><span itemprop="name">dexx086</span></a>        </span>
        <br>

        <span class="karma">3.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C11477" href="#C11477">
                <time itemprop="dateCreated" datetime="2014-09-21T14:57:09-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>DestinyMKas: thanks for sharing this code, I was missing it very much!</p>
<p>Btw: what's the requirements for this code to be implemented in Phalcon core? Passing an array for a bind parameter cannot be valid, I guess never, so a solution such this to make it work, would be big help. And on the other hand, without it, it's quite cumbersome to pass an array for an IN operator...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11477" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11477" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-positive">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/651f7955b6980a38398b0305f5599107?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1675/PVGrad" class="user-moderator-N"><span itemprop="name">Pavel</span></a>        </span>
        <br>

        <span class="karma">347</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11493" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11493" href="#C11493">
                <time itemprop="dateCreated" datetime="2014-09-22T00:58:26-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The easier way is to use builder, that returns same objects as find():</p>
<pre><code>$builder = new \Phalcon\Mvc\Model\Query\Builder();
return $builder
    -&gt;from('App\Models\Model')
    -&gt;inWhere('id', $ids)
    -&gt;getQuery()-&gt;execute();</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11493" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11493" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">6</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/41f112ce3fb66bb31f9489ec33e43480?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2319/dexx086" class="user-moderator-N"><span itemprop="name">dexx086</span></a>        </span>
        <br>

        <span class="karma">3.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11499" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11499" href="#C11499">
                <time itemprop="dateCreated" datetime="2014-09-22T02:28:20-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>PVGrad, you're right, it works by inWhere well.
But I still think that the default binding could be extended with this functionality to be included in core. For IN operations (which is not so rare I think) would solve this array problem quite transparently (and because arrays are still unusable for direct  parameter binding, it wouldn't raise problems for current SQL generations).</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11499" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11499" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/261b9d5a13d7f70150a9078be71802c6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3415/nurtext" class="user-moderator-N"><span itemprop="name">Cedric Kastner</span></a>        </span>
        <br>

        <span class="karma">2.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C22045" href="#C22045">
                <time itemprop="dateCreated" datetime="2015-08-18T07:46:03-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><strong>Be aware of the following behavior.</strong>  </p>
<pre><code class="language-php">$collection = Model::query()-&gt;inWhere('id', array(1, 2, 3));
echo $collection-&gt;count();
// Returns: 3 (correct)</code></pre>
<p>But:</p>
<pre><code class="language-php">$collection = Model::query()-&gt;inWhere('id', array(1, 2, 3))-&gt;limit(99);
echo $collection-&gt;count();
// Returns: 1 (wrong)</code></pre>
<p>And:</p>
<pre><code class="language-php">$collection = Model::query()-&gt;inWhere('id', array(1, 2, 3))-&gt;andWhere('col = :val:', array('val' =&gt; '1'));
echo $collection-&gt;count();
// Returns: 1 (wrong again)</code></pre>
<p>It seems, that as soon as you start using bound parameters in any part of your query, the <code>inWhere()</code> assignment gets messed up. My educated guess is: This is an bug while handling the binding of parameters, because both <code>limit()</code> and <code>andWhere()</code> are making use of it, as well as several other functions.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22045" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22045" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/210/andresgutierrez" class="user-moderator-Y"><span itemprop="name">Andres Gutierrez</span></a>        </span>
        <br>

        <span class="karma">34.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C22045"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/261b9d5a13d7f70150a9078be71802c6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Cedric Kastner                    </a>
                </div><div class="posts-buttons" align="right"><a name="C22049" href="#C22049">
                <time itemprop="dateCreated" datetime="2015-08-18T08:10:19-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Are you using Phalcon 2.0.7?</p>
<blockquote>
<p><strong>Be aware of the following behavior.</strong>  </p>
<pre><code class="language-php">$collection = Model::query()-&gt;inWhere('id', array(1, 2, 3));
echo $collection-&gt;count();
// Returns: 3 (correct)</code></pre>
<p>But:</p>
<pre><code class="language-php">$collection = Model::query()-&gt;inWhere('id', array(1, 2, 3))-&gt;limit(99);
echo $collection-&gt;count();
// Returns: 1 (wrong)</code></pre>
<p>And:</p>
<pre><code class="language-php">$collection = Model::query()-&gt;inWhere('id', array(1, 2, 3))-&gt;andWhere('col = :val:', array('val' =&gt; '1'));
echo $collection-&gt;count();
// Returns: 1 (wrong again)</code></pre>
<p>It seems, that as soon as you start using bound parameters in any part of your query, the <code>inWhere()</code> assignment gets messed up. My educated guess is: This is an bug while handling the binding of parameters, because both <code>limit()</code> and <code>andWhere()</code> are making use of it, as well as several other functions.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22049" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22049" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/261b9d5a13d7f70150a9078be71802c6?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3415/nurtext" class="user-moderator-N"><span itemprop="name">Cedric Kastner</span></a>        </span>
        <br>

        <span class="karma">2.1k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C22049"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Andres Gutierrez                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="22055" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '15</span>
              </span><br/><a name="C22055" href="#C22055">
                <time itemprop="dateCreated" datetime="2015-08-18T09:07:58-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>Are you using Phalcon 2.0.7?</p>
</blockquote>
<p>I havn't upgraded yet, but I guess this could still be useful for people using older versions.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22055" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22055" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/44a200d61bb3ea3b003a75c15f195bde?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2796/akudryav" class="user-moderator-N"><span itemprop="name">Anton</span></a>        </span>
        <br>

        <span class="karma">712</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C11391"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/5d6f567f9109789fd9f702959768e35d?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Phalcon                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="24097" data-toggle="modal" data-target="#historyModal">
                edited <span>Jan '16</span>
              </span><br/><a name="C24097" href="#C24097">
                <time itemprop="dateCreated" datetime="2015-10-01T06:59:45-07:00" class="action-date">Oct '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This variant seems to work</p>
<pre><code class="language-php">
find([ 'conditions'=&gt;'id IN ('.implode(',',[1,2,3]).')' ]);
</code></pre>
<blockquote>
<p>No, we don't have plans to add it, but if someone wants to implement it in Phalcon 2 it would be great.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24097" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24097" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/210/andresgutierrez" class="user-moderator-Y"><span itemprop="name">Andres Gutierrez</span></a>        </span>
        <br>

        <span class="karma">34.6k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C24099" href="#C24099">
                <time itemprop="dateCreated" datetime="2015-10-01T07:41:34-07:00" class="action-date">Oct '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This feature is natively supported by Phalcon in 2.0.4, <a href="https://blog.phalcon.io/post/phalcon-2-0-4-released">https://blog.phalcon.io/post/phalcon-2-0-4-released</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="24099" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="24099" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82140260df942005abbc598cbba6c688?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1720/blm14" class="user-moderator-N"><span itemprop="name">blm14</span></a>        </span>
        <br>

        <span class="karma">40.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C30465" href="#C30465">
                <time itemprop="dateCreated" datetime="2016-03-02T11:34:35-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi - what is the syntax for this now? I am trying to bind an array in a find:: and I keep getting &quot;SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens&quot;</p>
<p>Code, $status is a model which has a relationship to MyStatus:</p>
<pre><code class="language-php">$result = $status-&gt;getMyStatus(array("conditions"=&gt;"md in (:md:)","bind"=&gt;array("md"=&gt;array(0=&gt;153,1=&gt;199))));</code></pre>
<p>Is it because I am not doing find:: but rather passing to a sub-model?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="30465" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="30465" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/0231cec04df02da3981af4c479a1c392?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/5259/FaimMedia" class="user-moderator-N"><span itemprop="name">FaimMedia B.V.</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C30465"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/82140260df942005abbc598cbba6c688?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        blm14                    </a>
                </div><div class="posts-buttons" align="right"><a name="C31665" href="#C31665">
                <time itemprop="dateCreated" datetime="2016-03-29T06:05:33-07:00" class="action-date">Mar '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>You can use it like this:</p>
<pre><code>Status::find([
    'conditions' =&gt; 'md IN ({md:array})',
    'bind' =&gt; [
        'md' =&gt; [153, 199],
    ],
]);</code></pre>
<p>Doesn't matter if you use it with find, findFirst or the queryBuilder.</p>
<p>Example can be find <a href="https://docs.phalcon.io/en/latest/reference/models.html#binding-parameters">here</a>, in the third code block.</p>
<blockquote>
<p>Hi - what is the syntax for this now? I am trying to bind an array in a find:: and I keep getting &quot;SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens&quot;</p>
<p>Code, $status is a model which has a relationship to MyStatus:</p>
<pre><code class="language-php">$result = $status-&gt;getMyStatus(array("conditions"=&gt;"md in (:md:)","bind"=&gt;array("md"=&gt;array(0=&gt;153,1=&gt;199))));</code></pre>
<p>Is it because I am not doing find:: but rather passing to a sub-model?</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="31665" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="31665" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/44a200d61bb3ea3b003a75c15f195bde?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2796/akudryav" class="user-moderator-N"><span itemprop="name">Anton</span></a>        </span>
        <br>

        <span class="karma">712</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C24099"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/2e0bae293948bec8ffec40de279cbe41?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Andres Gutierrez                    </a>
                </div><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="35745" data-toggle="modal" data-target="#historyModal">
                edited <span>Jun '16</span>
              </span><br/><a name="C35745" href="#C35745">
                <time itemprop="dateCreated" datetime="2016-06-17T23:45:12-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>This feature is natively supported by Phalcon in 2.0.4, <a href="https://blog.phalcon.io/post/phalcon-2-0-4-released">https://blog.phalcon.io/post/phalcon-2-0-4-released</a></p>
</blockquote>
<p>Would you please provide right syntax example how to use it natively with find, not queryBuilder.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35745" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35745" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/0231cec04df02da3981af4c479a1c392?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/5259/FaimMedia" class="user-moderator-N"><span itemprop="name">FaimMedia B.V.</span></a>        </span>
        <br>

        <span class="karma">3.6k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C35745"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/44a200d61bb3ea3b003a75c15f195bde?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Anton                    </a>
                </div><div class="posts-buttons" align="right"><a name="C35821" href="#C35821">
                <time itemprop="dateCreated" datetime="2016-06-21T03:16:48-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Please read my reply first.</p>
<blockquote>
<blockquote>
<p>This feature is natively supported by Phalcon in 2.0.4, <a href="https://blog.phalcon.io/post/phalcon-2-0-4-released">https://blog.phalcon.io/post/phalcon-2-0-4-released</a></p>
</blockquote>
<p>Would you please provide right syntax example how to use it natively with find, not queryBuilder.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35821" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35821" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82140260df942005abbc598cbba6c688?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1720/blm14" class="user-moderator-N"><span itemprop="name">blm14</span></a>        </span>
        <br>

        <span class="karma">40.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C35853" href="#C35853">
                <time itemprop="dateCreated" datetime="2016-06-21T09:51:06-07:00" class="action-date">Jun '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Here is how I did it:</p>
<pre><code class="language-php">$myarr = array (1,5,89,14);
$result = MyModel::find(array(
        "conditions"=&gt;"column in ({myvar:array})",
        "bind"=&gt;array("myvar"=&gt;$myarr)
));</code></pre>
<p>So it works pretty much the normal way except that you have to enclose the bind parameter in curly braces and specify that it's an array.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="35853" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="35853" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5e419e02c8e3acbccea02a622923ab8a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9257/sadeghipour" class="user-moderator-N"><span itemprop="name">Ali SadeghipourKorabaslo</span></a>        </span>
        <br>

        <span class="karma">121</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="48427" data-toggle="modal" data-target="#historyModal">
                edited <span>May '17</span>
              </span><br/><a name="C48427" href="#C48427">
                <time itemprop="dateCreated" datetime="2017-05-29T10:15:01-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So simple solution:</p>
<pre><code class="language-php">$post_id_arr = array(10,15,20,22,30);

$arrStr = implode("\",\"",$post_id_arr);

$posts = MyModel::find(array("id IN (\"$arrStr\")"));
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48427" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48427" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C48429" href="#C48429">
                <time itemprop="dateCreated" datetime="2017-05-29T12:02:38-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/0/Ali">@Ali</a> SadeghipourK, better use bim14 solution. Your example could lead to injection.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="48429" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="48429" data-cf-modified-6dd26976a2e754dff819ba0a-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3469" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>