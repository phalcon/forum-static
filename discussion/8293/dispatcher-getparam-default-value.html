---
layout: default
title: 'Dispatcher getParam default value - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/9/paginator">Paginator</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Dispatcher getParam default value</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/4373/taietel" class="user-moderator-N"><span itemprop="name">Mihai Ionescu</span></a></span>
            <time itemprop="dateCreated" datetime="2015-08-31T06:51:11-07:00">Aug '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-08-31T06:51:11-07:00">Aug '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>1774</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/0c687c9f7211b90330ad2b2ce071961b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/4373/taietel" class="user-moderator-N"><span itemprop="name">Mihai Ionescu</span></a></span>
                <span class="karma">2.0k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C8293" href="#C8293">
        <time class="action-date">Aug '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi, </p>
<p>I'm trying to make pagination for a listing, and I'm having problems setting default value for $page with getParam method from dispatcher.
The  URL is like this : (<a href="https://www.example.com/category/subcategory/{page_number_here">https://www.example.com/category/subcategory/{page_number_here</a>})
This is how I get page param from dispatcher</p>
<p>$page = $this-&gt;dispatcher-&gt;getParam('page', 'int', 1);</p>
<p>the problem is that when I put letters only (or nothing at all) for page it doesn't set $page with 1 as I expect it to do, it sets it with an empty string.
Am I doing something wrong, is there something that I got it wrong on how it should work?</p>
<p>Thanks.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-73029785a30a93e1badbc0ac-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-73029785a30a93e1badbc0ac-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Åšlawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="22605" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '15</span>
              </span><br/><a name="C22605" href="#C22605">
                <time itemprop="dateCreated" datetime="2015-08-31T07:45:34-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Why you just not use routeparams ? You can access them like: </p>
<pre><code class="language-php">use Phalcon\Mvc\Router\Group;

class Routes extends Group
{
    public function initialize()
    {
$this-&gt;addGet('/{id:[0-9]+$}', array('action' =&gt; 'index', 'controller' =&gt; 'test'));
    }
}</code></pre>
<p>then mount this group in router : </p>
<pre><code class="language-php">$di-&gt;get('router')-&gt;mount(new Routes());</code></pre>
<p>and finally in controller:</p>
<pre><code class="language-php">public function indexAction($id) // $id is our id from URL
{

}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22605" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22605" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/0c687c9f7211b90330ad2b2ce071961b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4373/taietel" class="user-moderator-N"><span itemprop="name">Mihai Ionescu</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C22623" href="#C22623">
                <time itemprop="dateCreated" datetime="2015-08-31T08:50:37-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for reply,
I don't have issue working around this, I want to know why it's not working as it should, since I have the 3rd param as default value in getParam method, I want to know why it's not set. What are the conditions so that param (page) to get the default value.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22623" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22623" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="22625" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '15</span>
              </span><br/><a name="C22625" href="#C22625">
                <time itemprop="dateCreated" datetime="2015-08-31T08:54:34-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Use the routing example (<code>category/subcategory/{id:[0-9]+$}</code>) provided by<a href="https://forum.phalcon.io/user/3812/Jurigag"> @Jurigag</a> and if the paramater is not an integer, it will not even be routed to the action at all. (You can still use <code>getParam(id)</code>)</p>
<p>According to the source of Phalcon, the default value will only be returned if there is no such key in the params... You could file a bug report on github.</p>
<pre><code class="language-zephir">public function getParam(param, filters = null, defaultValue = null)
    {
        var params, filter, paramValue, dependencyInjector;

        let params = this-&gt;_params;
        if !fetch paramValue, params[param] {
            return defaultValue;
        }

        if filters === null {
            return paramValue;
        }

        let dependencyInjector = this-&gt;_dependencyInjector;
        if typeof dependencyInjector != "object" {
            this-&gt;{"_throwDispatchException"}("A dependency injection object is required to access the 'filter' service", self::EXCEPTION_NO_DI);
        }
        let filter = &lt;FilterInterface&gt; dependencyInjector-&gt;getShared("filter");
        return filter-&gt;sanitize(paramValue, filters);
    }</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22625" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22625" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/0c687c9f7211b90330ad2b2ce071961b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4373/taietel" class="user-moderator-N"><span itemprop="name">Mihai Ionescu</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C22627" href="#C22627">
                <time itemprop="dateCreated" datetime="2015-08-31T09:09:18-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for the info, I will try it, first thing in the morning when I get to work.
Regarding bug report, I'll file one, but maybe this was the intended use of the default value, even though I find it strange to work like that.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22627" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22627" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="22631" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '15</span>
              </span><br/><a name="C22631" href="#C22631">
                <time itemprop="dateCreated" datetime="2015-08-31T10:13:58-07:00" class="action-date">Aug '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yeah... You got a point, sanitize != validate :D It should probably be a NFR, because it does makes sense to have the default value returned if the length of the sanitized field is 0</p>
<p><a href="https://github.com/phalcon/cphalcon/issues/10866">https://github.com/phalcon/cphalcon/issues/10866</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="22631" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="22631" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/0c687c9f7211b90330ad2b2ce071961b?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4373/taietel" class="user-moderator-N"><span itemprop="name">Mihai Ionescu</span></a>        </span>
        <br>

        <span class="karma">2.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C23587" href="#C23587">
                <time itemprop="dateCreated" datetime="2015-09-21T04:47:19-07:00" class="action-date">Sep '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hi, I'm back again with some more code samples regarding the routes that I want to achieve,
I left the routes at the end of the project so I could focus more important things. Now I'm struggling to get pagination working properly.  </p>
<p>here are some routes: </p>
<p>This works fine, the only problem is that if there's no page number in url (/mac/browsers/) the default page is 3.</p>
<pre><code>    // route for category with pagination
    $this-&gt;add('/(windows|mac|mobile)/([a-zA-Z0-9\-]+)/?[0-9+]?/?',
        array(
            'module' =&gt; 'category',
            'namespace' =&gt; 'Category\controllers',
            'controller' =&gt; 'Category',
            'action'     =&gt; 'index',
            'os'        =&gt; 1,
            'category' =&gt; 2,
            'page' =&gt; 3
        )
    );</code></pre>
<p>This also works fine, and fixes the problem with the above one, but it's conflicting with subcategory routes. </p>
<pre><code>    $this-&gt;add('/(windows|mac|mobile)/([a-zA-Z0-9\-]+)/?{page}?/?',
        array(
            'module' =&gt; 'category',
            'namespace' =&gt; 'Category\controllers',
            'controller' =&gt; 'Category',
            'action'     =&gt; 'index',
            'os'        =&gt; 1,
            'category' =&gt; 2,
            'page' =&gt; 3
        )
    )-&gt;convert('page', function($page) {
        if (!is_int($page))
            return 1;
        else
            return $page;
    });</code></pre>
<p>This route is working ok if the category route is using [0-9+] regex to get the page param,
or page number is present in URL.</p>
<pre><code>    // subcategory with pagination -  default tab
    $this-&gt;add('/(windows|mac|mobile)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?{page}?/?',
        array(
            'module' =&gt; 'subcategory',
            'namespace' =&gt; 'Subcategory\controllers',
            'controller' =&gt; 'Subcategory',
            'os' =&gt; 1,
            'subcategory' =&gt; 3,
            'category' =&gt; 2,
            'action' =&gt; 'index',
            'page' =&gt; 4
        )
    )-&gt;convert('page', function($page) {
          if (!is_int($page)) return 1;
    });</code></pre>
<p>The problem that I have is that if I use {page} instead of regex [0-9+] in category route, the app follows the category route and sets page = 1,
so I'm not able to use that, therefore getting into the other issue caused by default value of page param which is the param index number from the URL,
in my case 3.
I think this could be avoided if the parser would return null instead of param index. </p>
<p>I hope this makes sense :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="23587" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="23587" data-cf-modified-73029785a30a93e1badbc0ac-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="8293" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>