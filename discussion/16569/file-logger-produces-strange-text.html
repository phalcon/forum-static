---
layout: default
title: 'File logger produces strange text - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/5/general">General</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">File logger produces strange text</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a></span>
            <time itemprop="dateCreated" datetime="2017-07-20T20:43:34-07:00">Jul '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-07-20T20:43:34-07:00">Jul '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Jul '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>383</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">1</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a></span>
                <span class="karma">9.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C16569" href="#C16569">
        <time class="action-date">Jul '17</time>
    </a>
</div>
<div class="post-content"><div><p>use Phalcon\Logger\Adapter\File
The log files are randomly broken. Weird charactersets or something. The log files appear as text/plain but often contain asian symbols and all sorts of rubbish. I have to jump around several editors to find one that can display the text as text. Is there a setting to fix it? If not, I will revert to PHP.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-caee99af9dfcbc1e571005d9-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-caee99af9dfcbc1e571005d9-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/4bc65c6eab5e6a2344066da4598654cb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9611/phil67000" class="user-moderator-N"><span itemprop="name">phil67000</span></a>        </span>
        <br>

        <span class="karma">5.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C49757" href="#C49757">
                <time itemprop="dateCreated" datetime="2017-07-20T22:26:24-07:00" class="action-date">Jul '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hello,</p>
<p>Can you post our service logger d√©claration and how to write log ?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="49757" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="49757" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C49759" href="#C49759">
                <time itemprop="dateCreated" datetime="2017-07-20T23:55:38-07:00" class="action-date">Jul '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I found out it is not Phalcon. A raw PHP file_put_contents creates the same random garbage. I replaced the Phalcon logger with PHP code and ended up with the same mess. A file that randomly fails in Bluefish and Text Editor but works in Notepad and LibreOffice Writer. I guess I will have to use LibreOffice Writer for my development environment!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="49759" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="49759" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C49761" href="#C49761">
                <time itemprop="dateCreated" datetime="2017-07-21T00:07:43-07:00" class="action-date">Jul '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I will look in PHP and Linux sites to find out why some files trigger garbage displays in editors. In Linux Mint, Text Editor is xed.</p>
<p>I can append dozens of rows to a working log file then the next row will make the change that kills the file display in editors. For one file, some of the editors displayed text at the start then garbage.</p>
<p>I opened a garbage file in LO Writer, saved the file as text, then opened the new file in Bluefish and it displayed as text. I never had this problem with Linux Mint 18, it was a rare occurence in LM 18.1, and is frequent in LM 18.2. Something in linux is going downhill.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="49761" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="49761" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/660e8c9b157b0029b6e0ba24c0ea3eba?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4363/lajosbencz" class="user-moderator-N"><span itemprop="name">Lajos Bencz</span></a>        </span>
        <br>

        <span class="karma">77.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C49763" href="#C49763">
                <time itemprop="dateCreated" datetime="2017-07-21T02:00:55-07:00" class="action-date">Jul '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What's your language? It could be some charset error...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="49763" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="49763" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bcb5cc9f3d1e3c3cab87efd5ac1dc9c7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/4525/stamster" class="user-moderator-N"><span itemprop="name">Jonathan Aaron Steel</span></a>        </span>
        <br>

        <span class="karma">79.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="49769" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '17</span>
              </span><br/><a name="C49769" href="#C49769">
                <time itemprop="dateCreated" datetime="2017-07-21T05:11:41-07:00" class="action-date">Jul '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Wait. You're putting it too much here - IDE of your choice is one thing, while actual output produced by Logger class / or simple <code>file_put_contents</code> function is another. So you need to validate those files by &quot;non-smart&quot; text editors, and command line tools such as <code>less</code>.
I'm guessing that line breaks (LF) might be causing issues especially for Windows based editors (notepad, wordpad etc.).</p>
<p>I'm using:</p>
<pre><code class="language-php">use \Phalcon\Logger\Adapter\File as AuditLogFileAdapter,
    \Phalcon\Logger\Formatter\Json as AuditLogFormatterJson,</code></pre>
<p>w/o any issues, especially that other systems parse that json and make use of the logs.</p>
<p>Tip: try to open your log file in <code>nano</code>, do you see any garbage chars?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="49769" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="49769" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/a4422d89d7bed6763f236da321a1747f?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/9683/petermoo" class="user-moderator-N"><span itemprop="name">Peter</span></a>        </span>
        <br>

        <span class="karma">9.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="49779" data-toggle="modal" data-target="#historyModal">
                edited <span>Jul '17</span>
              </span><br/><a name="C49779" href="#C49779">
                <time itemprop="dateCreated" datetime="2017-07-21T18:52:44-07:00" class="action-date">Jul '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>My code is back to the Phalcon logger. I found part of the problem. Nano, Notepad, and LibreOffice are all happy with the text. Switching to LibreOffice for an IDE might not be so bad. The code comments could have beautiful formatting. :-)</p>
<p>Bluefish thinks it is UTF-16BE desipite the start of the file being plain text. Bluefish must read the while file before guessing what the characterset might be.</p>
<p>Xed displays a characterset error message and highlights \00 characters. They are from serialize. s:7:&quot;\00*\00name&quot;
I added str_replace(&quot;\00&quot;, '', to the serialize output and the log files work in every editor. Maybe I should capture var_dump output instead.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="49779" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="49779" data-cf-modified-caee99af9dfcbc1e571005d9-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="16569" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>