---
layout: default
title: 'Volt minify - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/3/volt">Volt</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Volt minify</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2130/heptagono" class="user-moderator-N"><span itemprop="name">heptagono</span></a></span>
            <time itemprop="dateCreated" datetime="2014-09-22T20:10:44-07:00">Sep '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-09-22T20:10:44-07:00">Sep '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '20</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">19</span>
                </td>
                <td>
                    <label>Views</label><br>3644</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/2187709447a71fadc461910ee14630b4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2130/heptagono" class="user-moderator-N"><span itemprop="name">heptagono</span></a></span>
                <span class="karma">11.2k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C3515" href="#C3515">
        <time class="action-date">Sep '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hello!</p>
<p>Is there anyway to minify the HTML precompiled like Smarty does with the {strip} function ?</p>
<p>Thank you!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6e9c131d69313b8a3ff940e47cc2c265?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1980/Rewt0r" class="user-moderator-N"><span itemprop="name">Michael Jephcote</span></a>        </span>
        <br>

        <span class="karma">13.4k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C11541" href="#C11541">
                <time itemprop="dateCreated" datetime="2014-09-23T01:40:27-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Take a look here: <a href="https://stackoverflow.com/questions/24790579/how-to-minify-html-code-in-phalconphp">https://stackoverflow.com/questions/24790579/how-to-minify-html-code-in-phalconphp</a></p>
<p>As most people say in there, it's best to do this with mod_pagespeed by Google which is a mod for Apache (and now nginx). It has many filters for minification along with many other settings: <a href="https://developers.google.com/speed/pagespeed/module/filters">https://developers.google.com/speed/pagespeed/module/filters</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11541" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11541" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11554" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11554" href="#C11554">
                <time itemprop="dateCreated" datetime="2014-09-23T10:00:49-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The big &quot;Secret de Polichinelle&quot; :)</p>
<p>For all framework and for PHP and for all servers :)</p>
<pre><code class="language-php">
$di-&gt;set('view', function() {
        $eventsManager = new \Phalcon\Events\Manager();
        $eventsManager-&gt;attach("view:afterRenderView", function($event, $view) {
                #... your minify function of content
        });
        $view = new \Phalcon\Mvc\View();
        $view-&gt;setViewsDir(__DIR__ . '/views/');
        $view-&gt;setEventsManager($eventsManager);
        return $view;
}, true);
</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11554" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11554" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6e9c131d69313b8a3ff940e47cc2c265?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1980/Rewt0r" class="user-moderator-N"><span itemprop="name">Michael Jephcote</span></a>        </span>
        <br>

        <span class="karma">13.4k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C11554"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Oleg                    </a>
                </div><div class="posts-buttons" align="right"><a name="C11558" href="#C11558">
                <time itemprop="dateCreated" datetime="2014-09-23T10:32:46-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This wouldn't be for all frameworks &amp; vanilla PHP... Just Phalcon.</p>
<p>If you do decide to minify your HTML this way remember that doing so may cost a lot of processing time, it's best to check how long an str_replace for example will take on your pages before attempting to roll it into production.</p>
<blockquote>
<p>The big &quot;Secret de Polichinelle&quot; :)</p>
<p>For all framework and for PHP and for all servers :)</p>
<pre><code class="language-php">
$di-&gt;set('view', function() {
       $eventsManager = new \Phalcon\Events\Manager();
       $eventsManager-&gt;attach("view:afterRenderView", function($event, $view) {
               #... your minify function of content
       });
       $view = new \Phalcon\Mvc\View();
       $view-&gt;setViewsDir(__DIR__ . '/views/');
       $view-&gt;setEventsManager($eventsManager);
       return $view;
}, true);
</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11558" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11558" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11572" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11572" href="#C11572">
                <time itemprop="dateCreated" datetime="2014-09-24T01:48:46-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>May be. But...</p>
<p>Task of HTML minify is to get one line without extra spaces.</p>
<p>1) You may not be able to use mod_pagespeed when using hosting</p>
<p>2) For example, I don't use Apache on my servers. I used Nginx, but I using lighttpd now.
Nginx need recompile with mod_pagespeed - this makes it difficult to support
Lighttpd doesn't have pagespeed.</p>
<p>3) Lighty work very fast.</p>
<p>4) I use preg_replace and  I have response near 2 ping latency on smallest server (1 core 32 bit)</p>
<p>5) I'm trying to create pages smaller then 256K</p>
<p>As result, I have no problem with HTML minify. All work in production. </p>
<p>As a complement - I use DigitalOcean VPS servers, thanks to them that I don't have problems with the speed :)</p>
<p>My usually configration - Debian 7 + lighttpd + PHP + MariaDB (or Redis), and, if need, Phalcon.</p>
<p>I had the experience with Linode and had a similar result.</p>
<p>P.S. </p>
<p>Meaning of the phrase - &quot;for all framework&quot; is as algorithm of work.
Listening of view build fire and minify it before create response.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11572" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11572" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6e9c131d69313b8a3ff940e47cc2c265?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1980/Rewt0r" class="user-moderator-N"><span itemprop="name">Michael Jephcote</span></a>        </span>
        <br>

        <span class="karma">13.4k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C11572"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Oleg                    </a>
                </div><div class="posts-buttons" align="right"><a name="C11575" href="#C11575">
                <time itemprop="dateCreated" datetime="2014-09-24T01:58:10-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>About your point 1, I don't know about you but you can't use Phalcon on 99% of shared hosting environments either.</p>
<p>PHP's processing power is slow as it's interpreted code, hence the reason why Phalcon is created as a C extension to PHP - doing this sort of work in PHP over C is just dumb IMO. You're going to waste about 100-500ms depending on the size of your HTML output in a time where user's expect everything to work instantly.</p>
<p>I wouldn't recommend using a <code>preg_replace()</code> because this will be even more expensive on processing time as it's using regular expressions, especially for a simple carriage return/whitespace stripper.</p>
<blockquote>
<p>May be. But...</p>
<p>Task of HTML minify is to get one line without extra spaces.</p>
<p>1) You may not be able to use mod_pagespeed when using hosting</p>
<p>2) For example, I don't use Apache on my servers. I used Nginx, but I using lighttpd now.
Nginx need recompile with mod_pagespeed - this makes it difficult to support
Lighttpd doesn't have pagespeed.</p>
<p>3) Lighty work very fast.</p>
<p>4) I use preg_replace and  I have response near 2 ping latency on smallest server (1 core 32 bit)</p>
<p>5) I'm trying to create pages smaller then 256K</p>
<p>As result, I have no problem with HTML minify. All work in production. </p>
<p>As a complement - I use DigitalOcean VPS servers, thanks to them that I don't have problems with the speed :)</p>
<p>My usually configration - Debian 7 + lighttpd + PHP + MariaDB (or Redis), and, if need, Phalcon.</p>
<p>I had the experience with Linode and had a similar result.</p>
<p>P.S. </p>
<p>Meaning of the phrase - &quot;for all framework&quot; is as algorithm of work.
Listening of view build fire and minify it before create response.</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11575" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11575" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11576" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11576" href="#C11576">
                <time itemprop="dateCreated" datetime="2014-09-24T02:40:02-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I have ping to my server 50ms</p>
<p>And I get page for 120ms.</p>
<p>With all images I get page near 600ms with browser cache . 27 requests withih 23 images + 2 stylesheets and 1 javascript.</p>
<p>When browser cache is off, I get page for 1.2 second. With 1.6Mbyte weight.</p>
<p>What else do I need to accelerate ?</p>
<p>If you want increase speed, you can use instance with more cores.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11576" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11576" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6e9c131d69313b8a3ff940e47cc2c265?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1980/Rewt0r" class="user-moderator-N"><span itemprop="name">Michael Jephcote</span></a>        </span>
        <br>

        <span class="karma">13.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C11578" href="#C11578">
                <time itemprop="dateCreated" datetime="2014-09-24T04:11:38-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>The question is, how many lines is your final HTML output? I know on a project I'm working on there are 2000+ lines per page, using PHP to minify the html here would be much more processor expensive than using a C mod or CloudFlare's AutoMinify. Plus you're more likely to break inline javascript (if used) when just using your own function to minify.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11578" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11578" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11580" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11580" href="#C11580">
                <time itemprop="dateCreated" datetime="2014-09-24T05:07:16-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So. Testing</p>
<p>I get html page from getbootstrap.com and clone it to big html file within 2152 strings.</p>
<pre><code class="language-bash">wc bb.html 
 2151  7194 98937 bb.html</code></pre>
<p>We have 2152 string 7194 words 98937 synbols</p>
<p>Small test :</p>
<pre><code class="language-php">&lt;?php
function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}

$html = file_get_contents('bb.html');
echo "Input content length : ", strlen($html), "\n";

                $search = array(
                    '/\&gt;[^\S ]+/s', //strip whitespaces after tags, except space
                    '/[^\S ]+\&lt;/s', //strip whitespaces before tags, except space
                    '/(\s)+/s',  // shorten multiple whitespace sequences
                    '/&gt;(\s)+&lt;/',
                    '/\n/',
                    '/\r/',
                    '/\t/',
                );
                $replace = array(
                    '&gt;',
                    '&lt;',
                    '\\1',
                    '&gt;&lt;',
                    '',
                    '',
                    '',
                );

$time_start = microtime_float();

$content = preg_replace($search, $replace, $html);

$time_end = microtime_float();
$time = ($time_end - $time_start) *1000;

echo "Task time is : $time millisecond\n";

echo "Output content length : ", strlen($content);
$out_file = 'out.html';

file_put_contents($out_file, $content, LOCK_EX);
</code></pre>
<p>Start it and get result :</p>
<pre><code class="language-bash">Input content length : 98937
Task time is : 7.7309608459473 millisecond
Output content length : 88109</code></pre>
<pre><code class="language-bash">wc out.html 
    0  5502 88109 out.html</code></pre>
<p>About broken javascript :</p>
<p>If javascript is correct, it not broken.</p>
<p>In other words, correct javascript always works . :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11580" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11580" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6e9c131d69313b8a3ff940e47cc2c265?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1980/Rewt0r" class="user-moderator-N"><span itemprop="name">Michael Jephcote</span></a>        </span>
        <br>

        <span class="karma">13.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11585" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11585" href="#C11585">
                <time itemprop="dateCreated" datetime="2014-09-24T08:22:59-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>That isn't a real world representation, try running apachebench and see the performance.</p>
<p>And your comment about Javascript is completely wrong... Consider the following code:</p>
<pre><code class="language-javascript">&lt;script type="text/javascript"&gt;
    // my comment
    alert('abc'); // another comment
    alert('def');
&lt;/script&gt;</code></pre>
<p>Your &quot;minify&quot; regex would make this become one long javascript comment rendering it useless, even though it is correct and valid javascript.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11585" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11585" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/659/oleg578" class="user-moderator-N"><span itemprop="name">Oleg</span></a>        </span>
        <br>

        <span class="karma">8.1k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="11595" data-toggle="modal" data-target="#historyModal">
                edited <span>Sep '14</span>
              </span><br/><a name="C11595" href="#C11595">
                <time itemprop="dateCreated" datetime="2014-09-24T10:40:32-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Test on real site via siege  (ping 50ms)  :</p>
<pre><code class="language-bash">Transactions:                    135 hits
Availability:                 100.00 %
Elapsed time:                   9.48 secs
Data transferred:               5.41 MB
Response time:                  0.56 secs
Transaction rate:              14.24 trans/sec
Throughput:                     0.57 MB/sec
Concurrency:                    7.94
Successful transactions:         135
Failed transactions:               0.5
Longest transaction:            1.23
Shortest transaction:           0.30
</code></pre>
<p>We have 135 hits on 10 sec with concurrency 15 users, this implies 13.5 hits <em> 60 sec </em> 60 min *24 hours = 1166400 hits per 24 hours .</p>
<p>Cpu loading near 30%. </p>
<p>About javascript -  You have shown just a case of bad practice of coding. Try to avoid such comments. :)</p>
<p>Remove all comments from the code before production - it's best practice.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11595" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11595" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6e9c131d69313b8a3ff940e47cc2c265?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1980/Rewt0r" class="user-moderator-N"><span itemprop="name">Michael Jephcote</span></a>        </span>
        <br>

        <span class="karma">13.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C11604" href="#C11604">
                <time itemprop="dateCreated" datetime="2014-09-25T02:41:56-07:00" class="action-date">Sep '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>LMAO that isn't bad practice at all - I just found a flaw in your code.</p>
<p>Ideally there would be no inline js anyway but I was just pointing it out. If you want to spend time minifying your html output within PHP that's up to you...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="11604" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="11604" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2619/emiliodeg" class="user-moderator-N"><span itemprop="name">Emilio Degiovanni</span></a>        </span>
        <br>

        <span class="karma">32.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13760" href="#C13760">
                <time itemprop="dateCreated" datetime="2014-11-28T12:58:26-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>any way to store minify volt cached files?</p>
<p><strong>normal</strong>.volt.php</p>
<pre><code class="language-php">&lt;!doctype html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;?php echo $this-&gt;tag-&gt;gettitle(); ?&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php echo $this-&gt;getContent(); ?&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><strong>minify</strong>.volt.php</p>
<pre><code class="language-php">&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;?php echo $this-&gt;tag-&gt;gettitle(); ?&gt;&lt;/head&gt;&lt;body&gt;&lt;?php echo $this-&gt;getContent(); ?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13760" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13760" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/2187709447a71fadc461910ee14630b4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2130/heptagono" class="user-moderator-N"><span itemprop="name">heptagono</span></a>        </span>
        <br>

        <span class="karma">11.2k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C13760"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Emilio Degiovanni                    </a>
                </div><div class="posts-buttons" align="right"><a name="C13767" href="#C13767">
                <time itemprop="dateCreated" datetime="2014-11-28T20:46:43-07:00" class="action-date">Nov '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><blockquote>
<p>any way to store minify volt cached files?</p>
<p><strong>normal</strong>.volt.php</p>
<pre><code class="language-php">&lt;!doctype html&gt;
&lt;html&gt;
   &lt;head&gt;
       &lt;?php echo $this-&gt;tag-&gt;gettitle(); ?&gt;
   &lt;/head&gt;
   &lt;body&gt;
       &lt;?php echo $this-&gt;getContent(); ?&gt;
   &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><strong>minify</strong>.volt.php</p>
<pre><code class="language-php">&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;?php echo $this-&gt;tag-&gt;gettitle(); ?&gt;&lt;/head&gt;&lt;body&gt;&lt;?php echo $this-&gt;getContent(); ?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</blockquote>
<p>You would have to write custom logic to store and read that minified file. I would recomend you to use mod_pagespeed from google. As was recomended at answer #2. It is fast and pretty easy to implement</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13767" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13767" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2619/emiliodeg" class="user-moderator-N"><span itemprop="name">Emilio Degiovanni</span></a>        </span>
        <br>

        <span class="karma">32.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C13815" href="#C13815">
                <time itemprop="dateCreated" datetime="2014-12-01T04:56:22-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks heptagono </p>
<p>I prefer to minimize once instead of all queries</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13815" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13815" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6e9c131d69313b8a3ff940e47cc2c265?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1980/Rewt0r" class="user-moderator-N"><span itemprop="name">Michael Jephcote</span></a>        </span>
        <br>

        <span class="karma">13.4k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C13815"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Emilio Degiovanni                    </a>
                </div><div class="posts-buttons" align="right"><a name="C13866" href="#C13866">
                <time itemprop="dateCreated" datetime="2014-12-03T09:05:41-07:00" class="action-date">Dec '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>FYI mod_pagespeed caches the changed output.</p>
<blockquote>
<p>Thanks heptagono </p>
<p>I prefer to minimize once instead of all queries</p>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="13866" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="13866" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2619/emiliodeg" class="user-moderator-N"><span itemprop="name">Emilio Degiovanni</span></a>        </span>
        <br>

        <span class="karma">32.2k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C15533" href="#C15533">
                <time itemprop="dateCreated" datetime="2015-01-30T13:29:51-07:00" class="action-date">Jan '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Oh Thanks I didn't know but insist I prefer make minified htmls</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="15533" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="15533" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/eccaa895d8f0ec8396a466a4c2f73a89?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/5459/moledet" class="user-moderator-N"><span itemprop="name">moledet</span></a>        </span>
        <br>

        <span class="karma">17.5k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C13760"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/b59fecbff6d1afabf8da316028330df4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Emilio Degiovanni                    </a>
                </div><div class="posts-buttons" align="right"><a name="C39769" href="#C39769">
                <time itemprop="dateCreated" datetime="2016-09-06T00:30:30-07:00" class="action-date">Sep '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I was finded solution by use Grunt you may minify php compiled files by volt only once!
Important config Gruntfile.js changes</p>
<pre><code class="language-js">/**
 * Created by yosefk on 01/09/2016.
 */

module.exports = function(grunt) {
    // load all grunt tasks matching the ['grunt-*', '@*/grunt-*'] patterns
    require('load-grunt-tasks')(grunt);

    //  Вся настройка находится здесь
    grunt.initConfig({
        pkg: grunt.file.readJSON('package.json'),
        concat: {
            options: {
                sourceMap: true
            },
            js_index: {
                src: [
                    'node_modules/admin-lte/plugins/jQuery/*.min.js',
                    'node_modules/admin-lte/bootstrap/js/bootstrap.min.js',
                    'node_modules/admin-lte/dist/js/app.min.js',
                    'build/js/index.min.js'

                ],
                dest: 'js/index.js'
            },
            css_index: {
                src: [
                    'node_modules/admin-lte/bootstrap/css/bootstrap.min.css',
                    'node_modules/ionicons/dist/css/ionicons.min.css',
                    'node_modules/font-awesome/css/font-awesome.min.css',
                    'node_modules/admin-lte/dist/css/AdminLTE.min.css',
                    'node_modules/admin-lte/dist/css/skins/_all-skins.min.css',
                    'build/css/index.min.css'
                ],
                dest: 'css/index.css'
            }
        },
        uglify: {
            js_index: {
                src:  ['node_modules/admin-lte/dist/js/demo.js','src/js/index.js'],
                dest: 'build/js/index.min.js'
            }
        },
        cssmin:{
            target: {
                files: {
                    'build/css/index.min.css': ['src/css/index.css']
                }
            }
        },
        watch: {
            options: {
                livereload: true,
                atBegin: true
            },
            scripts: {
                files: ['src/js/*','src/css/*'],
                tasks: ['uglify','cssmin','concat','clean'],
                options: {
                    spawn: false,
                    livereload: true
                }
            },
            php:{
                files: ['../cache/volt/*'],
                tasks: ['htmlmin'],
                options: {
                    spawn: false
                }
            }
        },
        livereload: {
            options: {
                livereload: true
            },
            files: [
                'src/**/*',
                'src/**/**/*'
            ]
        },
        copy: {
            fonts: {
                files: [
                    {expand: true, cwd: 'node_modules/font-awesome/fonts/',src: '*', dest: 'fonts/', filter: 'isFile'},
                    {expand: true, cwd: 'node_modules/ionicons/dist/fonts/', src: '*', dest: 'fonts/', filter: 'isFile'}
                ]
            }
        },
        clean: ['build'],
        htmlmin: {
            dist: {
                options: {
                    removeComments: true,
                    collapseWhitespace: true
                },
                tasks: ['clean:php'],
                files: [
                    {
                        expand: true,
                        cwd: '../cache/volt',
                        src: '*.php',
                        dest: '../cache/volt/'
                    }]
            }
        }
    });

    //  Указываем, какие задачи выполняются, когда мы вводим «grunt» в терминале
    grunt.registerTask('default', ['uglify','cssmin','concat','copy','clean']);

};</code></pre>
<blockquote>
<p>any way to store minify volt cached files?</p>
<p><strong>normal</strong>.volt.php</p>
<pre><code class="language-php">&lt;!doctype html&gt;
&lt;html&gt;
   &lt;head&gt;
       &lt;?php echo $this-&gt;tag-&gt;gettitle(); ?&gt;
   &lt;/head&gt;
   &lt;body&gt;
       &lt;?php echo $this-&gt;getContent(); ?&gt;
   &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><strong>minify</strong>.volt.php</p>
<pre><code class="language-php">&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;?php echo $this-&gt;tag-&gt;gettitle(); ?&gt;&lt;/head&gt;&lt;body&gt;&lt;?php echo $this-&gt;getContent(); ?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="39769" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="39769" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/5213cc5054074acc7075fff66a1f1a38?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/8219/rogervila" class="user-moderator-N"><span itemprop="name">Roger Vilà</span></a>        </span>
        <br>

        <span class="karma">719</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C46411" href="#C46411">
                <time itemprop="dateCreated" datetime="2017-03-07T05:40:14-07:00" class="action-date">Mar '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>On your main <code>index.php</code> file, replace:</p>
<pre><code class="language-php">echo $application-&gt;handle()-&gt;getContent();</code></pre>
<p>with:</p>
<pre><code class="language-php">echo str_replace(["\n","\r","\t"], '', $application-&gt;handle()-&gt;getContent());</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="46411" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span><span itemprop="downvoteCount">1</span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="46411" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/bbbf4d0121136c24de23e50f9b214eeb?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3379/code100" class="user-moderator-N"><span itemprop="name">code100</span></a>        </span>
        <br>

        <span class="karma">15.2k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C46411"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/5213cc5054074acc7075fff66a1f1a38?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Roger Vilà                    </a>
                </div><div class="posts-buttons" align="right"><a name="C47987" href="#C47987">
                <time itemprop="dateCreated" datetime="2017-05-07T09:20:17-07:00" class="action-date">May '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>This is a bad idea, if you are handling your content, not only html, like images, it would mess up all you content.</p>
<blockquote>
<p>On your main <code>index.php</code> file, replace:</p>
<pre><code class="language-php">echo $application-&gt;handle()-&gt;getContent();</code></pre>
<p>with:</p>
<pre><code class="language-php">echo str_replace(["\n","\r","\t"], '', $application-&gt;handle()-&gt;getContent());</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="47987" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="47987" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/0f3d63965d2768a8f07c259d670f407e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/13139/DrJLT" class="user-moderator-N"><span itemprop="name">DrJLT</span></a>        </span>
        <br>

        <span class="karma">1.3k</span></div>
    <div class="col-md-11"><div class="in-reply-to">
                    <a href="#C11554"><span class="glyphicon glyphicon-chevron-up"></span> in reply to
                        <img src="https://secure.gravatar.com/avatar/fcae2565ce4d1ed7240231932dec115a?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" width="24" height="24" />                        Oleg                    </a>
                </div><div class="posts-buttons" align="right"><a name="C62721" href="#C62721">
                <time itemprop="dateCreated" datetime="2020-04-09T13:44:49-07:00" class="action-date">Apr '20</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thanks for sharing.</p>
<p>I implemented this but found one a big caveat:</p>
<p>afterRenderView (or other events for that matter) would only minify the rendred page, not the template in the cache.</p>
<p>This means that the &quot;minification&quot; is carried out repeatedly.</p>
<blockquote>
<p>The big &quot;Secret de Polichinelle&quot; :)</p>
<p>For all framework and for PHP and for all servers :)</p>
<pre><code class="language-php">
$di-&gt;set('view', function() {
       $eventsManager = new \Phalcon\Events\Manager();
       $eventsManager-&gt;attach("view:afterRenderView", function($event, $view) {
               #... your minify function of content
       });
       $view = new \Phalcon\Mvc\View();
       $view-&gt;setViewsDir(__DIR__ . '/views/');
       $view-&gt;setEventsManager($eventsManager);
       return $view;
}, true);
</code></pre>
</blockquote></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="62721" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="62721" data-cf-modified-7f65a50a37c3e36c2b2c0ad7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="3515" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>