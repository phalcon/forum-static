---
layout: default
title: 'HostUiController handler class cannot be loaded - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/21/beginners">Beginners</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">HostUiController handler class cannot be loaded</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a></span>
            <time itemprop="dateCreated" datetime="2014-04-07T07:30:54-07:00">Apr '14</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2014-04-07T07:30:54-07:00">Apr '14</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Apr '14</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">8</span>
                </td>
                <td>
                    <label>Views</label><br>1367</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a></span>
                <span class="karma">38.8k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C2012" href="#C2012">
        <time class="action-date">Apr '14</time>
    </a>
</div>
<div class="post-content"><div><p>Hi there,</p>
<p>I've started an application alond the lines of Tutorial 1 in the docs. Using XDebug, I can step through the code in my app_name/public/index.php but on this line: </p>
<p>echo $application-&gt;handle()-&gt;getContent();</p>
<p>I immediately hit the catch handler.</p>
<p>I've set up an IndexController.php in app/controller but this isn't hit as I've added breakpoints in there. What I've done is almost line for line based on the tutorial. I'm using nginx for my web server.</p>
<p>Any ideas what I might be doing wrong here?</p>
<p>Many thanks! :)</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-891365afd76f0c4c73692ee6-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-891365afd76f0c4c73692ee6-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6896" href="#C6896">
                <time itemprop="dateCreated" datetime="2014-04-07T07:57:19-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Paste your code please.  Read: <a href="https://forum.phalcon.io/help/markdown">https://forum.phalcon.io/help/markdown</a> - the last code block example gives you syntax highlighting.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6896" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6896" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6904" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C6904" href="#C6904">
                <time itemprop="dateCreated" datetime="2014-04-07T08:13:36-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code class="language-php">&lt;?php

try {

    //Register an autoloader
    $loader = new \Phalcon\Loader();
    $loader-&gt;registerDirs(array(
        '../app/controllers/',
        '../app/models/'
    ))-&gt;register();

    //Create a DI
    $di = new Phalcon\DI\FactoryDefault();

    //Setup the view component
    $di-&gt;set('view', function(){
        $view = new \Phalcon\Mvc\View();
        $view-&gt;setViewsDir('../app/views/');
        return $view;
    });

    //Setup a base URI so that all generated URIs include the "tutorial" folder
    $di-&gt;set('url', function(){
        $url = new \Phalcon\Mvc\Url();
        $url-&gt;setBaseUri('/host_ui/');
        return $url;
    });

    //Handle the request
    $application = new \Phalcon\Mvc\Application($di);

    echo $application-&gt;handle()-&gt;getContent();

} catch (\Phalcon\Exception $e) {
    echo "PhalconException: ", $e-&gt;getMessage();
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6904" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6904" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="6905" data-toggle="modal" data-target="#historyModal">
                edited <span>Apr '14</span>
              </span><br/><a name="C6905" href="#C6905">
                <time itemprop="dateCreated" datetime="2014-04-07T08:14:45-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><pre><code class="language-php">&lt;?php
class IndexController extends \Phalcon\Mvc\Controller
{

    public function indexAction()
    {
        echo "&lt;h1&gt;Hello!&lt;/h1&gt;";
    }

}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6905" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6905" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6906" href="#C6906">
                <time itemprop="dateCreated" datetime="2014-04-07T08:19:14-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>What is the exception being thrown?</p>
<p>Also, I tweaked your post - added the &quot;php&quot; behind the backticks to get the highlighting.  No biggie.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6906" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6906" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6908" href="#C6908">
                <time itemprop="dateCreated" datetime="2014-04-07T08:22:10-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ah, sorry - I didn't notice the &quot;php&quot;. Will know for future reference :)</p>
<p>The exception being thrown is:</p>
<p>PhalconException: HostUiController handler class cannot be loaded</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6908" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6908" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6909" href="#C6909">
                <time itemprop="dateCreated" datetime="2014-04-07T08:27:42-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Weird that &quot;host_ui&quot; in being involved there, as you've simply set it in your URL service.  Try commenting out this:</p>
<pre><code class="language-php">$di-&gt;set('url', function(){
    $url = new \Phalcon\Mvc\Url();
    $url-&gt;setBaseUri('/host_ui/');
    return $url;
});</code></pre>
<p>Just to see what happens.</p>
<p>I assume the URL you're trying to load is:</p>
<p>www.whateveryourdomainis.com/host_ui/public/index.php?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6909" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6909" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6910" href="#C6910">
                <time itemprop="dateCreated" datetime="2014-04-07T08:36:14-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I commented out the 'url' code and got the same result. On the basis that the documents say: &quot;By default Phalcon will look for a controller named “Index”. It is the starting point when no controller or action has been passed in the request.&quot;, I simply have a URL of:</p>
<p><a href="https://10.10.22.35/host_ui/test">https://10.10.22.35/host_ui/test</a></p>
<p>My nginx config (below) setys the root path into 'public', so, I just typed any URL in just to get it to work. </p>
<pre><code>server {
    listen       80;
    server_name  localhost;

    index       index.php index.html index.htm;
    set         $root_path '/mae/www/html';
    root        $root_path;

    location /host_ui/ {
        set $root_path "$root_path/host_ui/public";
        try_files $uri $uri/ @rewrite;
    }

    location @rewrite {
        rewrite ^/(.*)$ /index.php?_url=/$1;
    }

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6910" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6910" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6913" href="#C6913">
                <time itemprop="dateCreated" datetime="2014-04-07T08:49:43-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hmmm, I think since you've set your root to the public directory, then when you load <a href="https://10.10.22.35/host_ui/test">https://10.10.22.35/host_ui/test</a>, you're actually loading <a href="https://10.10.22.35/public/index.php?_url=host_ui/test">https://10.10.22.35/public/index.php?_url=host_ui/test</a>.  Phalcon is then seeing that as controller = &quot;host_ui&quot;, action = &quot;test&quot;.  Try just <a href="https://10.10.22.35/">https://10.10.22.35/</a></p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6913" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6913" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6918" href="#C6918">
                <time itemprop="dateCreated" datetime="2014-04-07T09:02:33-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://10.10.22.35/">https://10.10.22.35/</a> just returns a 403 Forbidden from Nginx because there isn't a location defined to handle that Url.</p>
<p>Do you know, I hadn't even made the connection between the exception reported by Phalcon &quot;HostUiController&quot; and my &quot;host_ui&quot; URL! :)</p>
<p>So, Phalcon is seemingly, by convention, removing the underscore and putting the words together in Pascal case? Jeez, I thought I'd escaped Rails when I came back to PHP ;)</p>
<p>'host_ui' is the application's root folder, like 'tutorial' in the &quot;Tutorial 1&quot;. So, I wouldn't want/expect 'host_ui' to be treated like a controller, particularly when it is also defined as the base Uri in the bootstrap code.</p>
<p>Is this a bug in Phalcon?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6918" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6918" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6923" href="#C6923">
                <time itemprop="dateCreated" datetime="2014-04-07T09:28:01-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I'm pretty sure this isn't a bug in Phalcon... but I'm not 100% sure what the problem is yet.  The URL service is just used for URL generation, it's not used by Phalcon to determine paths to application components, so that's not an issue.</p>
<p>I have no experience configuring Nginx, but I suspect the issue might be there.  Why do you have this directory configured separately?</p>
<pre><code>location /host_ui/ {
    set $root_path "$root_path/host_ui/public";
    try_files $uri $uri/ @rewrite;
}</code></pre>
<p>If I understand it correctly (there's a good chance I don't), you don't need to re-set $root_path.  The root of the server is still <code>/mae/www/html</code>, that doesn't need to change.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6923" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6923" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6928" href="#C6928">
                <time itemprop="dateCreated" datetime="2014-04-07T10:44:49-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Nginx location blocks are based on URLs so, this block handles any URL that follows this pattern: <a href="https://10.10.22.35/host_ui/">https://10.10.22.35/host_ui/</a> </p>
<p>I have to specify the document root because the index.php that Phalcon uses is in the 'public' directory. I can't just use the base root path of '/mae/www/html' because in there, we have 'host' and 'host_ui' where 'host' is the base folder for a RESTful API (using a Phalcon Micro application). The 'host_ui' is intended to be a full stack application that also consumes services provided by the 'host' api. So, for all these reasons, it isn't obvious that '/mae/www/html' is the document root. It's just the first part of two document roots used by two different URLs.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6928" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6928" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6930" href="#C6930">
                <time itemprop="dateCreated" datetime="2014-04-07T11:00:26-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>At least in Apache-land, the document root is the document root of the server - that doesn't change depending on which directory you're in.  Maybe it's different in Nginx land.</p>
<p>Right before your call to</p>
<pre><code class="language-php">echo $application-&gt;handle()-&gt;getContent();</code></pre>
<p>Can you do a</p>
<pre><code class="language-php">print_r($_SERVER)</code></pre>
<p>Just to see what the finally resultant URL and query strings are?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6930" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6930" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6938" href="#C6938">
                <time itemprop="dateCreated" datetime="2014-04-07T11:42:28-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>In Apache, if you have a VirtualHost, you can specify whatever DocumentRoot you want. On the same host, you can have multiple VirtualHosts all with different DocumentRoot values.</p>
<p>In Nginx, the document root isn't dependent on directory. Like I mentioned, <a href="https://10.10.22.35/host_ui/">https://10.10.22.35/host_ui/</a> is not a directory, it's a URL. The Nginx location block responds to the URL. In the block that traps <a href="https://10.10.22.35/host_ui/">https://10.10.22.35/host_ui/</a> I then decide what the document root should be for requests that match that URI, just like you can in Apache. In Nginx, I don't have to specify a document root in a location block, it can be global to the server but the point is, it doesn't have to be, just like it doesn't have to be in Apache.</p>
<p>As far as Phalcon is concerned, the index.php is invoked by the rewrite in the appropriate document root of /mae/www/html/host_ui/public/index.php and Phalcon should be obvlivious to this fact. I'm starting to think that Phalcon might be getting confused by the underscore in the directory name.</p>
<p>Can any of the Phalcon authors comment on this?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6938" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6938" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6944" href="#C6944">
                <time itemprop="dateCreated" datetime="2014-04-07T14:58:21-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/301/quasipickle">@quasipickle</a> &gt; Just to see what the finally resultant URL and query strings are?</p>
<p>I can't check until I get back in work tomorrow but from memory, the value in the _url parameter was/is 'host_ui/test' -- in that case, I guess Phalcon would just treat 'host_ui' as the controller, hence the behaviour I'm seeing. Maybe, I'll just have to alter the Nginx re-write RegEx so that 'host_iu' is stripped out of the re-written URL which in the current case would have just left 'test'.</p>
<p>Not knowing full-stack Phalcon at all, I imagine that you could also create specific routes that map to 'host_ui/...' but extract portions of the URL pattern beyond 'host_ui/' for the purpose of establishing controller/action/id. Does this sound feasible? Using the Phalcon Micro app was really easy because you explicilty specify a route. However, Tutorial 1 is using implicit route pattern analysis and that is perhaps where I'm having the issue. If I wanted to specify routes, does this dove-tail easily in to what I've already done or, is there a different approach I should follow?</p>
<p>Thanks for the help and advice you've give me. It's much appreciated :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6944" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6944" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6946" href="#C6946">
                <time itemprop="dateCreated" datetime="2014-04-07T15:04:48-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think changing your rewrite makes the most sense.  The content of the <code>_url</code> parameter is decided by your web server and the re-write logic before Phalcon is even loaded, so the problem doesn't seem to be Phalcon.</p>
<p>I don't know if you're at all familiar with Apache, but all my apps run with 2 .htaccess files.  1 file sits at the root of the app directory and redirects all requests to the <code>public</code> directory.  The <code>public</code> directory has a second redirect file that redirects any requests for non-files to <code>index.php?_url....</code>.  If I were seeing what you're seeing, it would mean my first redirection is one directory too high.  I'm not sure how useful that information is, but thought I'd share.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6946" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6946" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/b7087a5cdbd5a4365582e4a26a26a9a2?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/1409/gazley" class="user-moderator-N"><span itemprop="name">G Wynne</span></a>        </span>
        <br>

        <span class="karma">38.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6968" href="#C6968">
                <time itemprop="dateCreated" datetime="2014-04-08T02:44:30-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><a href="https://forum.phalcon.io/user/301/quasipickle">@quasipickle</a> - Thanks for your help and advice with this. I managed to resolve the issue by stripping out 'host_ui' from the Nginx rewrite. I also posted the Nginx logging output showing the _url values when typing first, <a href="https://10.10.22.35/host_ui/">https://10.10.22.35/host_ui/</a> and then <a href="https://10.10.22.35/host_ui/test/name">https://10.10.22.35/host_ui/test/name</a>. So, all is well, it's not a Phalcon bug and my stress levels have dropped back to what they normally are! :) Cheers.</p>
<pre><code>server {
    listen       80;
    server_name  localhost;

    index       index.php index.html index.htm;
    set         $root_path '/mae/www/html';
    root        $root_path;

    location /host_ui/ {
        set $root_path "$root_path/host_ui/public";
        try_files $uri $uri/ @host_ui_rewrite;
    }

    location @host_ui_rewrite {
        rewrite ^/host_ui/(.*)$ /index.php?_url=/$1;
    }

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }
}

2014/04/08 02:35:46 [notice] 26357#0: *1 rewritten data: "/index.php", args: "_url=/", client: 10.10.1.151, server: localhost, request: "GET /host_ui/ HTTP/1.1", host: “10.10.22.35"

2014/04/08 02:37:30 [notice] 26357#0: *6 rewritten data: "/index.php", args: "_url=/test/name", client: 10.10.1.151, server: localhost, request: "GET /host_ui/test/name HTTP/1.1", host: "10.10.22.35"</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6968" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6968" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img  src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C6984" href="#C6984">
                <time itemprop="dateCreated" datetime="2014-04-08T07:41:50-07:00" class="action-date">Apr '14</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ah, so it would appear the rewrite rules act from the document root of the server, not the location from which the rules are referenced.</p>
<p>Glad to hear it's working now.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="6984" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="6984" data-cf-modified-891365afd76f0c4c73692ee6-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="2012" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>