---
layout: default
title: 'One way model relation definitions? - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">One way model relation definitions?</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/480/integry" class="user-moderator-N"><span itemprop="name">Rinalds Uzkalns</span></a></span>
            <time itemprop="dateCreated" datetime="2013-09-03T09:53:16-07:00">Sep '13</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2013-09-03T09:53:16-07:00">Sep '13</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Sep '13</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">2</span>
                </td>
                <td>
                    <label>Views</label><br>834</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">2</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/d1fd38675d277973f78615a6b0680ef5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/480/integry" class="user-moderator-N"><span itemprop="name">Rinalds Uzkalns</span></a></span>
                <span class="karma">18.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C855" href="#C855">
        <time class="action-date">Sep '13</time>
    </a>
</div>
<div class="post-content"><div><p>Let's say I have 2 model classes - User and Comment (User hasMany Comments). However since my application is modular, the User class is unaware of Comment, since it may or may not be available depending on module availability. So, I cannot define the hasMany relationship in User, however it is defined as belongsTo in Comment.</p>
<p>When I try to pull the related Comment records from a User instance:</p>
<pre><code class="language-php">$items = $user-&gt;getRelated('Comment');</code></pre>
<p>I get this error: There is no defined relations for the model &quot;User&quot; using alias &quot;Comment&quot;</p>
<p>If I add the hasMany definition in User, then it works.</p>
<p>Perhaps there is another way to pull the related records without building the actual queries every time?</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-7319aba2604501d8ed594e96-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-7319aba2604501d8ed594e96-="">
        <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">2</span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/396011c9c28f04f34414c2e249c08ab4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/121/inzurrekt" class="user-moderator-N"><span itemprop="name">AlonsoSoto</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3321" href="#C3321">
                <time itemprop="dateCreated" datetime="2013-09-04T19:21:24-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>i used to go a step back in this problem. I make a autoloader for all modukes in index.php so you can access all your classes everywhrre.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3321" data-cf-modified-7319aba2604501d8ed594e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3321" data-cf-modified-7319aba2604501d8ed594e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/d1fd38675d277973f78615a6b0680ef5?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/480/integry" class="user-moderator-N"><span itemprop="name">Rinalds Uzkalns</span></a>        </span>
        <br>

        <span class="karma">18.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="3332" data-toggle="modal" data-target="#historyModal">
                edited <span>Oct '14</span>
              </span><br/><a name="C3332" href="#C3332">
                <time itemprop="dateCreated" datetime="2013-09-05T22:11:58-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes, but that's not quite the same problem, isn't it? I solve the autoloading issue by matching namespaces to model file path, for example /module/articles/app/model/Comment.php is put in the articles/app/model namespace. Only the /module directory is added to autoloader.</p>
<p>Anyway, I don't think it resolves the question. One way I can think of is to add getRelated() method to BaseModel, something like this:</p>
<pre><code class="language-php">public function getRelated($model)
{
    try
    {
        $related = parent::getRelated($model);
    }
    catch (WhateverExceptionThatWas $exception)
    {
        // check if $model has a belongsTo relationship defined
        // ...

        if ($belongsTo)
        {
            // then
            $this-&gt;hasMany(...);

            $related = parent::getRelated($model);
        }
        else 
        {
            throw $exception;
        }
    }

    return $related;
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3332" data-cf-modified-7319aba2604501d8ed594e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3332" data-cf-modified-7319aba2604501d8ed594e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/396011c9c28f04f34414c2e249c08ab4?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/121/inzurrekt" class="user-moderator-N"><span itemprop="name">AlonsoSoto</span></a>        </span>
        <br>

        <span class="karma">6.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C3334" href="#C3334">
                <time itemprop="dateCreated" datetime="2013-09-05T23:37:53-07:00" class="action-date">Sep '13</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I Understands your code, it will works. But please tell me then what do you exactly means with</p>
<p>&quot;the User class is unaware of Comment, since it may or may not be available depending on module availability&quot;</p>
<p>Note that If you have the class and the proper autoloader registered then you can define the relation with no problems.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="3334" data-cf-modified-7319aba2604501d8ed594e96-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="3334" data-cf-modified-7319aba2604501d8ed594e96-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="855" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>