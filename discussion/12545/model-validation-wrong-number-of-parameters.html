---
layout: default
title: 'Model validation &#039;Wrong number of parameters&#039; - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="https://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/1/mvc">MVC</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">Model validation &#039;Wrong number of parameters&#039;</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a></span>
            <time itemprop="dateCreated" datetime="2016-08-03T16:50:24-07:00">Aug '16</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2016-08-03T16:50:24-07:00">Aug '16</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Aug '16</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">5</span>
                </td>
                <td>
                    <label>Views</label><br>1161</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/82ebe53ee6a59e3ad556f575b15daf88?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="https://schema.org/Person" class="avatar-name"><a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a></span>
                <span class="karma">3.7k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C12545" href="#C12545">
        <time class="action-date">Aug '16</time>
    </a>
</div>
<div class="post-content"><div><p>I am having a bit of an issue with the new validator on CLI Task, probably I am doing something wrong.</p>
<p>php 5.5.9, phalcon 3, Xubuntu 14.04, package manager instalation</p>
<p>Line 124 is <code>return $this-&gt;validate($validator);</code></p>
<pre><code class="language-php">   public function validation()
    {
        $validator = new \Phalcon\Validation();
        $validator-&gt;add(
            ['RELATED', 'RELATED_ID', 'bin_key64'],
            new \Phalcon\Validation\Validator\Uniqueness()
        );
        return $this-&gt;validate($validator);
    }</code></pre>
<p>CLI error is has follows</p>
<pre><code>PHP Fatal error:  Uncaught exception 'BadMethodCallException' with message 'Wrong number of parameters' in /var/www/v2/app/models/Files.php:124
Stack trace:
#0 [internal function]: Phalcon\Mvc\Model-&gt;getRelated()
#1 [internal function]: Phalcon\Validation-&gt;getValue('RELATED')
#2 [internal function]: Phalcon\Validation\Validator\Uniqueness-&gt;isUniqueness(Object(Phalcon\Validation), Array)
#3 [internal function]: Phalcon\Validation\Validator\Uniqueness-&gt;validate(Object(Phalcon\Validation), Array)
#4 [internal function]: Phalcon\Validation-&gt;validate(NULL, Object(Files))
#5 /var/www/v2/app/models/Files.php(124): Phalcon\Mvc\Model-&gt;validate(Object(Phalcon\Validation))
#6 [internal function]: Files-&gt;validation()
#7 [internal function]: Phalcon\Mvc\Model-&gt;fireEventCancel('validation')
#8 [internal function]: Phalcon\Mvc\Model-&gt;_preSave(Object(Phalcon\Mvc\Model\MetaData\Memory), false, 'id')
#9 /var/www/v2/app/tasks/FileTask.php(346): Phalcon\Mvc\Model-&gt;save()
#10 /var/www/v2/app/tasks/File in /var/www/apqe/v2/app/models/Files.php on line 124</code></pre></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82ebe53ee6a59e3ad556f575b15daf88?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a>        </span>
        <br>

        <span class="karma">3.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37755" href="#C37755">
                <time itemprop="dateCreated" datetime="2016-08-03T17:29:23-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Hapens also with php 7</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37755" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37755" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37761" href="#C37761">
                <time itemprop="dateCreated" datetime="2016-08-03T23:27:57-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Is RELATED a relation like belongsTo or hasMany or any other alias ? Then it won't work.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37761" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37761" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82ebe53ee6a59e3ad556f575b15daf88?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a>        </span>
        <br>

        <span class="karma">3.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37769" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37769" href="#C37769">
                <time itemprop="dateCreated" datetime="2016-08-04T03:05:46-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>It's not a relation, ['RELATED', 'RELATED_ID', 'bin_key64'] are properties of the model and fields of the table.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37769" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37769" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37779" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37779" href="#C37779">
                <time itemprop="dateCreated" datetime="2016-08-04T04:06:40-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Oh i know why it's executed <a href="https://github.com/phalcon/cphalcon/blob/master/phalcon/validation.zep#L489">https://github.com/phalcon/cphalcon/blob/master/phalcon/validation.zep#L489</a> Beacause it's looking for getRelated() method and obviously such method exists from Phalcon\Mvc\Model, you need to change name of this for now, create issue on github maybe so we will add underscore before getRelated but this will be change in phalcon 4.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37779" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37779" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82ebe53ee6a59e3ad556f575b15daf88?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a>        </span>
        <br>

        <span class="karma">3.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37781" href="#C37781">
                <time itemprop="dateCreated" datetime="2016-08-04T04:09:12-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>So Related is a reserved 'propertie' in models? because when phalcon tries to call getRealated it uses the magic method __get()?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37781" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37781" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="37783" data-toggle="modal" data-target="#historyModal">
                edited <span>Aug '16</span>
              </span><br/><a name="C37783" href="#C37783">
                <time itemprop="dateCreated" datetime="2016-08-04T04:10:25-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No no no. Validation is trying to use getter. And obviously there is such a method as getRelated in model(<code>Phalcon\Mvc\Model::getRelated()</code>.</p>
<p>But this means yes - related is reserved property name.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37783" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37783" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82ebe53ee6a59e3ad556f575b15daf88?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a>        </span>
        <br>

        <span class="karma">3.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37785" href="#C37785">
                <time itemprop="dateCreated" datetime="2016-08-04T04:18:23-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I just tested it works if I do not name a propertie 'related'.
yes I know there is such a method, been reading the code all nigh ^^</p>
<p>but the model magic method is running 1st thus generating the error.</p>
<p>So if 'related' is not considered a &quot;reserved word&quot; maybe a reference in the manual that such problems can occour?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37785" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37785" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37789" href="#C37789">
                <time itemprop="dateCreated" datetime="2016-08-04T04:21:01-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>No it's nor running first. First validation checks for getters, then other things. Check link from source i posted.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37789" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37789" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82ebe53ee6a59e3ad556f575b15daf88?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a>        </span>
        <br>

        <span class="karma">3.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37795" href="#C37795">
                <time itemprop="dateCreated" datetime="2016-08-04T04:29:13-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Oh ok got it, Will create issue on Github, you are right maybe the underscore will solve the issue on phalcon4, but it's a public ...</p>
<p>Have you guys ever considered to implement a DataMapper ORM?</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37795" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37795" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37799" href="#C37799">
                <time itemprop="dateCreated" datetime="2016-08-04T05:25:30-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Well it's huge work to do.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37799" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37799" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="https://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/82ebe53ee6a59e3ad556f575b15daf88?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="https://schema.org/Person">
            <a href="/user/2510/rudiservo" class="user-moderator-N"><span itemprop="name">Rudi Servo</span></a>        </span>
        <br>

        <span class="karma">3.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C37801" href="#C37801">
                <time itemprop="dateCreated" datetime="2016-08-04T06:12:23-07:00" class="action-date">Aug '16</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes I know, I did try to implement one of my own in pure php, nonsense when you have zephir.</p>
<p>Please dont get me wrong, my idea is not to change the hole ORM to DataMapper and ditch ActiveRecord, my idea is to have both options and offer a alternative for those who use for example Doctrine2.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="37801" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="37801" data-cf-modified-d25e1eebffa3a16cf0c90117-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="12545" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>