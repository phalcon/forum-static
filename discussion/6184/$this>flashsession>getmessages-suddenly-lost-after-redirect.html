---
layout: default
title: '$this-&gt;flashSession-&gt;getMessages suddenly lost after redirect - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/28/session">Session</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">$this-&gt;flashSession-&gt;getMessages suddenly lost after redirect</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1340/elchueko" class="user-moderator-N"><span itemprop="name">elchueko</span></a></span>
            <time itemprop="dateCreated" datetime="2015-03-17T07:15:02-07:00">Mar '15</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2015-03-17T07:15:02-07:00">Mar '15</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Mar '15</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">3</span>
                </td>
                <td>
                    <label>Views</label><br>462</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/17f330e272315f09f5acbe31df734dd7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1340/elchueko" class="user-moderator-N"><span itemprop="name">elchueko</span></a></span>
                <span class="karma">8.9k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C6184" href="#C6184">
        <time class="action-date">Mar '15</time>
    </a>
</div>
<div class="post-content"><div><p>Hi everybody,</p>
<p>everything worked fine with flashSessions. But suddenly, the flashSession is lost after redirecting to another side.
The exactly same code works on my local machine as well as on the sandbox server. But on my production one, the flashSession is lost.</p>
<p>So I guess that there were some changes on apache or sth, that flashSession isn't there after redirect anymore.</p>
<p>The only thing I can remember is, that I activated the session.cookie_secure and session.cookie_httponly attribute on my server. Could there be anything else why it doens't work on the production system (regarding to apache settings or sth)?</p>
<p>Thx for your help!</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ef35769757b23a982de5d30846530d40?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/768/iamtartan" class="user-moderator-N"><span itemprop="name">Aboozar Ghaffari</span></a>        </span>
        <br>

        <span class="karma">10.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16637" href="#C16637">
                <time itemprop="dateCreated" datetime="2015-03-17T07:26:53-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I think there is no problem with your session and problem is duplicate call of <code>$this-&gt;flashSession-&gt;getMessages()</code> during your routing. (routing loop)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16637" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16637" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/17f330e272315f09f5acbe31df734dd7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1340/elchueko" class="user-moderator-N"><span itemprop="name">elchueko</span></a>        </span>
        <br>

        <span class="karma">8.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16638" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16638" href="#C16638">
                <time itemprop="dateCreated" datetime="2015-03-17T07:36:36-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Can't be. The code from local machine, sandbox and production is exactly the same. And to do a small test, I inserted the following code:</p>
<pre><code>public function testFlashAction() {
    $this-&gt;view-&gt;disable();

    $this-&gt;flash-&gt;success("this is a flash message");

    return $this-&gt;response-&gt;redirect('index/testFlashDisplay');
}

public function testFlashDisplayAction() {
    die(print_r($this-&gt;flashSession-&gt;getMessages("success")));
}</code></pre>
<p>Calling &quot;/index/testFlash&quot;. No output from function &quot;testFlashDisplayAction&quot;. On local machine and sandbox exactly this code works very well.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16638" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16638" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/17f330e272315f09f5acbe31df734dd7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1340/elchueko" class="user-moderator-N"><span itemprop="name">elchueko</span></a>        </span>
        <br>

        <span class="karma">8.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16641" href="#C16641">
                <time itemprop="dateCreated" datetime="2015-03-17T07:47:51-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Now I did another test on production server. When I call the function &quot;/index/testFlash&quot; via https (in browser), the flashSession is there in function &quot;testFlashDisplayAction&quot;.</p>
<p>Why does flashSession work via https but not via http? Same calls of functions...</p>
<p>Thx!</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16641" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16641" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/ef35769757b23a982de5d30846530d40?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/768/iamtartan" class="user-moderator-N"><span itemprop="name">Aboozar Ghaffari</span></a>        </span>
        <br>

        <span class="karma">10.5k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="16642" data-toggle="modal" data-target="#historyModal">
                edited <span>Mar '15</span>
              </span><br/><a name="C16642" href="#C16642">
                <time itemprop="dateCreated" datetime="2015-03-17T08:25:18-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Ooo... I find the problem.</p>
<p>You added message by <code>$this-&gt;flash-&gt;success</code> but you retrived the message by <code>$this-&gt;flashSession-&gt;getMessages</code>. you should use same adapter for setting and getting.</p>
<p><code>$this-&gt;flash-&gt;success</code> just displays the message and save nothing in session :) you should use <code>flashSession</code> for both</p>
<pre><code class="language-php">public function testFlashAction() {
    $this-&gt;view-&gt;disable();

    $this-&gt;flash-&gt;success("this is a flash message"); // WRONG
    $this-&gt;flashSession-&gt;success("this is a flash message"); // CORRECT

    return $this-&gt;response-&gt;redirect('index/testFlashDisplay');
}

public function testFlashDisplayAction() {
    die(print_r($this-&gt;flashSession-&gt;getMessages("success")));
}</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16642" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16642" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/17f330e272315f09f5acbe31df734dd7?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1340/elchueko" class="user-moderator-N"><span itemprop="name">elchueko</span></a>        </span>
        <br>

        <span class="karma">8.9k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16643" href="#C16643">
                <time itemprop="dateCreated" datetime="2015-03-17T09:06:07-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Copied your whole sourcecode. Doesn't work. Same behavior.</p>
<p>As I mentioned before: if I use https instead of http with the same calls, it works! Don't know why...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16643" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16643" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer acceptedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row reply-accepted">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span><div class="accepted-reply">
                <span class="glyphicon glyphicon-ok"></span>
                Accepted<br>answer
            </div></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C16677" href="#C16677">
                <time itemprop="dateCreated" datetime="2015-03-19T09:05:10-07:00" class="action-date">Mar '15</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p><em>session.cookie_secure</em> changes the behaviour to <strong>only</strong> send cookies over https.  While the session data itself isn't stored in a cookie, the session id is.  So if you visit your page with plain http, the cookie isn't sent, and the server has no knowledge of anything stored in your session (namely your flashed messages)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="16677" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="16677" data-cf-modified-84c0a9ae5c2e91db1aa003b7-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="6184" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>