---
layout: default
title: 'White list for Model updating - Discussion'
---

    <div class="container">
        {% include warning.html %}


<div itemscope itemtype="http://schema.org/Question"><ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/2/orm">ORM</a></li>
</ol>
<div class="row table-title">
    <div class="col-lg-8 col-md-7 col-sm-6 col-xs-12 wrapper-author">
        <h1 class="" itemprop="name">White list for Model updating</h1>
        <div class="visible-xs-block mobile-author">
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/user/1320/tztztztz" class="user-moderator-N"><span itemprop="name">Tomasz Zadora</span></a></span>
            <time itemprop="dateCreated" datetime="2017-02-08T09:57:43-07:00">Feb '17</time>
        </div>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-6 hidden-xs text-right wrapper-stats">
        <table class="table-stats" width="100%">
            <tr style="vertical-align: top;">
                <td>
                    <label>Created</label><br>
                    <time itemprop="dateCreated" datetime="2017-02-08T09:57:43-07:00">Feb '17</time>
                </td>
                <td>
                    <label>Last Reply</label><br>Feb '17</td>
                <td>
                    <label>Replies</label><br>
                    <span itemprop="answerCount">6</span>
                </td>
                <td>
                    <label>Views</label><br>934</td>
                <td>
                    <label>Votes</label><br>
                    <span itemprop="upvoteCount">0</span>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="discussion">
        <div class="row reply-block">
            <div class="col-md-1 col-sm-1 hidden-xs text-center">
                <img src="https://secure.gravatar.com/avatar/07dedd51671291aca4f3f84a115c534e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded avatar" /><br>
                <span itemprop="author" itemscope itemtype="http://schema.org/Person" class="avatar-name"><a href="/user/1320/tztztztz" class="user-moderator-N"><span itemprop="name">Tomasz Zadora</span></a></span>
                <span class="karma">10.4k</span>
            </div>
            <div class="col-md-11 col-sm-11 col-xs-12 post-body"><div class="posts-date hidden-xs" align="right">
        <a name="C15479" href="#C15479">
        <time class="action-date">Feb '17</time>
    </a>
</div>
<div class="post-content"><div><p>Hello,</p>
<p>please can anybody tell me how to use white list while updating or creating the Model?</p>
<p>For example, let's say we have Model for sql table news with three columns:</p>
<p>id, title, contents</p>
<pre><code class="language-php">$entity = new \News();
$entity-&gt;id = 10;
$entity-&gt;title = uniqid('New title ');

// Few examples of $whiteList tryings

//$whiteList = 'title';
//$whiteList = 'news.title';
$whiteList = get_class(entity).'.title';

$entity-&gt;update(null,$whiteList);</code></pre>
<p>No matter how i try to pass title to the white list so it should(?) ignore rest of the columns while updating, update is generating error: &quot;contents is required&quot;.</p>
<p>Of course I can dynamically create PHQL query for update, but I thought it should be possible in the ORM.</p></div>                </div>

                <div class="posts-buttons text-right"><a href="#"  class="btn btn-danger btn-xs" data-cf-modified-b8101f8398122898637b8e8e-="">
        <span class="glyphicon glyphicon-thumbs-down"></span></a>
    <a href="#"  class="btn btn-success btn-xs" data-cf-modified-b8101f8398122898637b8e8e-="">
        <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
            </div>
        </div><div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/746a625a9264a203a6ddf711e0c6b120?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/301/quasipickle" class="user-moderator-Y"><span itemprop="name">Dylan Anderson</span></a>        </span>
        <br>

        <span class="karma">125.8k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45747" href="#C45747">
                <time itemprop="dateCreated" datetime="2017-02-08T10:52:17-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>I don't think that's how the whitelist works.  The whitelist doesn't get around validation - which is causing your problem.  Basically you've set up your model or (likely) database to require that &quot;contents&quot; be provided.  A whitelist won't allow you to ignore that.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45747" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45747" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/6221c81c81cd357c818daec1bb8b17ff?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/4153/nikolay-mihaylov" class="user-moderator-N"><span itemprop="name">Nikolay Mihaylov</span></a>        </span>
        <br>

        <span class="karma">93.7k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45753" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C45753" href="#C45753">
                <time itemprop="dateCreated" datetime="2017-02-08T14:44:27-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Here is how I always used it.</p>
<pre><code class="language-php">$obj = ModelName::findFirst(25); // Just get the record with ID 25 for the test.
$result = $obj-&gt;save(
    $this-&gt;request-&gt;getPost(),
    ['title', 'slug'] // Allowed columns for the update
);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45753" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45753" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45759" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C45759" href="#C45759">
                <time itemprop="dateCreated" datetime="2017-02-09T04:04:20-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Whitelist should be an array with names of fields you want to be possible to update.</p>
<p>You have contents is require because by default phalcon don't allow not null values to be saved. You just need to:</p>
<pre><code class="language-php">Model::setup(
    [
        'notNullValidations' =&gt; false,
    ]
);</code></pre></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45759" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45759" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/07dedd51671291aca4f3f84a115c534e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1320/tztztztz" class="user-moderator-N"><span itemprop="name">Tomasz Zadora</span></a>        </span>
        <br>

        <span class="karma">10.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45801" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C45801" href="#C45801">
                <time itemprop="dateCreated" datetime="2017-02-09T10:02:45-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Thank You guys for answers but every presented solution is not what I need or looking for:</p>
<p><a href="https://forum.phalcon.io/user/0/Dylan">@Dylan</a> Anderson  - that means it's basically useless for me</p>
<p><a href="https://forum.phalcon.io/user/0/Nikolay">@Nikolay</a> Mihaylov - sorry but i do everything dynamically / on abstraction layer ( no lines of code like Robot::fetch(25) ) and it's not too good to fetch whole record first (while I don't need it) just to do update of one field</p>
<p><a href="https://forum.phalcon.io/user/0/Wojciech">@Wojciech</a> Ślawski - no this is wrong too, as I belive it works statically at initialisation stage. What if i need to swith notNullValidations to true in the same http request? Also - i need not null validation for the selected fields I want to update.</p>
<p>Now i just create dynamically PHQL to update and/or create records, it's easy and do exactly what I need.</p>
<p>Edit: well it doesn't matter, looks like I maybe need different ORM anyway, or create plain SQL queries, as low level SQL logging shows even if i use PHQL with selected columns for update, this ORM fetches whole single record before it finally updates it, and its full update on all fields not just those in the PHQL statement...</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45801" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45801" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45803" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C45803" href="#C45803">
                <time itemprop="dateCreated" datetime="2017-02-09T12:32:11-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Just add presenceof on them and disable notNullValidations. You need to set dynamic update to only update changed fields in query. No need to use raw sql. Phalcon ORM is really great and good. All orm fetches whole record before updating it obviously.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45803" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45803" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span><span itemprop="upvoteCount">1</span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/07dedd51671291aca4f3f84a115c534e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1320/tztztztz" class="user-moderator-N"><span itemprop="name">Tomasz Zadora</span></a>        </span>
        <br>

        <span class="karma">10.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45805" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C45805" href="#C45805">
                <time itemprop="dateCreated" datetime="2017-02-09T12:58:25-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Dynamic update seems to work, it updates only changed fields, it means when table has big records, thanks. </p>
<p>I work often on high volume of data and must keep logic on db side in the triggers and stored procedures. </p>
<p>In such case i  need raw SQL or elastic ORM allowing to do mass update omitting ORM logic / fetching every updated record, so sometimes raw SQL is usefull.</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45805" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45805" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45821" href="#C45821">
                <time itemprop="dateCreated" datetime="2017-02-10T06:53:44-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes this why it's ORM <strong>object</strong>-relational-mapping</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45821" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45821" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/07dedd51671291aca4f3f84a115c534e?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/1320/tztztztz" class="user-moderator-N"><span itemprop="name">Tomasz Zadora</span></a>        </span>
        <br>

        <span class="karma">10.4k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><span class="action-date action-reply-edit" data-id="45827" data-toggle="modal" data-target="#historyModal">
                edited <span>Feb '17</span>
              </span><br/><a name="C45827" href="#C45827">
                <time itemprop="dateCreated" datetime="2017-02-10T07:48:05-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Yes mapping between object and relations in database, simple as that, nothing more.</p>
<p>I don't  need or want to keep data logic on php side, and replace db triggers by php methods, I want to keep it on DB side at data layer and use ORM for simple CRUD operations, nothig more.</p>
<p>After you will deal with billions of records and tens of gigabytes of data you will know what im taking about :)</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45827" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45827" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div itemprop="suggestedAnswer" itemscope itemtype="http://schema.org/Answer" class="reply-block row">
    <div class="col-md-1 small" align="center">
        <img src="https://secure.gravatar.com/avatar/8da15621865643112c6e3243f2ce4ebe?s=48&amp;r=pg&amp;d=identicon" class="img-rounded" />        <br>

        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a href="/user/3812/Jurigag" class="user-moderator-Y"><span itemprop="name">Wojciech Ślawski</span></a>        </span>
        <br>

        <span class="karma">145.0k</span></div>
    <div class="col-md-11"><div class="posts-buttons" align="right"><a name="C45837" href="#C45837">
                <time itemprop="dateCreated" datetime="2017-02-10T11:32:29-07:00" class="action-date">Feb '17</time>
            </a>
        </div>
        <div class="post-content"><div itemprop="text"><p>Then don't use ORM if you want it cuz simply you don't know what orm is :P</p></div></div>
        <div class="posts-buttons" align="right"><a href="#"  class="btn btn-danger btn-xs vote-login" data-id="45837" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-down"></span></a>
                <a href="#"  class="btn btn-success btn-xs vote-login" data-id="45837" data-cf-modified-b8101f8398122898637b8e8e-="">
                    <span class="glyphicon glyphicon-thumbs-up"></span></a></div>
    </div>
</div>
<div class="row"><div class="col-md-1 small" align="center"></div>
        <div class="col-md-11 login-comment">
            
        </div></div>
</div><input type="hidden" id="post-id" name="post-id" value="15479" /><div id="suggested-posts"></div>
    <div id="sticky-progress" style='display:none'></div>
</div>
    </div>